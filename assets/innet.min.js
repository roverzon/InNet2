;(function(){
	'use strict';
	angular.module('app',[
		'app.router',
		'app.directive',
		'app.topnav',
		'app.case',
		'app.car',
		'app.branch',
		'app.map',
		'app.member',
		'app.strikeTeam',
		'app.socket',
		'app.user',
		'app.timer',
		'app.notification'
	])
})();


(function(){
	'use strict';
	/**
	* app.branch Module
	*
	* Description
	*/
	angular
		.module('app.branch',[])
})();
(function(){
	'use strict';
	/**
	* app.car Module
	*
	* Description
	*/
	angular.module('app.car', [])
})();
(function(){
	'use strict';
	/**
	* app.case Module
	*
	* Description
	*/
	angular.module('app.case', [
		'ui.router',
		'ui.bootstrap'
	])
})();
(function(){
	/**
	* app.dashboard Module
	*
	* Description
	*/
	angular
		.module('app.dashboard',[]);
})();
(function(){
	'use strict';
	/**
	* app.director Module
	*
	* Description
	*/
	angular.module('app.director', [])

})();
(function(){
	'use strict';
	/**
	* app.dispatch Module
	*
	* Description
	*/
	angular.module('app.dispatch', [])
})();
(function(){
	'use strict';
	/**
	* app.dutylist Module
	*
	* Description
	*/
	angular.module('app.dutylist', [])
})();
(function(){
	'use strict';
	/**
	* app.geo Module
	*
	* Description
	*/
	angular.module('app.geo', []);
})();
(function(){
	/**
	* app.map Module
	*
	* Description
	*/
	angular.module('app.map', [])
})();
(function(){
	/**
	* app.member Module
	*
	* Description
	*/
	angular.module('app.member', [])
})();
(function(){
	'use strict';
	/**
	* app.notification Module
	*
	* Description
	*/
	angular.module('app.notification', []);
})();
(function(){
	'use strict';
	/**
	* app.safety Module
	*
	* Description
	*/
	angular.module('app.safety',[])
})();
(function(){
	'use strict';
	/**
	* app.socket Module
	*
	* Description
	*/
	angular.module('app.socket', []);
})();
(function(){
	'use strict';
	/**
	* app.strikeTeam Module
	*
	* Description
	*/
	angular.module('app.strikeTeam',[]);
})();
(function(){
	'use strict';
	/**
	* app.summary Module
	*
	* Description
	*/
	angular.module('app.summary',[]);
})();
(function(){
	'use strict';
	/**
	* app.timer Module
	*
	* Description
	*/
	angular.module('app.timer', [])
})();
(function(){
	'use strict';
	/**
	* app.user Module
	*
	* Description
	*/
	angular.module('app.user', []);
});
(function(){
    angular
        .module('app.directive')
        .directive('minimalizaSidebar',minimalizaSidebar)
        .directive('sideNavigation',sideNavigation)
        .directive('iboxTools',iboxTools)
        .directive('back',back);

    minimalizaSidebar.$inject   = ['$timeout'];
    sideNavigation.$inject      = ['$timeout'];
    iboxTools.$inject           = ['$timeout'];
    back.$inject                = ['$window'];

    function minimalizaSidebar($timeout){
         return {
            restrict: 'A',
            template: '<a class="navbar-minimalize minimalize-styl-2 btn btn-primary" href="" ng-click="minimalize()"><i class="fa fa-bars"></i></a>',
            controller: ["$scope", "$element", function ($scope, $element) {
                $scope.minimalize = function () {
                    $("body").toggleClass("mini-navbar");
                    if (!$('body').hasClass('mini-navbar') || $('body').hasClass('body-small')) {
                        // Hide menu in order to smoothly turn on when maximize menu
                        $('#side-menu').hide();
                        // For smoothly turn on menu
                        setTimeout(
                            function () {
                                $('#side-menu').fadeIn(500);
                            }, 100);
                    } else if ($('body').hasClass('fixed-sidebar')){
                        $('#side-menu').hide();
                        setTimeout(
                            function () {
                                $('#side-menu').fadeIn(500);
                            }, 300);
                    } else {
                        // Remove all inline style from jquery fadeIn function to reset menu state
                        $('#side-menu').removeAttr('style');
                    }
                }
            }]
        };
    };

    function sideNavigation($timeout){
         return {
            restrict: 'A',
            link: function(scope, element) {
                // Call the metsiMenu plugin and plug it to sidebar navigation
                $timeout(function(){
                    element.metisMenu();
                });
            }
        }
    };

    function iboxTools($timeout){
        return {
            restrict: 'A',
            scope: true,
            templateUrl: 'views/common/ibox_tools.html',
            controller: ["$scope", "$element", function ($scope, $element) {
                // Function for collapse ibox
                $scope.showhide = function () {
                    var ibox = $element.closest('div.ibox');
                    var icon = $element.find('i:first');
                    var content = ibox.find('div.ibox-content');
                    content.slideToggle(200);
                    // Toggle icon from up to down
                    icon.toggleClass('fa-chevron-up').toggleClass('fa-chevron-down');
                    ibox.toggleClass('').toggleClass('border-bottom');
                    $timeout(function () {
                        ibox.resize();
                        ibox.find('[id^=map-]').resize();
                    }, 50);
                },
                    // Function for close ibox
                    $scope.closebox = function () {
                        var ibox = $element.closest('div.ibox');
                        ibox.remove();
                    }
            }]
        };
    };

    function back($window){
        return {
            restrict: 'A',
            link: function (scope, iElement, iAttrs) {
                iElement.bind('click',function(){
                    $window.history.back();
                })
            }
        };
    };

})();
(function(){

	/**
	* app.branch Module
	*
	* Description
	*/
	angular
		.module('app.branch')
		.controller('BranchSvc',BranchSvc);

	BranchSvc.$inject = ['$http'];
	function BranchSvc($http){
		var svc = this;
		svc.fetchByCorps 	= fetchByCorps;
		svc.fetchByName 	= fetchByName;
		svc.totalListFindByName = totalListFindByName;
		svc.getDetails 		= getDetails;
		svc.fetchOnDutyBranches = fetchOnDutyBranches;
		svc.update 			= update;
		svc.updateMission 	= updateMission;
		
		function fetchByCorps(corps){
			return $http.get('/api/branches?corps=' + corps);
		};
		
		function fetchByName(branch){
			return $http.get('/api/branches?branch=' + branch);
		};

		function totalListFindByName(branch){
			return $http.get('/api/branches/' + branch)
		}

		function getDetails(id){
			return $http.get('/api/branches/' + id);
		};

		function fetchOnDutyBranches(branches){
			return $http.post('/api/branches/onduty',branches);
		};
	
		function update(data){
			return $http.put('/api/branches/' + data.branch , data);
		};

		function updateMission(data){
			return $http.put('/api/branches?branch=' + data.branch, data);
		};
	};

})();
(function(){
	'use strict';
	/**
	* app.car Module
	*
	* Description
	*/
	angular
		.module('app.car')
		.controller('CarEditController',CarEditController);

	CarEditController.$inject = [];
	function CarEditController(){

	};

})();
(function(){
	'use strict';
	/**
	* app.car Module
	*
	* Description
	*/
	angular
		.module('app.car')
		.controller('CarIndexController',CarIndexController);

	CarIndexController.$inject = [];
	function CarIndexController(){

	};

})();
(function(){
	'use strict';

	/**
	* app.car Module
	*
	* Description
	*/
	angular
		.module('app.car')
		.serice('CarSvc',CarSvc);

	CarSvc.$inject = ['$http'];
	
	function CarSvc($http){
		var vm = this; 
		vm.fetchByCorps  = fetchByCorps;
		vm.fetchByBranch = fetchByBranch;
		vm.update 		 = update; 

		function fetchByCorps(corps){
			return $http.get('/api/cars?corps=' + corps);
		};

		function fetchByBranch( branch ){
			return $http.get('/api/cars?branch=' + branch );
		};
		
		function update(data){
			return $http.put('/api/cars/' + data.id , data);
		};
	};
})();
(function(){
	'use strict';
	/**
	* app.case Module
	*
	* Description
	*/
	angular
		.module('app.case')
		.controller('CaseConfirmController',CaseConfirmController);

	CaseConfirmController.$inject = ['UserSvc', 'CaseSvc', '$stateParams','$state','$modalInstance'];
	function CaseConfirmController(UserSvc, CaseSvc, $stateParams,$state,$modalInstance){
		var vm = this;
		
		vm.user = {};
		vm.send = send; 
		vm.caseInfo = {
			id : $stateParams.id,
			endAt : moment().format('YYYY-MMM-DD, h:mm:ss a')
		}; 

		function send(){
			UserSvc.login(vm.user).success(function(data){
				CaseSvc.closeCase(vm.caseInfo).success(function(){
					$modalInstance.dismiss('cancel');
					$state.go('dutyDesk.case.index');
				})
			});
		};
	};
})();
(function(){
	'use strict';
	/**
	* app.case Module
	*
	* Description
	*/
	angular
		.module('app.case')
		.controller('CaseEditController',CaseEditController);

	CaseEditController.$inject = ['$stateParams', 'CaseSvc', 'CarSvc', 'UserSvc', 'BranchSvc', '$window', '$modal','NtfSvc'];

	function CaseEditController($stateParams, CaseSvc, CarSvc, UserSvc, BranchSvc, $window, $modal,NtfSvc){
		var vm = this; 
		var dispatchCars  = [];
		vm.terminateCase  = terminateCase;
		vm.dispatch 	  = dispatch;
		vm.selectBranch   = selectBranch;
		vm.cancelDispatch = cancelDispatch;
		vm.save 		  = save; 

		angular.extend(vm, {
	        nowPos: {
	            lat: 24.988,
	            lng: 121.5752,
	            zoom: 17
	        },
	        controls: {
	            draw: {}
	        }
	    });

		var caseId = $stateParams.id;

		BranchSvc.fetchByCorps(UserSvc.userCorps()).success(function(branches){
		    vm.branches = branches;
		    vm.currentBranch = branches[0].name
		});

		function selectBranch(branch){
	    	vm.currentBranch = branch.name;
	    };

		BranchSvc.fetchByCorps(UserSvc.userCorps()).success(function(branches){
		    vm.branches = branches;
		    vm.currentBranch = branches[0].name
		})

		CaseSvc.fetchById(caseId).success(function(_case){
			vm.currentCase = _case;
			vm.dispatchList = _.pluck(_case.cars, 'radioCode').join(' ')
			vm.currentCase.carIds = _.pluck(_case.cars,'_id');
		}).then(function(){
			CarSvc.fetchByCorps(UserSvc.userCorps()).success(function(cars){
				vm.cars = cars
				for (var i = 0; i < vm.cars.length; i++) {
					if ( vm.currentCase.carIds.indexOf(vm.cars[i]._id) > -1 ) {
						vm.cars[i].isChecked = true;
						dispatchCars.push(vm.cars[i]);
					};
				};
			});

			NtfSvc.fetch().success(function(ntfs){
				vm.ntfs = ntfs;
				vm.currentCase.ntfs = _.pluck(ntfs,'type')
				vm.currentCase.ntf  = vm.currentCase.ntfs[0];
			});
		});

		function getBranchId(branchesList){
			var branches = _.unique(branchesList);
			var branchIds = [];
			for (var i = 0; i < vm.branches.length; i++) {
				if (branches.indexOf(vm.branches[i].name) > -1) {
					branchIds.push(vm.branches[i]._id);
				};
			};
			return  branchIds;
		};

		function dispatch( car ){
			car.isChecked = true; 
			dispatchCars.push(car);
			vm.dispatchList = _.pluck(dispatchCars, 'radioCode').join(" ")
		};

		function cancelDispatch(car){
			car.isChecked = false;
			dispatchCars.splice(_.pluck(dispatchCars, '_id').indexOf(car._id),1)
			vm.dispatchList = _.pluck(dispatchCars, 'radioCode').join(" ")
		};

		function save(){
			var currentNtf;

			vm.ntfs.forEach(function(ntf,id){
				if (ntf.type == vm.currentCase.ntf ) {
					currentNtf  = vm.ntfs[id];
				};
			});
			CaseSvc.update({
				caseId    : vm.currentCase._id,
				address   : vm.currentCase.address || "測試",
				officerReceiver : UserSvc.currentUser() ||  "劉曉曼",
				type      : vm.currentCase.type || "火警",
				types 	  : vm.currentCase.types,
				phone     : vm.currentCase.phone || "測試",
				branches  : _.unique(_.pluck(dispatchCars, 'branch')),
				branchIds : getBranchId(vm.currentCase.branches),
		  		cars      : _.pluck(dispatchCars,'_id'),
				isOngoing : true,
				corps 	  : UserSvc.userCorps(),
				env 	  : vm.currentCase.env,
				envs 	  : vm.currentCase.envs,
				floor 	  : vm.currentCase.floor,
				ntf       : currentNtf._id,
				lastUpdate : moment().format('YYYY-MMM-DD h:mm:ss a')
			}).success(function(){
				$window.history.back();
			})
		};

		function terminateCase (){
			var modalInstance = $modal.open({
			  	templateUrl: 'views/case/case.confirm.modal.html',
			    controller: 'CaseConfirmCtrl',
			    size: "md"	    
			});
		};
	}
})();
(function(){
	'use strict';

	angular
		.module('app.case')
		.controller('CaseController',CaseController);
	
	CaseController.$inject = ['$stateParams','$modal','CaseSvc', '$log', 'SocketSvc', 'UserSvc', '$location'];
	function CaseController($stateParams,$modal,CaseSvc, $log, SocketSvc, UserSvc, $location){
		var vm = this; 
		vm.maxSize 		= 5; 
		vm.itemsPerPage = 3;
		vm.currentPage  = 1;
		vm.pageChanged  = pageChanged;
		vm.queryCases   = queryCases;
		vm.choose 		= choose;
		
		vm.queryCases();

		function pageChanged(){
			CaseSvc.fetch(UserSvc.userCorps(), vm.currentPage , vm.itemsPerPage ).success(function(data){
				vm.cases = data.cases;
			});
		};

		function queryCases(){
			CaseSvc.fetch(UserSvc.userCorps(), vm.currentPage, vm.itemsPerPage).success(function(data){
				vm.cases = data.cases;
				vm.totalItems = data.totalCases;
			});
		};

		function choose(id){
			CaseSvc.fetchById(vm.cases[id]._id).success(function(_case){
					vm.caseDetails = _case;
			});
		};

		SocketSvc.on('newCase',function(_case){
			vm.cases.unshift(_case);
		});

		SocketSvc.on('caseModified',function(_case){
			vm.cases[_case.caseId-1] = _case;
		});
	};

})();
(function(){
	'use strict';
	/**
	* app.case Module
	*
	* Description
	*/
	angular
		.module('app.case')
		.controller('CaseModalController',CaseModalController);

	CaseModalController.$inject = ['CarSvc', '$modalInstance', 'CaseSvc','$state', 'caseId','caseDetails', 'StSvc', '$window', 'BranchSvc', 'UserSvc', 'NtfSvc'];

	function CaseModalController(CarSvc, $modalInstance, CaseSvc,$state, caseId,caseDetails, StSvc, $window, BranchSvc, UserSvc, NtfSvc){
		var vm = this; 
		vm.nftOption = {};
		vm.dispatchList = vm.caseObj.dispatchList.join(" ");
		vm.caseObj = {
			address : caseDetails.address || null,
			phone : caseDetails.phone || null,
		    type : caseDetails.type ||  "火警", 
		    types : [ "火警", "救護", "災害", "檢舉","其他"],
		    env   : "住宅火警",
		    envs  : ["住宅火警","高樓、地下與工廠","搶救困難區","其他"],
		    floor : 1, 
		    carIds : getCarsDetail(caseDetails).carIds  || [],
		    dispatchList : getCarsDetail(caseDetails).dispatchList ||  [],
		    branches : getCarsDetail(caseDetails).branches ||  []
		};
		vm.update 	 = update;
		vm.getCars 	 = getCars;
		vm.cancel 	 = cancel;
		vm.cancelDispatch = cancelDispatch;
		vm.dispatch  = dispatch;
		vm.closeCase = closeCase;
		vm.save 	 = save;

		if (_.isEmpty(caseDetails)) {
			vm.isNew = true;
			carObjs = [];
		}else{
			vm.isNew = false;
			var carObjs = caseDetails.cars;
		};

		NtfSvc.fetch().success(function(nfts){
			vm.nftOption.nfts = nfts;
		}).then(function(){
			vm.nftOption.nft = vm.nftOption.nfts[0];
		})

		BranchSvc.fetchByCorps(UserSvc.userCorps()).success(function(branches){
		    vm.branches = branches;
		});

		function getCarsDetail(obj){
			var dispatchList = [];
			var carIds = [];
			var branches = [];

			if (obj.cars) {
				for (var i = obj.cars.length - 1; i >= 0; i--) {
					dispatchList.push(obj.cars[i].radioCode);
					carIds.push(obj.cars[i]._id);
					branches.push(obj.cars[i].branch); 
				};
				return {dispatchList : dispatchList , carIds : carIds , branches :  branches}

			}else{
				return {};
			};
		};

		function getBranchId(branchesList){
			var branches = _.unique(branchesList);
			var branchIds = [];
			for (var i = 0; i < vm.branches.length; i++) {
				if (branches.indexOf(vm.branches[i].name) > -1) {
					branchIds.push(vm.branches[i]._id);
				};
			};
			return  branchIds;
		};
		
		function getCars( branch ){
			 CarSvc.fetchByBranch(branch.name).success(function(cars){
			 	for (var i = cars.length - 1; i >= 0; i--) {
			 		if (vm.caseObj.carIds.indexOf(cars[i]._id) > -1 ) {
			 			cars[i].isChecked = true; 
			 		};
			 	};
			 	vm.cars = cars;
			 });
		};

		function cancel() {
			$modalInstance.dismiss('cancel');
		};

		function cancelDispatch(car){
			car.isChecked = false;
			carObjs.splice(carObjs.indexOf(car),1)
			vm.caseObj.carIds.splice(vm.caseObj.dispatchList.indexOf(car._id),1);
			vm.caseObj.dispatchList.splice(vm.caseObj.dispatchList.indexOf(car.radioCode),1);
			vm.caseObj.branches.splice(vm.caseObj.dispatchList.indexOf(car.branch),1);
			vm.dispatchList = vm.caseObj.dispatchList.join(" ");
		};
		
		function dispatch( car ){
			car.isChecked = true; 
			carObjs.push(car);
			vm.caseObj.carIds.push(car._id);
			vm.caseObj.dispatchList.push(car.radioCode);
			vm.caseObj.branches.push(car.branch);
			vm.dispatchList = vm.caseObj.dispatchList.join(" ");
		};

		function closeCase(){
			StSvc.count(caseDetails._id).success(function(total){
				if (total > 0 ) {
					$window.alert("尚有隊員在安全管制")
				}else{
					CaseSvc.closeCase({
						id : caseDetails._id,
						isOngoing : false
					}).success(function(msg){
						console.log(msg)
					});
					$modalInstance.dismiss('cancel');
					$state.reload()
				};
			});
		};

		function save(){
			CaseSvc.create({
				caseId   : caseId + 1, 
				address   : vm.caseObj.address || "測試",
				officerReceiver : UserSvc.currentUser() ||  "劉曉曼",
				type      : vm.caseObj.type || "救護",
				phone     : vm.caseObj.phone || "測試",
				branches  : _.unique(vm.caseObj.branches),
				branchIds : getBranchId(vm.caseObj.branches),
		  		cars      : vm.caseObj.carIds,
				isOngoing : true,
				corps 	  : UserSvc.userCorps(),
				env 	  : vm.caseObj.env,
				floor 	  : vm.caseObj.floor
			}).success(function(newCase){
				$modalInstance.close(newCase)
			});
		};

		function update(){
			var content = {
				id : caseDetails._id,
				caseId   : caseId, 
				address   : vm.caseObj.address,
				officerReceiver : UserSvc.currentUser() || "劉曉曼",
				type      : vm.caseObj.type,
				phone     : vm.caseObj.phone,
				branches  : _.unique(vm.caseObj.branches),
				branchIds : getBranchId(vm.caseObj.branches),
		  		cars      : vm.caseObj.carIds,
				isOngoing : true,
				env 	  : vm.caseObj.env,
				floor 	  : vm.caseObj.floor
			};
			
			CaseSvc.update(content);
			$modalInstance.dismiss('cancel');
		};
	}
})();
(function(){
	'use strict';
	/**
	* app.case Module
	*
	* Description
	*/
	angular
		.module('app.case')
		.controller('CaseNewController',CaseNewController);

	CaseNewController.$inject = ['CarSvc', 'BranchSvc', 'NtfSvc', 'UserSvc','$location','leafletData', '$stateParams', 'CaseSvc', '$window', '$state', 'GeoSvc'];

	function CaseNewController(CarSvc, BranchSvc, NtfSvc, UserSvc,$location,leafletData, $stateParams, CaseSvc, $window, $state, GeoSvc){
		var vm = this;
		vm.selectBranch = selectBranch;
		vm.save = save;
		vm.locateAddress = locateAddress;
		vm.cancelDispatch = cancelDispatch;
		vm.dispatch = dispatch;
		vm.currentTime =  moment().format('h:mm:ss a'); 
		var battleRadiuss = [];
		var dispatchCars = [];
		var notifications;
		vm.dispatchList = vm.currentCase.dispatchList.join(' ');
		
		vm.currentCase = {
			phone 	: null,
		    type 	: '火警', 
		    types 	: [ '火警', '救護', '災害', '檢舉','其他'],
		    env   	: '住宅火警',
		    envs  	: ['住宅火警','高樓、地下與工廠','搶救困難區','其他'],
		    floor 	: 1, 
		    carIds  : [],
		    dispatchList : [],
		    branches :  [],
		    location : GeoSvc.defaultLocation()
		}; 

		GeoSvc.fetchBaseLocation(UserSvc.userCorps()).success(function(locations){
			vm.locations = locations;
		});

	    angular.extend(vm, {
	        nowPos: {
	            lat: GeoSvc.defaultLocation().lat,
	            lng: GeoSvc.defaultLocation().lng,
	            zoom: 17
	        },
	       markers: {},
	    });

		BranchSvc.fetchByCorps(UserSvc.userCorps()).success(function(branches){
		    vm.branches = branches;
		    vm.currentBranch = branches[0].name
		});

		CarSvc.fetchByCorps(UserSvc.userCorps()).success(function(cars){
			vm.cars = cars; 
		});

		NtfSvc.fetch().success(function(ntfs){
			notifications = ntfs;
			vm.currentCase.ntfs = _.pluck(ntfs,'type')
			vm.currentCase.ntf  = vm.currentCase.ntfs[0];
		});

		function locateAddress(){
			if (vm.currentCase.address) {
				GeoSvc.getGeoEncodedInfo(vm.currentCase.address).then(function(res){
			        vm.nowPos.lat = res.J;
			        vm.nowPos.lng = res.M;
		            vm.markers.mainMarker = {
		            	lat: res.J,
		                lng: res.M,
		                focus: true,
		                message: "案件標的",
		            };

		            if (res) {
		            	vm.locations.forEach(function(location){
			            	var r = GeoSvc.getDistance( location, { lat : res.J , lng : res.M } );
			            	var battleRadius =  { base : location.branch,  to : { lat : res.J, lng :  res.M }, from : { lat : location.lat, lng : location.lng }, d : r }; 
			            	battleRadiuss.push( JSON.stringify(battleRadius));
			            });
		            };
				});
			};
		};

		function selectBranch(branch){
	    	vm.currentBranch = branch.name;
	    };

		function dispatch( car ){
			car.isChecked = true; 
			dispatchCars.push(car);
			vm.dispatchList = _.pluck(dispatchCars, 'radioCode').join(" ");
		};

		function cancelDispatch(car){
			car.isChecked = false;
			dispatchCars.splice(_.pluck(dispatchCars, '_id').indexOf(car._id),1);
			vm.dispatchList = _.pluck(dispatchCars, 'radioCode').join(" ");
			vm.dispatchList = vm.currentCase.dispatchList.join(" ");
		};
	
		function save(){
			var currentNtf;
			var branches  = _.unique(_.pluck(dispatchCars, 'branch'));
			var dispatch = vm.branches.filter(function(branch) { return branches.indexOf(branch.name) > -1 });

			notifications.forEach(function(ntf,id){
				if (ntf.type == vm.currentCase.ntf ){
					currentNtf  = notifications[id]
				};
			});

			CaseSvc.create({
				officerReceiver : UserSvc.currentUser() ||  '劉曉曼',
				type      		: vm.currentCase.type || '火警',
				types 	  		: vm.currentCase.types,
				phone     		: vm.currentCase.phone || '測試',
				branches  		: _.unique(_.pluck(dispatchCars, 'branch')),
				branchIds 		: _.pluck(dispatch, '_id'),
		  		cars      		: _.pluck(dispatchCars,'_id'),
				corps 	  		: UserSvc.userCorps(),
				env 	  		: vm.currentCase.env,
				envs 	  		: vm.currentCase.envs,
				floor 	  		: vm.currentCase.floor,
				ntf       		: currentNtf._id,
				createAt  		: moment().format('YYYY-MMM-DD, h:mm:ss a'),
				lastUpdate 		: moment().format('YYYY-MMM-DD, h:mm:ss a'),
				location  		:  {
					lat 	: vm.currentCase.location.lat,
					lng 	: vm.currentCase.location.lng,
					address : vm.currentCase.location.address || '測試'
				},
				battleRadiuss 	: battleRadiuss
			}).success(function(){
				$window.history.back();
			});
		};
	}
})();
(function(){
	'use strict';
	/**
	* app.case Module
	*
	* Description
	*/
	angular
		.module('app.case')
		.service('CaseSvc', CaseSvc);

	CaseSvc.$inject = ['$http'];

	function CaseSvc( $http ) {
		var svc = this;
		svc.fetch 		= fetch;
		svc.fetchAll 	= fetchAll;
		svc.closeCase 	= closeCase;
		svc.fetchRelativeCase = fetchRelativeCase; 
		svc.fetchDetails = fetchDetails;
		svc.fetchById 	= fetchById;
		svc.create 		= create;
		svc.delete 		= deleteCase;
		svc.update 		= update;
		
		function fetch(corps, page, itemsPerPage){
			return $http.get('/api/cases?corps=' + corps + '&page=' + page + '&ipp=' + itemsPerPage );
		};

		function fetchAll(){
			return $http.get('/api/cases/details');
		};
		
		function fetchRelativeCase(con){
			return $http.get('/api/cases/branch?branch=' + con.branch + '&accessLevel=' + con.accessLevel + '&corps=' + con.corps );
		};
		
		function fetchDetails(caseId){
			return $http.get('/api/cases/details/' + caseId);
		};

		function fetchById( caseId ){
			return $http.get('/api/cases/' + caseId );
		};
		
		function create(case_info){
			return $http.post('/api/cases', case_info);
		};

		function deleteCase(caseId){
			return $http.post('/api/cases/' + caseId);
		};

		function update(updated_case){
			return $http.put('/api/cases/' + updated_case.caseId , updated_case);
		};
		
		function closeCase(data){
			return $http.put('/api/cases/close?id=' + data.id, data );
		};
	}
})();
(function(){
	'use strict';
	/**
	* app.case Module
	*
	* Description
	*/
	angular
		.module('app.case')
		.controller('CaseShowController', CaseShowController);

		CaseShowController.$inject =  [ 'StSvc', '$stateParams', '$interval', '$state', 'SocketSvc', 'CaseSvc', 'BranchSvc', 'StMissionFac'];

		function CaseShowController(){
			var vm = this; 
			vm.isCollapsed = true ;
			vm.members = [];
			vm.positions = StMissionFac.position().poss;

			SocketSvc.on('newSt', function(st){
				if ( angular.equals(caseId,st.caseId)) {
					var newSt = angular.copy(st);
					vm.strikeTeams.push(newSt);
				};
				vm.deploys = initTable(vm.strikeTeams);
				vm.deployDetails = initDeploy(vm.strikeTeams);
			});

			SocketSvc.on('updateSt', function(data){
				StSvc.fetchByCase(caseId).success(function(strikeTeams){
					vm.strikeTeams = strikeTeams;
					vm.strikeTeams.forEach(function(st){
						st.limitTime = moment.duration(st.workingTime,'seconds');
					});
					vm.deploys = initTable(vm.strikeTeams);
					vm.deployDetails = initDeploy(vm.strikeTeams);
				});

			})

			SocketSvc.on('dismiss', function(data){
				StSvc.fetchByCase(caseId).success(function(strikeTeams){
					vm.strikeTeams 	 = strikeTeams;
					vm.deploys 		 = initTable(vm.strikeTeams);
					vm.deployDetails = initDeploy(vm.strikeTeams);
				});
			});


			var caseId = $stateParams.id;
			CaseSvc.fetchDetails(caseId).success(function(_case){
				_case.env == '住宅火警' ? vm.apartment = true : vm.apartment = false;
				vm.caseDetail = _case;
				vm.position = {
					defaultPos 	: "第一面",
					positions 	: ["第一面","第二面","第三面","第四面"],
					floor 		: vm.caseDetail.floor,
					floors  	: vm.caseDetail.floor < 5? _.range(1,6,1) : _.range(vm.caseDetail.floor-2,vm.caseDetail.floor+3,1)
				};
			});

			StSvc.fetchByCase(caseId).success(function(strikeTeams){
				if (strikeTeams) {
					vm.strikeTeams = strikeTeams;
					vm.strikeTeams.forEach(function(st){
						st.limitTime = moment.duration(st.workingTime,'seconds');
					});
					vm.deploys = initTable(vm.strikeTeams);
					vm.deployDetails =initDeploy(vm.strikeTeams);
					
				} else {
					return 
				};
			});


			var initDeploy = function(strikeTeams){
				return  _.groupBy(strikeTeams,function(st){
						return st.position;
				});
			};

			var initTable =  function(strikeTeams){
			  	var deployArray = _.range(4).map(function () {
			        return _.range(5).map(function () {
			            return { totalMember : 0, stTotal : 0 , sts : [] } ;
			        });
			    });

				if ( strikeTeams ){
					for (var i = strikeTeams.length - 1; i >= 0; i--) {
						var totalMember = 0;
						var y = null;
						var st = 0;
						var x = _.indexOf(strikeTeams[i].positions, strikeTeams[i].position);
						vm.apartment ? y = _.indexOf(strikeTeams[i].floors, strikeTeams[i].floor) : y = _.indexOf(strikeTeams[i].areas, strikeTeams[i].area)
						deployArray[x][y].stTotal += 1;
						deployArray[x][y].totalMember += strikeTeams[i].members.length;
						var stInFo = {};
						stInFo.id = strikeTeams[i].branch + strikeTeams[i].id
						stInFo.number = strikeTeams[i].members.length;
						stInFo.group = strikeTeams[i].group;
						deployArray[x][y].sts.push(stInFo);
					};
				}
				return deployArray
			};
			
			vm.$on('$destroy', function (event) {
		        SocketSvc.removeAllListeners();
		    });
		}
})();
;(function(){
	'use strict';
	/**
	* app Module
	*
	* Description
	*/
	angular
		.module('app')
		.controller('LoginController',LoginController);

		LoginController.$inject = ['UserSvc', 'store', '$state','jwtHelper','$http', 'SocketSvc'];

		function LoginController(UserSvc, store, $state,jwtHelper,$http, SocketSvc ){
			var vm 	 = this; 
			vm.login = login;
			vm.user  = {};

			function login(){
				UserSvc.login(vm.user).success(function(data){
					if (data.success) {
						store.set('jwt',data.token);
						$http.defaults.headers.common['x-access-token'] = data.token;
						return data.token; 
					} else { 
						return console.log("password is not existed");
					}
				}).then(function(token){
					SocketSvc.init(token);
					SocketSvc.emit('login');
				}).then(function(){
					if (jwtHelper.decodeToken(token).role == "admin") {
						var userBranch = jwtHelper.decodeToken(token).branch;
						if (userBranch.slice(userBranch.length-2 ,userBranch.length) == "大隊") {
							return $state.go('dutyDesk.corps')
						} else{
							return $state.go('dutyDesk.branch')
						};
					}else{
						return $state.go('director.safety.index')
					}
				})
			};
		};
})();
;(function(){
	'use strict';
	angular
		.module('app.router',['ui.router'])
		.config(routerConfig)

		routerConfig.$inject = ['$stateProvider','$urlRouterProvider','$locationProvider'];
		
		function routerConfig($stateProvider,$urlRouterProvider, $locationProvider) {
		    $urlRouterProvider
    			.otherwise('/login');

		    $stateProvider
		        .state('anon',{
		            url : "",
		            abstract : true,
		            template : "<ui-view>",
		        })
		        .state('anon.login',{
		            url : "/login",
		            templateUrl :"login.html",
		            controller : "LoginController",
		            controllerAs : "LoginCtrl"
		        })
		        .state('anon.404',{
		            url : "/404",
		            templateUrl : "404.html"
		        })

    			// duty desk 
			$stateProvider
				.state('dutyDesk', {
		            abstract: true,
		            url: "/dutyDesk",
		            templateUrl: "views/common/content.html",
		            data : {
		                requiredLogin : true,
		                role : ["admin"]
		            }
		        })
		        .state('dutyDesk.corps', {
		            url: "/corps",
		            templateUrl: "views/dashboard/corps.dashboard.html",
		            controller : "DashboardController",
		            controllerAs : "DashboardCtrl",
		            data : {
		                requiredLogin : true,
		                role : ["admin"]
		            }
		        })
		        .state('dutyDesk.branch',{
		            url : "/branch",
		            templateUrl : "views/dashboard/branch.dashboard.html",
		            controller : "DashboardController",
		            controllerAs : "DashboardCtrl",
		            date : {
		                requiredLogin : true,
		                role : ["admin"]
		            }
		        })
		        .state('dutyDesk.case',{
		            abstract : true,
		            template : "<ui-view>"
		        })
		        .state('dutyDesk.case.index', {
		            url: "/case",
		            templateUrl: "case/case.index.html",
		            controller : "CaseController",
		            controllerAs : "CaseCtrl"
		        })
		        .state('dutyDesk.case.new',{
		            url : "/case/new",
		            templateUrl : "case/case.new.html",
		            controller : "CaseNewController",
		            controllerAs : "CaseNewCtrl"
		        })
		        .state('dutyDesk.case.show',{
		            url : "/case/:id/show",
		            templateUrl : "case/case.show.html",
		            controller : "CaseShowController",
		            controllerAs : "CaseShowCtrl"
		        })
		        .state('dutyDesk.case.edit',{
		            url : "/case/:id/edit",
		            templateUrl : "case/case.edit.html",
		            controller : "CaseEditController",
		            controllerAs : "CaseEditCtrl"
		        })
		        .state('dutyDesk.safety',{
		            url : "/case/:id",
		            templateUrl : "summary/summary.index.html",
		            controller : "SummaryController",
		            controllerAs : "SummaryCtrl"
		        })
		        .state('dutyDesk.dutylist',{
		            abstract : true,
		            template : "<ui-view>"
		        })
		        .state('dutyDesk.dutylist.index', {
		            url: "/dutylist/:branch",
		            templateUrl: "views/dutylist/dutylist.index.html",
		            controller : "DutyListController",
		            controllerAs : "DutyListCtrl"
		        })
		        .state('dutyDesk.dutylist.show',{
		        	url : "/dutylist/:branch/index",
		        	template : "<h2> show </h2>"
		        })
		        .state('dutyDesk.dutylist.edit', {
		            url: "/dutylist/:branch/edit",
		            templateUrl  : "views/dutylist/dutylist.edit.html",
		            controller   : "DutyListEditController",
		            controllerAs : "DutyListEditCtrl"
		        })
		        .state('dutyDesk.member',{
		            abstract : true,
		            template : "<ui-view>"
		        })
		        .state('dutyDesk.member.show', {
		            url: "/member/:branch",
		            templateUrl  : "views/member/member.index.html",
		            controller   : "MemberController",
		            controllerAs : "MemberCtrl"
		        })
		        .state('dutyDesk.member.edit', {
		            url: "/member/:branch/edit",
		            templateUrl  : "views/member/member.edit.html",
		            controller 	 : "MemberEditController",
		            controllerAs : "MemberEditCtrl"
		        })
		        .state('dutyDesk.car', {
		            abstract : true,
		            template : "<ui-view>"
		        })
		        .state('dutyDesk.car.show',{
		            url: "/car/:branch",
		            templateUrl : "views/cars/car.index.html",
		            controller : "CarIndexController",
		            controllerAs : "CarIndexCtrl"
		        })
		        .state('dutyDesk.car.edit',{
		            url: "/car/:branch/edit",
		            templateUrl : "views/cars/car.edit.html",
		            controller : "CarEditController",
		            controllerAs : "CarEditCtrl"
		        })
		}
})();

(function(){
	/**
	* app.dashboard Module
	*
	* Description
	*/
	angular
		.module('app.dashboard')
		.controller('DashboardController',DashboardController);

	DashboardController.$inject = ['$location', 'SocketSvc', 'UserSvc', 'BranchSvc'];
	function DashboardController($location, SocketSvc, UserSvc, BranchSvc){
		var vm = this; 

		BranchSvc.fetchByCorps(UserSvc.userCorps()).success(function(branches){
			return vm.branches = branches;
		});

		UserSvc.fetchOnlineUser().success(function(users){
			return vm.users = users;
		});

		SocketSvc.on('userLogin',function(user){
			return vm.users.push(user);
		});

		SocketSvc.on('userDisconnect',function(disconnectUser){
			vm.users = vm.users.filter(function(user) {
				return user.username != disconnectUser.username
			});
		});

		SocketSvc.on('userLogout',function(logoutUser){
			vm.users = vm.users.filter(function(user) {
				return user.username != logoutUser.username
			});
		});

		vm.$on('$destroy', function (event) {
	        return SocketSvc.removeAllListeners();
	    });
	}
})();
(function(){
	'use strict';
	/**
	* app.director Module
	*
	* Description
	*/
	angular
		.module('app.director')
		.controller('DirDutyListController',DirDutyListController);

	DirDutyListController.$inject = ['UserSvc', 'BranchSvc'];

	function DirDutyListController( UserSvc , BranchSvc ){
		var vm = this;
		var branch = UserSvc.userBranch();
		
		BranchSvc.fetchByName(branch).success(function(branch){
			vm.branch 		= branch;
			vm.onDutyTotal 	= vm.branch.members.filter(function(member) {
				return member.onDuty == true 
			});
		}); 
	};
})();
(function(){
	'use strict';
	/**
	* app.dashboard Module
	*
	* Description
	*/
	angular
		.module('app.director')
		.controller('DirDutyListEditController',DirDutyListEditController);

	DirDutyListEditController.$inject = ['BranchSvc', '$stateParams','MemberSvc', '$location', '$window', 'UserSvc', 'CarSvc', 'StMissionFac'];

	function DirDutyListEditController(BranchSvc, $stateParams,MemberSvc, $location, $window, UserSvc, CarSvc, StMissionFac){
		var vm = this;
		var branch 	= UserSvc.userBranch();
		vm.check 	= check;
		vm.save 	= save;   

		BranchSvc.fetchByName(branch).success(function(branch){
			vm.branch = branch;
			vm.isCorps =  true ? branch.name.split("救災救護")[1] : false 
			var members = _.pluck(branch.members.filter(function(member) { return member.level < 2.4 }), 'name')
			vm.branch.safetyManager 	= branch.safetyManager;
			vm.branch.safetyManagers 	= members;
			vm.onDutyTotal = 0;
			_.map(vm.branch.members,function(member){ 
				member.groupIds = _.range(1,Math.round(vm.branch.members.length/6),1);
				member.groupID = member.group + member.groupId 
			})
		})

		function check(member){
			member.onDuty 	 = !member.onDuty;
			member.isChecked = !member.isChecked;
			member.groupID 	 = member.group + member.groupId
		};

		
		function save(){
			var DispatchNumber = vm.branch.members.filter(function(member) {
				return member.onDuty
			});

			BranchSvc.updateMission({
				branch   		: vm.branch.name,
				director 		: vm.branch.director,
				dispatchNum 	: DispatchNumber.length,
				safetyManager 	: vm.branch.safetyManager,
				members 		: vm.branch.members
			});
			$window.history.back();
		};
	};

})();
(function(){
	'use strict';

	/**
	* app.dispatch Module
	*
	* Description
	*/
	angular
		.module('app.dispatch', [])
		.controller('DispatchController',DispatchController);

	DispatchController.$inject = ['$stateParams','$modal','CaseSvc','BranchSvc', 'CarSvc', 'UserSvc'];
	function DispatchController($stateParams,$modal,CaseSvc,BranchSvc, CarSvc, UserSvc){
		var vm = this; 
		CaseSvc.fetch(UserSvc.userCorps()).success(function(cases){
			vm.cases = cases;
			CaseSvc.fetchById(vm.cases[$stateParams.caseId]._id).success(function(_case){
					return vm.caseDetails = _case;
			});
		});

		BranchSvc.fetchByCorps(UserSvc.userCorps()).success(function(branches){
		    return vm.branchList = branches;
		 });

		CarSvc.fetch().success(function(data){
		    return vm.carsData = data;
		});

		vm.addNewCase = function () {
		  	var modalInstance = $modal.open({
			    templateUrl: '/partials/casePanel/caseAddModal',
			    controller: 'CaseAddModalCtrl',
			    size: "lg",
			    resolve : {
			    	caseId : function(){
			    		return vm.id = "新增案件"
			    	},
			    	branchList : function(){
			    		return vm.branchList;
			    	},
			    	carsData : function(){
			    		return vm.carsData;
			    	},
			    	isNew : function(){
			    		return true;
			    	},
			    	caseDetails : function(){
			    		return {}
			    	}
			    }
		    });
		 };

		 vm.editCase = function(){
		 	var modalInstance = $modal.open({
			    templateUrl: '/partials/casePanel/caseAddModal',
			    controller: 'CaseAddModalCtrl',
			    size: "lg",
			    resolve : {
			    	caseId : function(){
			    		return vm.id = vm.cases[$stateParams.caseId].caseId; 
			    	},
			    	branchList : function(){
			    		return vm.branchList;
			    	},
			    	carsData : function(){
			    		for (var i = vm.carsData.length - 1; i >= 0; i--) {
			    			for (var j = vm.caseDetails.cars.length - 1; j >= 0; j--) {
			    				if ( vm.carsData[i].radioCode === vm.caseDetails.cars[j].radio_code) {
			    					return vm.carsData[i].isChecked = true ;
			    				};
			    			};		    			
			    		};
			    		return vm.carsData;
			    	},
			    	isNew : function(){
			    		return false; 
			    	},
			    	caseDetails : function(){
			    		return vm.caseDetails;
			    	}
			    }
		    });
		 };
	}
})();
(function(){
	/**
	* app.dutylist Module
	*
	* Description
	*/
	angular
		.module('app.dutylist', [])
		.controller('DutyListController',DutyListController);

	DutyListController.$inject = ['BranchSvc', '$stateParams', 'SocketSvc', 'UserSvc', '$q'];
	function DutyListController(BranchSvc, $stateParams, SocketSvc, UserSvc, $q){
		var vm = this; 
		var branchId = $stateParams.branch;
		
		BranchSvc.totalListFindByName(branchId).success(function(branch){
			vm.branch = branch;
			vm.onDutyTotal = vm.branch.members.filter(function(member) {
				return member.onDuty == true
			});
		});
	}

})();
(function(){
	'use strict';
	/**
	* app.geo Module
	*
	* Description
	*/
	angular
		.module('app.geo')
		.service('GeoSvc',GeoSvc);

	GeoSvc.$inject = ['$q','$http'];

	function GeoSvc(){
		var svc = this; 
		svc.getGeolocationCoordinates = function() {
	        var deferred = $q.defer();
	        navigator.geolocation.getCurrentPosition(
	            function(position) { deferred.resolve(position.coords); },
	            function(error) { deferred.resolve(null); }
	        );
	        return deferred.promise;
	    };

	    svc.getGeoEncodedInfo = function(address){
	    	var deferred = $q.defer();
	    	// return $http.get('https://maps.googleapis.com/maps/api/geocode/json?address='+ address +'&key=AIzaSyAxq-ZkxRr1ZArBXFDOo8xgi4Cl2PeitAo')
	    	var geocoder = new google.maps.Geocoder();
	    	if (geocoder) {
		      geocoder.geocode({ 'address': address }, function (results, status) {
		         if (status == google.maps.GeocoderStatus.OK) {
		            deferred.resolve(results[0].geometry.location) 
		         }
		         else {
		            deferred.resolve( "Geocoding failed: " + status )
		         }
		      });
		   } 
		   return deferred.promise;  
	    };

	    svc.fetchBaseLocation = function(corps){
	    	return $http.get('/api/geolocations?corps=' + corps)
	    };

	    svc.getDistance = function( from_loc , to_loc ){

	    	if (typeof(Number.prototype.toRad) === "undefined") {
			  Number.prototype.toRad = function() {
			    return svc * Math.PI / 180;
			  }
			}
			var R = 6371; // Radius of the earth in km
			var dLat = (to_loc.lat - from_loc.lat ).toRad();  // Javascript functions in radians
			var dLon = (to_loc.lng - from_loc.lng ).toRad(); 
			var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
			        Math.cos(from_loc.lat.toRad()) * Math.cos(to_loc.lat.toRad()) * 
			        Math.sin(dLon/2) * Math.sin(dLon/2); 
			var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
			return R * c;
	    };

	    svc.defaultLocation = function(){
	    	return { lat : 25.0927297 , lng :  121.4608639, address : null};
	    };
	};
})();
(function(){
	'use strict';
	/**
	* app Module
	*
	* Description
	*/
	angular
		.module('app.topnav', [])
		.controller('TopNavController',TopNavController);

	TopNavController.$inject = [];
	function TopNavController($location,$state, $interval, store, SocketSvc, UserSvc, $window){
		var vm = this; 
		vm.currentTime =  moment().format('MMM Do, h:mm:ss a');
		vm.logout = logout;


		$interval(function(){
			moment.locale('zh-tw');
			vm.currentTime =  moment().format('MMM Do, h:mm:ss a');
		}, 1000);
		 
		function logout(){
			var account = UserSvc.currentAccount();
			SocketSvc.emit('logout');
			$state.go('anon.login');
		};
	}

})();
(function(){
	'use strict';
	/**
	* app.map Module
	*
	* Description
	*/
	angular
		.module('app.map', [])
		.controller('MapIndexController',MapIndexController);

	MapIndexController.$inject = ['leafletData', 'GeoSvc'];
	function MapIndexController(leafletData, GeoSvc){
		var vm = this; 

		GeoSvc.getGeolocationCoordinates().then(function(coord){
	        vm.nowPos.lat = coord.latitude;
	        vm.nowPos.lng = coord.longitude;
	        vm.nowPos.zoom = 17;
	    })

	    angular.extend(vm, {
	        nowPos: {
	            lat: 24.988,
	            lng: 121.5752,
	            zoom: 17
	        },
	        controls: {
	            draw: {}
	        }
	    })

	    leafletData.getMap().then(function(map) {
	      var drawnItems = vm.controls.edit.featureGroup;
	      map.on('draw:created', function (e) {
	        var layer = e.layer;
	        drawnItems.addLayer(layer);
	        
	        FeatureCollections.push(layer.toGeoJSON())
	        
	      });
	    })
	}
})();
(function(){
	'use strict';
	/**
	* app.member Module
	*
	* Description
	*/
	angular
		.module('app.member')
		.controller('MemberAccountModalController',MemberAccountModalController);

	MemberAccountModalController.$inject = ['UserSvc', 'MemberSvc', 'member', '$modalInstance'];
	function MemberAccountModalController(UserSvc, MemberSvc, member, $modalInstance){
		var vm = this; 
		vm.user = member;
		vm.save = save;
		vm.cancel = cancel; 

		function save(){
			if (_.isEmpty(vm.user)) {
				console.log("please enter your account and password!")
			} else{
				if (!vm.user.account) {
					console.log("account can't be blank!")
					if (!vm.user.password) {
						console.log("passwod can't be blank!")
					};
				} else if (!vm.user.password) {
					console.log("password can't be blank")
				}else{
					UserSvc.activate(vm.user);
					MemberSvc.updateUser(member.name);
					$modalInstance.close(vm.user);
				};
			};
		};

		function cancel(){
			$modalInstance.dismiss('cancel');
		};
	};
})();
(function(){
	'use strict';

	/**
	* app.member Module
	*
	* Description
	*/
	angular
		.module('app.member')
		.controller('MemberEditController',MemberEditController);
	
	MemberEditController.$inject = ['MemberSvc', 'BranchSvc', '$stateParams', '$window','$modal', '$state', 'UserSvc'];
	
	function MemberEditController( MemberSvc, BranchSvc, $stateParams, $window,$modal, $state, UserSvc){
		var vm = this; 

		vm.alerts = [];
		vm.memberDeleted = false;
		var tempDelMember = null;
		vm.accessLevel = UserSvc.accessLevel();
		vm.closeAlert = closeAlert;
		vm.save = save;
		vm.addNewMember = addNewMember;
		vm.update = update;
		vm.activateAccount = activateAccount;
		vm.deleteAlert = deleteAlert;
		vm.deActivateAlert = deActivateAlert;
		
		var memberInit = function(){
			MemberSvc.findByBranch($stateParams.branch).success(function(members){
				vm.members = members;
				vm.members.forEach(function(member){
					member.workingTime = moment.duration(member.workingTime,'seconds');
				});
			});
		};

		memberInit();

		var deActivateAccount = function(index){
			UserSvc.removeUser(tempDelMember.name).success(function(user){
				MemberSvc.removeUser(user.username);
				vm.closeAlert(index);
				memberInit();
			});
		};

		var deleteMember = function(index){
			vm.memberDeleted = true;
			MemberSvc.deleteMember(tempDelMember).success(function(){
				vm.memberDeleted = false;
			});
			vm.closeAlert(index);
			memberInit();
		};

		var cancelDel = function(index){
			vm.memberDeleted = false;
			vm.closeAlert(index);
		};

		function save(){
			var directors = _.pluck( vm.members.filter(function(member) { return member.level > 1.3  }) , 'name');
			BranchSvc.update({
				branch : $stateParams.branch,
				members : _.pluck( vm.members , '_id'),
				directors : directors,
				director : directors[0],
				safetyManager : directors[0]
			}).success(function(){
				$window.history.back();
			});		
		};

		function addNewMember(){
			var modalInstance = $modal.open({
			    templateUrl: 'views/member/member.modal.html',
			    controller: 'MemberModalCtrl',
			    size: "md",
			    resolve : {
			    	branch : function(){
			    		return $stateParams.branch 
			    	},
			    	member : function(){
			    		return { workingTime : null };
			    	}
			    }
		    });

		    modalInstance.result.then(function(member){
		    	if (member) {
		    		memberInit();
		    	}
		    	vm.alerts.push({ type : "success" ,  msg: '人員新增成功！ ' + member.name + ' 已加入 ' + member.branch});
		    })
		};

		function update(member){
			var oldMember = member;
			var modalInstance = $modal.open({
			    templateUrl: 'views/member/member.modal.html',
			    controller: 'MemberModalCtrl',
			    size: "md",
			    resolve : {
			    	branch : function(){
			    		return $stateParams.branch 
			    	},
			    	member : function(){
			    		return {
			    			memberId : member._id,
			    			id : member.id,
			    			name : member.name,
			    			title : member.title,
			    			branches : member.branches,
			    			corps : member.corps,
			    			radioCode : member.radioCode, 
			    			workingTime : member.workingTime.minutes() * 60 + member.workingTime.seconds()
			    		}
			    	}
			    }
		    });

		    modalInstance.result.then(function(member){
		    	memberInit();
		    	vm.alerts.push({ type : "info" ,  msg:  oldMember.name + '修改成功!' });
		    });
		};

		function activateAccount(member){
			var users = vm.members.filter(function(member) {
				return member.isUser;
			});

			if (users.length < 3 ) {
				var modalInstance = $modal.open({
				    templateUrl: 'views/member/member.account.html',
				    controller: 'MemberAccountModalCtrl',
				    size: "md",
				    resolve : {
				    	member : function(){
				    		return member
				    	}
				    }
				});

				modalInstance.result.then(function(member){
					memberInit();
					vm.alerts.push({ type : "info" , msg : member.name + " 已開通為使用者" })
				});
			} else {
				vm.alerts.push({ type : "warning" , msg : "無法開通" + member.name + " 因為使用者已超過3位，請解除其他人帳號後再開通 "});
			};
		};

		function deleteAlert(member){
			vm.alerts.push({ 	
				type : "danger" ,  
				msg: '是否確定要刪除！' + member.name, 
				execute : deleteMember,
				cancel :  cancelDel
			});
			tempDelMember = member;
		};

		function deActivateAlert(member){
			var users = vm.members.filter(function(member) {
				return member.isUser;
			});
			if (users.length == 1 ) {
				vm.alerts.push({ 
					type : "warning",  
					msg: '每分隊至少要有1個使用者，無法取消' + member.name + "的登入權限",
				});
			} else{
				vm.alerts.push({ 
					type : "danger",  
					msg: '是否確定要解除' + member.name + "登入權限",
					execute : deActivateAccount,
					cancel : cancelDel
				});
				tempDelMember = member;
			};
		};
	
		function closeAlert(index){
			vm.alerts.splice(index,1)
		};
	}
})();
(function(){
	'use strict';

	/**
	* app.member Module
	*
	* Description
	*/
	angular
		.module('app.member', [])
		.controller('MemberIndexController',MemberIndexController);

	MemberIndexController.$inject = [ MemberSvc , $stateParams ];
	function MemberIndexController( MemberSvc , $stateParams ){
		var vm = this; 

		vm.branch = $stateParams.branch;
		MemberSvc.findByBranch($stateParams.branch).success(function(members){
			vm.members = members;
			vm.members.forEach(function(member){
				return member.workingTime = moment.duration(member.workingTime,'seconds');
			});
		});
	};
})();
(function(){
	'use strict';
	/**
	* app.member Module
	*
	* Description
	*/
	angular
		.module('app.member')
		.controller('MemberModalController',MemberModalController);

	MemberModalController.$inject = ['branch', 'MemberSvc', '$modalInstance', '$state', 'member','BranchSvc', 'UserSvc'];
	function MemberModalController(branch, MemberSvc, $modalInstance, $state, member,BranchSvc, UserSvc){
		var vm = this; 
		vm.alerts = [];
		vm.isNew  = _.isNull(member.workingTime);
		vm.save   = save;
		vm.update = update;
		vm.cancel = canel;

		vm.member = {
			id 		 	: member.id ||  "", 
			name 	 	: member.name || null , 
			title    	: "消防隊員",
			titles   	: ["消防隊員","小隊長","分隊長","中隊長","大隊長","副大隊長"],
			branch   	: member.branch || branch,
			workingTime : member.workingTime ||  1200,
			radioCode 	: member.radioCode ||  null, 
			mission  	: "瞄子手",
			missions 	: ["瞄子手","副瞄子手","司機","小組長","安全管制員","聯絡官",],
			corps	 	: UserSvc.userCorps(),
			corpss 	 	: ["第一救災救護大隊","第三救災救護大隊"],
		};

		BranchSvc.fetchByCorps(UserSvc.userCorps()).success(function(branches){
			vm.branches = branches; 
			if (!vm.isNew) {
				var branchArry = [];
				for (var i = branches.length - 1; i >= 0; i--) {
					branchArry.push(branches[i].name);
				};
				vm.member.branches = branchArry;
			}; 
		});

		var radioCodePrefix = function(branch){
			var suffix =  branch.split('').slice(-2).join('');
			if (suffix == "大隊" || suffix == "中隊") {
				return "北海";
			} else{
				return branch.split('').slice(0,2).join('');
			};
		};

		function save(){
			if (vm.member.name) {
				vm.member.radioCodePrefix = radioCodePrefix(vm.member.branch);
				MemberSvc.create(vm.member).success(function(){
					vm.member.workingTime = moment.duration(parseInt(vm.member.workingTime),'seconds');
				}).then(function(){
					$modalInstance.close(vm.member);
				})
			} else{

			};
		};

		function update(){
			var updateMember = {
				  memberId  : member.memberId,
				  id 		: "",
				  name 		: vm.member.name,
				  corps 	: vm.member.corps,
				  branch 	: vm.member.branch,
				  title 	: vm.member.title,
				  workingTime : vm.member.workingTime,
				  radioCode  : vm.member.radioCode,
				  radioCodePrefix : radioCodePrefix(vm.member.branch)
			}

			if (vm.member.name) {
				MemberSvc.updateByMemberId(updateMember);
				$modalInstance.close(updateMember);
			} else {
				
			};
		};
	
		function cancel(){
			$modalInstance.dismiss('cancel');
		};
	};
})();
(function(){
	'use strict';
	/**
	* app.member Module
	*
	* Description
	*/
	angular
		.module('app.member')
		.service('MemberSvc',MemberSvc)
	
	MemberSvc.$inject = ['$http'];
	
	function MemberSvc(){
		var svc = this; 
		svc.fetch = fetch;
		svc.findByBranch = findByBranch;
		svc.fetchOnDuty = fetchOnDuty;
		svc.create = create; 
		svc.update = update; 
		svc.updateOnDuty = updateOnDuty;
		svc.updateByMemberId = updateByMemberId;
		svc.updateIsChecked = updateIsChecked;
		svc.updateUser = updateUser;
		svc.removeUser = removeUser;
		svc.deleteMember = deleteMember;

		function fetch(){
			return $http.get('/api/members');
		};

		function findByBranch( branch ){
			return $http.get('/api/members/' + branch );
		};

		function fetchOnDuty(branch){
			return $http.get('/api/members/onDuty?branch=' + branch);
		};

		function create(member){
			return $http.post('/api/members/', member);
		};

		function update(member){
			return $http.put('/api/members/', member.id);
		};

		function updateOnDuty(member){
			return $http.put('/api/members/onDuty/findById?memberId=' + member.memberId, member);
		};

		function updateByMemberId(updateMember){
			return $http.put('/api/members/findById/' + updateMember.memberId , updateMember);
		}
		
		function updateIsChecked(memberData){
			return $http.put('/api/members?id=' + memberData.memberId, memberData)
		};
		
		function updateUser(username){
			return $http.put('/api/members/user?username='+ username);
		};
		
		function removeUser(username){
			return $http.put('/api/members/user/remove?username=' + username);
		};

		function deleteMember(member){
			return $http.delete('/api/members/' + member._id);
		};
	}
})();
(function(){
	'use strict';
	/**
	* app.notification Module
	*
	* Description
	*/
	angular
		.module('app.notification')
		.service('NtfSvc',NtfSvc);

	NtfSvc.$inject = ['$http'];
	
	function NtfSvc($http){
		var svc = this;
		svc.fetch = fetch; 
		function fetch(){
			return $http.get('/api/ntfs');
		} ;
	};

})();
(function(){
	'use strict';

	/**
	* app.safety Module
	*
	* Description
	*/
	angular
		.module('app.safety')
		.controller('SafetyCmdShowController',SafetyCmdShowController);

	SafetyCmdShowController.$inject = ['CaseSvc', 'BranchSvc', 'UserSvc', '$stateParams', 'GeoSvc'];
	
	function SafetyCmdShowController(CaseSvc, BranchSvc, UserSvc, $stateParams, GeoSvc){
		
		var vm = this; 
		var branch = UserSvc.userBranch();
	
		BranchSvc.totalListFindByName(branch).success(function(branch){
			vm.members = branch.members.filter(function(member) {
				member.limitTime = moment.duration(member.workingTime, 'seconds');
				return member.onDuty == true 
			});
		});

		CaseSvc.fetchDetails($stateParams.caseId).success(function(_case){
			vm.caseDetail = _case;
			vm.onDutyBranches = _case.branchIds;
			if (_case.location) {
				var location = JSON.parse(_case.location);
				vm.markers.mainMarker = {
					lat : Number(location.lat),
					lng : Number(location.lng),
					message : "案件標的"
				};

				vm.battleRadiuss = _case.battleRadiuss;
			};
		}).then(function(){
			vm.onDutyBranches.forEach(function(branch){
				branch.members.forEach(function(member){
					if (branch.director == member.name ) {
						branch.directorRadioCode = member.radioCodePrefix +  String(member.radioCode);
					};
					if (branch.safetyManager == member.name) {
						branch.safetyManagerRadioCode = member.radioCodePrefix + String(member.radioCode);
					};
				});

				if (vm.battleRadius) {
					vm.battleRadiuss.forEach(function(battleRadius){
						var radius = JSON.parse(battleRadius)
						if (branch.name == radius.base) {
							branch.estimatedArrivingTime =  Math.round(( radius.d / 50 ) * 60);
						};
					})		
				};
			});
		});

       GeoSvc.getGeolocationCoordinates().then(function(coord){
	        vm.nowPos.lat = coord.latitude;
	        vm.nowPos.lng = coord.longitude;
	        vm.nowPos.zoom = 17;
	        vm.markers.nowPos = {
	        	lat : vm.nowPos.lat,
	        	lng : vm.nowPos.lng,
	        	message : "現在位置"
	        }
	    })

	    angular.extend(vm, {
	        nowPos: {
	            lat: 24.988,
	            lng: 121.5752,
	            zoom: 13
	        },
	        markers: {},
	    });		
	}
})();
(function(){
	'use strict';
	/**
	* app.safety Module
	*
	* Description
	*/
	angular
		.module('app.safety')
		.controller('SafetyIndexController',SafetyIndexController);
	SafetyIndexController.$inject = ['CaseSvc', 'UserSvc'];
	function SafetyIndexController(){
		var vm = this; 
		var userCondition = {
			branch 		: UserSvc.userBranch(),
			accessLevel : UserSvc.accessLevel(),
			corps 		: UserSvc.userCorps()
		};

		CaseSvc.fetchRelativeCase(userCondition).success(function(cases){ 
			vm.cases = cases;
			cases.forEach(function(_case){
				_case.dispatchBranches = ''
				_case.branches.forEach(function(branch){
					_case.dispatchBranches += branch + ' '
				});
			});
		});

		vm.isBranchMember = true ? UserSvc.accessLevel() < 2  : false ; 
	}
})();
(function(){
	'use strict';
	/**
	* app.safety Module
	*
	* Description
	*/
	angular
		.module('app.safety')
		.controller('SafetyManageController',SafetyManageController);
	
	SafetyManageController.$inject = ['$stateParams', '$modal', 'StSvc', '$state', 'MemberSvc','$log', 'UserSvc', 'BranchSvc', 'SocketSvc', 'CaseSvc', 'StMissionFac'];
	
	function SafetyManageController($stateParams, $modal, StSvc, $state, MemberSvc,$log, UserSvc, BranchSvc, SocketSvc, CaseSvc, StMissionFac){
		var vm = this; 
		var BRANCH 		= UserSvc.userBranch();
		var caseDetail 	= null;
		vm.quickStart 	= false;
		vm.apartment 	= true; 
		vm.ACCESSLEVEL 	= UserSvc.accessLevel();
		vm.quickOrganizing = quickOrganizing;
		vm.strikeTeam = strikeTeam;
		vm.openSettingModal = openSettingModal;
		vm.dismiss = dismiss; 

		vm.branchOptions = {
			branch : BRANCH,
			branches : []
		};

		CaseSvc.fetchById($stateParams.caseId).success(function(_case){
			caseDetail = _case;
			_case.env == '住宅火警'? vm.apartment = true : vm.apartment = false; 
			vm.branchOptions.branches = _case.branches
			vm.branchOptions.branches.splice(0,0,BRANCH);
		});

		BranchSvc.fetchByName(BRANCH).success(function(details){
			vm.details = details;
		}).then(function(){
			if (vm.ACCESSLEVEL > 1 ) {
				StSvc.fetchByCase($stateParams.caseId).success(function(sts){
					vm.strikeTeams = sts; 
				});
			} else {
				StSvc.fetch($stateParams.caseId,BRANCH).success(function(sts){
					vm.strikeTeams = sts;
					if (vm.details.dispatchNum < 8 && _.isEmpty(vm.strikeTeams)) { vm.quickStart = true  }; 
				}); 
			};
		});

		SocketSvc.on('newSt', function(st){
			if (vm.ACCESSLEVEL > 1 && angular.equals($stateParams.caseId,st.caseId) ) {
					vm.strikeTeams.push(st);
			} else {
				if (angular.equals(BRANCH,st.branch) && angular.equals($stateParams.caseId,st.caseId) ) {
					vm.strikeTeams.push(st);
				};
			};
		});

		SocketSvc.on('updateSt', function(data){
			var members = angular.copy(data.members);
			for (var i = vm.strikeTeams.length - 1; i >= 0; i--) {
				if(angular.equals(vm.strikeTeams[i]._id,data.id)){
					vm.strikeTeams[i].position 	= data.position;
					vm.strikeTeams[i].area 		= data.area;
					vm.strikeTeams[i].floor 	= data.floor;
					vm.strikeTeams[i].mission 	= data.mission;
				};
			};
		})

		SocketSvc.on('dismiss', function(st){
			var _stId = st.stId;
			vm.strikeTeams = vm.strikeTeams.filter(function(st) {				
				return st._id != _stId;
			});
		});
		
		function strikeTeam(){
			var modalInstance = $modal.open({
			  	templateUrl: 'views/safety/safety.modal.html',
			    controller: 'SafetyModalCtrl',
			    size: "md",
			    resolve : {
			    	stId : function(){
			    		if ( _.isEmpty(vm.strikeTeams)) {
			    			return 0
			    		} else{
			    			return vm.strikeTeams[vm.strikeTeams.length-1].id;
			    		};
			    	},
			    	branch : function(){
			    		return vm.branchOptions.branch;
			    	},
			    	caseDetail : function(){
			    		return caseDetail
			    	}
			    }
		    });
		};

		
		function openSettingModal(strikeTeam, id){
	        var modalInstance = $modal.open({
	            templateUrl: 'views/safety/safety.setting.modal.html',
	            controller: 'SafetySettingCtrl',
	            size: "lg",
	            resolve: {
	                strikeTeam : function(){
	                    return strikeTeam;
	                },
	                caseDetail : function(){
	                	return caseDetail;
	                }
	            }
	        });
	    };

		
		function dismiss(strikeTeam , id){

			SocketSvc.emit("dismissStrikeTeam",{
				id : strikeTeam._id,
				members : strikeTeam.members 
			});
	       	vm.strikeTeams.splice(id,1);
		};

		
		function quickOrganizing(){
			vm.quickStart = false;
		
			var members =  vm.details.members.filter(function(member) {
				if ( member.mission == '司機' || member.mission == '安全管制員' || member.mission == '救護人員') {
					return false  
				}else {
					member.isChecked = true;
					return member.onDuty;
				}
			});

			var strikeTeam = {
				id 		  : 1,
				caseId 	  : caseDetail._id,
				branch 	  : UserSvc.userBranch(),
				director  : _.pluck(members.filter(function(member) { return member.mission == '帶隊官'}),'name')[0],
				position  : StMissionFac.position().defaultPos,
				positions : StMissionFac.position().poss,
				group     : StMissionFac.groups().branch[1],
				groups    : StMissionFac.groups().branch,
				area 	  : StMissionFac.area().defaultArea,
				areas 	  : StMissionFac.area().areas,
				floor 	  : 1, 
				floors    : [1,2,3,4,5],
				memberIds : _.pluck(members,'_id'),
				members   : members,
				creator   : UserSvc.currentUser(),
			};
	      	SocketSvc.emit("createStrikeTeam", strikeTeam);
		};

		vm.$on('$destroy', function (event) {
	        SocketSvc.removeAllListeners();
	    })
	}
})();
(function(){
	'use strict';
	/**
	* app.safety Module
	*
	* Description
	*/
	angular
		.module('app.safety')
		.controller('MemberModalController',MemberModalController);

	MemberModalController.$inject = ['branch', 'MemberSvc', '$modalInstance', '$state', 'member','BranchSvc', 'UserSvc'];
	function MemberModalController(){
		var vm = this; 
		vm.alerts = [];
		vm.isNew = _.isNull(member.workingTime);
		vm.save = save;
		vm.update = update; 
		vm.cancel = cancel;  

		vm.member = {
			id 		 	: member.id ||  "", 
			name 	 	: member.name || null , 
			title    	: "消防隊員",
			titles   	: ["消防隊員","小隊長","分隊長","中隊長","大隊長","副大隊長"],
			branch   	: member.branch || branch,
			workingTime : member.workingTime ||  1200,
			radioCode 	: member.radioCode ||  null, 
			mission  	: "瞄子手",
			missions 	: ["瞄子手","副瞄子手","司機","小組長","安全管制員","聯絡官",],
			corps	 	: UserSvc.userCorps(),
			corpss 	 	: ["第一救災救護大隊","第三救災救護大隊"],
		};

		BranchSvc.fetchByCorps(UserSvc.userCorps()).success(function(branches){
			vm.branches = branches; 
			if (!vm.isNew) {
				var branchArry = [];
				for (var i = branches.length - 1; i >= 0; i--) {
					branchArry.push(branches[i].name);
				};
				vm.member.branches = branchArry;
			}; 
		});

		var radioCodePrefix = function(branch){
			var suffix =  branch.split('').slice(-2).join('');
			if (suffix == "大隊" || suffix == "中隊") {
				return "北海";
			} else{
				return branch.split('').slice(0,2).join('');
			};
		};

		function save(){
			if (vm.member.name) {
				vm.member.radioCodePrefix = radioCodePrefix(vm.member.branch);
				MemberSvc.create(vm.member).success(function(){
					vm.member.workingTime = moment.duration(parseInt(vm.member.workingTime),'seconds');
				}).then(function(){
					$modalInstance.close(vm.member);
				})
			};
		};

		function update(){
			var updateMember = {
				  memberId  : member.memberId,
				  id 		: "",
				  name 		: vm.member.name,
				  corps 	: vm.member.corps,
				  branch 	: vm.member.branch,
				  title 	: vm.member.title,
				  workingTime : vm.member.workingTime,
				  radioCode  : vm.member.radioCode,
				  radioCodePrefix : radioCodePrefix(vm.member.branch)
			}

			if (vm.member.name) {
				MemberSvc.updateByMemberId(updateMember);
				$modalInstance.close(updateMember);
			} else {
				
			};
		};

		function cancel(){
			$modalInstance.dismiss('cancel');
		};
	}
})();
(function(){
	'use strict';
	/**
	* app.safety Module
	*
	* Description
	*/
	angular
		.module('app.safety')
		.controller('SafetySettingController',SafetySettingController);

	SafetySettingController.$inject = ['strikeTeam', '$modalInstance', 'StSvc', '$state', 'MemberSvc', 'CaseSvc', '$stateParams', 'SocketSvc', 'caseDetail'];
	
	function SafetySettingController(strikeTeam, $modalInstance, StSvc, $state, MemberSvc, CaseSvc, $stateParams, SocketSvc, caseDetail){
		var vm = this; 
		vm.strikeTeam = strikeTeam;
		vm.chooseBranch = chooseBranch;
		vm.cancel = cancel;
		vm.check = check;
		vm.uncheck = uncheck;
		vm.save = save;   
		caseDetail.env == '住宅火警'? vm.apartment =  true  : vm.apartment = false 

		var newMembers = [];

		CaseSvc.fetchDetails($stateParams.caseId).success(function(details){
			vm.dispatch = details.branchIds;
			vm.currentBranch = vm.dispatch[0].name;
			var memberList = _.pluck(details.branchIds,'members');
			vm.members = []
			memberList.forEach(function(branchMembers){
				vm.members.push.apply(vm.members, branchMembers)
			});
			vm.members = vm.members.filter(function(member) { return !member.isChecked });
		})

		function chooseBranch(branch){
			vm.currentBranch = branch;
		};

		function cancel(){
			$modalInstance.dismiss('cancel');
		};

		function check(member){
			member.isChecked = !member.isChecked;
			newMembers.push(member);
		};

		function uncheck(member, id){
			member.isChecked = !member.isChecked;
			newMembers.splice(_.pluck(newMembers, '_id').indexOf(member._id),1);
		};

		function save(){
			vm.strikeTeam.members.push.apply(vm.strikeTeam.members, newMembers);
			SocketSvc.emit('updateStrikeTeam',{
				id : strikeTeam._id, 
				position : strikeTeam.position,
				area : strikeTeam.area, 
				floor : strikeTeam.floor,
				group : strikeTeam.group,
				memberIds : _.pluck(vm.strikeTeam.members,'_id'), 
				members : vm.strikeTeam.members
			});

			$modalInstance.close('dismiss');			
		};
	};

})();
(function(){
	'use strict';
	/**
	* app.safety Module
	*
	* Description
	*/
	angular
		.module('app.safety')
		.controller('SafetyShowController',SafetyShowController);

	SafetyShowController.$inject = ['CaseSvc', 'UserSvc', 'SocketSvc','GeoSvc', 'BranchSvc', '$stateParams'];

	function SafetyShowController(){
		var vm = this; 
		var branch = UserSvc.userBranch();
		
		BranchSvc.fetchByName(branch).success(function(branch){
			vm.members = branch.members.filter(function(member) {
				member.limitTime = moment.duration(member.workingTime, 'seconds');
				return member.onDuty == true 
			});
		});

		CaseSvc.fetchDetails($stateParams.caseId).success(function(_case){
			vm.caseDetail = _case;
			if (_case.location) {
				var location = JSON.parse(_case.location);
				vm.markers.mainMarker = {
					lat : Number(location.lat),
					lng : Number(location.lng),
					message : "案件標的"
				};
			};
		});

       GeoSvc.getGeolocationCoordinates().then(function(coord){
	        vm.nowPos.lat = coord.latitude;
	        vm.nowPos.lng = coord.longitude;
	        vm.nowPos.zoom = 17;
	        vm.markers.nowPos ={
	        	lat : vm.nowPos.lat,
	        	lng : vm.nowPos.lng,
	        	message : "現在位置"
	        }
	    })

	    angular.extend(vm, {
	        nowPos: {
	            lat: 24.988,
	            lng: 121.5752,
	            zoom: 13
	        },
	        markers: {},
	    });		
	}
})();
(function(){
	'use strict';
	/**
	* app.socket Module
	*
	* Description
	*/
	angular
		.module('app.socket')
		.service('SocketSvc',SocketSvc);

	SocketSvc.$inject = ['$rootScope', 'store', '$q', '$timeout'];
	
	function SocketSvc($rootScope, store, $q, $timeout){
		var svc = this; 
		svc.init =  function(token){
	    	var authToken = null
	    	if (token) {
		      authToken = token 
			} else {
		      authToken = store.get('jwt')
		    };
		    return io.connect('http://localhost:3000',{ query : 'token=' + authToken , 'forceNew':true });
		}

	  	var socket = svc.init();

	  	svc.on =  function (eventName, callback) {
	    	svc.init().on(eventName, function () {  
		      var args = arguments;
		      $rootScope.$apply(function () {
		        callback.apply(socket, args);
		      });
		    });
		};

	  	svc.emit =  function (eventName, data, callback) {
	    	svc.init().emit(eventName, data, function () {
	      		var args = arguments;
	      		$rootScope.$apply(function () {
	        		if (callback) {
	          			callback.apply(socket, args);
	        		};
	      		});
	    	})
	  	};

		svc.removeAllListeners = function (eventName, callback) {
		    svc.init().removeAllListeners(eventName, function() {
		        var args = arguments;
		        $rootScope.$apply(function () {
		          callback.apply(socket, args);
		        });
		    }); 
		};
	};
})();
(function(){
	'use strict';
	/**
	* app.strikeTeam Module
	*
	* Description
	*/
	angular
		.module('app.strikeTeam', [])
		.factory('StMissionFac',StMissionFac);

	StMissionFac.$inject = [];
	function StMissionFac(){
		return {
			groups: function(){
				return {
					corps : [ "聯絡組" , "水源組" , "後勤組"],
					squadron : [""],
					branch : ["帶隊官","滅火小組","搜救小組","搶救小組","後勤小組"],
					preSt  : ["搜救小組","搶救小組","滅火小組"]
				}
			},
			position : function(){
				return {
					defaultPos : "第一面",
					poss : ["第一面","第二面","第三面","第四面"]
				}
			},
			area : function(){
				return {
					defaultArea : "第一區",
					areas : ["第一區","第二區","第三區","第四區","第五區"]
				};
			}
		};
	};
})();
(function(){
	'use strict';
	/**
	* app.strikTeam Module
	*
	* Description
	*/
	angular
		.module('app.strikTeam')
		.serivce('StSvc',StSvc);
		
	StSvc.$inject = ['$http'];

	function StSvc(){
		var svc = this; 
		svc.fetch = fetch;
		svc.fetchByCase = fetchByCase;
		svc.findById = findById;
		svc.dismissSt = dismissSt;
		svc.updateSt = updateSt;
		svc.updateTimeRecord = updateTimeRecord;
		svc.create = create;
		svc.count = count; 

		function fetch(caseId, branch){
			return $http.get('/api/strikeTeams?caseId=' + caseId + '&branch=' + branch);
		};
	
		function fetchByCase(caseId){
			return $http.get('/api/strikeTeams/total?caseId=' + caseId);
		};
		
		function findById(caseId){
			return $http.get('/api/strikeTeams/' + caseId);
		};

		function dismissSt(data){
			return $http.put('/api/strikeTeams/dismiss?id=' + data.id);
		};

		function updateSt(data){
			return $http.put('/api/strikeTeams/update?id=' + data.id, data);
		};

		function updateTimeRecord(data){
			return $http.put('/api/strikeTeams/time?id=' + data.id, data);
		};

		function create(strikeTeam){
			return $http.post('/api/strikeTeams', strikeTeam);
		};
		
		function count(caseId){
			return $http.get('/api/strikeTeams/count?caseId=' + caseId);
		};
	}

})();
(function(){
	'use strict';
	/**
	* app.summary Module
	*
	* Description
	*/
	angular
		.module('app.summary')
		.controller('SummaryController',SummaryController);

	SummaryController.$inject = ['StSvc', '$stateParams', '$interval', '$state', 'SocketSvc', 'CaseSvc'];
	function SummaryController(){
		var vm = this; 
		vm.isCollapsed = true ;
		vm.members = [];

		SocketSvc.on('timerRunning',function(st){
			for (var i = vm.strikeTeams.length - 1; i >= 0; i--) {
				if( angular.equals(vm.strikeTeams[i]._id, st.stId)){
					return vm.strikeTeams[i].timerRunning = st.timerRunning;
				}
			};
		})

		SocketSvc.on('progressUpdate',function(data){
			for (var i = vm.strikeTeams.length - 1; i >= 0; i--) {
				if( angular.equals(vm.strikeTeams[i]._id, data.id) ){
					vm.strikeTeams[i].timer	= moment.duration(data.millis); 
					vm.strikeTeams[i].progress  = data.progress;
					vm.strikeTeams[i].progressState =  data.progressState;
				}
			};
		})

		SocketSvc.on('newSt', function(st){
			if ( angular.equals(caseId,st.caseId)) {
				var newSt = angular.copy(st);
				return vm.strikeTeams.push(newSt);
			};
			vm.deploys = initTable(vm.strikeTeams);
		});

		

		SocketSvc.on('updateSt', function(data){
			StSvc.fetchByCase(caseId).success(function(strikeTeams){
				vm.strikeTeams = strikeTeams;
				vm.strikeTeams.forEach(function(st){
					st.limitTime = moment.duration(st.workingTime,'seconds');
				});
				vm.deploys = initTable(vm.strikeTeams);
			});

		})

		SocketSvc.on('dismiss', function(data){
			StSvc.fetchByCase(caseId).success(function(strikeTeams){
				vm.strikeTeams = strikeTeams;
				vm.deploys = initTable(vm.strikeTeams);
			});
		});


		var caseId = $stateParams.caseId;
		CaseSvc.fetchById(caseId).success(function(_case){
			_case.env == '住宅火警' ? vm.apartment = true : vm.apartment = false;
			vm.caseDetail = _case;
			vm.position = {
				defaultPos 	: "第一面",
				positions 	: ["第一面","第二面","第三面","第四面"],
				floor 		: vm.caseDetail.floor,
				floors  	: vm.caseDetail.floor < 5? _.range(1,6,1) : _.range(vm.caseDetail.floor-2,vm.caseDetail.floor+3,1)
			};
		})

		StSvc.fetchByCase(caseId).success(function(strikeTeams){
			if (strikeTeams) {
				vm.strikeTeams = strikeTeams;
				vm.strikeTeams.forEach(function(st){
					st.limitTime = moment.duration(st.workingTime,'seconds');
				});
				vm.deploys = initTable(vm.strikeTeams);
			} else {
				return 
			};
		});



		var initTable =  function(strikeTeams){
		  	var deployArray = _.range(4).map(function () {
		        return _.range(5).map(function () {
		            return { totalMember : 0, stTotal : 0 , sts : [] } ;
		        });
		    });

			if ( strikeTeams ){
				for (var i = strikeTeams.length - 1; i >= 0; i--) {
					var totalMember = 0;
					var y = null;
					var st = 0;
					var x = _.indexOf(strikeTeams[i].positions, strikeTeams[i].position);
					vm.apartment ? y = _.indexOf(strikeTeams[i].floors, strikeTeams[i].floor) : y = _.indexOf(strikeTeams[i].areas, strikeTeams[i].area)
					deployArray[x][y].stTotal += 1;
					deployArray[x][y].totalMember += strikeTeams[i].members.length;
					var stInFo = {};
					stInFo.id = strikeTeams[i].branch + strikeTeams[i].id
					stInFo.number = strikeTeams[i].members.length;
					stInFo.group = strikeTeams[i].group;
					deployArray[x][y].sts.push(stInFo);
				};
			}
			return deployArray
		};
		
		vm.$on('$destroy', function (event) {
	        SocketSvc.removeAllListeners();
	    });
	};
})();
(function(){
	'use strict';

	/**
	* app.timer Module
	*
	* Description
	*/
	angular
		.module('app.timer')
		.controller('TimerController',TimerController);

	TimerController.$inject = ['SocketSvc'];

	function TimerController(){
		var vm = this; 
		vm.timerRunning = false;
		vm.startTimer = startTimer;
		vm.stopTimer = stopTimer;
	    
	    function startTimer(st, id){
	    	vm.$broadcast('timer-start');
	    	vm.timerRunning = true;
	        SocketSvc.emit('timer', { stId : st._id, timerRunning : true } )
	    };
	    
	    function stopTimer(st,id){
	    	vm.$broadcast('timer-stop');
	    	vm.timerRunning = false;
	        SocketSvc.emit('timer', { stId : st._id, timerRunning : false } )
	    };
	};

})();
(function(){
	'use strict';
	/**
	* app.user Module
	*
	* Description
	*/
	angular
		.module('app.user')
		.service('UserSvc',UserSvc);

	UserSvc.$inject = ['$http', 'store', 'jwtHelper'];
	function UserSvc(){
		var svc = this; 
		svc.fetchOnlineUser = fetchOnlineUser;
		svc.activate = activate;
		svc.removeUser = removeUser;
		svc.login = login;
		svc.isLoggedIn = isLoggedIn;
		svc.isValid = isValid;
		svc.userBranch = userBranch;
		svc.userCorps = userCorps;
		svc.currentUser = currentUser;
		svc.currentAccount = currentAccount;
		svc.accessLevel = accessLevel;
		svc.caseId = caseId;


		function fetchOnlineUser(){
			return $http.get('/api/users/userState');
		};

		function activate(user){
			return $http.post('/api/users', user);
		};

		function removeUser(username){
			return $http.delete('/api/users/delete?username=' + username);
		};

		function login(user){
			return $http.post('/api/users/authenticate', user);
		};

		function isLoggedIn(){
			return store.get('jwt');
		};

		function isValid( branch ){
			if (svc.isLoggedIn) {
				if (jwtHelper.decodeToken(store.get('jwt')).accessLevel > 1   || jwtHelper.decodeToken(store.get('jwt')).branch == branch) {
					return true; 
				}else {
					return false;
				};
			};

			return false 
		};

		function userBranch(){
			if (svc.isLoggedIn) {
				return jwtHelper.decodeToken(store.get('jwt')).branch;
			};
		};
	
		function userCorps(){
			if (svc.isLoggedIn) {
				return jwtHelper.decodeToken(store.get('jwt')).corps;
			};
		};
	
		function currentUser(){
			if (svc.isLoggedIn) {
				return jwtHelper.decodeToken(store.get('jwt')).username;
			};
		};
	
		function currentAccount(){
			if (svc.isLoggedIn) {
				return jwtHelper.decodeToken(store.get('jwt')).account;
			}; 
		};
	
		function accessLevel(){
			if (svc.isLoggedIn) {
				return jwtHelper.decodeToken(store.get('jwt')).accessLevel;
			};
		};
	
		function caseId(){
			if (svc.isLoggedIn) {
				return jwtHelper.decodeToken(store.get('jwt')).caseId;
			};
		};
	};

})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJicmFuY2gvYnJhbmNoLm1vZHVsZS5qcyIsImNhci9jYXIubW9kdWxlLmpzIiwiY2FzZS9jYXNlLm1vZHVsZS5qcyIsImRhc2hib2FyZC9kYXNoYm9hcmQubW9kdWxlLmpzIiwiZGlyZWN0b3IvZGlyZWN0b3IubW9kdWxlLmpzIiwiZGlzcGF0Y2gvZGlzcGF0Y2gubW9kdWxlLmpzIiwiZHV0eWxpc3QvZHV0eWxpc3QubW9kdWxlLmpzIiwiZ2VvL2dlby5tb2R1bGUuanMiLCJtYXAvbWFwLm1vZHVsZS5qcyIsIm1lbWJlci9tZW1iZXIubW9kdWxlLmpzIiwibm90aWZpY2F0aW9uL2FwcC5ub3RpZmljYXRpb24ubW9kdWxlLmpzIiwic2FmZXR5L3NhZmV0eS5tb2R1bGUuanMiLCJzb2NrZXQvc29ja2V0Lm1vZHVsZS5qcyIsInN0cmlrZVRlYW0vc3RyaWtlVGVhbS5tb2R1bGUuanMiLCJzdW1tYXJ5L3N1bW1hcnkubW9kdWxlLmpzIiwidGltZXIvdGltZXIubW9kdWxlLmpzIiwidXNlci91c2VyLm1vZHVsZS5qcyIsImFwcC5kaXJlY3RpdmUuanMiLCJicmFuY2gvYnJhbmNoLnNlcnZpY2UuanMiLCJjYXIvY2FyLmVkaXQuY29udHJvbGxlci5qcyIsImNhci9jYXIuaW5kZXguY29udHJvbGxlci5qcyIsImNhci9jYXIuc2VydmljZS5qcyIsImNhc2UvY2FzZS5jb25maXJtLm1vZGFsLmNvbnRyb2xsZXIuanMiLCJjYXNlL2Nhc2UuZWRpdC5jb250cm9sbGVyLmpzIiwiY2FzZS9jYXNlLmluZGV4LmNvbnRyb2xsZXIuanMiLCJjYXNlL2Nhc2UubW9kYWwuY29udHJvbGxlci5qcyIsImNhc2UvY2FzZS5uZXcuY29udHJvbGxlci5qcyIsImNhc2UvY2FzZS5zZXJ2aWNlLmpzIiwiY2FzZS9jYXNlLnNob3cuY29udHJvbGxlci5qcyIsImNvcmUvbG9naW4uY29udHJvbGxlci5qcyIsImNvcmUvcm91dGVyLmpzIiwiZGFzaGJvYXJkL2Rhc2hib2FyZC5jb250cm9sbGVyLmpzIiwiZGlyZWN0b3IvZGlyZWN0b3IuY29udHJvbGxlci5qcyIsImRpcmVjdG9yL2RpcmVjdG9yLmVkaXQuY29udHJvbGxlci5qcyIsImRpc3BhdGNoL2Rpc3BhdGNoLmNvbnRyb2xsZXIuanMiLCJkdXR5bGlzdC9kdXR5bGlzdC5jb250cm9sbGVyLmpzIiwiZ2VvL2dlby5zZXJ2aWNlLmpzIiwibGF5b3V0L3RvcG5hdmJhci5jb250cm9sbGVyLmpzIiwibWFwL21hcC5pbmRleC5jb250cm9sbGVyLmpzIiwibWVtYmVyL21lbWJlci5hY2NvdW50LmNvbnRyb2xsZXIuanMiLCJtZW1iZXIvbWVtYmVyLmVkaXQuY29udHJvbGxlci5qcyIsIm1lbWJlci9tZW1iZXIuaW5kZXguY29udHJvbGxlci5qcyIsIm1lbWJlci9tZW1iZXIubW9kYWwuY29udHJvbGxlci5qcyIsIm1lbWJlci9tZW1iZXIuc2VydmljZS5qcyIsIm5vdGlmaWNhdGlvbi9hcHAubm90aWZpY2F0aW9uLnNlcnZpY2UuanMiLCJzYWZldHkvc2FmZXR5LmNtZC5jb250cm9sbGVyLmpzIiwic2FmZXR5L3NhZmV0eS5pbmRleC5jb250cm9sbGVyLmpzIiwic2FmZXR5L3NhZmV0eS5tYW5hZ2UuY29udHJvbGxlci5qcyIsInNhZmV0eS9zYWZldHkubW9kYWwuY29udHJvbGxlci5qcyIsInNhZmV0eS9zYWZldHkuc2V0dGluZy5jb250cm9sbGVyLmpzIiwic2FmZXR5L3NhZmV0eS5zaG93LmNvbnRyb2xsZXIuanMiLCJzb2NrZXQvc29ja2V0LnNlcnZpY2UuanMiLCJzdHJpa2VUZWFtL3N0cmlrZVRlYW0uZmFjdG9yeS5qcyIsInN0cmlrZVRlYW0vc3RyaWtlVGVhbS5zZXJ2aWNlLmpzIiwic3VtbWFyeS9zdW1tYXJ5LmluZGV4LmNvbnRyb2xsZXIuanMiLCJ0aW1lci90aW1lci5jb250cm9sbGVyLmpzIiwidXNlci91c2VyLnNlcnZpY2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsQ0FBQSxDQUFBLFVBQUE7Q0FDQTtDQUNBLFFBQUEsT0FBQSxNQUFBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7Ozs7O0FDZkEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQSxhQUFBOztBQ1JBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQSxRQUFBLE9BQUEsV0FBQTs7QUNQQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUEsUUFBQSxPQUFBLFlBQUE7RUFDQTtFQUNBOzs7QUNUQSxDQUFBLFVBQUE7Ozs7OztDQU1BO0dBQ0EsT0FBQSxnQkFBQTs7QUNQQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUEsUUFBQSxPQUFBLGdCQUFBOzs7QUNQQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUEsUUFBQSxPQUFBLGdCQUFBOztBQ1BBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQSxRQUFBLE9BQUEsZ0JBQUE7O0FDUEEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BLFFBQUEsT0FBQSxXQUFBOztBQ1BBLENBQUEsVUFBQTs7Ozs7O0NBTUEsUUFBQSxPQUFBLFdBQUE7O0FDTkEsQ0FBQSxVQUFBOzs7Ozs7Q0FNQSxRQUFBLE9BQUEsY0FBQTs7QUNOQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUEsUUFBQSxPQUFBLG9CQUFBOztBQ1BBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQSxRQUFBLE9BQUEsYUFBQTs7QUNQQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUEsUUFBQSxPQUFBLGNBQUE7O0FDUEEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BLFFBQUEsT0FBQSxpQkFBQTs7QUNQQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUEsUUFBQSxPQUFBLGNBQUE7O0FDUEEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BLFFBQUEsT0FBQSxhQUFBOztBQ1BBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQSxRQUFBLE9BQUEsWUFBQTs7QUNQQSxDQUFBLFVBQUE7SUFDQTtTQUNBLE9BQUE7U0FDQSxVQUFBLG9CQUFBO1NBQ0EsVUFBQSxpQkFBQTtTQUNBLFVBQUEsWUFBQTtTQUNBLFVBQUEsT0FBQTs7SUFFQSxrQkFBQSxZQUFBLENBQUE7SUFDQSxlQUFBLGVBQUEsQ0FBQTtJQUNBLFVBQUEsb0JBQUEsQ0FBQTtJQUNBLEtBQUEseUJBQUEsQ0FBQTs7SUFFQSxTQUFBLGtCQUFBLFNBQUE7U0FDQSxPQUFBO1lBQ0EsVUFBQTtZQUNBLFVBQUE7WUFDQSxtQ0FBQSxVQUFBLFFBQUEsVUFBQTtnQkFDQSxPQUFBLGFBQUEsWUFBQTtvQkFDQSxFQUFBLFFBQUEsWUFBQTtvQkFDQSxJQUFBLENBQUEsRUFBQSxRQUFBLFNBQUEsa0JBQUEsRUFBQSxRQUFBLFNBQUEsZUFBQTs7d0JBRUEsRUFBQSxjQUFBOzt3QkFFQTs0QkFDQSxZQUFBO2dDQUNBLEVBQUEsY0FBQSxPQUFBOytCQUNBOzJCQUNBLElBQUEsRUFBQSxRQUFBLFNBQUEsaUJBQUE7d0JBQ0EsRUFBQSxjQUFBO3dCQUNBOzRCQUNBLFlBQUE7Z0NBQ0EsRUFBQSxjQUFBLE9BQUE7K0JBQ0E7MkJBQ0E7O3dCQUVBLEVBQUEsY0FBQSxXQUFBOzs7OztLQUtBOztJQUVBLFNBQUEsZUFBQSxTQUFBO1NBQ0EsT0FBQTtZQUNBLFVBQUE7WUFDQSxNQUFBLFNBQUEsT0FBQSxTQUFBOztnQkFFQSxTQUFBLFVBQUE7b0JBQ0EsUUFBQTs7OztLQUlBOztJQUVBLFNBQUEsVUFBQSxTQUFBO1FBQ0EsT0FBQTtZQUNBLFVBQUE7WUFDQSxPQUFBO1lBQ0EsYUFBQTtZQUNBLG1DQUFBLFVBQUEsUUFBQSxVQUFBOztnQkFFQSxPQUFBLFdBQUEsWUFBQTtvQkFDQSxJQUFBLE9BQUEsU0FBQSxRQUFBO29CQUNBLElBQUEsT0FBQSxTQUFBLEtBQUE7b0JBQ0EsSUFBQSxVQUFBLEtBQUEsS0FBQTtvQkFDQSxRQUFBLFlBQUE7O29CQUVBLEtBQUEsWUFBQSxpQkFBQSxZQUFBO29CQUNBLEtBQUEsWUFBQSxJQUFBLFlBQUE7b0JBQ0EsU0FBQSxZQUFBO3dCQUNBLEtBQUE7d0JBQ0EsS0FBQSxLQUFBLGNBQUE7dUJBQ0E7OztvQkFHQSxPQUFBLFdBQUEsWUFBQTt3QkFDQSxJQUFBLE9BQUEsU0FBQSxRQUFBO3dCQUNBLEtBQUE7Ozs7S0FJQTs7SUFFQSxTQUFBLEtBQUEsUUFBQTtRQUNBLE9BQUE7WUFDQSxVQUFBO1lBQ0EsTUFBQSxVQUFBLE9BQUEsVUFBQSxRQUFBO2dCQUNBLFNBQUEsS0FBQSxRQUFBLFVBQUE7b0JBQ0EsUUFBQSxRQUFBOzs7O0tBSUE7OztBQzdGQSxDQUFBLFVBQUE7Ozs7Ozs7Q0FPQTtHQUNBLE9BQUE7R0FDQSxXQUFBLFlBQUE7O0NBRUEsVUFBQSxVQUFBLENBQUE7Q0FDQSxTQUFBLFVBQUEsTUFBQTtFQUNBLElBQUEsTUFBQTtFQUNBLElBQUEsZ0JBQUE7RUFDQSxJQUFBLGVBQUE7RUFDQSxJQUFBLHNCQUFBO0VBQ0EsSUFBQSxlQUFBO0VBQ0EsSUFBQSxzQkFBQTtFQUNBLElBQUEsWUFBQTtFQUNBLElBQUEsaUJBQUE7O0VBRUEsU0FBQSxhQUFBLE1BQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSx5QkFBQTtHQUNBOztFQUVBLFNBQUEsWUFBQSxPQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEsMEJBQUE7R0FDQTs7RUFFQSxTQUFBLG9CQUFBLE9BQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSxtQkFBQTs7O0VBR0EsU0FBQSxXQUFBLEdBQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSxtQkFBQTtHQUNBOztFQUVBLFNBQUEsb0JBQUEsU0FBQTtHQUNBLE9BQUEsTUFBQSxLQUFBLHVCQUFBO0dBQ0E7O0VBRUEsU0FBQSxPQUFBLEtBQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSxtQkFBQSxLQUFBLFNBQUE7R0FDQTs7RUFFQSxTQUFBLGNBQUEsS0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLDBCQUFBLEtBQUEsUUFBQTtHQUNBO0VBQ0E7OztBQ2pEQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsV0FBQSxvQkFBQTs7Q0FFQSxrQkFBQSxVQUFBO0NBQ0EsU0FBQSxtQkFBQTs7RUFFQTs7O0FDZEEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFdBQUEscUJBQUE7O0NBRUEsbUJBQUEsVUFBQTtDQUNBLFNBQUEsb0JBQUE7O0VBRUE7OztBQ2RBLENBQUEsVUFBQTtDQUNBOzs7Ozs7O0NBT0E7R0FDQSxPQUFBO0dBQ0EsT0FBQSxTQUFBOztDQUVBLE9BQUEsVUFBQSxDQUFBOztDQUVBLFNBQUEsT0FBQSxNQUFBO0VBQ0EsSUFBQSxLQUFBO0VBQ0EsR0FBQSxnQkFBQTtFQUNBLEdBQUEsZ0JBQUE7RUFDQSxHQUFBLFlBQUE7O0VBRUEsU0FBQSxhQUFBLE1BQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSxxQkFBQTtHQUNBOztFQUVBLFNBQUEsZUFBQSxRQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEsc0JBQUE7R0FDQTs7RUFFQSxTQUFBLE9BQUEsS0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLGVBQUEsS0FBQSxLQUFBO0dBQ0E7RUFDQTs7QUMvQkEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFdBQUEsd0JBQUE7O0NBRUEsc0JBQUEsVUFBQSxDQUFBLFdBQUEsV0FBQSxlQUFBLFNBQUE7Q0FDQSxTQUFBLHNCQUFBLFNBQUEsU0FBQSxhQUFBLE9BQUEsZUFBQTtFQUNBLElBQUEsS0FBQTs7RUFFQSxHQUFBLE9BQUE7RUFDQSxHQUFBLE9BQUE7RUFDQSxHQUFBLFdBQUE7R0FDQSxLQUFBLGFBQUE7R0FDQSxRQUFBLFNBQUEsT0FBQTs7O0VBR0EsU0FBQSxNQUFBO0dBQ0EsUUFBQSxNQUFBLEdBQUEsTUFBQSxRQUFBLFNBQUEsS0FBQTtJQUNBLFFBQUEsVUFBQSxHQUFBLFVBQUEsUUFBQSxVQUFBO0tBQ0EsZUFBQSxRQUFBO0tBQ0EsT0FBQSxHQUFBOzs7R0FHQTtFQUNBOztBQzlCQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsV0FBQSxxQkFBQTs7Q0FFQSxtQkFBQSxVQUFBLENBQUEsZ0JBQUEsV0FBQSxVQUFBLFdBQUEsYUFBQSxXQUFBLFNBQUE7O0NBRUEsU0FBQSxtQkFBQSxjQUFBLFNBQUEsUUFBQSxTQUFBLFdBQUEsU0FBQSxPQUFBLE9BQUE7RUFDQSxJQUFBLEtBQUE7RUFDQSxJQUFBLGdCQUFBO0VBQ0EsR0FBQSxpQkFBQTtFQUNBLEdBQUEsY0FBQTtFQUNBLEdBQUEsaUJBQUE7RUFDQSxHQUFBLGlCQUFBO0VBQ0EsR0FBQSxXQUFBOztFQUVBLFFBQUEsT0FBQSxJQUFBO1NBQ0EsUUFBQTthQUNBLEtBQUE7YUFDQSxLQUFBO2FBQ0EsTUFBQTs7U0FFQSxVQUFBO2FBQ0EsTUFBQTs7OztFQUlBLElBQUEsU0FBQSxhQUFBOztFQUVBLFVBQUEsYUFBQSxRQUFBLGFBQUEsUUFBQSxTQUFBLFNBQUE7TUFDQSxHQUFBLFdBQUE7TUFDQSxHQUFBLGdCQUFBLFNBQUEsR0FBQTs7O0VBR0EsU0FBQSxhQUFBLE9BQUE7TUFDQSxHQUFBLGdCQUFBLE9BQUE7TUFDQTs7RUFFQSxVQUFBLGFBQUEsUUFBQSxhQUFBLFFBQUEsU0FBQSxTQUFBO01BQ0EsR0FBQSxXQUFBO01BQ0EsR0FBQSxnQkFBQSxTQUFBLEdBQUE7OztFQUdBLFFBQUEsVUFBQSxRQUFBLFFBQUEsU0FBQSxNQUFBO0dBQ0EsR0FBQSxjQUFBO0dBQ0EsR0FBQSxlQUFBLEVBQUEsTUFBQSxNQUFBLE1BQUEsYUFBQSxLQUFBO0dBQ0EsR0FBQSxZQUFBLFNBQUEsRUFBQSxNQUFBLE1BQUEsS0FBQTtLQUNBLEtBQUEsVUFBQTtHQUNBLE9BQUEsYUFBQSxRQUFBLGFBQUEsUUFBQSxTQUFBLEtBQUE7SUFDQSxHQUFBLE9BQUE7SUFDQSxLQUFBLElBQUEsSUFBQSxHQUFBLElBQUEsR0FBQSxLQUFBLFFBQUEsS0FBQTtLQUNBLEtBQUEsR0FBQSxZQUFBLE9BQUEsUUFBQSxHQUFBLEtBQUEsR0FBQSxPQUFBLENBQUEsSUFBQTtNQUNBLEdBQUEsS0FBQSxHQUFBLFlBQUE7TUFDQSxhQUFBLEtBQUEsR0FBQSxLQUFBO01BQ0E7S0FDQTs7O0dBR0EsT0FBQSxRQUFBLFFBQUEsU0FBQSxLQUFBO0lBQ0EsR0FBQSxPQUFBO0lBQ0EsR0FBQSxZQUFBLE9BQUEsRUFBQSxNQUFBLEtBQUE7SUFDQSxHQUFBLFlBQUEsT0FBQSxHQUFBLFlBQUEsS0FBQTs7OztFQUlBLFNBQUEsWUFBQSxhQUFBO0dBQ0EsSUFBQSxXQUFBLEVBQUEsT0FBQTtHQUNBLElBQUEsWUFBQTtHQUNBLEtBQUEsSUFBQSxJQUFBLEdBQUEsSUFBQSxHQUFBLFNBQUEsUUFBQSxLQUFBO0lBQ0EsSUFBQSxTQUFBLFFBQUEsR0FBQSxTQUFBLEdBQUEsUUFBQSxDQUFBLEdBQUE7S0FDQSxVQUFBLEtBQUEsR0FBQSxTQUFBLEdBQUE7S0FDQTtJQUNBO0dBQ0EsUUFBQTtHQUNBOztFQUVBLFNBQUEsVUFBQSxLQUFBO0dBQ0EsSUFBQSxZQUFBO0dBQ0EsYUFBQSxLQUFBO0dBQ0EsR0FBQSxlQUFBLEVBQUEsTUFBQSxjQUFBLGFBQUEsS0FBQTtHQUNBOztFQUVBLFNBQUEsZUFBQSxJQUFBO0dBQ0EsSUFBQSxZQUFBO0dBQ0EsYUFBQSxPQUFBLEVBQUEsTUFBQSxjQUFBLE9BQUEsUUFBQSxJQUFBLEtBQUE7R0FDQSxHQUFBLGVBQUEsRUFBQSxNQUFBLGNBQUEsYUFBQSxLQUFBO0dBQ0E7O0VBRUEsU0FBQSxNQUFBO0dBQ0EsSUFBQTs7R0FFQSxHQUFBLEtBQUEsUUFBQSxTQUFBLElBQUEsR0FBQTtJQUNBLElBQUEsSUFBQSxRQUFBLEdBQUEsWUFBQSxNQUFBO0tBQ0EsY0FBQSxHQUFBLEtBQUE7S0FDQTs7R0FFQSxRQUFBLE9BQUE7SUFDQSxZQUFBLEdBQUEsWUFBQTtJQUNBLFlBQUEsR0FBQSxZQUFBLFdBQUE7SUFDQSxrQkFBQSxRQUFBLGtCQUFBO0lBQ0EsWUFBQSxHQUFBLFlBQUEsUUFBQTtJQUNBLFdBQUEsR0FBQSxZQUFBO0lBQ0EsWUFBQSxHQUFBLFlBQUEsU0FBQTtJQUNBLFlBQUEsRUFBQSxPQUFBLEVBQUEsTUFBQSxjQUFBO0lBQ0EsWUFBQSxZQUFBLEdBQUEsWUFBQTtNQUNBLFlBQUEsRUFBQSxNQUFBLGFBQUE7SUFDQSxZQUFBO0lBQ0EsV0FBQSxRQUFBO0lBQ0EsU0FBQSxHQUFBLFlBQUE7SUFDQSxVQUFBLEdBQUEsWUFBQTtJQUNBLFdBQUEsR0FBQSxZQUFBO0lBQ0EsWUFBQSxXQUFBO0lBQ0EsYUFBQSxTQUFBLE9BQUE7TUFDQSxRQUFBLFVBQUE7SUFDQSxRQUFBLFFBQUE7O0dBRUE7O0VBRUEsU0FBQSxnQkFBQTtHQUNBLElBQUEsZ0JBQUEsT0FBQSxLQUFBO01BQ0EsYUFBQTtPQUNBLFlBQUE7T0FDQSxNQUFBOztHQUVBOzs7QUNsSUEsQ0FBQSxVQUFBO0NBQ0E7O0NBRUE7R0FDQSxPQUFBO0dBQ0EsV0FBQSxpQkFBQTs7Q0FFQSxlQUFBLFVBQUEsQ0FBQSxlQUFBLFNBQUEsV0FBQSxRQUFBLGFBQUEsV0FBQTtDQUNBLFNBQUEsZUFBQSxhQUFBLE9BQUEsU0FBQSxNQUFBLFdBQUEsU0FBQSxVQUFBO0VBQ0EsSUFBQSxLQUFBO0VBQ0EsR0FBQSxZQUFBO0VBQ0EsR0FBQSxlQUFBO0VBQ0EsR0FBQSxlQUFBO0VBQ0EsR0FBQSxlQUFBO0VBQ0EsR0FBQSxlQUFBO0VBQ0EsR0FBQSxXQUFBOztFQUVBLEdBQUE7O0VBRUEsU0FBQSxhQUFBO0dBQ0EsUUFBQSxNQUFBLFFBQUEsYUFBQSxHQUFBLGNBQUEsR0FBQSxlQUFBLFFBQUEsU0FBQSxLQUFBO0lBQ0EsR0FBQSxRQUFBLEtBQUE7O0dBRUE7O0VBRUEsU0FBQSxZQUFBO0dBQ0EsUUFBQSxNQUFBLFFBQUEsYUFBQSxHQUFBLGFBQUEsR0FBQSxjQUFBLFFBQUEsU0FBQSxLQUFBO0lBQ0EsR0FBQSxRQUFBLEtBQUE7SUFDQSxHQUFBLGFBQUEsS0FBQTs7R0FFQTs7RUFFQSxTQUFBLE9BQUEsR0FBQTtHQUNBLFFBQUEsVUFBQSxHQUFBLE1BQUEsSUFBQSxLQUFBLFFBQUEsU0FBQSxNQUFBO0tBQ0EsR0FBQSxjQUFBOztHQUVBOztFQUVBLFVBQUEsR0FBQSxVQUFBLFNBQUEsTUFBQTtHQUNBLEdBQUEsTUFBQSxRQUFBOzs7RUFHQSxVQUFBLEdBQUEsZUFBQSxTQUFBLE1BQUE7R0FDQSxHQUFBLE1BQUEsTUFBQSxPQUFBLEtBQUE7O0VBRUE7OztBQzdDQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsV0FBQSxzQkFBQTs7Q0FFQSxvQkFBQSxVQUFBLENBQUEsVUFBQSxrQkFBQSxVQUFBLFVBQUEsU0FBQSxlQUFBLFNBQUEsV0FBQSxhQUFBLFdBQUE7O0NBRUEsU0FBQSxvQkFBQSxRQUFBLGdCQUFBLFFBQUEsUUFBQSxPQUFBLGFBQUEsT0FBQSxTQUFBLFdBQUEsU0FBQSxPQUFBO0VBQ0EsSUFBQSxLQUFBO0VBQ0EsR0FBQSxZQUFBO0VBQ0EsR0FBQSxlQUFBLEdBQUEsUUFBQSxhQUFBLEtBQUE7RUFDQSxHQUFBLFVBQUE7R0FDQSxVQUFBLFlBQUEsV0FBQTtHQUNBLFFBQUEsWUFBQSxTQUFBO01BQ0EsT0FBQSxZQUFBLFNBQUE7TUFDQSxRQUFBLEVBQUEsTUFBQSxNQUFBLE1BQUEsS0FBQTtNQUNBLFFBQUE7TUFDQSxRQUFBLENBQUEsT0FBQSxXQUFBLFFBQUE7TUFDQSxRQUFBO01BQ0EsU0FBQSxjQUFBLGFBQUEsV0FBQTtNQUNBLGVBQUEsY0FBQSxhQUFBLGlCQUFBO01BQ0EsV0FBQSxjQUFBLGFBQUEsYUFBQTs7RUFFQSxHQUFBLFdBQUE7RUFDQSxHQUFBLFlBQUE7RUFDQSxHQUFBLFdBQUE7RUFDQSxHQUFBLGlCQUFBO0VBQ0EsR0FBQSxZQUFBO0VBQ0EsR0FBQSxZQUFBO0VBQ0EsR0FBQSxTQUFBOztFQUVBLElBQUEsRUFBQSxRQUFBLGNBQUE7R0FDQSxHQUFBLFFBQUE7R0FDQSxVQUFBO09BQ0E7R0FDQSxHQUFBLFFBQUE7R0FDQSxJQUFBLFVBQUEsWUFBQTtHQUNBOztFQUVBLE9BQUEsUUFBQSxRQUFBLFNBQUEsS0FBQTtHQUNBLEdBQUEsVUFBQSxPQUFBO0tBQ0EsS0FBQSxVQUFBO0dBQ0EsR0FBQSxVQUFBLE1BQUEsR0FBQSxVQUFBLEtBQUE7OztFQUdBLFVBQUEsYUFBQSxRQUFBLGFBQUEsUUFBQSxTQUFBLFNBQUE7TUFDQSxHQUFBLFdBQUE7OztFQUdBLFNBQUEsY0FBQSxJQUFBO0dBQ0EsSUFBQSxlQUFBO0dBQ0EsSUFBQSxTQUFBO0dBQ0EsSUFBQSxXQUFBOztHQUVBLElBQUEsSUFBQSxNQUFBO0lBQ0EsS0FBQSxJQUFBLElBQUEsSUFBQSxLQUFBLFNBQUEsR0FBQSxLQUFBLEdBQUEsS0FBQTtLQUNBLGFBQUEsS0FBQSxJQUFBLEtBQUEsR0FBQTtLQUNBLE9BQUEsS0FBQSxJQUFBLEtBQUEsR0FBQTtLQUNBLFNBQUEsS0FBQSxJQUFBLEtBQUEsR0FBQTtLQUNBO0lBQ0EsT0FBQSxDQUFBLGVBQUEsZUFBQSxTQUFBLFNBQUEsWUFBQTs7UUFFQTtJQUNBLE9BQUE7SUFDQTtHQUNBOztFQUVBLFNBQUEsWUFBQSxhQUFBO0dBQ0EsSUFBQSxXQUFBLEVBQUEsT0FBQTtHQUNBLElBQUEsWUFBQTtHQUNBLEtBQUEsSUFBQSxJQUFBLEdBQUEsSUFBQSxHQUFBLFNBQUEsUUFBQSxLQUFBO0lBQ0EsSUFBQSxTQUFBLFFBQUEsR0FBQSxTQUFBLEdBQUEsUUFBQSxDQUFBLEdBQUE7S0FDQSxVQUFBLEtBQUEsR0FBQSxTQUFBLEdBQUE7S0FDQTtJQUNBO0dBQ0EsUUFBQTtHQUNBOztFQUVBLFNBQUEsU0FBQSxRQUFBO0lBQ0EsT0FBQSxjQUFBLE9BQUEsTUFBQSxRQUFBLFNBQUEsS0FBQTtLQUNBLEtBQUEsSUFBQSxJQUFBLEtBQUEsU0FBQSxHQUFBLEtBQUEsR0FBQSxLQUFBO01BQ0EsSUFBQSxHQUFBLFFBQUEsT0FBQSxRQUFBLEtBQUEsR0FBQSxPQUFBLENBQUEsSUFBQTtPQUNBLEtBQUEsR0FBQSxZQUFBO09BQ0E7TUFDQTtLQUNBLEdBQUEsT0FBQTs7R0FFQTs7RUFFQSxTQUFBLFNBQUE7R0FDQSxlQUFBLFFBQUE7R0FDQTs7RUFFQSxTQUFBLGVBQUEsSUFBQTtHQUNBLElBQUEsWUFBQTtHQUNBLFFBQUEsT0FBQSxRQUFBLFFBQUEsS0FBQTtHQUNBLEdBQUEsUUFBQSxPQUFBLE9BQUEsR0FBQSxRQUFBLGFBQUEsUUFBQSxJQUFBLEtBQUE7R0FDQSxHQUFBLFFBQUEsYUFBQSxPQUFBLEdBQUEsUUFBQSxhQUFBLFFBQUEsSUFBQSxXQUFBO0dBQ0EsR0FBQSxRQUFBLFNBQUEsT0FBQSxHQUFBLFFBQUEsYUFBQSxRQUFBLElBQUEsUUFBQTtHQUNBLEdBQUEsZUFBQSxHQUFBLFFBQUEsYUFBQSxLQUFBO0dBQ0E7O0VBRUEsU0FBQSxVQUFBLEtBQUE7R0FDQSxJQUFBLFlBQUE7R0FDQSxRQUFBLEtBQUE7R0FDQSxHQUFBLFFBQUEsT0FBQSxLQUFBLElBQUE7R0FDQSxHQUFBLFFBQUEsYUFBQSxLQUFBLElBQUE7R0FDQSxHQUFBLFFBQUEsU0FBQSxLQUFBLElBQUE7R0FDQSxHQUFBLGVBQUEsR0FBQSxRQUFBLGFBQUEsS0FBQTtHQUNBOztFQUVBLFNBQUEsV0FBQTtHQUNBLE1BQUEsTUFBQSxZQUFBLEtBQUEsUUFBQSxTQUFBLE1BQUE7SUFDQSxJQUFBLFFBQUEsSUFBQTtLQUNBLFFBQUEsTUFBQTtTQUNBO0tBQ0EsUUFBQSxVQUFBO01BQ0EsS0FBQSxZQUFBO01BQ0EsWUFBQTtRQUNBLFFBQUEsU0FBQSxJQUFBO01BQ0EsUUFBQSxJQUFBOztLQUVBLGVBQUEsUUFBQTtLQUNBLE9BQUE7S0FDQTs7R0FFQTs7RUFFQSxTQUFBLE1BQUE7R0FDQSxRQUFBLE9BQUE7SUFDQSxXQUFBLFNBQUE7SUFDQSxZQUFBLEdBQUEsUUFBQSxXQUFBO0lBQ0Esa0JBQUEsUUFBQSxrQkFBQTtJQUNBLFlBQUEsR0FBQSxRQUFBLFFBQUE7SUFDQSxZQUFBLEdBQUEsUUFBQSxTQUFBO0lBQ0EsWUFBQSxFQUFBLE9BQUEsR0FBQSxRQUFBO0lBQ0EsWUFBQSxZQUFBLEdBQUEsUUFBQTtNQUNBLFlBQUEsR0FBQSxRQUFBO0lBQ0EsWUFBQTtJQUNBLFdBQUEsUUFBQTtJQUNBLFNBQUEsR0FBQSxRQUFBO0lBQ0EsV0FBQSxHQUFBLFFBQUE7TUFDQSxRQUFBLFNBQUEsUUFBQTtJQUNBLGVBQUEsTUFBQTs7R0FFQTs7RUFFQSxTQUFBLFFBQUE7R0FDQSxJQUFBLFVBQUE7SUFDQSxLQUFBLFlBQUE7SUFDQSxXQUFBO0lBQ0EsWUFBQSxHQUFBLFFBQUE7SUFDQSxrQkFBQSxRQUFBLGlCQUFBO0lBQ0EsWUFBQSxHQUFBLFFBQUE7SUFDQSxZQUFBLEdBQUEsUUFBQTtJQUNBLFlBQUEsRUFBQSxPQUFBLEdBQUEsUUFBQTtJQUNBLFlBQUEsWUFBQSxHQUFBLFFBQUE7TUFDQSxZQUFBLEdBQUEsUUFBQTtJQUNBLFlBQUE7SUFDQSxTQUFBLEdBQUEsUUFBQTtJQUNBLFdBQUEsR0FBQSxRQUFBOzs7R0FHQSxRQUFBLE9BQUE7R0FDQSxlQUFBLFFBQUE7R0FDQTs7O0FDM0tBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxXQUFBLG9CQUFBOztDQUVBLGtCQUFBLFVBQUEsQ0FBQSxVQUFBLGFBQUEsVUFBQSxVQUFBLFlBQUEsZUFBQSxnQkFBQSxXQUFBLFdBQUEsVUFBQTs7Q0FFQSxTQUFBLGtCQUFBLFFBQUEsV0FBQSxRQUFBLFFBQUEsVUFBQSxhQUFBLGNBQUEsU0FBQSxTQUFBLFFBQUEsT0FBQTtFQUNBLElBQUEsS0FBQTtFQUNBLEdBQUEsZUFBQTtFQUNBLEdBQUEsT0FBQTtFQUNBLEdBQUEsZ0JBQUE7RUFDQSxHQUFBLGlCQUFBO0VBQ0EsR0FBQSxXQUFBO0VBQ0EsR0FBQSxlQUFBLFNBQUEsT0FBQTtFQUNBLElBQUEsZ0JBQUE7RUFDQSxJQUFBLGVBQUE7RUFDQSxJQUFBO0VBQ0EsR0FBQSxlQUFBLEdBQUEsWUFBQSxhQUFBLEtBQUE7O0VBRUEsR0FBQSxjQUFBO0dBQ0EsU0FBQTtNQUNBLFFBQUE7TUFDQSxTQUFBLEVBQUEsTUFBQSxNQUFBLE1BQUEsS0FBQTtNQUNBLFNBQUE7TUFDQSxTQUFBLENBQUEsT0FBQSxXQUFBLFFBQUE7TUFDQSxTQUFBO01BQ0EsVUFBQTtNQUNBLGVBQUE7TUFDQSxZQUFBO01BQ0EsV0FBQSxPQUFBOzs7RUFHQSxPQUFBLGtCQUFBLFFBQUEsYUFBQSxRQUFBLFNBQUEsVUFBQTtHQUNBLEdBQUEsWUFBQTs7O0tBR0EsUUFBQSxPQUFBLElBQUE7U0FDQSxRQUFBO2FBQ0EsS0FBQSxPQUFBLGtCQUFBO2FBQ0EsS0FBQSxPQUFBLGtCQUFBO2FBQ0EsTUFBQTs7UUFFQSxTQUFBOzs7RUFHQSxVQUFBLGFBQUEsUUFBQSxhQUFBLFFBQUEsU0FBQSxTQUFBO01BQ0EsR0FBQSxXQUFBO01BQ0EsR0FBQSxnQkFBQSxTQUFBLEdBQUE7OztFQUdBLE9BQUEsYUFBQSxRQUFBLGFBQUEsUUFBQSxTQUFBLEtBQUE7R0FDQSxHQUFBLE9BQUE7OztFQUdBLE9BQUEsUUFBQSxRQUFBLFNBQUEsS0FBQTtHQUNBLGdCQUFBO0dBQ0EsR0FBQSxZQUFBLE9BQUEsRUFBQSxNQUFBLEtBQUE7R0FDQSxHQUFBLFlBQUEsT0FBQSxHQUFBLFlBQUEsS0FBQTs7O0VBR0EsU0FBQSxlQUFBO0dBQ0EsSUFBQSxHQUFBLFlBQUEsU0FBQTtJQUNBLE9BQUEsa0JBQUEsR0FBQSxZQUFBLFNBQUEsS0FBQSxTQUFBLElBQUE7V0FDQSxHQUFBLE9BQUEsTUFBQSxJQUFBO1dBQ0EsR0FBQSxPQUFBLE1BQUEsSUFBQTtjQUNBLEdBQUEsUUFBQSxhQUFBO2VBQ0EsS0FBQSxJQUFBO2tCQUNBLEtBQUEsSUFBQTtrQkFDQSxPQUFBO2tCQUNBLFNBQUE7OztjQUdBLElBQUEsS0FBQTtlQUNBLEdBQUEsVUFBQSxRQUFBLFNBQUEsU0FBQTtnQkFDQSxJQUFBLElBQUEsT0FBQSxhQUFBLFVBQUEsRUFBQSxNQUFBLElBQUEsSUFBQSxNQUFBLElBQUE7Z0JBQ0EsSUFBQSxnQkFBQSxFQUFBLE9BQUEsU0FBQSxTQUFBLEtBQUEsRUFBQSxNQUFBLElBQUEsR0FBQSxPQUFBLElBQUEsS0FBQSxPQUFBLEVBQUEsTUFBQSxTQUFBLEtBQUEsTUFBQSxTQUFBLE9BQUEsSUFBQTtnQkFDQSxjQUFBLE1BQUEsS0FBQSxVQUFBOztlQUVBOztJQUVBO0dBQ0E7O0VBRUEsU0FBQSxhQUFBLE9BQUE7TUFDQSxHQUFBLGdCQUFBLE9BQUE7TUFDQTs7RUFFQSxTQUFBLFVBQUEsS0FBQTtHQUNBLElBQUEsWUFBQTtHQUNBLGFBQUEsS0FBQTtHQUNBLEdBQUEsZUFBQSxFQUFBLE1BQUEsY0FBQSxhQUFBLEtBQUE7R0FDQTs7RUFFQSxTQUFBLGVBQUEsSUFBQTtHQUNBLElBQUEsWUFBQTtHQUNBLGFBQUEsT0FBQSxFQUFBLE1BQUEsY0FBQSxPQUFBLFFBQUEsSUFBQSxLQUFBO0dBQ0EsR0FBQSxlQUFBLEVBQUEsTUFBQSxjQUFBLGFBQUEsS0FBQTtHQUNBLEdBQUEsZUFBQSxHQUFBLFlBQUEsYUFBQSxLQUFBO0dBQ0E7O0VBRUEsU0FBQSxNQUFBO0dBQ0EsSUFBQTtHQUNBLElBQUEsWUFBQSxFQUFBLE9BQUEsRUFBQSxNQUFBLGNBQUE7R0FDQSxJQUFBLFdBQUEsR0FBQSxTQUFBLE9BQUEsU0FBQSxRQUFBLEVBQUEsT0FBQSxTQUFBLFFBQUEsT0FBQSxRQUFBLENBQUE7O0dBRUEsY0FBQSxRQUFBLFNBQUEsSUFBQSxHQUFBO0lBQ0EsSUFBQSxJQUFBLFFBQUEsR0FBQSxZQUFBLEtBQUE7S0FDQSxjQUFBLGNBQUE7S0FDQTs7O0dBR0EsUUFBQSxPQUFBO0lBQ0Esa0JBQUEsUUFBQSxrQkFBQTtJQUNBLGNBQUEsR0FBQSxZQUFBLFFBQUE7SUFDQSxhQUFBLEdBQUEsWUFBQTtJQUNBLGNBQUEsR0FBQSxZQUFBLFNBQUE7SUFDQSxjQUFBLEVBQUEsT0FBQSxFQUFBLE1BQUEsY0FBQTtJQUNBLGNBQUEsRUFBQSxNQUFBLFVBQUE7TUFDQSxjQUFBLEVBQUEsTUFBQSxhQUFBO0lBQ0EsYUFBQSxRQUFBO0lBQ0EsV0FBQSxHQUFBLFlBQUE7SUFDQSxZQUFBLEdBQUEsWUFBQTtJQUNBLGFBQUEsR0FBQSxZQUFBO0lBQ0EsY0FBQSxXQUFBO0lBQ0EsY0FBQSxTQUFBLE9BQUE7SUFDQSxlQUFBLFNBQUEsT0FBQTtJQUNBLGVBQUE7S0FDQSxPQUFBLEdBQUEsWUFBQSxTQUFBO0tBQ0EsT0FBQSxHQUFBLFlBQUEsU0FBQTtLQUNBLFVBQUEsR0FBQSxZQUFBLFNBQUEsV0FBQTs7SUFFQSxpQkFBQTtNQUNBLFFBQUEsVUFBQTtJQUNBLFFBQUEsUUFBQTs7R0FFQTs7O0FDOUlBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxRQUFBLFdBQUE7O0NBRUEsUUFBQSxVQUFBLENBQUE7O0NBRUEsU0FBQSxTQUFBLFFBQUE7RUFDQSxJQUFBLE1BQUE7RUFDQSxJQUFBLFVBQUE7RUFDQSxJQUFBLFlBQUE7RUFDQSxJQUFBLGFBQUE7RUFDQSxJQUFBLG9CQUFBO0VBQ0EsSUFBQSxlQUFBO0VBQ0EsSUFBQSxhQUFBO0VBQ0EsSUFBQSxXQUFBO0VBQ0EsSUFBQSxXQUFBO0VBQ0EsSUFBQSxXQUFBOztFQUVBLFNBQUEsTUFBQSxPQUFBLE1BQUEsYUFBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLHNCQUFBLFFBQUEsV0FBQSxPQUFBLFVBQUE7R0FDQTs7RUFFQSxTQUFBLFVBQUE7R0FDQSxPQUFBLE1BQUEsSUFBQTtHQUNBOztFQUVBLFNBQUEsa0JBQUEsSUFBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLDhCQUFBLElBQUEsU0FBQSxrQkFBQSxJQUFBLGNBQUEsWUFBQSxJQUFBO0dBQ0E7O0VBRUEsU0FBQSxhQUFBLE9BQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSx3QkFBQTtHQUNBOztFQUVBLFNBQUEsV0FBQSxRQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEsZ0JBQUE7R0FDQTs7RUFFQSxTQUFBLE9BQUEsVUFBQTtHQUNBLE9BQUEsTUFBQSxLQUFBLGNBQUE7R0FDQTs7RUFFQSxTQUFBLFdBQUEsT0FBQTtHQUNBLE9BQUEsTUFBQSxLQUFBLGdCQUFBO0dBQ0E7O0VBRUEsU0FBQSxPQUFBLGFBQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSxnQkFBQSxhQUFBLFNBQUE7R0FDQTs7RUFFQSxTQUFBLFVBQUEsS0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLHlCQUFBLEtBQUEsSUFBQTtHQUNBOzs7QUMzREEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFdBQUEsc0JBQUE7O0VBRUEsbUJBQUEsV0FBQSxFQUFBLFNBQUEsZ0JBQUEsYUFBQSxVQUFBLGFBQUEsV0FBQSxhQUFBOztFQUVBLFNBQUEsb0JBQUE7R0FDQSxJQUFBLEtBQUE7R0FDQSxHQUFBLGNBQUE7R0FDQSxHQUFBLFVBQUE7R0FDQSxHQUFBLFlBQUEsYUFBQSxXQUFBOztHQUVBLFVBQUEsR0FBQSxTQUFBLFNBQUEsR0FBQTtJQUNBLEtBQUEsUUFBQSxPQUFBLE9BQUEsR0FBQSxTQUFBO0tBQ0EsSUFBQSxRQUFBLFFBQUEsS0FBQTtLQUNBLEdBQUEsWUFBQSxLQUFBO0tBQ0E7SUFDQSxHQUFBLFVBQUEsVUFBQSxHQUFBO0lBQ0EsR0FBQSxnQkFBQSxXQUFBLEdBQUE7OztHQUdBLFVBQUEsR0FBQSxZQUFBLFNBQUEsS0FBQTtJQUNBLE1BQUEsWUFBQSxRQUFBLFFBQUEsU0FBQSxZQUFBO0tBQ0EsR0FBQSxjQUFBO0tBQ0EsR0FBQSxZQUFBLFFBQUEsU0FBQSxHQUFBO01BQ0EsR0FBQSxZQUFBLE9BQUEsU0FBQSxHQUFBLFlBQUE7O0tBRUEsR0FBQSxVQUFBLFVBQUEsR0FBQTtLQUNBLEdBQUEsZ0JBQUEsV0FBQSxHQUFBOzs7OztHQUtBLFVBQUEsR0FBQSxXQUFBLFNBQUEsS0FBQTtJQUNBLE1BQUEsWUFBQSxRQUFBLFFBQUEsU0FBQSxZQUFBO0tBQ0EsR0FBQSxnQkFBQTtLQUNBLEdBQUEsYUFBQSxVQUFBLEdBQUE7S0FDQSxHQUFBLGdCQUFBLFdBQUEsR0FBQTs7Ozs7R0FLQSxJQUFBLFNBQUEsYUFBQTtHQUNBLFFBQUEsYUFBQSxRQUFBLFFBQUEsU0FBQSxNQUFBO0lBQ0EsTUFBQSxPQUFBLFNBQUEsR0FBQSxZQUFBLE9BQUEsR0FBQSxZQUFBO0lBQ0EsR0FBQSxhQUFBO0lBQ0EsR0FBQSxXQUFBO0tBQ0EsY0FBQTtLQUNBLGFBQUEsQ0FBQSxNQUFBLE1BQUEsTUFBQTtLQUNBLFVBQUEsR0FBQSxXQUFBO0tBQ0EsV0FBQSxHQUFBLFdBQUEsUUFBQSxHQUFBLEVBQUEsTUFBQSxFQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsR0FBQSxXQUFBLE1BQUEsRUFBQSxHQUFBLFdBQUEsTUFBQSxFQUFBOzs7O0dBSUEsTUFBQSxZQUFBLFFBQUEsUUFBQSxTQUFBLFlBQUE7SUFDQSxJQUFBLGFBQUE7S0FDQSxHQUFBLGNBQUE7S0FDQSxHQUFBLFlBQUEsUUFBQSxTQUFBLEdBQUE7TUFDQSxHQUFBLFlBQUEsT0FBQSxTQUFBLEdBQUEsWUFBQTs7S0FFQSxHQUFBLFVBQUEsVUFBQSxHQUFBO0tBQ0EsR0FBQSxlQUFBLFdBQUEsR0FBQTs7V0FFQTtLQUNBO0tBQ0E7Ozs7R0FJQSxJQUFBLGFBQUEsU0FBQSxZQUFBO0lBQ0EsUUFBQSxFQUFBLFFBQUEsWUFBQSxTQUFBLEdBQUE7TUFDQSxPQUFBLEdBQUE7Ozs7R0FJQSxJQUFBLGFBQUEsU0FBQSxZQUFBO01BQ0EsSUFBQSxjQUFBLEVBQUEsTUFBQSxHQUFBLElBQUEsWUFBQTtXQUNBLE9BQUEsRUFBQSxNQUFBLEdBQUEsSUFBQSxZQUFBO2VBQ0EsT0FBQSxFQUFBLGNBQUEsR0FBQSxVQUFBLElBQUEsTUFBQTs7OztJQUlBLEtBQUEsYUFBQTtLQUNBLEtBQUEsSUFBQSxJQUFBLFlBQUEsU0FBQSxHQUFBLEtBQUEsR0FBQSxLQUFBO01BQ0EsSUFBQSxjQUFBO01BQ0EsSUFBQSxJQUFBO01BQ0EsSUFBQSxLQUFBO01BQ0EsSUFBQSxJQUFBLEVBQUEsUUFBQSxZQUFBLEdBQUEsV0FBQSxZQUFBLEdBQUE7TUFDQSxHQUFBLFlBQUEsSUFBQSxFQUFBLFFBQUEsWUFBQSxHQUFBLFFBQUEsWUFBQSxHQUFBLFNBQUEsSUFBQSxFQUFBLFFBQUEsWUFBQSxHQUFBLE9BQUEsWUFBQSxHQUFBO01BQ0EsWUFBQSxHQUFBLEdBQUEsV0FBQTtNQUNBLFlBQUEsR0FBQSxHQUFBLGVBQUEsWUFBQSxHQUFBLFFBQUE7TUFDQSxJQUFBLFNBQUE7TUFDQSxPQUFBLEtBQUEsWUFBQSxHQUFBLFNBQUEsWUFBQSxHQUFBO01BQ0EsT0FBQSxTQUFBLFlBQUEsR0FBQSxRQUFBO01BQ0EsT0FBQSxRQUFBLFlBQUEsR0FBQTtNQUNBLFlBQUEsR0FBQSxHQUFBLElBQUEsS0FBQTtNQUNBOztJQUVBLE9BQUE7OztHQUdBLEdBQUEsSUFBQSxZQUFBLFVBQUEsT0FBQTtVQUNBLFVBQUE7Ozs7QUM3R0EsQ0FBQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsV0FBQSxrQkFBQTs7RUFFQSxnQkFBQSxVQUFBLENBQUEsV0FBQSxTQUFBLFNBQUEsWUFBQSxTQUFBOztFQUVBLFNBQUEsZ0JBQUEsU0FBQSxPQUFBLE9BQUEsVUFBQSxPQUFBLFdBQUE7R0FDQSxJQUFBLE9BQUE7R0FDQSxHQUFBLFFBQUE7R0FDQSxHQUFBLFFBQUE7O0dBRUEsU0FBQSxPQUFBO0lBQ0EsUUFBQSxNQUFBLEdBQUEsTUFBQSxRQUFBLFNBQUEsS0FBQTtLQUNBLElBQUEsS0FBQSxTQUFBO01BQ0EsTUFBQSxJQUFBLE1BQUEsS0FBQTtNQUNBLE1BQUEsU0FBQSxRQUFBLE9BQUEsb0JBQUEsS0FBQTtNQUNBLE9BQUEsS0FBQTtZQUNBO01BQ0EsT0FBQSxRQUFBLElBQUE7O09BRUEsS0FBQSxTQUFBLE1BQUE7S0FDQSxVQUFBLEtBQUE7S0FDQSxVQUFBLEtBQUE7T0FDQSxLQUFBLFVBQUE7S0FDQSxJQUFBLFVBQUEsWUFBQSxPQUFBLFFBQUEsU0FBQTtNQUNBLElBQUEsYUFBQSxVQUFBLFlBQUEsT0FBQTtNQUNBLElBQUEsV0FBQSxNQUFBLFdBQUEsT0FBQSxHQUFBLFdBQUEsV0FBQSxNQUFBO09BQ0EsT0FBQSxPQUFBLEdBQUE7WUFDQTtPQUNBLE9BQUEsT0FBQSxHQUFBO09BQ0E7VUFDQTtNQUNBLE9BQUEsT0FBQSxHQUFBOzs7SUFHQTtHQUNBOztBQzNDQSxDQUFBLENBQUEsVUFBQTtDQUNBO0NBQ0E7R0FDQSxPQUFBLGFBQUEsQ0FBQTtHQUNBLE9BQUE7O0VBRUEsYUFBQSxVQUFBLENBQUEsaUJBQUEscUJBQUE7O0VBRUEsU0FBQSxhQUFBLGVBQUEsb0JBQUEsbUJBQUE7TUFDQTtRQUNBLFVBQUE7O01BRUE7V0FDQSxNQUFBLE9BQUE7Y0FDQSxNQUFBO2NBQ0EsV0FBQTtjQUNBLFdBQUE7O1dBRUEsTUFBQSxhQUFBO2NBQ0EsTUFBQTtjQUNBLGFBQUE7Y0FDQSxhQUFBO2NBQ0EsZUFBQTs7V0FFQSxNQUFBLFdBQUE7Y0FDQSxNQUFBO2NBQ0EsY0FBQTs7OztHQUlBO0tBQ0EsTUFBQSxZQUFBO2NBQ0EsVUFBQTtjQUNBLEtBQUE7Y0FDQSxhQUFBO2NBQ0EsT0FBQTtrQkFDQSxnQkFBQTtrQkFDQSxPQUFBLENBQUE7OztXQUdBLE1BQUEsa0JBQUE7Y0FDQSxLQUFBO2NBQ0EsYUFBQTtjQUNBLGFBQUE7Y0FDQSxlQUFBO2NBQ0EsT0FBQTtrQkFDQSxnQkFBQTtrQkFDQSxPQUFBLENBQUE7OztXQUdBLE1BQUEsa0JBQUE7Y0FDQSxNQUFBO2NBQ0EsY0FBQTtjQUNBLGFBQUE7Y0FDQSxlQUFBO2NBQ0EsT0FBQTtrQkFDQSxnQkFBQTtrQkFDQSxPQUFBLENBQUE7OztXQUdBLE1BQUEsZ0JBQUE7Y0FDQSxXQUFBO2NBQ0EsV0FBQTs7V0FFQSxNQUFBLHVCQUFBO2NBQ0EsS0FBQTtjQUNBLGFBQUE7Y0FDQSxhQUFBO2NBQ0EsZUFBQTs7V0FFQSxNQUFBLG9CQUFBO2NBQ0EsTUFBQTtjQUNBLGNBQUE7Y0FDQSxhQUFBO2NBQ0EsZUFBQTs7V0FFQSxNQUFBLHFCQUFBO2NBQ0EsTUFBQTtjQUNBLGNBQUE7Y0FDQSxhQUFBO2NBQ0EsZUFBQTs7V0FFQSxNQUFBLHFCQUFBO2NBQ0EsTUFBQTtjQUNBLGNBQUE7Y0FDQSxhQUFBO2NBQ0EsZUFBQTs7V0FFQSxNQUFBLGtCQUFBO2NBQ0EsTUFBQTtjQUNBLGNBQUE7Y0FDQSxhQUFBO2NBQ0EsZUFBQTs7V0FFQSxNQUFBLG9CQUFBO2NBQ0EsV0FBQTtjQUNBLFdBQUE7O1dBRUEsTUFBQSwyQkFBQTtjQUNBLEtBQUE7Y0FDQSxhQUFBO2NBQ0EsYUFBQTtjQUNBLGVBQUE7O1dBRUEsTUFBQSx5QkFBQTtXQUNBLE1BQUE7V0FDQSxXQUFBOztXQUVBLE1BQUEsMEJBQUE7Y0FDQSxLQUFBO2NBQ0EsZUFBQTtjQUNBLGVBQUE7Y0FDQSxlQUFBOztXQUVBLE1BQUEsa0JBQUE7Y0FDQSxXQUFBO2NBQ0EsV0FBQTs7V0FFQSxNQUFBLHdCQUFBO2NBQ0EsS0FBQTtjQUNBLGVBQUE7Y0FDQSxlQUFBO2NBQ0EsZUFBQTs7V0FFQSxNQUFBLHdCQUFBO2NBQ0EsS0FBQTtjQUNBLGVBQUE7Y0FDQSxlQUFBO2NBQ0EsZUFBQTs7V0FFQSxNQUFBLGdCQUFBO2NBQ0EsV0FBQTtjQUNBLFdBQUE7O1dBRUEsTUFBQSxvQkFBQTtjQUNBLEtBQUE7Y0FDQSxjQUFBO2NBQ0EsYUFBQTtjQUNBLGVBQUE7O1dBRUEsTUFBQSxvQkFBQTtjQUNBLEtBQUE7Y0FDQSxjQUFBO2NBQ0EsYUFBQTtjQUNBLGVBQUE7Ozs7O0FDaEpBLENBQUEsVUFBQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsV0FBQSxzQkFBQTs7Q0FFQSxvQkFBQSxVQUFBLENBQUEsYUFBQSxhQUFBLFdBQUE7Q0FDQSxTQUFBLG9CQUFBLFdBQUEsV0FBQSxTQUFBLFVBQUE7RUFDQSxJQUFBLEtBQUE7O0VBRUEsVUFBQSxhQUFBLFFBQUEsYUFBQSxRQUFBLFNBQUEsU0FBQTtHQUNBLE9BQUEsR0FBQSxXQUFBOzs7RUFHQSxRQUFBLGtCQUFBLFFBQUEsU0FBQSxNQUFBO0dBQ0EsT0FBQSxHQUFBLFFBQUE7OztFQUdBLFVBQUEsR0FBQSxZQUFBLFNBQUEsS0FBQTtHQUNBLE9BQUEsR0FBQSxNQUFBLEtBQUE7OztFQUdBLFVBQUEsR0FBQSxpQkFBQSxTQUFBLGVBQUE7R0FDQSxHQUFBLFFBQUEsR0FBQSxNQUFBLE9BQUEsU0FBQSxNQUFBO0lBQ0EsT0FBQSxLQUFBLFlBQUEsZUFBQTs7OztFQUlBLFVBQUEsR0FBQSxhQUFBLFNBQUEsV0FBQTtHQUNBLEdBQUEsUUFBQSxHQUFBLE1BQUEsT0FBQSxTQUFBLE1BQUE7SUFDQSxPQUFBLEtBQUEsWUFBQSxXQUFBOzs7O0VBSUEsR0FBQSxJQUFBLFlBQUEsVUFBQSxPQUFBO1NBQ0EsT0FBQSxVQUFBOzs7O0FDdkNBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxXQUFBLHdCQUFBOztDQUVBLHNCQUFBLFVBQUEsQ0FBQSxXQUFBOztDQUVBLFNBQUEsdUJBQUEsVUFBQSxXQUFBO0VBQ0EsSUFBQSxLQUFBO0VBQ0EsSUFBQSxTQUFBLFFBQUE7O0VBRUEsVUFBQSxZQUFBLFFBQUEsUUFBQSxTQUFBLE9BQUE7R0FDQSxHQUFBLFdBQUE7R0FDQSxHQUFBLGVBQUEsR0FBQSxPQUFBLFFBQUEsT0FBQSxTQUFBLFFBQUE7SUFDQSxPQUFBLE9BQUEsVUFBQTs7O0VBR0E7O0FDdkJBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxXQUFBLDRCQUFBOztDQUVBLDBCQUFBLFVBQUEsQ0FBQSxhQUFBLGVBQUEsYUFBQSxhQUFBLFdBQUEsV0FBQSxVQUFBOztDQUVBLFNBQUEsMEJBQUEsV0FBQSxhQUFBLFdBQUEsV0FBQSxTQUFBLFNBQUEsUUFBQSxhQUFBO0VBQ0EsSUFBQSxLQUFBO0VBQ0EsSUFBQSxVQUFBLFFBQUE7RUFDQSxHQUFBLFNBQUE7RUFDQSxHQUFBLFFBQUE7O0VBRUEsVUFBQSxZQUFBLFFBQUEsUUFBQSxTQUFBLE9BQUE7R0FDQSxHQUFBLFNBQUE7R0FDQSxHQUFBLFdBQUEsT0FBQSxPQUFBLEtBQUEsTUFBQSxRQUFBLEtBQUE7R0FDQSxJQUFBLFVBQUEsRUFBQSxNQUFBLE9BQUEsUUFBQSxPQUFBLFNBQUEsUUFBQSxFQUFBLE9BQUEsT0FBQSxRQUFBLFFBQUE7R0FDQSxHQUFBLE9BQUEsaUJBQUEsT0FBQTtHQUNBLEdBQUEsT0FBQSxrQkFBQTtHQUNBLEdBQUEsY0FBQTtHQUNBLEVBQUEsSUFBQSxHQUFBLE9BQUEsUUFBQSxTQUFBLE9BQUE7SUFDQSxPQUFBLFdBQUEsRUFBQSxNQUFBLEVBQUEsS0FBQSxNQUFBLEdBQUEsT0FBQSxRQUFBLE9BQUEsR0FBQTtJQUNBLE9BQUEsVUFBQSxPQUFBLFFBQUEsT0FBQTs7OztFQUlBLFNBQUEsTUFBQSxPQUFBO0dBQ0EsT0FBQSxXQUFBLENBQUEsT0FBQTtHQUNBLE9BQUEsWUFBQSxDQUFBLE9BQUE7R0FDQSxPQUFBLFlBQUEsT0FBQSxRQUFBLE9BQUE7R0FDQTs7O0VBR0EsU0FBQSxNQUFBO0dBQ0EsSUFBQSxpQkFBQSxHQUFBLE9BQUEsUUFBQSxPQUFBLFNBQUEsUUFBQTtJQUNBLE9BQUEsT0FBQTs7O0dBR0EsVUFBQSxjQUFBO0lBQ0EsYUFBQSxHQUFBLE9BQUE7SUFDQSxhQUFBLEdBQUEsT0FBQTtJQUNBLGVBQUEsZUFBQTtJQUNBLGlCQUFBLEdBQUEsT0FBQTtJQUNBLFlBQUEsR0FBQSxPQUFBOztHQUVBLFFBQUEsUUFBQTtHQUNBO0VBQ0E7OztBQ3JEQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7OztDQU9BO0dBQ0EsT0FBQSxnQkFBQTtHQUNBLFdBQUEscUJBQUE7O0NBRUEsbUJBQUEsVUFBQSxDQUFBLGVBQUEsU0FBQSxVQUFBLGFBQUEsVUFBQTtDQUNBLFNBQUEsbUJBQUEsYUFBQSxPQUFBLFFBQUEsV0FBQSxRQUFBLFFBQUE7RUFDQSxJQUFBLEtBQUE7RUFDQSxRQUFBLE1BQUEsUUFBQSxhQUFBLFFBQUEsU0FBQSxNQUFBO0dBQ0EsR0FBQSxRQUFBO0dBQ0EsUUFBQSxVQUFBLEdBQUEsTUFBQSxhQUFBLFFBQUEsS0FBQSxRQUFBLFNBQUEsTUFBQTtLQUNBLE9BQUEsR0FBQSxjQUFBOzs7O0VBSUEsVUFBQSxhQUFBLFFBQUEsYUFBQSxRQUFBLFNBQUEsU0FBQTtNQUNBLE9BQUEsR0FBQSxhQUFBOzs7RUFHQSxPQUFBLFFBQUEsUUFBQSxTQUFBLEtBQUE7TUFDQSxPQUFBLEdBQUEsV0FBQTs7O0VBR0EsR0FBQSxhQUFBLFlBQUE7S0FDQSxJQUFBLGdCQUFBLE9BQUEsS0FBQTtPQUNBLGFBQUE7T0FDQSxZQUFBO09BQ0EsTUFBQTtPQUNBLFVBQUE7UUFDQSxTQUFBLFVBQUE7U0FDQSxPQUFBLEdBQUEsS0FBQTs7UUFFQSxhQUFBLFVBQUE7U0FDQSxPQUFBLEdBQUE7O1FBRUEsV0FBQSxVQUFBO1NBQ0EsT0FBQSxHQUFBOztRQUVBLFFBQUEsVUFBQTtTQUNBLE9BQUE7O1FBRUEsY0FBQSxVQUFBO1NBQ0EsT0FBQTs7Ozs7O0dBTUEsR0FBQSxXQUFBLFVBQUE7SUFDQSxJQUFBLGdCQUFBLE9BQUEsS0FBQTtPQUNBLGFBQUE7T0FDQSxZQUFBO09BQ0EsTUFBQTtPQUNBLFVBQUE7UUFDQSxTQUFBLFVBQUE7U0FDQSxPQUFBLEdBQUEsS0FBQSxHQUFBLE1BQUEsYUFBQSxRQUFBOztRQUVBLGFBQUEsVUFBQTtTQUNBLE9BQUEsR0FBQTs7UUFFQSxXQUFBLFVBQUE7U0FDQSxLQUFBLElBQUEsSUFBQSxHQUFBLFNBQUEsU0FBQSxHQUFBLEtBQUEsR0FBQSxLQUFBO1VBQ0EsS0FBQSxJQUFBLElBQUEsR0FBQSxZQUFBLEtBQUEsU0FBQSxHQUFBLEtBQUEsR0FBQSxLQUFBO1dBQ0EsS0FBQSxHQUFBLFNBQUEsR0FBQSxjQUFBLEdBQUEsWUFBQSxLQUFBLEdBQUEsWUFBQTtZQUNBLE9BQUEsR0FBQSxTQUFBLEdBQUEsWUFBQTtZQUNBO1dBQ0E7VUFDQTtTQUNBLE9BQUEsR0FBQTs7UUFFQSxRQUFBLFVBQUE7U0FDQSxPQUFBOztRQUVBLGNBQUEsVUFBQTtTQUNBLE9BQUEsR0FBQTs7Ozs7OztBQ2pGQSxDQUFBLFVBQUE7Ozs7OztDQU1BO0dBQ0EsT0FBQSxnQkFBQTtHQUNBLFdBQUEscUJBQUE7O0NBRUEsbUJBQUEsVUFBQSxDQUFBLGFBQUEsZ0JBQUEsYUFBQSxXQUFBO0NBQ0EsU0FBQSxtQkFBQSxXQUFBLGNBQUEsV0FBQSxTQUFBLEdBQUE7RUFDQSxJQUFBLEtBQUE7RUFDQSxJQUFBLFdBQUEsYUFBQTs7RUFFQSxVQUFBLG9CQUFBLFVBQUEsUUFBQSxTQUFBLE9BQUE7R0FDQSxHQUFBLFNBQUE7R0FDQSxHQUFBLGNBQUEsR0FBQSxPQUFBLFFBQUEsT0FBQSxTQUFBLFFBQUE7SUFDQSxPQUFBLE9BQUEsVUFBQTs7Ozs7O0FDbEJBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxRQUFBLFNBQUE7O0NBRUEsT0FBQSxVQUFBLENBQUEsS0FBQTs7Q0FFQSxTQUFBLFFBQUE7RUFDQSxJQUFBLE1BQUE7RUFDQSxJQUFBLDRCQUFBLFdBQUE7U0FDQSxJQUFBLFdBQUEsR0FBQTtTQUNBLFVBQUEsWUFBQTthQUNBLFNBQUEsVUFBQSxFQUFBLFNBQUEsUUFBQSxTQUFBO2FBQ0EsU0FBQSxPQUFBLEVBQUEsU0FBQSxRQUFBOztTQUVBLE9BQUEsU0FBQTs7O0tBR0EsSUFBQSxvQkFBQSxTQUFBLFFBQUE7TUFDQSxJQUFBLFdBQUEsR0FBQTs7TUFFQSxJQUFBLFdBQUEsSUFBQSxPQUFBLEtBQUE7TUFDQSxJQUFBLFVBQUE7UUFDQSxTQUFBLFFBQUEsRUFBQSxXQUFBLFdBQUEsVUFBQSxTQUFBLFFBQUE7V0FDQSxJQUFBLFVBQUEsT0FBQSxLQUFBLGVBQUEsSUFBQTtjQUNBLFNBQUEsUUFBQSxRQUFBLEdBQUEsU0FBQTs7Z0JBRUE7Y0FDQSxTQUFBLFNBQUEsdUJBQUE7Ozs7S0FJQSxPQUFBLFNBQUE7OztLQUdBLElBQUEsb0JBQUEsU0FBQSxNQUFBO01BQ0EsT0FBQSxNQUFBLElBQUEsNkJBQUE7OztLQUdBLElBQUEsY0FBQSxVQUFBLFdBQUEsUUFBQTs7TUFFQSxJQUFBLE9BQUEsT0FBQSxVQUFBLFdBQUEsYUFBQTtLQUNBLE9BQUEsVUFBQSxRQUFBLFdBQUE7T0FDQSxPQUFBLE1BQUEsS0FBQSxLQUFBOzs7R0FHQSxJQUFBLElBQUE7R0FDQSxJQUFBLE9BQUEsQ0FBQSxPQUFBLE1BQUEsU0FBQSxNQUFBO0dBQ0EsSUFBQSxPQUFBLENBQUEsT0FBQSxNQUFBLFNBQUEsTUFBQTtHQUNBLElBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxLQUFBLEtBQUEsSUFBQSxLQUFBO1dBQ0EsS0FBQSxJQUFBLFNBQUEsSUFBQSxXQUFBLEtBQUEsSUFBQSxPQUFBLElBQUE7V0FDQSxLQUFBLElBQUEsS0FBQSxLQUFBLEtBQUEsSUFBQSxLQUFBO0dBQ0EsSUFBQSxJQUFBLElBQUEsS0FBQSxNQUFBLEtBQUEsS0FBQSxJQUFBLEtBQUEsS0FBQSxFQUFBO0dBQ0EsT0FBQSxJQUFBOzs7S0FHQSxJQUFBLGtCQUFBLFVBQUE7TUFDQSxPQUFBLEVBQUEsTUFBQSxhQUFBLE9BQUEsYUFBQSxVQUFBOztFQUVBOztBQ2pFQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBLGNBQUE7R0FDQSxXQUFBLG1CQUFBOztDQUVBLGlCQUFBLFVBQUE7Q0FDQSxTQUFBLGlCQUFBLFVBQUEsUUFBQSxXQUFBLE9BQUEsV0FBQSxTQUFBLFFBQUE7RUFDQSxJQUFBLEtBQUE7RUFDQSxHQUFBLGVBQUEsU0FBQSxPQUFBO0VBQ0EsR0FBQSxTQUFBOzs7RUFHQSxVQUFBLFVBQUE7R0FDQSxPQUFBLE9BQUE7R0FDQSxHQUFBLGVBQUEsU0FBQSxPQUFBO0tBQ0E7O0VBRUEsU0FBQSxRQUFBO0dBQ0EsSUFBQSxVQUFBLFFBQUE7R0FDQSxVQUFBLEtBQUE7R0FDQSxPQUFBLEdBQUE7R0FDQTs7OztBQzNCQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBLFdBQUE7R0FDQSxXQUFBLHFCQUFBOztDQUVBLG1CQUFBLFVBQUEsQ0FBQSxlQUFBO0NBQ0EsU0FBQSxtQkFBQSxhQUFBLE9BQUE7RUFDQSxJQUFBLEtBQUE7O0VBRUEsT0FBQSw0QkFBQSxLQUFBLFNBQUEsTUFBQTtTQUNBLEdBQUEsT0FBQSxNQUFBLE1BQUE7U0FDQSxHQUFBLE9BQUEsTUFBQSxNQUFBO1NBQ0EsR0FBQSxPQUFBLE9BQUE7OztLQUdBLFFBQUEsT0FBQSxJQUFBO1NBQ0EsUUFBQTthQUNBLEtBQUE7YUFDQSxLQUFBO2FBQ0EsTUFBQTs7U0FFQSxVQUFBO2FBQ0EsTUFBQTs7OztLQUlBLFlBQUEsU0FBQSxLQUFBLFNBQUEsS0FBQTtPQUNBLElBQUEsYUFBQSxHQUFBLFNBQUEsS0FBQTtPQUNBLElBQUEsR0FBQSxnQkFBQSxVQUFBLEdBQUE7U0FDQSxJQUFBLFFBQUEsRUFBQTtTQUNBLFdBQUEsU0FBQTs7U0FFQSxtQkFBQSxLQUFBLE1BQUE7Ozs7OztBQ3RDQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsV0FBQSwrQkFBQTs7Q0FFQSw2QkFBQSxVQUFBLENBQUEsV0FBQSxhQUFBLFVBQUE7Q0FDQSxTQUFBLDZCQUFBLFNBQUEsV0FBQSxRQUFBLGVBQUE7RUFDQSxJQUFBLEtBQUE7RUFDQSxHQUFBLE9BQUE7RUFDQSxHQUFBLE9BQUE7RUFDQSxHQUFBLFNBQUE7O0VBRUEsU0FBQSxNQUFBO0dBQ0EsSUFBQSxFQUFBLFFBQUEsR0FBQSxPQUFBO0lBQ0EsUUFBQSxJQUFBO1NBQ0E7SUFDQSxJQUFBLENBQUEsR0FBQSxLQUFBLFNBQUE7S0FDQSxRQUFBLElBQUE7S0FDQSxJQUFBLENBQUEsR0FBQSxLQUFBLFVBQUE7TUFDQSxRQUFBLElBQUE7TUFDQTtXQUNBLElBQUEsQ0FBQSxHQUFBLEtBQUEsVUFBQTtLQUNBLFFBQUEsSUFBQTtTQUNBO0tBQ0EsUUFBQSxTQUFBLEdBQUE7S0FDQSxVQUFBLFdBQUEsT0FBQTtLQUNBLGVBQUEsTUFBQSxHQUFBO0tBQ0E7SUFDQTtHQUNBOztFQUVBLFNBQUEsUUFBQTtHQUNBLGVBQUEsUUFBQTtHQUNBO0VBQ0E7O0FDeENBLENBQUEsVUFBQTtDQUNBOzs7Ozs7O0NBT0E7R0FDQSxPQUFBO0dBQ0EsV0FBQSx1QkFBQTs7Q0FFQSxxQkFBQSxVQUFBLENBQUEsYUFBQSxhQUFBLGdCQUFBLFVBQUEsVUFBQSxVQUFBOztDQUVBLFNBQUEsc0JBQUEsV0FBQSxXQUFBLGNBQUEsUUFBQSxRQUFBLFFBQUEsUUFBQTtFQUNBLElBQUEsS0FBQTs7RUFFQSxHQUFBLFNBQUE7RUFDQSxHQUFBLGdCQUFBO0VBQ0EsSUFBQSxnQkFBQTtFQUNBLEdBQUEsY0FBQSxRQUFBO0VBQ0EsR0FBQSxhQUFBO0VBQ0EsR0FBQSxPQUFBO0VBQ0EsR0FBQSxlQUFBO0VBQ0EsR0FBQSxTQUFBO0VBQ0EsR0FBQSxrQkFBQTtFQUNBLEdBQUEsY0FBQTtFQUNBLEdBQUEsa0JBQUE7O0VBRUEsSUFBQSxhQUFBLFVBQUE7R0FDQSxVQUFBLGFBQUEsYUFBQSxRQUFBLFFBQUEsU0FBQSxRQUFBO0lBQ0EsR0FBQSxVQUFBO0lBQ0EsR0FBQSxRQUFBLFFBQUEsU0FBQSxPQUFBO0tBQ0EsT0FBQSxjQUFBLE9BQUEsU0FBQSxPQUFBLFlBQUE7Ozs7O0VBS0E7O0VBRUEsSUFBQSxvQkFBQSxTQUFBLE1BQUE7R0FDQSxRQUFBLFdBQUEsY0FBQSxNQUFBLFFBQUEsU0FBQSxLQUFBO0lBQ0EsVUFBQSxXQUFBLEtBQUE7SUFDQSxHQUFBLFdBQUE7SUFDQTs7OztFQUlBLElBQUEsZUFBQSxTQUFBLE1BQUE7R0FDQSxHQUFBLGdCQUFBO0dBQ0EsVUFBQSxhQUFBLGVBQUEsUUFBQSxVQUFBO0lBQ0EsR0FBQSxnQkFBQTs7R0FFQSxHQUFBLFdBQUE7R0FDQTs7O0VBR0EsSUFBQSxZQUFBLFNBQUEsTUFBQTtHQUNBLEdBQUEsZ0JBQUE7R0FDQSxHQUFBLFdBQUE7OztFQUdBLFNBQUEsTUFBQTtHQUNBLElBQUEsWUFBQSxFQUFBLE9BQUEsR0FBQSxRQUFBLE9BQUEsU0FBQSxRQUFBLEVBQUEsT0FBQSxPQUFBLFFBQUEsVUFBQTtHQUNBLFVBQUEsT0FBQTtJQUNBLFNBQUEsYUFBQTtJQUNBLFVBQUEsRUFBQSxPQUFBLEdBQUEsVUFBQTtJQUNBLFlBQUE7SUFDQSxXQUFBLFVBQUE7SUFDQSxnQkFBQSxVQUFBO01BQ0EsUUFBQSxVQUFBO0lBQ0EsUUFBQSxRQUFBOztHQUVBOztFQUVBLFNBQUEsY0FBQTtHQUNBLElBQUEsZ0JBQUEsT0FBQSxLQUFBO09BQ0EsYUFBQTtPQUNBLFlBQUE7T0FDQSxNQUFBO09BQ0EsVUFBQTtRQUNBLFNBQUEsVUFBQTtTQUNBLE9BQUEsYUFBQTs7UUFFQSxTQUFBLFVBQUE7U0FDQSxPQUFBLEVBQUEsY0FBQTs7Ozs7TUFLQSxjQUFBLE9BQUEsS0FBQSxTQUFBLE9BQUE7T0FDQSxJQUFBLFFBQUE7UUFDQTs7T0FFQSxHQUFBLE9BQUEsS0FBQSxFQUFBLE9BQUEsYUFBQSxLQUFBLGFBQUEsT0FBQSxPQUFBLFVBQUEsT0FBQTs7R0FFQTs7RUFFQSxTQUFBLE9BQUEsT0FBQTtHQUNBLElBQUEsWUFBQTtHQUNBLElBQUEsZ0JBQUEsT0FBQSxLQUFBO09BQ0EsYUFBQTtPQUNBLFlBQUE7T0FDQSxNQUFBO09BQ0EsVUFBQTtRQUNBLFNBQUEsVUFBQTtTQUNBLE9BQUEsYUFBQTs7UUFFQSxTQUFBLFVBQUE7U0FDQSxPQUFBO1VBQ0EsV0FBQSxPQUFBO1VBQ0EsS0FBQSxPQUFBO1VBQ0EsT0FBQSxPQUFBO1VBQ0EsUUFBQSxPQUFBO1VBQ0EsV0FBQSxPQUFBO1VBQ0EsUUFBQSxPQUFBO1VBQ0EsWUFBQSxPQUFBO1VBQ0EsY0FBQSxPQUFBLFlBQUEsWUFBQSxLQUFBLE9BQUEsWUFBQTs7Ozs7O01BTUEsY0FBQSxPQUFBLEtBQUEsU0FBQSxPQUFBO09BQ0E7T0FDQSxHQUFBLE9BQUEsS0FBQSxFQUFBLE9BQUEsVUFBQSxNQUFBLFVBQUEsT0FBQTs7R0FFQTs7RUFFQSxTQUFBLGdCQUFBLE9BQUE7R0FDQSxJQUFBLFFBQUEsR0FBQSxRQUFBLE9BQUEsU0FBQSxRQUFBO0lBQ0EsT0FBQSxPQUFBOzs7R0FHQSxJQUFBLE1BQUEsU0FBQSxJQUFBO0lBQ0EsSUFBQSxnQkFBQSxPQUFBLEtBQUE7UUFDQSxhQUFBO1FBQ0EsWUFBQTtRQUNBLE1BQUE7UUFDQSxVQUFBO1NBQ0EsU0FBQSxVQUFBO1VBQ0EsT0FBQTs7Ozs7SUFLQSxjQUFBLE9BQUEsS0FBQSxTQUFBLE9BQUE7S0FDQTtLQUNBLEdBQUEsT0FBQSxLQUFBLEVBQUEsT0FBQSxTQUFBLE1BQUEsT0FBQSxPQUFBOztVQUVBO0lBQ0EsR0FBQSxPQUFBLEtBQUEsRUFBQSxPQUFBLFlBQUEsTUFBQSxTQUFBLE9BQUEsT0FBQTtJQUNBO0dBQ0E7O0VBRUEsU0FBQSxZQUFBLE9BQUE7R0FDQSxHQUFBLE9BQUEsS0FBQTtJQUNBLE9BQUE7SUFDQSxLQUFBLGFBQUEsT0FBQTtJQUNBLFVBQUE7SUFDQSxVQUFBOztHQUVBLGdCQUFBO0dBQ0E7O0VBRUEsU0FBQSxnQkFBQSxPQUFBO0dBQ0EsSUFBQSxRQUFBLEdBQUEsUUFBQSxPQUFBLFNBQUEsUUFBQTtJQUNBLE9BQUEsT0FBQTs7R0FFQSxJQUFBLE1BQUEsVUFBQSxJQUFBO0lBQ0EsR0FBQSxPQUFBLEtBQUE7S0FDQSxPQUFBO0tBQ0EsS0FBQSxzQkFBQSxPQUFBLE9BQUE7O1NBRUE7SUFDQSxHQUFBLE9BQUEsS0FBQTtLQUNBLE9BQUE7S0FDQSxLQUFBLFlBQUEsT0FBQSxPQUFBO0tBQ0EsVUFBQTtLQUNBLFNBQUE7O0lBRUEsZ0JBQUE7SUFDQTtHQUNBOztFQUVBLFNBQUEsV0FBQSxNQUFBO0dBQ0EsR0FBQSxPQUFBLE9BQUEsTUFBQTtHQUNBOzs7QUMzTEEsQ0FBQSxVQUFBO0NBQ0E7Ozs7Ozs7Q0FPQTtHQUNBLE9BQUEsY0FBQTtHQUNBLFdBQUEsd0JBQUE7O0NBRUEsc0JBQUEsVUFBQSxFQUFBLFlBQUE7Q0FDQSxTQUFBLHVCQUFBLFlBQUEsY0FBQTtFQUNBLElBQUEsS0FBQTs7RUFFQSxHQUFBLFNBQUEsYUFBQTtFQUNBLFVBQUEsYUFBQSxhQUFBLFFBQUEsUUFBQSxTQUFBLFFBQUE7R0FDQSxHQUFBLFVBQUE7R0FDQSxHQUFBLFFBQUEsUUFBQSxTQUFBLE9BQUE7SUFDQSxPQUFBLE9BQUEsY0FBQSxPQUFBLFNBQUEsT0FBQSxZQUFBOzs7RUFHQTs7QUN2QkEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFdBQUEsd0JBQUE7O0NBRUEsc0JBQUEsVUFBQSxDQUFBLFVBQUEsYUFBQSxrQkFBQSxVQUFBLFNBQUEsYUFBQTtDQUNBLFNBQUEsc0JBQUEsUUFBQSxXQUFBLGdCQUFBLFFBQUEsT0FBQSxXQUFBLFFBQUE7RUFDQSxJQUFBLEtBQUE7RUFDQSxHQUFBLFNBQUE7RUFDQSxHQUFBLFNBQUEsRUFBQSxPQUFBLE9BQUE7RUFDQSxHQUFBLFNBQUE7RUFDQSxHQUFBLFNBQUE7RUFDQSxHQUFBLFNBQUE7O0VBRUEsR0FBQSxTQUFBO0dBQ0EsU0FBQSxPQUFBLE9BQUE7R0FDQSxVQUFBLE9BQUEsUUFBQTtHQUNBLFlBQUE7R0FDQSxZQUFBLENBQUEsT0FBQSxNQUFBLE1BQUEsTUFBQSxNQUFBO0dBQ0EsWUFBQSxPQUFBLFVBQUE7R0FDQSxjQUFBLE9BQUEsZ0JBQUE7R0FDQSxhQUFBLE9BQUEsY0FBQTtHQUNBLFlBQUE7R0FDQSxZQUFBLENBQUEsTUFBQSxPQUFBLEtBQUEsTUFBQSxRQUFBO0dBQ0EsVUFBQSxRQUFBO0dBQ0EsWUFBQSxDQUFBLFdBQUE7OztFQUdBLFVBQUEsYUFBQSxRQUFBLGFBQUEsUUFBQSxTQUFBLFNBQUE7R0FDQSxHQUFBLFdBQUE7R0FDQSxJQUFBLENBQUEsR0FBQSxPQUFBO0lBQ0EsSUFBQSxhQUFBO0lBQ0EsS0FBQSxJQUFBLElBQUEsU0FBQSxTQUFBLEdBQUEsS0FBQSxHQUFBLEtBQUE7S0FDQSxXQUFBLEtBQUEsU0FBQSxHQUFBO0tBQ0E7SUFDQSxHQUFBLE9BQUEsV0FBQTtJQUNBOzs7RUFHQSxJQUFBLGtCQUFBLFNBQUEsT0FBQTtHQUNBLElBQUEsVUFBQSxPQUFBLE1BQUEsSUFBQSxNQUFBLENBQUEsR0FBQSxLQUFBO0dBQ0EsSUFBQSxVQUFBLFFBQUEsVUFBQSxNQUFBO0lBQ0EsT0FBQTtTQUNBO0lBQ0EsT0FBQSxPQUFBLE1BQUEsSUFBQSxNQUFBLEVBQUEsR0FBQSxLQUFBO0lBQ0E7OztFQUdBLFNBQUEsTUFBQTtHQUNBLElBQUEsR0FBQSxPQUFBLE1BQUE7SUFDQSxHQUFBLE9BQUEsa0JBQUEsZ0JBQUEsR0FBQSxPQUFBO0lBQ0EsVUFBQSxPQUFBLEdBQUEsUUFBQSxRQUFBLFVBQUE7S0FDQSxHQUFBLE9BQUEsY0FBQSxPQUFBLFNBQUEsU0FBQSxHQUFBLE9BQUEsYUFBQTtPQUNBLEtBQUEsVUFBQTtLQUNBLGVBQUEsTUFBQSxHQUFBOztTQUVBOztJQUVBO0dBQ0E7O0VBRUEsU0FBQSxRQUFBO0dBQ0EsSUFBQSxlQUFBO01BQ0EsWUFBQSxPQUFBO01BQ0EsT0FBQTtNQUNBLFNBQUEsR0FBQSxPQUFBO01BQ0EsU0FBQSxHQUFBLE9BQUE7TUFDQSxVQUFBLEdBQUEsT0FBQTtNQUNBLFNBQUEsR0FBQSxPQUFBO01BQ0EsY0FBQSxHQUFBLE9BQUE7TUFDQSxhQUFBLEdBQUEsT0FBQTtNQUNBLGtCQUFBLGdCQUFBLEdBQUEsT0FBQTs7O0dBR0EsSUFBQSxHQUFBLE9BQUEsTUFBQTtJQUNBLFVBQUEsaUJBQUE7SUFDQSxlQUFBLE1BQUE7VUFDQTs7SUFFQTtHQUNBOztFQUVBLFNBQUEsUUFBQTtHQUNBLGVBQUEsUUFBQTtHQUNBO0VBQ0E7O0FDM0ZBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxRQUFBLFlBQUE7O0NBRUEsVUFBQSxVQUFBLENBQUE7O0NBRUEsU0FBQSxXQUFBO0VBQ0EsSUFBQSxNQUFBO0VBQ0EsSUFBQSxRQUFBO0VBQ0EsSUFBQSxlQUFBO0VBQ0EsSUFBQSxjQUFBO0VBQ0EsSUFBQSxTQUFBO0VBQ0EsSUFBQSxTQUFBO0VBQ0EsSUFBQSxlQUFBO0VBQ0EsSUFBQSxtQkFBQTtFQUNBLElBQUEsa0JBQUE7RUFDQSxJQUFBLGFBQUE7RUFDQSxJQUFBLGFBQUE7RUFDQSxJQUFBLGVBQUE7O0VBRUEsU0FBQSxPQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUE7R0FDQTs7RUFFQSxTQUFBLGNBQUEsUUFBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLGtCQUFBO0dBQ0E7O0VBRUEsU0FBQSxZQUFBLE9BQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSxnQ0FBQTtHQUNBOztFQUVBLFNBQUEsT0FBQSxPQUFBO0dBQ0EsT0FBQSxNQUFBLEtBQUEsaUJBQUE7R0FDQTs7RUFFQSxTQUFBLE9BQUEsT0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLGlCQUFBLE9BQUE7R0FDQTs7RUFFQSxTQUFBLGFBQUEsT0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLDJDQUFBLE9BQUEsVUFBQTtHQUNBOztFQUVBLFNBQUEsaUJBQUEsYUFBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLDJCQUFBLGFBQUEsV0FBQTs7O0VBR0EsU0FBQSxnQkFBQSxXQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEscUJBQUEsV0FBQSxVQUFBO0dBQ0E7O0VBRUEsU0FBQSxXQUFBLFNBQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSwrQkFBQTtHQUNBOztFQUVBLFNBQUEsV0FBQSxTQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEsdUNBQUE7R0FDQTs7RUFFQSxTQUFBLGFBQUEsT0FBQTtHQUNBLE9BQUEsTUFBQSxPQUFBLGtCQUFBLE9BQUE7R0FDQTs7O0FDckVBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxRQUFBLFNBQUE7O0NBRUEsT0FBQSxVQUFBLENBQUE7O0NBRUEsU0FBQSxPQUFBLE1BQUE7RUFDQSxJQUFBLE1BQUE7RUFDQSxJQUFBLFFBQUE7RUFDQSxTQUFBLE9BQUE7R0FDQSxPQUFBLE1BQUEsSUFBQTtJQUNBO0VBQ0E7OztBQ25CQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7OztDQU9BO0dBQ0EsT0FBQTtHQUNBLFdBQUEsMEJBQUE7O0NBRUEsd0JBQUEsVUFBQSxDQUFBLFdBQUEsYUFBQSxXQUFBLGdCQUFBOztDQUVBLFNBQUEsd0JBQUEsU0FBQSxXQUFBLFNBQUEsY0FBQSxPQUFBOztFQUVBLElBQUEsS0FBQTtFQUNBLElBQUEsU0FBQSxRQUFBOztFQUVBLFVBQUEsb0JBQUEsUUFBQSxRQUFBLFNBQUEsT0FBQTtHQUNBLEdBQUEsVUFBQSxPQUFBLFFBQUEsT0FBQSxTQUFBLFFBQUE7SUFDQSxPQUFBLFlBQUEsT0FBQSxTQUFBLE9BQUEsYUFBQTtJQUNBLE9BQUEsT0FBQSxVQUFBOzs7O0VBSUEsUUFBQSxhQUFBLGFBQUEsUUFBQSxRQUFBLFNBQUEsTUFBQTtHQUNBLEdBQUEsYUFBQTtHQUNBLEdBQUEsaUJBQUEsTUFBQTtHQUNBLElBQUEsTUFBQSxVQUFBO0lBQ0EsSUFBQSxXQUFBLEtBQUEsTUFBQSxNQUFBO0lBQ0EsR0FBQSxRQUFBLGFBQUE7S0FDQSxNQUFBLE9BQUEsU0FBQTtLQUNBLE1BQUEsT0FBQSxTQUFBO0tBQ0EsVUFBQTs7O0lBR0EsR0FBQSxnQkFBQSxNQUFBO0lBQ0E7S0FDQSxLQUFBLFVBQUE7R0FDQSxHQUFBLGVBQUEsUUFBQSxTQUFBLE9BQUE7SUFDQSxPQUFBLFFBQUEsUUFBQSxTQUFBLE9BQUE7S0FDQSxJQUFBLE9BQUEsWUFBQSxPQUFBLE9BQUE7TUFDQSxPQUFBLG9CQUFBLE9BQUEsbUJBQUEsT0FBQSxPQUFBO01BQ0E7S0FDQSxJQUFBLE9BQUEsaUJBQUEsT0FBQSxNQUFBO01BQ0EsT0FBQSx5QkFBQSxPQUFBLGtCQUFBLE9BQUEsT0FBQTtNQUNBOzs7SUFHQSxJQUFBLEdBQUEsY0FBQTtLQUNBLEdBQUEsY0FBQSxRQUFBLFNBQUEsYUFBQTtNQUNBLElBQUEsU0FBQSxLQUFBLE1BQUE7TUFDQSxJQUFBLE9BQUEsUUFBQSxPQUFBLE1BQUE7T0FDQSxPQUFBLHlCQUFBLEtBQUEsTUFBQSxFQUFBLE9BQUEsSUFBQSxPQUFBO09BQ0E7O0tBRUE7Ozs7T0FJQSxPQUFBLDRCQUFBLEtBQUEsU0FBQSxNQUFBO1NBQ0EsR0FBQSxPQUFBLE1BQUEsTUFBQTtTQUNBLEdBQUEsT0FBQSxNQUFBLE1BQUE7U0FDQSxHQUFBLE9BQUEsT0FBQTtTQUNBLEdBQUEsUUFBQSxTQUFBO1VBQ0EsTUFBQSxHQUFBLE9BQUE7VUFDQSxNQUFBLEdBQUEsT0FBQTtVQUNBLFVBQUE7Ozs7S0FJQSxRQUFBLE9BQUEsSUFBQTtTQUNBLFFBQUE7YUFDQSxLQUFBO2FBQ0EsS0FBQTthQUNBLE1BQUE7O1NBRUEsU0FBQTs7OztBQzlFQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsV0FBQSx3QkFBQTtDQUNBLHNCQUFBLFVBQUEsQ0FBQSxXQUFBO0NBQ0EsU0FBQSx1QkFBQTtFQUNBLElBQUEsS0FBQTtFQUNBLElBQUEsZ0JBQUE7R0FDQSxXQUFBLFFBQUE7R0FDQSxjQUFBLFFBQUE7R0FDQSxVQUFBLFFBQUE7OztFQUdBLFFBQUEsa0JBQUEsZUFBQSxRQUFBLFNBQUEsTUFBQTtHQUNBLEdBQUEsUUFBQTtHQUNBLE1BQUEsUUFBQSxTQUFBLE1BQUE7SUFDQSxNQUFBLG1CQUFBO0lBQ0EsTUFBQSxTQUFBLFFBQUEsU0FBQSxPQUFBO0tBQ0EsTUFBQSxvQkFBQSxTQUFBOzs7OztFQUtBLEdBQUEsaUJBQUEsT0FBQSxRQUFBLGdCQUFBLEtBQUE7OztBQzdCQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsV0FBQSx5QkFBQTs7Q0FFQSx1QkFBQSxVQUFBLENBQUEsZ0JBQUEsVUFBQSxTQUFBLFVBQUEsWUFBQSxRQUFBLFdBQUEsYUFBQSxhQUFBLFdBQUE7O0NBRUEsU0FBQSx1QkFBQSxjQUFBLFFBQUEsT0FBQSxRQUFBLFVBQUEsTUFBQSxTQUFBLFdBQUEsV0FBQSxTQUFBLGFBQUE7RUFDQSxJQUFBLEtBQUE7RUFDQSxJQUFBLFdBQUEsUUFBQTtFQUNBLElBQUEsY0FBQTtFQUNBLEdBQUEsY0FBQTtFQUNBLEdBQUEsYUFBQTtFQUNBLEdBQUEsZUFBQSxRQUFBO0VBQ0EsR0FBQSxrQkFBQTtFQUNBLEdBQUEsYUFBQTtFQUNBLEdBQUEsbUJBQUE7RUFDQSxHQUFBLFVBQUE7O0VBRUEsR0FBQSxnQkFBQTtHQUNBLFNBQUE7R0FDQSxXQUFBOzs7RUFHQSxRQUFBLFVBQUEsYUFBQSxRQUFBLFFBQUEsU0FBQSxNQUFBO0dBQ0EsYUFBQTtHQUNBLE1BQUEsT0FBQSxRQUFBLEdBQUEsWUFBQSxPQUFBLEdBQUEsWUFBQTtHQUNBLEdBQUEsY0FBQSxXQUFBLE1BQUE7R0FDQSxHQUFBLGNBQUEsU0FBQSxPQUFBLEVBQUEsRUFBQTs7O0VBR0EsVUFBQSxZQUFBLFFBQUEsUUFBQSxTQUFBLFFBQUE7R0FDQSxHQUFBLFVBQUE7S0FDQSxLQUFBLFVBQUE7R0FDQSxJQUFBLEdBQUEsY0FBQSxJQUFBO0lBQ0EsTUFBQSxZQUFBLGFBQUEsUUFBQSxRQUFBLFNBQUEsSUFBQTtLQUNBLEdBQUEsY0FBQTs7VUFFQTtJQUNBLE1BQUEsTUFBQSxhQUFBLE9BQUEsUUFBQSxRQUFBLFNBQUEsSUFBQTtLQUNBLEdBQUEsY0FBQTtLQUNBLElBQUEsR0FBQSxRQUFBLGNBQUEsS0FBQSxFQUFBLFFBQUEsR0FBQSxjQUFBLEVBQUEsR0FBQSxhQUFBLE9BQUE7O0lBRUE7OztFQUdBLFVBQUEsR0FBQSxTQUFBLFNBQUEsR0FBQTtHQUNBLElBQUEsR0FBQSxjQUFBLEtBQUEsUUFBQSxPQUFBLGFBQUEsT0FBQSxHQUFBLFVBQUE7S0FDQSxHQUFBLFlBQUEsS0FBQTtVQUNBO0lBQ0EsSUFBQSxRQUFBLE9BQUEsT0FBQSxHQUFBLFdBQUEsUUFBQSxPQUFBLGFBQUEsT0FBQSxHQUFBLFVBQUE7S0FDQSxHQUFBLFlBQUEsS0FBQTtLQUNBO0lBQ0E7OztFQUdBLFVBQUEsR0FBQSxZQUFBLFNBQUEsS0FBQTtHQUNBLElBQUEsVUFBQSxRQUFBLEtBQUEsS0FBQTtHQUNBLEtBQUEsSUFBQSxJQUFBLEdBQUEsWUFBQSxTQUFBLEdBQUEsS0FBQSxHQUFBLEtBQUE7SUFDQSxHQUFBLFFBQUEsT0FBQSxHQUFBLFlBQUEsR0FBQSxJQUFBLEtBQUEsSUFBQTtLQUNBLEdBQUEsWUFBQSxHQUFBLFlBQUEsS0FBQTtLQUNBLEdBQUEsWUFBQSxHQUFBLFNBQUEsS0FBQTtLQUNBLEdBQUEsWUFBQSxHQUFBLFNBQUEsS0FBQTtLQUNBLEdBQUEsWUFBQSxHQUFBLFdBQUEsS0FBQTtLQUNBO0lBQ0E7OztFQUdBLFVBQUEsR0FBQSxXQUFBLFNBQUEsR0FBQTtHQUNBLElBQUEsUUFBQSxHQUFBO0dBQ0EsR0FBQSxjQUFBLEdBQUEsWUFBQSxPQUFBLFNBQUEsSUFBQTtJQUNBLE9BQUEsR0FBQSxPQUFBOzs7O0VBSUEsU0FBQSxZQUFBO0dBQ0EsSUFBQSxnQkFBQSxPQUFBLEtBQUE7TUFDQSxhQUFBO09BQ0EsWUFBQTtPQUNBLE1BQUE7T0FDQSxVQUFBO1FBQ0EsT0FBQSxVQUFBO1NBQ0EsS0FBQSxFQUFBLFFBQUEsR0FBQSxjQUFBO1VBQ0EsT0FBQTtlQUNBO1VBQ0EsT0FBQSxHQUFBLFlBQUEsR0FBQSxZQUFBLE9BQUEsR0FBQTtVQUNBOztRQUVBLFNBQUEsVUFBQTtTQUNBLE9BQUEsR0FBQSxjQUFBOztRQUVBLGFBQUEsVUFBQTtTQUNBLE9BQUE7Ozs7R0FJQTs7O0VBR0EsU0FBQSxpQkFBQSxZQUFBLEdBQUE7U0FDQSxJQUFBLGdCQUFBLE9BQUEsS0FBQTthQUNBLGFBQUE7YUFDQSxZQUFBO2FBQ0EsTUFBQTthQUNBLFNBQUE7aUJBQ0EsYUFBQSxVQUFBO3FCQUNBLE9BQUE7O2lCQUVBLGFBQUEsVUFBQTtrQkFDQSxPQUFBOzs7O01BSUE7OztFQUdBLFNBQUEsUUFBQSxhQUFBLEdBQUE7O0dBRUEsVUFBQSxLQUFBLG9CQUFBO0lBQ0EsS0FBQSxXQUFBO0lBQ0EsVUFBQSxXQUFBOztTQUVBLEdBQUEsWUFBQSxPQUFBLEdBQUE7R0FDQTs7O0VBR0EsU0FBQSxpQkFBQTtHQUNBLEdBQUEsYUFBQTs7R0FFQSxJQUFBLFdBQUEsR0FBQSxRQUFBLFFBQUEsT0FBQSxTQUFBLFFBQUE7SUFDQSxLQUFBLE9BQUEsV0FBQSxRQUFBLE9BQUEsV0FBQSxXQUFBLE9BQUEsV0FBQSxRQUFBO0tBQ0EsT0FBQTtVQUNBO0tBQ0EsT0FBQSxZQUFBO0tBQ0EsT0FBQSxPQUFBOzs7O0dBSUEsSUFBQSxhQUFBO0lBQ0EsU0FBQTtJQUNBLFlBQUEsV0FBQTtJQUNBLFlBQUEsUUFBQTtJQUNBLFlBQUEsRUFBQSxNQUFBLFFBQUEsT0FBQSxTQUFBLFFBQUEsRUFBQSxPQUFBLE9BQUEsV0FBQSxRQUFBLFFBQUE7SUFDQSxZQUFBLGFBQUEsV0FBQTtJQUNBLFlBQUEsYUFBQSxXQUFBO0lBQ0EsWUFBQSxhQUFBLFNBQUEsT0FBQTtJQUNBLFlBQUEsYUFBQSxTQUFBO0lBQ0EsVUFBQSxhQUFBLE9BQUE7SUFDQSxXQUFBLGFBQUEsT0FBQTtJQUNBLFdBQUE7SUFDQSxZQUFBLENBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQTtJQUNBLFlBQUEsRUFBQSxNQUFBLFFBQUE7SUFDQSxZQUFBO0lBQ0EsWUFBQSxRQUFBOztRQUVBLFVBQUEsS0FBQSxvQkFBQTtHQUNBOztFQUVBLEdBQUEsSUFBQSxZQUFBLFVBQUEsT0FBQTtTQUNBLFVBQUE7Ozs7QUNyS0EsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFdBQUEsd0JBQUE7O0NBRUEsc0JBQUEsVUFBQSxDQUFBLFVBQUEsYUFBQSxrQkFBQSxVQUFBLFNBQUEsYUFBQTtDQUNBLFNBQUEsdUJBQUE7RUFDQSxJQUFBLEtBQUE7RUFDQSxHQUFBLFNBQUE7RUFDQSxHQUFBLFFBQUEsRUFBQSxPQUFBLE9BQUE7RUFDQSxHQUFBLE9BQUE7RUFDQSxHQUFBLFNBQUE7RUFDQSxHQUFBLFNBQUE7O0VBRUEsR0FBQSxTQUFBO0dBQ0EsU0FBQSxPQUFBLE9BQUE7R0FDQSxVQUFBLE9BQUEsUUFBQTtHQUNBLFlBQUE7R0FDQSxZQUFBLENBQUEsT0FBQSxNQUFBLE1BQUEsTUFBQSxNQUFBO0dBQ0EsWUFBQSxPQUFBLFVBQUE7R0FDQSxjQUFBLE9BQUEsZ0JBQUE7R0FDQSxhQUFBLE9BQUEsY0FBQTtHQUNBLFlBQUE7R0FDQSxZQUFBLENBQUEsTUFBQSxPQUFBLEtBQUEsTUFBQSxRQUFBO0dBQ0EsVUFBQSxRQUFBO0dBQ0EsWUFBQSxDQUFBLFdBQUE7OztFQUdBLFVBQUEsYUFBQSxRQUFBLGFBQUEsUUFBQSxTQUFBLFNBQUE7R0FDQSxHQUFBLFdBQUE7R0FDQSxJQUFBLENBQUEsR0FBQSxPQUFBO0lBQ0EsSUFBQSxhQUFBO0lBQ0EsS0FBQSxJQUFBLElBQUEsU0FBQSxTQUFBLEdBQUEsS0FBQSxHQUFBLEtBQUE7S0FDQSxXQUFBLEtBQUEsU0FBQSxHQUFBO0tBQ0E7SUFDQSxHQUFBLE9BQUEsV0FBQTtJQUNBOzs7RUFHQSxJQUFBLGtCQUFBLFNBQUEsT0FBQTtHQUNBLElBQUEsVUFBQSxPQUFBLE1BQUEsSUFBQSxNQUFBLENBQUEsR0FBQSxLQUFBO0dBQ0EsSUFBQSxVQUFBLFFBQUEsVUFBQSxNQUFBO0lBQ0EsT0FBQTtTQUNBO0lBQ0EsT0FBQSxPQUFBLE1BQUEsSUFBQSxNQUFBLEVBQUEsR0FBQSxLQUFBO0lBQ0E7OztFQUdBLFNBQUEsTUFBQTtHQUNBLElBQUEsR0FBQSxPQUFBLE1BQUE7SUFDQSxHQUFBLE9BQUEsa0JBQUEsZ0JBQUEsR0FBQSxPQUFBO0lBQ0EsVUFBQSxPQUFBLEdBQUEsUUFBQSxRQUFBLFVBQUE7S0FDQSxHQUFBLE9BQUEsY0FBQSxPQUFBLFNBQUEsU0FBQSxHQUFBLE9BQUEsYUFBQTtPQUNBLEtBQUEsVUFBQTtLQUNBLGVBQUEsTUFBQSxHQUFBOztJQUVBO0dBQ0E7O0VBRUEsU0FBQSxRQUFBO0dBQ0EsSUFBQSxlQUFBO01BQ0EsWUFBQSxPQUFBO01BQ0EsT0FBQTtNQUNBLFNBQUEsR0FBQSxPQUFBO01BQ0EsU0FBQSxHQUFBLE9BQUE7TUFDQSxVQUFBLEdBQUEsT0FBQTtNQUNBLFNBQUEsR0FBQSxPQUFBO01BQ0EsY0FBQSxHQUFBLE9BQUE7TUFDQSxhQUFBLEdBQUEsT0FBQTtNQUNBLGtCQUFBLGdCQUFBLEdBQUEsT0FBQTs7O0dBR0EsSUFBQSxHQUFBLE9BQUEsTUFBQTtJQUNBLFVBQUEsaUJBQUE7SUFDQSxlQUFBLE1BQUE7VUFDQTs7SUFFQTtHQUNBOztFQUVBLFNBQUEsUUFBQTtHQUNBLGVBQUEsUUFBQTtHQUNBOzs7QUN4RkEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFdBQUEsMEJBQUE7O0NBRUEsd0JBQUEsVUFBQSxDQUFBLGNBQUEsa0JBQUEsU0FBQSxVQUFBLGFBQUEsV0FBQSxnQkFBQSxhQUFBOztDQUVBLFNBQUEsd0JBQUEsWUFBQSxnQkFBQSxPQUFBLFFBQUEsV0FBQSxTQUFBLGNBQUEsV0FBQSxXQUFBO0VBQ0EsSUFBQSxLQUFBO0VBQ0EsR0FBQSxhQUFBO0VBQ0EsR0FBQSxlQUFBO0VBQ0EsR0FBQSxTQUFBO0VBQ0EsR0FBQSxRQUFBO0VBQ0EsR0FBQSxVQUFBO0VBQ0EsR0FBQSxPQUFBO0VBQ0EsV0FBQSxPQUFBLFFBQUEsR0FBQSxhQUFBLFFBQUEsR0FBQSxZQUFBOztFQUVBLElBQUEsYUFBQTs7RUFFQSxRQUFBLGFBQUEsYUFBQSxRQUFBLFFBQUEsU0FBQSxRQUFBO0dBQ0EsR0FBQSxXQUFBLFFBQUE7R0FDQSxHQUFBLGdCQUFBLEdBQUEsU0FBQSxHQUFBO0dBQ0EsSUFBQSxhQUFBLEVBQUEsTUFBQSxRQUFBLFVBQUE7R0FDQSxHQUFBLFVBQUE7R0FDQSxXQUFBLFFBQUEsU0FBQSxjQUFBO0lBQ0EsR0FBQSxRQUFBLEtBQUEsTUFBQSxHQUFBLFNBQUE7O0dBRUEsR0FBQSxVQUFBLEdBQUEsUUFBQSxPQUFBLFNBQUEsUUFBQSxFQUFBLE9BQUEsQ0FBQSxPQUFBOzs7RUFHQSxTQUFBLGFBQUEsT0FBQTtHQUNBLEdBQUEsZ0JBQUE7R0FDQTs7RUFFQSxTQUFBLFFBQUE7R0FDQSxlQUFBLFFBQUE7R0FDQTs7RUFFQSxTQUFBLE1BQUEsT0FBQTtHQUNBLE9BQUEsWUFBQSxDQUFBLE9BQUE7R0FDQSxXQUFBLEtBQUE7R0FDQTs7RUFFQSxTQUFBLFFBQUEsUUFBQSxHQUFBO0dBQ0EsT0FBQSxZQUFBLENBQUEsT0FBQTtHQUNBLFdBQUEsT0FBQSxFQUFBLE1BQUEsWUFBQSxPQUFBLFFBQUEsT0FBQSxLQUFBO0dBQ0E7O0VBRUEsU0FBQSxNQUFBO0dBQ0EsR0FBQSxXQUFBLFFBQUEsS0FBQSxNQUFBLEdBQUEsV0FBQSxTQUFBO0dBQ0EsVUFBQSxLQUFBLG1CQUFBO0lBQ0EsS0FBQSxXQUFBO0lBQ0EsV0FBQSxXQUFBO0lBQ0EsT0FBQSxXQUFBO0lBQ0EsUUFBQSxXQUFBO0lBQ0EsUUFBQSxXQUFBO0lBQ0EsWUFBQSxFQUFBLE1BQUEsR0FBQSxXQUFBLFFBQUE7SUFDQSxVQUFBLEdBQUEsV0FBQTs7O0dBR0EsZUFBQSxNQUFBO0dBQ0E7RUFDQTs7O0FDcEVBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxXQUFBLHVCQUFBOztDQUVBLHFCQUFBLFVBQUEsQ0FBQSxXQUFBLFdBQUEsWUFBQSxVQUFBLGFBQUE7O0NBRUEsU0FBQSxzQkFBQTtFQUNBLElBQUEsS0FBQTtFQUNBLElBQUEsU0FBQSxRQUFBOztFQUVBLFVBQUEsWUFBQSxRQUFBLFFBQUEsU0FBQSxPQUFBO0dBQ0EsR0FBQSxVQUFBLE9BQUEsUUFBQSxPQUFBLFNBQUEsUUFBQTtJQUNBLE9BQUEsWUFBQSxPQUFBLFNBQUEsT0FBQSxhQUFBO0lBQ0EsT0FBQSxPQUFBLFVBQUE7Ozs7RUFJQSxRQUFBLGFBQUEsYUFBQSxRQUFBLFFBQUEsU0FBQSxNQUFBO0dBQ0EsR0FBQSxhQUFBO0dBQ0EsSUFBQSxNQUFBLFVBQUE7SUFDQSxJQUFBLFdBQUEsS0FBQSxNQUFBLE1BQUE7SUFDQSxHQUFBLFFBQUEsYUFBQTtLQUNBLE1BQUEsT0FBQSxTQUFBO0tBQ0EsTUFBQSxPQUFBLFNBQUE7S0FDQSxVQUFBOztJQUVBOzs7T0FHQSxPQUFBLDRCQUFBLEtBQUEsU0FBQSxNQUFBO1NBQ0EsR0FBQSxPQUFBLE1BQUEsTUFBQTtTQUNBLEdBQUEsT0FBQSxNQUFBLE1BQUE7U0FDQSxHQUFBLE9BQUEsT0FBQTtTQUNBLEdBQUEsUUFBQSxRQUFBO1VBQ0EsTUFBQSxHQUFBLE9BQUE7VUFDQSxNQUFBLEdBQUEsT0FBQTtVQUNBLFVBQUE7Ozs7S0FJQSxRQUFBLE9BQUEsSUFBQTtTQUNBLFFBQUE7YUFDQSxLQUFBO2FBQ0EsS0FBQTthQUNBLE1BQUE7O1NBRUEsU0FBQTs7OztBQ3JEQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsUUFBQSxZQUFBOztDQUVBLFVBQUEsVUFBQSxDQUFBLGNBQUEsU0FBQSxNQUFBOztDQUVBLFNBQUEsVUFBQSxZQUFBLE9BQUEsSUFBQSxTQUFBO0VBQ0EsSUFBQSxNQUFBO0VBQ0EsSUFBQSxRQUFBLFNBQUEsTUFBQTtNQUNBLElBQUEsWUFBQTtNQUNBLElBQUEsT0FBQTtRQUNBLFlBQUE7VUFDQTtRQUNBLFlBQUEsTUFBQSxJQUFBO09BQ0E7TUFDQSxPQUFBLEdBQUEsUUFBQSx3QkFBQSxFQUFBLFFBQUEsV0FBQSxZQUFBLFdBQUE7OztJQUdBLElBQUEsU0FBQSxJQUFBOztJQUVBLElBQUEsTUFBQSxVQUFBLFdBQUEsVUFBQTtNQUNBLElBQUEsT0FBQSxHQUFBLFdBQUEsWUFBQTtRQUNBLElBQUEsT0FBQTtRQUNBLFdBQUEsT0FBQSxZQUFBO1VBQ0EsU0FBQSxNQUFBLFFBQUE7Ozs7O0lBS0EsSUFBQSxRQUFBLFVBQUEsV0FBQSxNQUFBLFVBQUE7TUFDQSxJQUFBLE9BQUEsS0FBQSxXQUFBLE1BQUEsWUFBQTtTQUNBLElBQUEsT0FBQTtTQUNBLFdBQUEsT0FBQSxZQUFBO1dBQ0EsSUFBQSxVQUFBO2NBQ0EsU0FBQSxNQUFBLFFBQUE7WUFDQTs7Ozs7RUFLQSxJQUFBLHFCQUFBLFVBQUEsV0FBQSxVQUFBO01BQ0EsSUFBQSxPQUFBLG1CQUFBLFdBQUEsV0FBQTtVQUNBLElBQUEsT0FBQTtVQUNBLFdBQUEsT0FBQSxZQUFBO1lBQ0EsU0FBQSxNQUFBLFFBQUE7Ozs7RUFJQTs7QUN2REEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQSxrQkFBQTtHQUNBLFFBQUEsZUFBQTs7Q0FFQSxhQUFBLFVBQUE7Q0FDQSxTQUFBLGNBQUE7RUFDQSxPQUFBO0dBQ0EsUUFBQSxVQUFBO0lBQ0EsT0FBQTtLQUNBLFFBQUEsRUFBQSxRQUFBLFFBQUE7S0FDQSxXQUFBLENBQUE7S0FDQSxTQUFBLENBQUEsTUFBQSxPQUFBLE9BQUEsT0FBQTtLQUNBLFNBQUEsQ0FBQSxPQUFBLE9BQUE7OztHQUdBLFdBQUEsVUFBQTtJQUNBLE9BQUE7S0FDQSxhQUFBO0tBQ0EsT0FBQSxDQUFBLE1BQUEsTUFBQSxNQUFBOzs7R0FHQSxPQUFBLFVBQUE7SUFDQSxPQUFBO0tBQ0EsY0FBQTtLQUNBLFFBQUEsQ0FBQSxNQUFBLE1BQUEsTUFBQSxNQUFBOzs7O0VBSUE7O0FDbkNBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxRQUFBLFFBQUE7O0NBRUEsTUFBQSxVQUFBLENBQUE7O0NBRUEsU0FBQSxPQUFBO0VBQ0EsSUFBQSxNQUFBO0VBQ0EsSUFBQSxRQUFBO0VBQ0EsSUFBQSxjQUFBO0VBQ0EsSUFBQSxXQUFBO0VBQ0EsSUFBQSxZQUFBO0VBQ0EsSUFBQSxXQUFBO0VBQ0EsSUFBQSxtQkFBQTtFQUNBLElBQUEsU0FBQTtFQUNBLElBQUEsUUFBQTs7RUFFQSxTQUFBLE1BQUEsUUFBQSxPQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEsNkJBQUEsU0FBQSxhQUFBO0dBQ0E7O0VBRUEsU0FBQSxZQUFBLE9BQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSxtQ0FBQTtHQUNBOztFQUVBLFNBQUEsU0FBQSxPQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEsc0JBQUE7R0FDQTs7RUFFQSxTQUFBLFVBQUEsS0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLGlDQUFBLEtBQUE7R0FDQTs7RUFFQSxTQUFBLFNBQUEsS0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLGdDQUFBLEtBQUEsSUFBQTtHQUNBOztFQUVBLFNBQUEsaUJBQUEsS0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLDhCQUFBLEtBQUEsSUFBQTtHQUNBOztFQUVBLFNBQUEsT0FBQSxXQUFBO0dBQ0EsT0FBQSxNQUFBLEtBQUEsb0JBQUE7R0FDQTs7RUFFQSxTQUFBLE1BQUEsT0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLG1DQUFBO0dBQ0E7Ozs7QUN0REEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFdBQUEsb0JBQUE7O0NBRUEsa0JBQUEsVUFBQSxDQUFBLFNBQUEsZ0JBQUEsYUFBQSxVQUFBLGFBQUE7Q0FDQSxTQUFBLG1CQUFBO0VBQ0EsSUFBQSxLQUFBO0VBQ0EsR0FBQSxjQUFBO0VBQ0EsR0FBQSxVQUFBOztFQUVBLFVBQUEsR0FBQSxlQUFBLFNBQUEsR0FBQTtHQUNBLEtBQUEsSUFBQSxJQUFBLEdBQUEsWUFBQSxTQUFBLEdBQUEsS0FBQSxHQUFBLEtBQUE7SUFDQSxJQUFBLFFBQUEsT0FBQSxHQUFBLFlBQUEsR0FBQSxLQUFBLEdBQUEsTUFBQTtLQUNBLE9BQUEsR0FBQSxZQUFBLEdBQUEsZUFBQSxHQUFBOztJQUVBOzs7RUFHQSxVQUFBLEdBQUEsaUJBQUEsU0FBQSxLQUFBO0dBQ0EsS0FBQSxJQUFBLElBQUEsR0FBQSxZQUFBLFNBQUEsR0FBQSxLQUFBLEdBQUEsS0FBQTtJQUNBLElBQUEsUUFBQSxPQUFBLEdBQUEsWUFBQSxHQUFBLEtBQUEsS0FBQSxLQUFBO0tBQ0EsR0FBQSxZQUFBLEdBQUEsUUFBQSxPQUFBLFNBQUEsS0FBQTtLQUNBLEdBQUEsWUFBQSxHQUFBLFlBQUEsS0FBQTtLQUNBLEdBQUEsWUFBQSxHQUFBLGlCQUFBLEtBQUE7O0lBRUE7OztFQUdBLFVBQUEsR0FBQSxTQUFBLFNBQUEsR0FBQTtHQUNBLEtBQUEsUUFBQSxPQUFBLE9BQUEsR0FBQSxTQUFBO0lBQ0EsSUFBQSxRQUFBLFFBQUEsS0FBQTtJQUNBLE9BQUEsR0FBQSxZQUFBLEtBQUE7SUFDQTtHQUNBLEdBQUEsVUFBQSxVQUFBLEdBQUE7Ozs7O0VBS0EsVUFBQSxHQUFBLFlBQUEsU0FBQSxLQUFBO0dBQ0EsTUFBQSxZQUFBLFFBQUEsUUFBQSxTQUFBLFlBQUE7SUFDQSxHQUFBLGNBQUE7SUFDQSxHQUFBLFlBQUEsUUFBQSxTQUFBLEdBQUE7S0FDQSxHQUFBLFlBQUEsT0FBQSxTQUFBLEdBQUEsWUFBQTs7SUFFQSxHQUFBLFVBQUEsVUFBQSxHQUFBOzs7OztFQUtBLFVBQUEsR0FBQSxXQUFBLFNBQUEsS0FBQTtHQUNBLE1BQUEsWUFBQSxRQUFBLFFBQUEsU0FBQSxZQUFBO0lBQ0EsR0FBQSxjQUFBO0lBQ0EsR0FBQSxVQUFBLFVBQUEsR0FBQTs7Ozs7RUFLQSxJQUFBLFNBQUEsYUFBQTtFQUNBLFFBQUEsVUFBQSxRQUFBLFFBQUEsU0FBQSxNQUFBO0dBQ0EsTUFBQSxPQUFBLFNBQUEsR0FBQSxZQUFBLE9BQUEsR0FBQSxZQUFBO0dBQ0EsR0FBQSxhQUFBO0dBQ0EsR0FBQSxXQUFBO0lBQ0EsY0FBQTtJQUNBLGFBQUEsQ0FBQSxNQUFBLE1BQUEsTUFBQTtJQUNBLFVBQUEsR0FBQSxXQUFBO0lBQ0EsV0FBQSxHQUFBLFdBQUEsUUFBQSxHQUFBLEVBQUEsTUFBQSxFQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsR0FBQSxXQUFBLE1BQUEsRUFBQSxHQUFBLFdBQUEsTUFBQSxFQUFBOzs7O0VBSUEsTUFBQSxZQUFBLFFBQUEsUUFBQSxTQUFBLFlBQUE7R0FDQSxJQUFBLGFBQUE7SUFDQSxHQUFBLGNBQUE7SUFDQSxHQUFBLFlBQUEsUUFBQSxTQUFBLEdBQUE7S0FDQSxHQUFBLFlBQUEsT0FBQSxTQUFBLEdBQUEsWUFBQTs7SUFFQSxHQUFBLFVBQUEsVUFBQSxHQUFBO1VBQ0E7SUFDQTtJQUNBOzs7OztFQUtBLElBQUEsYUFBQSxTQUFBLFlBQUE7S0FDQSxJQUFBLGNBQUEsRUFBQSxNQUFBLEdBQUEsSUFBQSxZQUFBO1VBQ0EsT0FBQSxFQUFBLE1BQUEsR0FBQSxJQUFBLFlBQUE7Y0FDQSxPQUFBLEVBQUEsY0FBQSxHQUFBLFVBQUEsSUFBQSxNQUFBOzs7O0dBSUEsS0FBQSxhQUFBO0lBQ0EsS0FBQSxJQUFBLElBQUEsWUFBQSxTQUFBLEdBQUEsS0FBQSxHQUFBLEtBQUE7S0FDQSxJQUFBLGNBQUE7S0FDQSxJQUFBLElBQUE7S0FDQSxJQUFBLEtBQUE7S0FDQSxJQUFBLElBQUEsRUFBQSxRQUFBLFlBQUEsR0FBQSxXQUFBLFlBQUEsR0FBQTtLQUNBLEdBQUEsWUFBQSxJQUFBLEVBQUEsUUFBQSxZQUFBLEdBQUEsUUFBQSxZQUFBLEdBQUEsU0FBQSxJQUFBLEVBQUEsUUFBQSxZQUFBLEdBQUEsT0FBQSxZQUFBLEdBQUE7S0FDQSxZQUFBLEdBQUEsR0FBQSxXQUFBO0tBQ0EsWUFBQSxHQUFBLEdBQUEsZUFBQSxZQUFBLEdBQUEsUUFBQTtLQUNBLElBQUEsU0FBQTtLQUNBLE9BQUEsS0FBQSxZQUFBLEdBQUEsU0FBQSxZQUFBLEdBQUE7S0FDQSxPQUFBLFNBQUEsWUFBQSxHQUFBLFFBQUE7S0FDQSxPQUFBLFFBQUEsWUFBQSxHQUFBO0tBQ0EsWUFBQSxHQUFBLEdBQUEsSUFBQSxLQUFBO0tBQ0E7O0dBRUEsT0FBQTs7O0VBR0EsR0FBQSxJQUFBLFlBQUEsVUFBQSxPQUFBO1NBQ0EsVUFBQTs7RUFFQTs7QUN2SEEsQ0FBQSxVQUFBO0NBQ0E7Ozs7Ozs7Q0FPQTtHQUNBLE9BQUE7R0FDQSxXQUFBLGtCQUFBOztDQUVBLGdCQUFBLFVBQUEsQ0FBQTs7Q0FFQSxTQUFBLGlCQUFBO0VBQ0EsSUFBQSxLQUFBO0VBQ0EsR0FBQSxlQUFBO0VBQ0EsR0FBQSxhQUFBO0VBQ0EsR0FBQSxZQUFBOztLQUVBLFNBQUEsV0FBQSxJQUFBLEdBQUE7TUFDQSxHQUFBLFdBQUE7TUFDQSxHQUFBLGVBQUE7U0FDQSxVQUFBLEtBQUEsU0FBQSxFQUFBLE9BQUEsR0FBQSxLQUFBLGVBQUE7TUFDQTs7S0FFQSxTQUFBLFVBQUEsR0FBQSxHQUFBO01BQ0EsR0FBQSxXQUFBO01BQ0EsR0FBQSxlQUFBO1NBQ0EsVUFBQSxLQUFBLFNBQUEsRUFBQSxPQUFBLEdBQUEsS0FBQSxlQUFBO01BQ0E7RUFDQTs7O0FDL0JBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxRQUFBLFVBQUE7O0NBRUEsUUFBQSxVQUFBLENBQUEsU0FBQSxTQUFBO0NBQ0EsU0FBQSxTQUFBO0VBQ0EsSUFBQSxNQUFBO0VBQ0EsSUFBQSxrQkFBQTtFQUNBLElBQUEsV0FBQTtFQUNBLElBQUEsYUFBQTtFQUNBLElBQUEsUUFBQTtFQUNBLElBQUEsYUFBQTtFQUNBLElBQUEsVUFBQTtFQUNBLElBQUEsYUFBQTtFQUNBLElBQUEsWUFBQTtFQUNBLElBQUEsY0FBQTtFQUNBLElBQUEsaUJBQUE7RUFDQSxJQUFBLGNBQUE7RUFDQSxJQUFBLFNBQUE7OztFQUdBLFNBQUEsaUJBQUE7R0FDQSxPQUFBLE1BQUEsSUFBQTtHQUNBOztFQUVBLFNBQUEsU0FBQSxLQUFBO0dBQ0EsT0FBQSxNQUFBLEtBQUEsY0FBQTtHQUNBOztFQUVBLFNBQUEsV0FBQSxTQUFBO0dBQ0EsT0FBQSxNQUFBLE9BQUEsZ0NBQUE7R0FDQTs7RUFFQSxTQUFBLE1BQUEsS0FBQTtHQUNBLE9BQUEsTUFBQSxLQUFBLDJCQUFBO0dBQ0E7O0VBRUEsU0FBQSxZQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUE7R0FDQTs7RUFFQSxTQUFBLFNBQUEsUUFBQTtHQUNBLElBQUEsSUFBQSxZQUFBO0lBQ0EsSUFBQSxVQUFBLFlBQUEsTUFBQSxJQUFBLFFBQUEsY0FBQSxPQUFBLFVBQUEsWUFBQSxNQUFBLElBQUEsUUFBQSxVQUFBLFFBQUE7S0FDQSxPQUFBO1VBQ0E7S0FDQSxPQUFBO0tBQ0E7SUFDQTs7R0FFQSxPQUFBO0dBQ0E7O0VBRUEsU0FBQSxZQUFBO0dBQ0EsSUFBQSxJQUFBLFlBQUE7SUFDQSxPQUFBLFVBQUEsWUFBQSxNQUFBLElBQUEsUUFBQTtJQUNBO0dBQ0E7O0VBRUEsU0FBQSxXQUFBO0dBQ0EsSUFBQSxJQUFBLFlBQUE7SUFDQSxPQUFBLFVBQUEsWUFBQSxNQUFBLElBQUEsUUFBQTtJQUNBO0dBQ0E7O0VBRUEsU0FBQSxhQUFBO0dBQ0EsSUFBQSxJQUFBLFlBQUE7SUFDQSxPQUFBLFVBQUEsWUFBQSxNQUFBLElBQUEsUUFBQTtJQUNBO0dBQ0E7O0VBRUEsU0FBQSxnQkFBQTtHQUNBLElBQUEsSUFBQSxZQUFBO0lBQ0EsT0FBQSxVQUFBLFlBQUEsTUFBQSxJQUFBLFFBQUE7SUFDQTtHQUNBOztFQUVBLFNBQUEsYUFBQTtHQUNBLElBQUEsSUFBQSxZQUFBO0lBQ0EsT0FBQSxVQUFBLFlBQUEsTUFBQSxJQUFBLFFBQUE7SUFDQTtHQUNBOztFQUVBLFNBQUEsUUFBQTtHQUNBLElBQUEsSUFBQSxZQUFBO0lBQ0EsT0FBQSxVQUFBLFlBQUEsTUFBQSxJQUFBLFFBQUE7SUFDQTtHQUNBO0VBQ0E7O0tBRUEiLCJmaWxlIjoiaW5uZXQubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiOyhmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAnLFtcblx0XHQnYXBwLnJvdXRlcicsXG5cdFx0J2FwcC5kaXJlY3RpdmUnLFxuXHRcdCdhcHAudG9wbmF2Jyxcblx0XHQnYXBwLmNhc2UnLFxuXHRcdCdhcHAuY2FyJyxcblx0XHQnYXBwLmJyYW5jaCcsXG5cdFx0J2FwcC5tYXAnLFxuXHRcdCdhcHAubWVtYmVyJyxcblx0XHQnYXBwLnN0cmlrZVRlYW0nLFxuXHRcdCdhcHAuc29ja2V0Jyxcblx0XHQnYXBwLnVzZXInLFxuXHRcdCdhcHAudGltZXInLFxuXHRcdCdhcHAubm90aWZpY2F0aW9uJ1xuXHRdKVxufSkoKTtcblxuIiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLmJyYW5jaCBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuYnJhbmNoJyxbXSlcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLmNhciBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuY2FyJywgW10pXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5jYXNlIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5jYXNlJywgW1xuXHRcdCd1aS5yb3V0ZXInLFxuXHRcdCd1aS5ib290c3RyYXAnXG5cdF0pXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQvKipcblx0KiBhcHAuZGFzaGJvYXJkIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5kYXNoYm9hcmQnLFtdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLmRpcmVjdG9yIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RvcicsIFtdKVxuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5kaXNwYXRjaCBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlzcGF0Y2gnLCBbXSlcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLmR1dHlsaXN0IE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5kdXR5bGlzdCcsIFtdKVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuZ2VvIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5nZW8nLCBbXSk7XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQvKipcblx0KiBhcHAubWFwIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5tYXAnLCBbXSlcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdC8qKlxuXHQqIGFwcC5tZW1iZXIgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLm1lbWJlcicsIFtdKVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAubm90aWZpY2F0aW9uIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5ub3RpZmljYXRpb24nLCBbXSk7XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5zYWZldHkgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLnNhZmV0eScsW10pXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5zb2NrZXQgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLnNvY2tldCcsIFtdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLnN0cmlrZVRlYW0gTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLnN0cmlrZVRlYW0nLFtdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLnN1bW1hcnkgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLnN1bW1hcnknLFtdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLnRpbWVyIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC50aW1lcicsIFtdKVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAudXNlciBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAudXNlcicsIFtdKTtcbn0pOyIsIihmdW5jdGlvbigpe1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZScpXG4gICAgICAgIC5kaXJlY3RpdmUoJ21pbmltYWxpemFTaWRlYmFyJyxtaW5pbWFsaXphU2lkZWJhcilcbiAgICAgICAgLmRpcmVjdGl2ZSgnc2lkZU5hdmlnYXRpb24nLHNpZGVOYXZpZ2F0aW9uKVxuICAgICAgICAuZGlyZWN0aXZlKCdpYm94VG9vbHMnLGlib3hUb29scylcbiAgICAgICAgLmRpcmVjdGl2ZSgnYmFjaycsYmFjayk7XG5cbiAgICBtaW5pbWFsaXphU2lkZWJhci4kaW5qZWN0ICAgPSBbJyR0aW1lb3V0J107XG4gICAgc2lkZU5hdmlnYXRpb24uJGluamVjdCAgICAgID0gWyckdGltZW91dCddO1xuICAgIGlib3hUb29scy4kaW5qZWN0ICAgICAgICAgICA9IFsnJHRpbWVvdXQnXTtcbiAgICBiYWNrLiRpbmplY3QgICAgICAgICAgICAgICAgPSBbJyR3aW5kb3cnXTtcblxuICAgIGZ1bmN0aW9uIG1pbmltYWxpemFTaWRlYmFyKCR0aW1lb3V0KXtcbiAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8YSBjbGFzcz1cIm5hdmJhci1taW5pbWFsaXplIG1pbmltYWxpemUtc3R5bC0yIGJ0biBidG4tcHJpbWFyeVwiIGhyZWY9XCJcIiBuZy1jbGljaz1cIm1pbmltYWxpemUoKVwiPjxpIGNsYXNzPVwiZmEgZmEtYmFyc1wiPjwvaT48L2E+JyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uICgkc2NvcGUsICRlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm1pbmltYWxpemUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICQoXCJib2R5XCIpLnRvZ2dsZUNsYXNzKFwibWluaS1uYXZiYXJcIik7XG4gICAgICAgICAgICAgICAgICAgIGlmICghJCgnYm9keScpLmhhc0NsYXNzKCdtaW5pLW5hdmJhcicpIHx8ICQoJ2JvZHknKS5oYXNDbGFzcygnYm9keS1zbWFsbCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBIaWRlIG1lbnUgaW4gb3JkZXIgdG8gc21vb3RobHkgdHVybiBvbiB3aGVuIG1heGltaXplIG1lbnVcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzaWRlLW1lbnUnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3Igc21vb3RobHkgdHVybiBvbiBtZW51XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NpZGUtbWVudScpLmZhZGVJbig1MDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJCgnYm9keScpLmhhc0NsYXNzKCdmaXhlZC1zaWRlYmFyJykpe1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NpZGUtbWVudScpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjc2lkZS1tZW51JykuZmFkZUluKDUwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBhbGwgaW5saW5lIHN0eWxlIGZyb20ganF1ZXJ5IGZhZGVJbiBmdW5jdGlvbiB0byByZXNldCBtZW51IHN0YXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjc2lkZS1tZW51JykucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gc2lkZU5hdmlnYXRpb24oJHRpbWVvdXQpe1xuICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIC8vIENhbGwgdGhlIG1ldHNpTWVudSBwbHVnaW4gYW5kIHBsdWcgaXQgdG8gc2lkZWJhciBuYXZpZ2F0aW9uXG4gICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5tZXRpc01lbnUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBpYm94VG9vbHMoJHRpbWVvdXQpe1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgICAgIHNjb3BlOiB0cnVlLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9jb21tb24vaWJveF90b29scy5odG1sJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uICgkc2NvcGUsICRlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gRnVuY3Rpb24gZm9yIGNvbGxhcHNlIGlib3hcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd2hpZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpYm94ID0gJGVsZW1lbnQuY2xvc2VzdCgnZGl2Lmlib3gnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGljb24gPSAkZWxlbWVudC5maW5kKCdpOmZpcnN0Jyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gaWJveC5maW5kKCdkaXYuaWJveC1jb250ZW50Jyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuc2xpZGVUb2dnbGUoMjAwKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gVG9nZ2xlIGljb24gZnJvbSB1cCB0byBkb3duXG4gICAgICAgICAgICAgICAgICAgIGljb24udG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tdXAnKS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1kb3duJyk7XG4gICAgICAgICAgICAgICAgICAgIGlib3gudG9nZ2xlQ2xhc3MoJycpLnRvZ2dsZUNsYXNzKCdib3JkZXItYm90dG9tJyk7XG4gICAgICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlib3gucmVzaXplKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpYm94LmZpbmQoJ1tpZF49bWFwLV0nKS5yZXNpemUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgNTApO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIC8vIEZ1bmN0aW9uIGZvciBjbG9zZSBpYm94XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5jbG9zZWJveCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpYm94ID0gJGVsZW1lbnQuY2xvc2VzdCgnZGl2Lmlib3gnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlib3gucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gYmFjaygkd2luZG93KXtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGlFbGVtZW50LCBpQXR0cnMpIHtcbiAgICAgICAgICAgICAgICBpRWxlbWVudC5iaW5kKCdjbGljaycsZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cblx0LyoqXG5cdCogYXBwLmJyYW5jaCBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuYnJhbmNoJylcblx0XHQuY29udHJvbGxlcignQnJhbmNoU3ZjJyxCcmFuY2hTdmMpO1xuXG5cdEJyYW5jaFN2Yy4kaW5qZWN0ID0gWyckaHR0cCddO1xuXHRmdW5jdGlvbiBCcmFuY2hTdmMoJGh0dHApe1xuXHRcdHZhciBzdmMgPSB0aGlzO1xuXHRcdHN2Yy5mZXRjaEJ5Q29ycHMgXHQ9IGZldGNoQnlDb3Jwcztcblx0XHRzdmMuZmV0Y2hCeU5hbWUgXHQ9IGZldGNoQnlOYW1lO1xuXHRcdHN2Yy50b3RhbExpc3RGaW5kQnlOYW1lID0gdG90YWxMaXN0RmluZEJ5TmFtZTtcblx0XHRzdmMuZ2V0RGV0YWlscyBcdFx0PSBnZXREZXRhaWxzO1xuXHRcdHN2Yy5mZXRjaE9uRHV0eUJyYW5jaGVzID0gZmV0Y2hPbkR1dHlCcmFuY2hlcztcblx0XHRzdmMudXBkYXRlIFx0XHRcdD0gdXBkYXRlO1xuXHRcdHN2Yy51cGRhdGVNaXNzaW9uIFx0PSB1cGRhdGVNaXNzaW9uO1xuXHRcdFxuXHRcdGZ1bmN0aW9uIGZldGNoQnlDb3Jwcyhjb3Jwcyl7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2JyYW5jaGVzP2NvcnBzPScgKyBjb3Jwcyk7XG5cdFx0fTtcblx0XHRcblx0XHRmdW5jdGlvbiBmZXRjaEJ5TmFtZShicmFuY2gpe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9icmFuY2hlcz9icmFuY2g9JyArIGJyYW5jaCk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHRvdGFsTGlzdEZpbmRCeU5hbWUoYnJhbmNoKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvYnJhbmNoZXMvJyArIGJyYW5jaClcblx0XHR9XG5cblx0XHRmdW5jdGlvbiBnZXREZXRhaWxzKGlkKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvYnJhbmNoZXMvJyArIGlkKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gZmV0Y2hPbkR1dHlCcmFuY2hlcyhicmFuY2hlcyl7XG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9icmFuY2hlcy9vbmR1dHknLGJyYW5jaGVzKTtcblx0XHR9O1xuXHRcblx0XHRmdW5jdGlvbiB1cGRhdGUoZGF0YSl7XG5cdFx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL2JyYW5jaGVzLycgKyBkYXRhLmJyYW5jaCAsIGRhdGEpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiB1cGRhdGVNaXNzaW9uKGRhdGEpe1xuXHRcdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9icmFuY2hlcz9icmFuY2g9JyArIGRhdGEuYnJhbmNoLCBkYXRhKTtcblx0XHR9O1xuXHR9O1xuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5jYXIgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLmNhcicpXG5cdFx0LmNvbnRyb2xsZXIoJ0NhckVkaXRDb250cm9sbGVyJyxDYXJFZGl0Q29udHJvbGxlcik7XG5cblx0Q2FyRWRpdENvbnRyb2xsZXIuJGluamVjdCA9IFtdO1xuXHRmdW5jdGlvbiBDYXJFZGl0Q29udHJvbGxlcigpe1xuXG5cdH07XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLmNhciBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuY2FyJylcblx0XHQuY29udHJvbGxlcignQ2FySW5kZXhDb250cm9sbGVyJyxDYXJJbmRleENvbnRyb2xsZXIpO1xuXG5cdENhckluZGV4Q29udHJvbGxlci4kaW5qZWN0ID0gW107XG5cdGZ1bmN0aW9uIENhckluZGV4Q29udHJvbGxlcigpe1xuXG5cdH07XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHQvKipcblx0KiBhcHAuY2FyIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5jYXInKVxuXHRcdC5zZXJpY2UoJ0NhclN2YycsQ2FyU3ZjKTtcblxuXHRDYXJTdmMuJGluamVjdCA9IFsnJGh0dHAnXTtcblx0XG5cdGZ1bmN0aW9uIENhclN2YygkaHR0cCl7XG5cdFx0dmFyIHZtID0gdGhpczsgXG5cdFx0dm0uZmV0Y2hCeUNvcnBzICA9IGZldGNoQnlDb3Jwcztcblx0XHR2bS5mZXRjaEJ5QnJhbmNoID0gZmV0Y2hCeUJyYW5jaDtcblx0XHR2bS51cGRhdGUgXHRcdCA9IHVwZGF0ZTsgXG5cblx0XHRmdW5jdGlvbiBmZXRjaEJ5Q29ycHMoY29ycHMpe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9jYXJzP2NvcnBzPScgKyBjb3Jwcyk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGZldGNoQnlCcmFuY2goIGJyYW5jaCApe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9jYXJzP2JyYW5jaD0nICsgYnJhbmNoICk7XG5cdFx0fTtcblx0XHRcblx0XHRmdW5jdGlvbiB1cGRhdGUoZGF0YSl7XG5cdFx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL2NhcnMvJyArIGRhdGEuaWQgLCBkYXRhKTtcblx0XHR9O1xuXHR9O1xufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuY2FzZSBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuY2FzZScpXG5cdFx0LmNvbnRyb2xsZXIoJ0Nhc2VDb25maXJtQ29udHJvbGxlcicsQ2FzZUNvbmZpcm1Db250cm9sbGVyKTtcblxuXHRDYXNlQ29uZmlybUNvbnRyb2xsZXIuJGluamVjdCA9IFsnVXNlclN2YycsICdDYXNlU3ZjJywgJyRzdGF0ZVBhcmFtcycsJyRzdGF0ZScsJyRtb2RhbEluc3RhbmNlJ107XG5cdGZ1bmN0aW9uIENhc2VDb25maXJtQ29udHJvbGxlcihVc2VyU3ZjLCBDYXNlU3ZjLCAkc3RhdGVQYXJhbXMsJHN0YXRlLCRtb2RhbEluc3RhbmNlKXtcblx0XHR2YXIgdm0gPSB0aGlzO1xuXHRcdFxuXHRcdHZtLnVzZXIgPSB7fTtcblx0XHR2bS5zZW5kID0gc2VuZDsgXG5cdFx0dm0uY2FzZUluZm8gPSB7XG5cdFx0XHRpZCA6ICRzdGF0ZVBhcmFtcy5pZCxcblx0XHRcdGVuZEF0IDogbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NTS1ERCwgaDptbTpzcyBhJylcblx0XHR9OyBcblxuXHRcdGZ1bmN0aW9uIHNlbmQoKXtcblx0XHRcdFVzZXJTdmMubG9naW4odm0udXNlcikuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcblx0XHRcdFx0Q2FzZVN2Yy5jbG9zZUNhc2Uodm0uY2FzZUluZm8pLnN1Y2Nlc3MoZnVuY3Rpb24oKXtcblx0XHRcdFx0XHQkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcblx0XHRcdFx0XHQkc3RhdGUuZ28oJ2R1dHlEZXNrLmNhc2UuaW5kZXgnKTtcblx0XHRcdFx0fSlcblx0XHRcdH0pO1xuXHRcdH07XG5cdH07XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5jYXNlIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5jYXNlJylcblx0XHQuY29udHJvbGxlcignQ2FzZUVkaXRDb250cm9sbGVyJyxDYXNlRWRpdENvbnRyb2xsZXIpO1xuXG5cdENhc2VFZGl0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckc3RhdGVQYXJhbXMnLCAnQ2FzZVN2YycsICdDYXJTdmMnLCAnVXNlclN2YycsICdCcmFuY2hTdmMnLCAnJHdpbmRvdycsICckbW9kYWwnLCdOdGZTdmMnXTtcblxuXHRmdW5jdGlvbiBDYXNlRWRpdENvbnRyb2xsZXIoJHN0YXRlUGFyYW1zLCBDYXNlU3ZjLCBDYXJTdmMsIFVzZXJTdmMsIEJyYW5jaFN2YywgJHdpbmRvdywgJG1vZGFsLE50ZlN2Yyl7XG5cdFx0dmFyIHZtID0gdGhpczsgXG5cdFx0dmFyIGRpc3BhdGNoQ2FycyAgPSBbXTtcblx0XHR2bS50ZXJtaW5hdGVDYXNlICA9IHRlcm1pbmF0ZUNhc2U7XG5cdFx0dm0uZGlzcGF0Y2ggXHQgID0gZGlzcGF0Y2g7XG5cdFx0dm0uc2VsZWN0QnJhbmNoICAgPSBzZWxlY3RCcmFuY2g7XG5cdFx0dm0uY2FuY2VsRGlzcGF0Y2ggPSBjYW5jZWxEaXNwYXRjaDtcblx0XHR2bS5zYXZlIFx0XHQgID0gc2F2ZTsgXG5cblx0XHRhbmd1bGFyLmV4dGVuZCh2bSwge1xuXHQgICAgICAgIG5vd1Bvczoge1xuXHQgICAgICAgICAgICBsYXQ6IDI0Ljk4OCxcblx0ICAgICAgICAgICAgbG5nOiAxMjEuNTc1Mixcblx0ICAgICAgICAgICAgem9vbTogMTdcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGNvbnRyb2xzOiB7XG5cdCAgICAgICAgICAgIGRyYXc6IHt9XG5cdCAgICAgICAgfVxuXHQgICAgfSk7XG5cblx0XHR2YXIgY2FzZUlkID0gJHN0YXRlUGFyYW1zLmlkO1xuXG5cdFx0QnJhbmNoU3ZjLmZldGNoQnlDb3JwcyhVc2VyU3ZjLnVzZXJDb3JwcygpKS5zdWNjZXNzKGZ1bmN0aW9uKGJyYW5jaGVzKXtcblx0XHQgICAgdm0uYnJhbmNoZXMgPSBicmFuY2hlcztcblx0XHQgICAgdm0uY3VycmVudEJyYW5jaCA9IGJyYW5jaGVzWzBdLm5hbWVcblx0XHR9KTtcblxuXHRcdGZ1bmN0aW9uIHNlbGVjdEJyYW5jaChicmFuY2gpe1xuXHQgICAgXHR2bS5jdXJyZW50QnJhbmNoID0gYnJhbmNoLm5hbWU7XG5cdCAgICB9O1xuXG5cdFx0QnJhbmNoU3ZjLmZldGNoQnlDb3JwcyhVc2VyU3ZjLnVzZXJDb3JwcygpKS5zdWNjZXNzKGZ1bmN0aW9uKGJyYW5jaGVzKXtcblx0XHQgICAgdm0uYnJhbmNoZXMgPSBicmFuY2hlcztcblx0XHQgICAgdm0uY3VycmVudEJyYW5jaCA9IGJyYW5jaGVzWzBdLm5hbWVcblx0XHR9KVxuXG5cdFx0Q2FzZVN2Yy5mZXRjaEJ5SWQoY2FzZUlkKS5zdWNjZXNzKGZ1bmN0aW9uKF9jYXNlKXtcblx0XHRcdHZtLmN1cnJlbnRDYXNlID0gX2Nhc2U7XG5cdFx0XHR2bS5kaXNwYXRjaExpc3QgPSBfLnBsdWNrKF9jYXNlLmNhcnMsICdyYWRpb0NvZGUnKS5qb2luKCcgJylcblx0XHRcdHZtLmN1cnJlbnRDYXNlLmNhcklkcyA9IF8ucGx1Y2soX2Nhc2UuY2FycywnX2lkJyk7XG5cdFx0fSkudGhlbihmdW5jdGlvbigpe1xuXHRcdFx0Q2FyU3ZjLmZldGNoQnlDb3JwcyhVc2VyU3ZjLnVzZXJDb3JwcygpKS5zdWNjZXNzKGZ1bmN0aW9uKGNhcnMpe1xuXHRcdFx0XHR2bS5jYXJzID0gY2Fyc1xuXHRcdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHZtLmNhcnMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRpZiAoIHZtLmN1cnJlbnRDYXNlLmNhcklkcy5pbmRleE9mKHZtLmNhcnNbaV0uX2lkKSA+IC0xICkge1xuXHRcdFx0XHRcdFx0dm0uY2Fyc1tpXS5pc0NoZWNrZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0ZGlzcGF0Y2hDYXJzLnB1c2godm0uY2Fyc1tpXSk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fTtcblx0XHRcdH0pO1xuXG5cdFx0XHROdGZTdmMuZmV0Y2goKS5zdWNjZXNzKGZ1bmN0aW9uKG50ZnMpe1xuXHRcdFx0XHR2bS5udGZzID0gbnRmcztcblx0XHRcdFx0dm0uY3VycmVudENhc2UubnRmcyA9IF8ucGx1Y2sobnRmcywndHlwZScpXG5cdFx0XHRcdHZtLmN1cnJlbnRDYXNlLm50ZiAgPSB2bS5jdXJyZW50Q2FzZS5udGZzWzBdO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHRmdW5jdGlvbiBnZXRCcmFuY2hJZChicmFuY2hlc0xpc3Qpe1xuXHRcdFx0dmFyIGJyYW5jaGVzID0gXy51bmlxdWUoYnJhbmNoZXNMaXN0KTtcblx0XHRcdHZhciBicmFuY2hJZHMgPSBbXTtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdm0uYnJhbmNoZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYgKGJyYW5jaGVzLmluZGV4T2Yodm0uYnJhbmNoZXNbaV0ubmFtZSkgPiAtMSkge1xuXHRcdFx0XHRcdGJyYW5jaElkcy5wdXNoKHZtLmJyYW5jaGVzW2ldLl9pZCk7XG5cdFx0XHRcdH07XG5cdFx0XHR9O1xuXHRcdFx0cmV0dXJuICBicmFuY2hJZHM7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGRpc3BhdGNoKCBjYXIgKXtcblx0XHRcdGNhci5pc0NoZWNrZWQgPSB0cnVlOyBcblx0XHRcdGRpc3BhdGNoQ2Fycy5wdXNoKGNhcik7XG5cdFx0XHR2bS5kaXNwYXRjaExpc3QgPSBfLnBsdWNrKGRpc3BhdGNoQ2FycywgJ3JhZGlvQ29kZScpLmpvaW4oXCIgXCIpXG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGNhbmNlbERpc3BhdGNoKGNhcil7XG5cdFx0XHRjYXIuaXNDaGVja2VkID0gZmFsc2U7XG5cdFx0XHRkaXNwYXRjaENhcnMuc3BsaWNlKF8ucGx1Y2soZGlzcGF0Y2hDYXJzLCAnX2lkJykuaW5kZXhPZihjYXIuX2lkKSwxKVxuXHRcdFx0dm0uZGlzcGF0Y2hMaXN0ID0gXy5wbHVjayhkaXNwYXRjaENhcnMsICdyYWRpb0NvZGUnKS5qb2luKFwiIFwiKVxuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBzYXZlKCl7XG5cdFx0XHR2YXIgY3VycmVudE50ZjtcblxuXHRcdFx0dm0ubnRmcy5mb3JFYWNoKGZ1bmN0aW9uKG50ZixpZCl7XG5cdFx0XHRcdGlmIChudGYudHlwZSA9PSB2bS5jdXJyZW50Q2FzZS5udGYgKSB7XG5cdFx0XHRcdFx0Y3VycmVudE50ZiAgPSB2bS5udGZzW2lkXTtcblx0XHRcdFx0fTtcblx0XHRcdH0pO1xuXHRcdFx0Q2FzZVN2Yy51cGRhdGUoe1xuXHRcdFx0XHRjYXNlSWQgICAgOiB2bS5jdXJyZW50Q2FzZS5faWQsXG5cdFx0XHRcdGFkZHJlc3MgICA6IHZtLmN1cnJlbnRDYXNlLmFkZHJlc3MgfHwgXCLmuKzoqaZcIixcblx0XHRcdFx0b2ZmaWNlclJlY2VpdmVyIDogVXNlclN2Yy5jdXJyZW50VXNlcigpIHx8ICBcIuWKieabieabvFwiLFxuXHRcdFx0XHR0eXBlICAgICAgOiB2bS5jdXJyZW50Q2FzZS50eXBlIHx8IFwi54Gr6K2mXCIsXG5cdFx0XHRcdHR5cGVzIFx0ICA6IHZtLmN1cnJlbnRDYXNlLnR5cGVzLFxuXHRcdFx0XHRwaG9uZSAgICAgOiB2bS5jdXJyZW50Q2FzZS5waG9uZSB8fCBcIua4rOipplwiLFxuXHRcdFx0XHRicmFuY2hlcyAgOiBfLnVuaXF1ZShfLnBsdWNrKGRpc3BhdGNoQ2FycywgJ2JyYW5jaCcpKSxcblx0XHRcdFx0YnJhbmNoSWRzIDogZ2V0QnJhbmNoSWQodm0uY3VycmVudENhc2UuYnJhbmNoZXMpLFxuXHRcdCAgXHRcdGNhcnMgICAgICA6IF8ucGx1Y2soZGlzcGF0Y2hDYXJzLCdfaWQnKSxcblx0XHRcdFx0aXNPbmdvaW5nIDogdHJ1ZSxcblx0XHRcdFx0Y29ycHMgXHQgIDogVXNlclN2Yy51c2VyQ29ycHMoKSxcblx0XHRcdFx0ZW52IFx0ICA6IHZtLmN1cnJlbnRDYXNlLmVudixcblx0XHRcdFx0ZW52cyBcdCAgOiB2bS5jdXJyZW50Q2FzZS5lbnZzLFxuXHRcdFx0XHRmbG9vciBcdCAgOiB2bS5jdXJyZW50Q2FzZS5mbG9vcixcblx0XHRcdFx0bnRmICAgICAgIDogY3VycmVudE50Zi5faWQsXG5cdFx0XHRcdGxhc3RVcGRhdGUgOiBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU1NLUREIGg6bW06c3MgYScpXG5cdFx0XHR9KS5zdWNjZXNzKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdCR3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG5cdFx0XHR9KVxuXHRcdH07XG5cblx0XHRmdW5jdGlvbiB0ZXJtaW5hdGVDYXNlICgpe1xuXHRcdFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XG5cdFx0XHQgIFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9jYXNlL2Nhc2UuY29uZmlybS5tb2RhbC5odG1sJyxcblx0XHRcdCAgICBjb250cm9sbGVyOiAnQ2FzZUNvbmZpcm1DdHJsJyxcblx0XHRcdCAgICBzaXplOiBcIm1kXCJcdCAgICBcblx0XHRcdH0pO1xuXHRcdH07XG5cdH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLmNhc2UnKVxuXHRcdC5jb250cm9sbGVyKCdDYXNlQ29udHJvbGxlcicsQ2FzZUNvbnRyb2xsZXIpO1xuXHRcblx0Q2FzZUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHN0YXRlUGFyYW1zJywnJG1vZGFsJywnQ2FzZVN2YycsICckbG9nJywgJ1NvY2tldFN2YycsICdVc2VyU3ZjJywgJyRsb2NhdGlvbiddO1xuXHRmdW5jdGlvbiBDYXNlQ29udHJvbGxlcigkc3RhdGVQYXJhbXMsJG1vZGFsLENhc2VTdmMsICRsb2csIFNvY2tldFN2YywgVXNlclN2YywgJGxvY2F0aW9uKXtcblx0XHR2YXIgdm0gPSB0aGlzOyBcblx0XHR2bS5tYXhTaXplIFx0XHQ9IDU7IFxuXHRcdHZtLml0ZW1zUGVyUGFnZSA9IDM7XG5cdFx0dm0uY3VycmVudFBhZ2UgID0gMTtcblx0XHR2bS5wYWdlQ2hhbmdlZCAgPSBwYWdlQ2hhbmdlZDtcblx0XHR2bS5xdWVyeUNhc2VzICAgPSBxdWVyeUNhc2VzO1xuXHRcdHZtLmNob29zZSBcdFx0PSBjaG9vc2U7XG5cdFx0XG5cdFx0dm0ucXVlcnlDYXNlcygpO1xuXG5cdFx0ZnVuY3Rpb24gcGFnZUNoYW5nZWQoKXtcblx0XHRcdENhc2VTdmMuZmV0Y2goVXNlclN2Yy51c2VyQ29ycHMoKSwgdm0uY3VycmVudFBhZ2UgLCB2bS5pdGVtc1BlclBhZ2UgKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xuXHRcdFx0XHR2bS5jYXNlcyA9IGRhdGEuY2FzZXM7XG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gcXVlcnlDYXNlcygpe1xuXHRcdFx0Q2FzZVN2Yy5mZXRjaChVc2VyU3ZjLnVzZXJDb3JwcygpLCB2bS5jdXJyZW50UGFnZSwgdm0uaXRlbXNQZXJQYWdlKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xuXHRcdFx0XHR2bS5jYXNlcyA9IGRhdGEuY2FzZXM7XG5cdFx0XHRcdHZtLnRvdGFsSXRlbXMgPSBkYXRhLnRvdGFsQ2FzZXM7XG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gY2hvb3NlKGlkKXtcblx0XHRcdENhc2VTdmMuZmV0Y2hCeUlkKHZtLmNhc2VzW2lkXS5faWQpLnN1Y2Nlc3MoZnVuY3Rpb24oX2Nhc2Upe1xuXHRcdFx0XHRcdHZtLmNhc2VEZXRhaWxzID0gX2Nhc2U7XG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0U29ja2V0U3ZjLm9uKCduZXdDYXNlJyxmdW5jdGlvbihfY2FzZSl7XG5cdFx0XHR2bS5jYXNlcy51bnNoaWZ0KF9jYXNlKTtcblx0XHR9KTtcblxuXHRcdFNvY2tldFN2Yy5vbignY2FzZU1vZGlmaWVkJyxmdW5jdGlvbihfY2FzZSl7XG5cdFx0XHR2bS5jYXNlc1tfY2FzZS5jYXNlSWQtMV0gPSBfY2FzZTtcblx0XHR9KTtcblx0fTtcblxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuY2FzZSBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuY2FzZScpXG5cdFx0LmNvbnRyb2xsZXIoJ0Nhc2VNb2RhbENvbnRyb2xsZXInLENhc2VNb2RhbENvbnRyb2xsZXIpO1xuXG5cdENhc2VNb2RhbENvbnRyb2xsZXIuJGluamVjdCA9IFsnQ2FyU3ZjJywgJyRtb2RhbEluc3RhbmNlJywgJ0Nhc2VTdmMnLCckc3RhdGUnLCAnY2FzZUlkJywnY2FzZURldGFpbHMnLCAnU3RTdmMnLCAnJHdpbmRvdycsICdCcmFuY2hTdmMnLCAnVXNlclN2YycsICdOdGZTdmMnXTtcblxuXHRmdW5jdGlvbiBDYXNlTW9kYWxDb250cm9sbGVyKENhclN2YywgJG1vZGFsSW5zdGFuY2UsIENhc2VTdmMsJHN0YXRlLCBjYXNlSWQsY2FzZURldGFpbHMsIFN0U3ZjLCAkd2luZG93LCBCcmFuY2hTdmMsIFVzZXJTdmMsIE50ZlN2Yyl7XG5cdFx0dmFyIHZtID0gdGhpczsgXG5cdFx0dm0ubmZ0T3B0aW9uID0ge307XG5cdFx0dm0uZGlzcGF0Y2hMaXN0ID0gdm0uY2FzZU9iai5kaXNwYXRjaExpc3Quam9pbihcIiBcIik7XG5cdFx0dm0uY2FzZU9iaiA9IHtcblx0XHRcdGFkZHJlc3MgOiBjYXNlRGV0YWlscy5hZGRyZXNzIHx8IG51bGwsXG5cdFx0XHRwaG9uZSA6IGNhc2VEZXRhaWxzLnBob25lIHx8IG51bGwsXG5cdFx0ICAgIHR5cGUgOiBjYXNlRGV0YWlscy50eXBlIHx8ICBcIueBq+itplwiLCBcblx0XHQgICAgdHlwZXMgOiBbIFwi54Gr6K2mXCIsIFwi5pWR6K23XCIsIFwi54G95a6zXCIsIFwi5qqi6IiJXCIsXCLlhbbku5ZcIl0sXG5cdFx0ICAgIGVudiAgIDogXCLkvY/lroXngavoraZcIixcblx0XHQgICAgZW52cyAgOiBbXCLkvY/lroXngavoraZcIixcIumrmOaok+OAgeWcsOS4i+iIh+W3peW7oFwiLFwi5pC25pWR5Zuw6Zuj5Y2AXCIsXCLlhbbku5ZcIl0sXG5cdFx0ICAgIGZsb29yIDogMSwgXG5cdFx0ICAgIGNhcklkcyA6IGdldENhcnNEZXRhaWwoY2FzZURldGFpbHMpLmNhcklkcyAgfHwgW10sXG5cdFx0ICAgIGRpc3BhdGNoTGlzdCA6IGdldENhcnNEZXRhaWwoY2FzZURldGFpbHMpLmRpc3BhdGNoTGlzdCB8fCAgW10sXG5cdFx0ICAgIGJyYW5jaGVzIDogZ2V0Q2Fyc0RldGFpbChjYXNlRGV0YWlscykuYnJhbmNoZXMgfHwgIFtdXG5cdFx0fTtcblx0XHR2bS51cGRhdGUgXHQgPSB1cGRhdGU7XG5cdFx0dm0uZ2V0Q2FycyBcdCA9IGdldENhcnM7XG5cdFx0dm0uY2FuY2VsIFx0ID0gY2FuY2VsO1xuXHRcdHZtLmNhbmNlbERpc3BhdGNoID0gY2FuY2VsRGlzcGF0Y2g7XG5cdFx0dm0uZGlzcGF0Y2ggID0gZGlzcGF0Y2g7XG5cdFx0dm0uY2xvc2VDYXNlID0gY2xvc2VDYXNlO1xuXHRcdHZtLnNhdmUgXHQgPSBzYXZlO1xuXG5cdFx0aWYgKF8uaXNFbXB0eShjYXNlRGV0YWlscykpIHtcblx0XHRcdHZtLmlzTmV3ID0gdHJ1ZTtcblx0XHRcdGNhck9ianMgPSBbXTtcblx0XHR9ZWxzZXtcblx0XHRcdHZtLmlzTmV3ID0gZmFsc2U7XG5cdFx0XHR2YXIgY2FyT2JqcyA9IGNhc2VEZXRhaWxzLmNhcnM7XG5cdFx0fTtcblxuXHRcdE50ZlN2Yy5mZXRjaCgpLnN1Y2Nlc3MoZnVuY3Rpb24obmZ0cyl7XG5cdFx0XHR2bS5uZnRPcHRpb24ubmZ0cyA9IG5mdHM7XG5cdFx0fSkudGhlbihmdW5jdGlvbigpe1xuXHRcdFx0dm0ubmZ0T3B0aW9uLm5mdCA9IHZtLm5mdE9wdGlvbi5uZnRzWzBdO1xuXHRcdH0pXG5cblx0XHRCcmFuY2hTdmMuZmV0Y2hCeUNvcnBzKFVzZXJTdmMudXNlckNvcnBzKCkpLnN1Y2Nlc3MoZnVuY3Rpb24oYnJhbmNoZXMpe1xuXHRcdCAgICB2bS5icmFuY2hlcyA9IGJyYW5jaGVzO1xuXHRcdH0pO1xuXG5cdFx0ZnVuY3Rpb24gZ2V0Q2Fyc0RldGFpbChvYmope1xuXHRcdFx0dmFyIGRpc3BhdGNoTGlzdCA9IFtdO1xuXHRcdFx0dmFyIGNhcklkcyA9IFtdO1xuXHRcdFx0dmFyIGJyYW5jaGVzID0gW107XG5cblx0XHRcdGlmIChvYmouY2Fycykge1xuXHRcdFx0XHRmb3IgKHZhciBpID0gb2JqLmNhcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0XHRkaXNwYXRjaExpc3QucHVzaChvYmouY2Fyc1tpXS5yYWRpb0NvZGUpO1xuXHRcdFx0XHRcdGNhcklkcy5wdXNoKG9iai5jYXJzW2ldLl9pZCk7XG5cdFx0XHRcdFx0YnJhbmNoZXMucHVzaChvYmouY2Fyc1tpXS5icmFuY2gpOyBcblx0XHRcdFx0fTtcblx0XHRcdFx0cmV0dXJuIHtkaXNwYXRjaExpc3QgOiBkaXNwYXRjaExpc3QgLCBjYXJJZHMgOiBjYXJJZHMgLCBicmFuY2hlcyA6ICBicmFuY2hlc31cblxuXHRcdFx0fWVsc2V7XG5cdFx0XHRcdHJldHVybiB7fTtcblx0XHRcdH07XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGdldEJyYW5jaElkKGJyYW5jaGVzTGlzdCl7XG5cdFx0XHR2YXIgYnJhbmNoZXMgPSBfLnVuaXF1ZShicmFuY2hlc0xpc3QpO1xuXHRcdFx0dmFyIGJyYW5jaElkcyA9IFtdO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB2bS5icmFuY2hlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZiAoYnJhbmNoZXMuaW5kZXhPZih2bS5icmFuY2hlc1tpXS5uYW1lKSA+IC0xKSB7XG5cdFx0XHRcdFx0YnJhbmNoSWRzLnB1c2godm0uYnJhbmNoZXNbaV0uX2lkKTtcblx0XHRcdFx0fTtcblx0XHRcdH07XG5cdFx0XHRyZXR1cm4gIGJyYW5jaElkcztcblx0XHR9O1xuXHRcdFxuXHRcdGZ1bmN0aW9uIGdldENhcnMoIGJyYW5jaCApe1xuXHRcdFx0IENhclN2Yy5mZXRjaEJ5QnJhbmNoKGJyYW5jaC5uYW1lKS5zdWNjZXNzKGZ1bmN0aW9uKGNhcnMpe1xuXHRcdFx0IFx0Zm9yICh2YXIgaSA9IGNhcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdCBcdFx0aWYgKHZtLmNhc2VPYmouY2FySWRzLmluZGV4T2YoY2Fyc1tpXS5faWQpID4gLTEgKSB7XG5cdFx0XHQgXHRcdFx0Y2Fyc1tpXS5pc0NoZWNrZWQgPSB0cnVlOyBcblx0XHRcdCBcdFx0fTtcblx0XHRcdCBcdH07XG5cdFx0XHQgXHR2bS5jYXJzID0gY2Fycztcblx0XHRcdCB9KTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gY2FuY2VsKCkge1xuXHRcdFx0JG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGNhbmNlbERpc3BhdGNoKGNhcil7XG5cdFx0XHRjYXIuaXNDaGVja2VkID0gZmFsc2U7XG5cdFx0XHRjYXJPYmpzLnNwbGljZShjYXJPYmpzLmluZGV4T2YoY2FyKSwxKVxuXHRcdFx0dm0uY2FzZU9iai5jYXJJZHMuc3BsaWNlKHZtLmNhc2VPYmouZGlzcGF0Y2hMaXN0LmluZGV4T2YoY2FyLl9pZCksMSk7XG5cdFx0XHR2bS5jYXNlT2JqLmRpc3BhdGNoTGlzdC5zcGxpY2Uodm0uY2FzZU9iai5kaXNwYXRjaExpc3QuaW5kZXhPZihjYXIucmFkaW9Db2RlKSwxKTtcblx0XHRcdHZtLmNhc2VPYmouYnJhbmNoZXMuc3BsaWNlKHZtLmNhc2VPYmouZGlzcGF0Y2hMaXN0LmluZGV4T2YoY2FyLmJyYW5jaCksMSk7XG5cdFx0XHR2bS5kaXNwYXRjaExpc3QgPSB2bS5jYXNlT2JqLmRpc3BhdGNoTGlzdC5qb2luKFwiIFwiKTtcblx0XHR9O1xuXHRcdFxuXHRcdGZ1bmN0aW9uIGRpc3BhdGNoKCBjYXIgKXtcblx0XHRcdGNhci5pc0NoZWNrZWQgPSB0cnVlOyBcblx0XHRcdGNhck9ianMucHVzaChjYXIpO1xuXHRcdFx0dm0uY2FzZU9iai5jYXJJZHMucHVzaChjYXIuX2lkKTtcblx0XHRcdHZtLmNhc2VPYmouZGlzcGF0Y2hMaXN0LnB1c2goY2FyLnJhZGlvQ29kZSk7XG5cdFx0XHR2bS5jYXNlT2JqLmJyYW5jaGVzLnB1c2goY2FyLmJyYW5jaCk7XG5cdFx0XHR2bS5kaXNwYXRjaExpc3QgPSB2bS5jYXNlT2JqLmRpc3BhdGNoTGlzdC5qb2luKFwiIFwiKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gY2xvc2VDYXNlKCl7XG5cdFx0XHRTdFN2Yy5jb3VudChjYXNlRGV0YWlscy5faWQpLnN1Y2Nlc3MoZnVuY3Rpb24odG90YWwpe1xuXHRcdFx0XHRpZiAodG90YWwgPiAwICkge1xuXHRcdFx0XHRcdCR3aW5kb3cuYWxlcnQoXCLlsJrmnInpmorlk6HlnKjlronlhajnrqHliLZcIilcblx0XHRcdFx0fWVsc2V7XG5cdFx0XHRcdFx0Q2FzZVN2Yy5jbG9zZUNhc2Uoe1xuXHRcdFx0XHRcdFx0aWQgOiBjYXNlRGV0YWlscy5faWQsXG5cdFx0XHRcdFx0XHRpc09uZ29pbmcgOiBmYWxzZVxuXHRcdFx0XHRcdH0pLnN1Y2Nlc3MoZnVuY3Rpb24obXNnKXtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKG1zZylcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHQkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcblx0XHRcdFx0XHQkc3RhdGUucmVsb2FkKClcblx0XHRcdFx0fTtcblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBzYXZlKCl7XG5cdFx0XHRDYXNlU3ZjLmNyZWF0ZSh7XG5cdFx0XHRcdGNhc2VJZCAgIDogY2FzZUlkICsgMSwgXG5cdFx0XHRcdGFkZHJlc3MgICA6IHZtLmNhc2VPYmouYWRkcmVzcyB8fCBcIua4rOipplwiLFxuXHRcdFx0XHRvZmZpY2VyUmVjZWl2ZXIgOiBVc2VyU3ZjLmN1cnJlbnRVc2VyKCkgfHwgIFwi5YqJ5puJ5pu8XCIsXG5cdFx0XHRcdHR5cGUgICAgICA6IHZtLmNhc2VPYmoudHlwZSB8fCBcIuaVkeitt1wiLFxuXHRcdFx0XHRwaG9uZSAgICAgOiB2bS5jYXNlT2JqLnBob25lIHx8IFwi5ris6KmmXCIsXG5cdFx0XHRcdGJyYW5jaGVzICA6IF8udW5pcXVlKHZtLmNhc2VPYmouYnJhbmNoZXMpLFxuXHRcdFx0XHRicmFuY2hJZHMgOiBnZXRCcmFuY2hJZCh2bS5jYXNlT2JqLmJyYW5jaGVzKSxcblx0XHQgIFx0XHRjYXJzICAgICAgOiB2bS5jYXNlT2JqLmNhcklkcyxcblx0XHRcdFx0aXNPbmdvaW5nIDogdHJ1ZSxcblx0XHRcdFx0Y29ycHMgXHQgIDogVXNlclN2Yy51c2VyQ29ycHMoKSxcblx0XHRcdFx0ZW52IFx0ICA6IHZtLmNhc2VPYmouZW52LFxuXHRcdFx0XHRmbG9vciBcdCAgOiB2bS5jYXNlT2JqLmZsb29yXG5cdFx0XHR9KS5zdWNjZXNzKGZ1bmN0aW9uKG5ld0Nhc2Upe1xuXHRcdFx0XHQkbW9kYWxJbnN0YW5jZS5jbG9zZShuZXdDYXNlKVxuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHVwZGF0ZSgpe1xuXHRcdFx0dmFyIGNvbnRlbnQgPSB7XG5cdFx0XHRcdGlkIDogY2FzZURldGFpbHMuX2lkLFxuXHRcdFx0XHRjYXNlSWQgICA6IGNhc2VJZCwgXG5cdFx0XHRcdGFkZHJlc3MgICA6IHZtLmNhc2VPYmouYWRkcmVzcyxcblx0XHRcdFx0b2ZmaWNlclJlY2VpdmVyIDogVXNlclN2Yy5jdXJyZW50VXNlcigpIHx8IFwi5YqJ5puJ5pu8XCIsXG5cdFx0XHRcdHR5cGUgICAgICA6IHZtLmNhc2VPYmoudHlwZSxcblx0XHRcdFx0cGhvbmUgICAgIDogdm0uY2FzZU9iai5waG9uZSxcblx0XHRcdFx0YnJhbmNoZXMgIDogXy51bmlxdWUodm0uY2FzZU9iai5icmFuY2hlcyksXG5cdFx0XHRcdGJyYW5jaElkcyA6IGdldEJyYW5jaElkKHZtLmNhc2VPYmouYnJhbmNoZXMpLFxuXHRcdCAgXHRcdGNhcnMgICAgICA6IHZtLmNhc2VPYmouY2FySWRzLFxuXHRcdFx0XHRpc09uZ29pbmcgOiB0cnVlLFxuXHRcdFx0XHRlbnYgXHQgIDogdm0uY2FzZU9iai5lbnYsXG5cdFx0XHRcdGZsb29yIFx0ICA6IHZtLmNhc2VPYmouZmxvb3Jcblx0XHRcdH07XG5cdFx0XHRcblx0XHRcdENhc2VTdmMudXBkYXRlKGNvbnRlbnQpO1xuXHRcdFx0JG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XG5cdFx0fTtcblx0fVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuY2FzZSBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuY2FzZScpXG5cdFx0LmNvbnRyb2xsZXIoJ0Nhc2VOZXdDb250cm9sbGVyJyxDYXNlTmV3Q29udHJvbGxlcik7XG5cblx0Q2FzZU5ld0NvbnRyb2xsZXIuJGluamVjdCA9IFsnQ2FyU3ZjJywgJ0JyYW5jaFN2YycsICdOdGZTdmMnLCAnVXNlclN2YycsJyRsb2NhdGlvbicsJ2xlYWZsZXREYXRhJywgJyRzdGF0ZVBhcmFtcycsICdDYXNlU3ZjJywgJyR3aW5kb3cnLCAnJHN0YXRlJywgJ0dlb1N2YyddO1xuXG5cdGZ1bmN0aW9uIENhc2VOZXdDb250cm9sbGVyKENhclN2YywgQnJhbmNoU3ZjLCBOdGZTdmMsIFVzZXJTdmMsJGxvY2F0aW9uLGxlYWZsZXREYXRhLCAkc3RhdGVQYXJhbXMsIENhc2VTdmMsICR3aW5kb3csICRzdGF0ZSwgR2VvU3ZjKXtcblx0XHR2YXIgdm0gPSB0aGlzO1xuXHRcdHZtLnNlbGVjdEJyYW5jaCA9IHNlbGVjdEJyYW5jaDtcblx0XHR2bS5zYXZlID0gc2F2ZTtcblx0XHR2bS5sb2NhdGVBZGRyZXNzID0gbG9jYXRlQWRkcmVzcztcblx0XHR2bS5jYW5jZWxEaXNwYXRjaCA9IGNhbmNlbERpc3BhdGNoO1xuXHRcdHZtLmRpc3BhdGNoID0gZGlzcGF0Y2g7XG5cdFx0dm0uY3VycmVudFRpbWUgPSAgbW9tZW50KCkuZm9ybWF0KCdoOm1tOnNzIGEnKTsgXG5cdFx0dmFyIGJhdHRsZVJhZGl1c3MgPSBbXTtcblx0XHR2YXIgZGlzcGF0Y2hDYXJzID0gW107XG5cdFx0dmFyIG5vdGlmaWNhdGlvbnM7XG5cdFx0dm0uZGlzcGF0Y2hMaXN0ID0gdm0uY3VycmVudENhc2UuZGlzcGF0Y2hMaXN0LmpvaW4oJyAnKTtcblx0XHRcblx0XHR2bS5jdXJyZW50Q2FzZSA9IHtcblx0XHRcdHBob25lIFx0OiBudWxsLFxuXHRcdCAgICB0eXBlIFx0OiAn54Gr6K2mJywgXG5cdFx0ICAgIHR5cGVzIFx0OiBbICfngavoraYnLCAn5pWR6K23JywgJ+eBveWusycsICfmqqLoiIknLCflhbbku5YnXSxcblx0XHQgICAgZW52ICAgXHQ6ICfkvY/lroXngavoraYnLFxuXHRcdCAgICBlbnZzICBcdDogWyfkvY/lroXngavoraYnLCfpq5jmqJPjgIHlnLDkuIvoiIflt6Xlu6AnLCfmkLbmlZHlm7Dpm6PljYAnLCflhbbku5YnXSxcblx0XHQgICAgZmxvb3IgXHQ6IDEsIFxuXHRcdCAgICBjYXJJZHMgIDogW10sXG5cdFx0ICAgIGRpc3BhdGNoTGlzdCA6IFtdLFxuXHRcdCAgICBicmFuY2hlcyA6ICBbXSxcblx0XHQgICAgbG9jYXRpb24gOiBHZW9TdmMuZGVmYXVsdExvY2F0aW9uKClcblx0XHR9OyBcblxuXHRcdEdlb1N2Yy5mZXRjaEJhc2VMb2NhdGlvbihVc2VyU3ZjLnVzZXJDb3JwcygpKS5zdWNjZXNzKGZ1bmN0aW9uKGxvY2F0aW9ucyl7XG5cdFx0XHR2bS5sb2NhdGlvbnMgPSBsb2NhdGlvbnM7XG5cdFx0fSk7XG5cblx0ICAgIGFuZ3VsYXIuZXh0ZW5kKHZtLCB7XG5cdCAgICAgICAgbm93UG9zOiB7XG5cdCAgICAgICAgICAgIGxhdDogR2VvU3ZjLmRlZmF1bHRMb2NhdGlvbigpLmxhdCxcblx0ICAgICAgICAgICAgbG5nOiBHZW9TdmMuZGVmYXVsdExvY2F0aW9uKCkubG5nLFxuXHQgICAgICAgICAgICB6b29tOiAxN1xuXHQgICAgICAgIH0sXG5cdCAgICAgICBtYXJrZXJzOiB7fSxcblx0ICAgIH0pO1xuXG5cdFx0QnJhbmNoU3ZjLmZldGNoQnlDb3JwcyhVc2VyU3ZjLnVzZXJDb3JwcygpKS5zdWNjZXNzKGZ1bmN0aW9uKGJyYW5jaGVzKXtcblx0XHQgICAgdm0uYnJhbmNoZXMgPSBicmFuY2hlcztcblx0XHQgICAgdm0uY3VycmVudEJyYW5jaCA9IGJyYW5jaGVzWzBdLm5hbWVcblx0XHR9KTtcblxuXHRcdENhclN2Yy5mZXRjaEJ5Q29ycHMoVXNlclN2Yy51c2VyQ29ycHMoKSkuc3VjY2VzcyhmdW5jdGlvbihjYXJzKXtcblx0XHRcdHZtLmNhcnMgPSBjYXJzOyBcblx0XHR9KTtcblxuXHRcdE50ZlN2Yy5mZXRjaCgpLnN1Y2Nlc3MoZnVuY3Rpb24obnRmcyl7XG5cdFx0XHRub3RpZmljYXRpb25zID0gbnRmcztcblx0XHRcdHZtLmN1cnJlbnRDYXNlLm50ZnMgPSBfLnBsdWNrKG50ZnMsJ3R5cGUnKVxuXHRcdFx0dm0uY3VycmVudENhc2UubnRmICA9IHZtLmN1cnJlbnRDYXNlLm50ZnNbMF07XG5cdFx0fSk7XG5cblx0XHRmdW5jdGlvbiBsb2NhdGVBZGRyZXNzKCl7XG5cdFx0XHRpZiAodm0uY3VycmVudENhc2UuYWRkcmVzcykge1xuXHRcdFx0XHRHZW9TdmMuZ2V0R2VvRW5jb2RlZEluZm8odm0uY3VycmVudENhc2UuYWRkcmVzcykudGhlbihmdW5jdGlvbihyZXMpe1xuXHRcdFx0ICAgICAgICB2bS5ub3dQb3MubGF0ID0gcmVzLko7XG5cdFx0XHQgICAgICAgIHZtLm5vd1Bvcy5sbmcgPSByZXMuTTtcblx0XHQgICAgICAgICAgICB2bS5tYXJrZXJzLm1haW5NYXJrZXIgPSB7XG5cdFx0ICAgICAgICAgICAgXHRsYXQ6IHJlcy5KLFxuXHRcdCAgICAgICAgICAgICAgICBsbmc6IHJlcy5NLFxuXHRcdCAgICAgICAgICAgICAgICBmb2N1czogdHJ1ZSxcblx0XHQgICAgICAgICAgICAgICAgbWVzc2FnZTogXCLmoYjku7bmqJnnmoRcIixcblx0XHQgICAgICAgICAgICB9O1xuXG5cdFx0ICAgICAgICAgICAgaWYgKHJlcykge1xuXHRcdCAgICAgICAgICAgIFx0dm0ubG9jYXRpb25zLmZvckVhY2goZnVuY3Rpb24obG9jYXRpb24pe1xuXHRcdFx0ICAgICAgICAgICAgXHR2YXIgciA9IEdlb1N2Yy5nZXREaXN0YW5jZSggbG9jYXRpb24sIHsgbGF0IDogcmVzLkogLCBsbmcgOiByZXMuTSB9ICk7XG5cdFx0XHQgICAgICAgICAgICBcdHZhciBiYXR0bGVSYWRpdXMgPSAgeyBiYXNlIDogbG9jYXRpb24uYnJhbmNoLCAgdG8gOiB7IGxhdCA6IHJlcy5KLCBsbmcgOiAgcmVzLk0gfSwgZnJvbSA6IHsgbGF0IDogbG9jYXRpb24ubGF0LCBsbmcgOiBsb2NhdGlvbi5sbmcgfSwgZCA6IHIgfTsgXG5cdFx0XHQgICAgICAgICAgICBcdGJhdHRsZVJhZGl1c3MucHVzaCggSlNPTi5zdHJpbmdpZnkoYmF0dGxlUmFkaXVzKSk7XG5cdFx0XHQgICAgICAgICAgICB9KTtcblx0XHQgICAgICAgICAgICB9O1xuXHRcdFx0XHR9KTtcblx0XHRcdH07XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHNlbGVjdEJyYW5jaChicmFuY2gpe1xuXHQgICAgXHR2bS5jdXJyZW50QnJhbmNoID0gYnJhbmNoLm5hbWU7XG5cdCAgICB9O1xuXG5cdFx0ZnVuY3Rpb24gZGlzcGF0Y2goIGNhciApe1xuXHRcdFx0Y2FyLmlzQ2hlY2tlZCA9IHRydWU7IFxuXHRcdFx0ZGlzcGF0Y2hDYXJzLnB1c2goY2FyKTtcblx0XHRcdHZtLmRpc3BhdGNoTGlzdCA9IF8ucGx1Y2soZGlzcGF0Y2hDYXJzLCAncmFkaW9Db2RlJykuam9pbihcIiBcIik7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGNhbmNlbERpc3BhdGNoKGNhcil7XG5cdFx0XHRjYXIuaXNDaGVja2VkID0gZmFsc2U7XG5cdFx0XHRkaXNwYXRjaENhcnMuc3BsaWNlKF8ucGx1Y2soZGlzcGF0Y2hDYXJzLCAnX2lkJykuaW5kZXhPZihjYXIuX2lkKSwxKTtcblx0XHRcdHZtLmRpc3BhdGNoTGlzdCA9IF8ucGx1Y2soZGlzcGF0Y2hDYXJzLCAncmFkaW9Db2RlJykuam9pbihcIiBcIik7XG5cdFx0XHR2bS5kaXNwYXRjaExpc3QgPSB2bS5jdXJyZW50Q2FzZS5kaXNwYXRjaExpc3Quam9pbihcIiBcIik7XG5cdFx0fTtcblx0XG5cdFx0ZnVuY3Rpb24gc2F2ZSgpe1xuXHRcdFx0dmFyIGN1cnJlbnROdGY7XG5cdFx0XHR2YXIgYnJhbmNoZXMgID0gXy51bmlxdWUoXy5wbHVjayhkaXNwYXRjaENhcnMsICdicmFuY2gnKSk7XG5cdFx0XHR2YXIgZGlzcGF0Y2ggPSB2bS5icmFuY2hlcy5maWx0ZXIoZnVuY3Rpb24oYnJhbmNoKSB7IHJldHVybiBicmFuY2hlcy5pbmRleE9mKGJyYW5jaC5uYW1lKSA+IC0xIH0pO1xuXG5cdFx0XHRub3RpZmljYXRpb25zLmZvckVhY2goZnVuY3Rpb24obnRmLGlkKXtcblx0XHRcdFx0aWYgKG50Zi50eXBlID09IHZtLmN1cnJlbnRDYXNlLm50ZiApe1xuXHRcdFx0XHRcdGN1cnJlbnROdGYgID0gbm90aWZpY2F0aW9uc1tpZF1cblx0XHRcdFx0fTtcblx0XHRcdH0pO1xuXG5cdFx0XHRDYXNlU3ZjLmNyZWF0ZSh7XG5cdFx0XHRcdG9mZmljZXJSZWNlaXZlciA6IFVzZXJTdmMuY3VycmVudFVzZXIoKSB8fCAgJ+WKieabieabvCcsXG5cdFx0XHRcdHR5cGUgICAgICBcdFx0OiB2bS5jdXJyZW50Q2FzZS50eXBlIHx8ICfngavoraYnLFxuXHRcdFx0XHR0eXBlcyBcdCAgXHRcdDogdm0uY3VycmVudENhc2UudHlwZXMsXG5cdFx0XHRcdHBob25lICAgICBcdFx0OiB2bS5jdXJyZW50Q2FzZS5waG9uZSB8fCAn5ris6KmmJyxcblx0XHRcdFx0YnJhbmNoZXMgIFx0XHQ6IF8udW5pcXVlKF8ucGx1Y2soZGlzcGF0Y2hDYXJzLCAnYnJhbmNoJykpLFxuXHRcdFx0XHRicmFuY2hJZHMgXHRcdDogXy5wbHVjayhkaXNwYXRjaCwgJ19pZCcpLFxuXHRcdCAgXHRcdGNhcnMgICAgICBcdFx0OiBfLnBsdWNrKGRpc3BhdGNoQ2FycywnX2lkJyksXG5cdFx0XHRcdGNvcnBzIFx0ICBcdFx0OiBVc2VyU3ZjLnVzZXJDb3JwcygpLFxuXHRcdFx0XHRlbnYgXHQgIFx0XHQ6IHZtLmN1cnJlbnRDYXNlLmVudixcblx0XHRcdFx0ZW52cyBcdCAgXHRcdDogdm0uY3VycmVudENhc2UuZW52cyxcblx0XHRcdFx0Zmxvb3IgXHQgIFx0XHQ6IHZtLmN1cnJlbnRDYXNlLmZsb29yLFxuXHRcdFx0XHRudGYgICAgICAgXHRcdDogY3VycmVudE50Zi5faWQsXG5cdFx0XHRcdGNyZWF0ZUF0ICBcdFx0OiBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU1NLURELCBoOm1tOnNzIGEnKSxcblx0XHRcdFx0bGFzdFVwZGF0ZSBcdFx0OiBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU1NLURELCBoOm1tOnNzIGEnKSxcblx0XHRcdFx0bG9jYXRpb24gIFx0XHQ6ICB7XG5cdFx0XHRcdFx0bGF0IFx0OiB2bS5jdXJyZW50Q2FzZS5sb2NhdGlvbi5sYXQsXG5cdFx0XHRcdFx0bG5nIFx0OiB2bS5jdXJyZW50Q2FzZS5sb2NhdGlvbi5sbmcsXG5cdFx0XHRcdFx0YWRkcmVzcyA6IHZtLmN1cnJlbnRDYXNlLmxvY2F0aW9uLmFkZHJlc3MgfHwgJ+a4rOippidcblx0XHRcdFx0fSxcblx0XHRcdFx0YmF0dGxlUmFkaXVzcyBcdDogYmF0dGxlUmFkaXVzc1xuXHRcdFx0fSkuc3VjY2VzcyhmdW5jdGlvbigpe1xuXHRcdFx0XHQkd2luZG93Lmhpc3RvcnkuYmFjaygpO1xuXHRcdFx0fSk7XG5cdFx0fTtcblx0fVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuY2FzZSBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuY2FzZScpXG5cdFx0LnNlcnZpY2UoJ0Nhc2VTdmMnLCBDYXNlU3ZjKTtcblxuXHRDYXNlU3ZjLiRpbmplY3QgPSBbJyRodHRwJ107XG5cblx0ZnVuY3Rpb24gQ2FzZVN2YyggJGh0dHAgKSB7XG5cdFx0dmFyIHN2YyA9IHRoaXM7XG5cdFx0c3ZjLmZldGNoIFx0XHQ9IGZldGNoO1xuXHRcdHN2Yy5mZXRjaEFsbCBcdD0gZmV0Y2hBbGw7XG5cdFx0c3ZjLmNsb3NlQ2FzZSBcdD0gY2xvc2VDYXNlO1xuXHRcdHN2Yy5mZXRjaFJlbGF0aXZlQ2FzZSA9IGZldGNoUmVsYXRpdmVDYXNlOyBcblx0XHRzdmMuZmV0Y2hEZXRhaWxzID0gZmV0Y2hEZXRhaWxzO1xuXHRcdHN2Yy5mZXRjaEJ5SWQgXHQ9IGZldGNoQnlJZDtcblx0XHRzdmMuY3JlYXRlIFx0XHQ9IGNyZWF0ZTtcblx0XHRzdmMuZGVsZXRlIFx0XHQ9IGRlbGV0ZUNhc2U7XG5cdFx0c3ZjLnVwZGF0ZSBcdFx0PSB1cGRhdGU7XG5cdFx0XG5cdFx0ZnVuY3Rpb24gZmV0Y2goY29ycHMsIHBhZ2UsIGl0ZW1zUGVyUGFnZSl7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2Nhc2VzP2NvcnBzPScgKyBjb3JwcyArICcmcGFnZT0nICsgcGFnZSArICcmaXBwPScgKyBpdGVtc1BlclBhZ2UgKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gZmV0Y2hBbGwoKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2FzZXMvZGV0YWlscycpO1xuXHRcdH07XG5cdFx0XG5cdFx0ZnVuY3Rpb24gZmV0Y2hSZWxhdGl2ZUNhc2UoY29uKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2FzZXMvYnJhbmNoP2JyYW5jaD0nICsgY29uLmJyYW5jaCArICcmYWNjZXNzTGV2ZWw9JyArIGNvbi5hY2Nlc3NMZXZlbCArICcmY29ycHM9JyArIGNvbi5jb3JwcyApO1xuXHRcdH07XG5cdFx0XG5cdFx0ZnVuY3Rpb24gZmV0Y2hEZXRhaWxzKGNhc2VJZCl7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2Nhc2VzL2RldGFpbHMvJyArIGNhc2VJZCk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGZldGNoQnlJZCggY2FzZUlkICl7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2Nhc2VzLycgKyBjYXNlSWQgKTtcblx0XHR9O1xuXHRcdFxuXHRcdGZ1bmN0aW9uIGNyZWF0ZShjYXNlX2luZm8pe1xuXHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY2FzZXMnLCBjYXNlX2luZm8pO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBkZWxldGVDYXNlKGNhc2VJZCl7XG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jYXNlcy8nICsgY2FzZUlkKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gdXBkYXRlKHVwZGF0ZWRfY2FzZSl7XG5cdFx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL2Nhc2VzLycgKyB1cGRhdGVkX2Nhc2UuY2FzZUlkICwgdXBkYXRlZF9jYXNlKTtcblx0XHR9O1xuXHRcdFxuXHRcdGZ1bmN0aW9uIGNsb3NlQ2FzZShkYXRhKXtcblx0XHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvY2FzZXMvY2xvc2U/aWQ9JyArIGRhdGEuaWQsIGRhdGEgKTtcblx0XHR9O1xuXHR9XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5jYXNlIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5jYXNlJylcblx0XHQuY29udHJvbGxlcignQ2FzZVNob3dDb250cm9sbGVyJywgQ2FzZVNob3dDb250cm9sbGVyKTtcblxuXHRcdENhc2VTaG93Q29udHJvbGxlci4kaW5qZWN0ID0gIFsgJ1N0U3ZjJywgJyRzdGF0ZVBhcmFtcycsICckaW50ZXJ2YWwnLCAnJHN0YXRlJywgJ1NvY2tldFN2YycsICdDYXNlU3ZjJywgJ0JyYW5jaFN2YycsICdTdE1pc3Npb25GYWMnXTtcblxuXHRcdGZ1bmN0aW9uIENhc2VTaG93Q29udHJvbGxlcigpe1xuXHRcdFx0dmFyIHZtID0gdGhpczsgXG5cdFx0XHR2bS5pc0NvbGxhcHNlZCA9IHRydWUgO1xuXHRcdFx0dm0ubWVtYmVycyA9IFtdO1xuXHRcdFx0dm0ucG9zaXRpb25zID0gU3RNaXNzaW9uRmFjLnBvc2l0aW9uKCkucG9zcztcblxuXHRcdFx0U29ja2V0U3ZjLm9uKCduZXdTdCcsIGZ1bmN0aW9uKHN0KXtcblx0XHRcdFx0aWYgKCBhbmd1bGFyLmVxdWFscyhjYXNlSWQsc3QuY2FzZUlkKSkge1xuXHRcdFx0XHRcdHZhciBuZXdTdCA9IGFuZ3VsYXIuY29weShzdCk7XG5cdFx0XHRcdFx0dm0uc3RyaWtlVGVhbXMucHVzaChuZXdTdCk7XG5cdFx0XHRcdH07XG5cdFx0XHRcdHZtLmRlcGxveXMgPSBpbml0VGFibGUodm0uc3RyaWtlVGVhbXMpO1xuXHRcdFx0XHR2bS5kZXBsb3lEZXRhaWxzID0gaW5pdERlcGxveSh2bS5zdHJpa2VUZWFtcyk7XG5cdFx0XHR9KTtcblxuXHRcdFx0U29ja2V0U3ZjLm9uKCd1cGRhdGVTdCcsIGZ1bmN0aW9uKGRhdGEpe1xuXHRcdFx0XHRTdFN2Yy5mZXRjaEJ5Q2FzZShjYXNlSWQpLnN1Y2Nlc3MoZnVuY3Rpb24oc3RyaWtlVGVhbXMpe1xuXHRcdFx0XHRcdHZtLnN0cmlrZVRlYW1zID0gc3RyaWtlVGVhbXM7XG5cdFx0XHRcdFx0dm0uc3RyaWtlVGVhbXMuZm9yRWFjaChmdW5jdGlvbihzdCl7XG5cdFx0XHRcdFx0XHRzdC5saW1pdFRpbWUgPSBtb21lbnQuZHVyYXRpb24oc3Qud29ya2luZ1RpbWUsJ3NlY29uZHMnKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR2bS5kZXBsb3lzID0gaW5pdFRhYmxlKHZtLnN0cmlrZVRlYW1zKTtcblx0XHRcdFx0XHR2bS5kZXBsb3lEZXRhaWxzID0gaW5pdERlcGxveSh2bS5zdHJpa2VUZWFtcyk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHR9KVxuXG5cdFx0XHRTb2NrZXRTdmMub24oJ2Rpc21pc3MnLCBmdW5jdGlvbihkYXRhKXtcblx0XHRcdFx0U3RTdmMuZmV0Y2hCeUNhc2UoY2FzZUlkKS5zdWNjZXNzKGZ1bmN0aW9uKHN0cmlrZVRlYW1zKXtcblx0XHRcdFx0XHR2bS5zdHJpa2VUZWFtcyBcdCA9IHN0cmlrZVRlYW1zO1xuXHRcdFx0XHRcdHZtLmRlcGxveXMgXHRcdCA9IGluaXRUYWJsZSh2bS5zdHJpa2VUZWFtcyk7XG5cdFx0XHRcdFx0dm0uZGVwbG95RGV0YWlscyA9IGluaXREZXBsb3kodm0uc3RyaWtlVGVhbXMpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cblx0XHRcdHZhciBjYXNlSWQgPSAkc3RhdGVQYXJhbXMuaWQ7XG5cdFx0XHRDYXNlU3ZjLmZldGNoRGV0YWlscyhjYXNlSWQpLnN1Y2Nlc3MoZnVuY3Rpb24oX2Nhc2Upe1xuXHRcdFx0XHRfY2FzZS5lbnYgPT0gJ+S9j+WuheeBq+itpicgPyB2bS5hcGFydG1lbnQgPSB0cnVlIDogdm0uYXBhcnRtZW50ID0gZmFsc2U7XG5cdFx0XHRcdHZtLmNhc2VEZXRhaWwgPSBfY2FzZTtcblx0XHRcdFx0dm0ucG9zaXRpb24gPSB7XG5cdFx0XHRcdFx0ZGVmYXVsdFBvcyBcdDogXCLnrKzkuIDpnaJcIixcblx0XHRcdFx0XHRwb3NpdGlvbnMgXHQ6IFtcIuesrOS4gOmdolwiLFwi56ys5LqM6Z2iXCIsXCLnrKzkuInpnaJcIixcIuesrOWbm+mdolwiXSxcblx0XHRcdFx0XHRmbG9vciBcdFx0OiB2bS5jYXNlRGV0YWlsLmZsb29yLFxuXHRcdFx0XHRcdGZsb29ycyAgXHQ6IHZtLmNhc2VEZXRhaWwuZmxvb3IgPCA1PyBfLnJhbmdlKDEsNiwxKSA6IF8ucmFuZ2Uodm0uY2FzZURldGFpbC5mbG9vci0yLHZtLmNhc2VEZXRhaWwuZmxvb3IrMywxKVxuXHRcdFx0XHR9O1xuXHRcdFx0fSk7XG5cblx0XHRcdFN0U3ZjLmZldGNoQnlDYXNlKGNhc2VJZCkuc3VjY2VzcyhmdW5jdGlvbihzdHJpa2VUZWFtcyl7XG5cdFx0XHRcdGlmIChzdHJpa2VUZWFtcykge1xuXHRcdFx0XHRcdHZtLnN0cmlrZVRlYW1zID0gc3RyaWtlVGVhbXM7XG5cdFx0XHRcdFx0dm0uc3RyaWtlVGVhbXMuZm9yRWFjaChmdW5jdGlvbihzdCl7XG5cdFx0XHRcdFx0XHRzdC5saW1pdFRpbWUgPSBtb21lbnQuZHVyYXRpb24oc3Qud29ya2luZ1RpbWUsJ3NlY29uZHMnKTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR2bS5kZXBsb3lzID0gaW5pdFRhYmxlKHZtLnN0cmlrZVRlYW1zKTtcblx0XHRcdFx0XHR2bS5kZXBsb3lEZXRhaWxzID1pbml0RGVwbG95KHZtLnN0cmlrZVRlYW1zKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRyZXR1cm4gXG5cdFx0XHRcdH07XG5cdFx0XHR9KTtcblxuXG5cdFx0XHR2YXIgaW5pdERlcGxveSA9IGZ1bmN0aW9uKHN0cmlrZVRlYW1zKXtcblx0XHRcdFx0cmV0dXJuICBfLmdyb3VwQnkoc3RyaWtlVGVhbXMsZnVuY3Rpb24oc3Qpe1xuXHRcdFx0XHRcdFx0cmV0dXJuIHN0LnBvc2l0aW9uO1xuXHRcdFx0XHR9KTtcblx0XHRcdH07XG5cblx0XHRcdHZhciBpbml0VGFibGUgPSAgZnVuY3Rpb24oc3RyaWtlVGVhbXMpe1xuXHRcdFx0ICBcdHZhciBkZXBsb3lBcnJheSA9IF8ucmFuZ2UoNCkubWFwKGZ1bmN0aW9uICgpIHtcblx0XHRcdCAgICAgICAgcmV0dXJuIF8ucmFuZ2UoNSkubWFwKGZ1bmN0aW9uICgpIHtcblx0XHRcdCAgICAgICAgICAgIHJldHVybiB7IHRvdGFsTWVtYmVyIDogMCwgc3RUb3RhbCA6IDAgLCBzdHMgOiBbXSB9IDtcblx0XHRcdCAgICAgICAgfSk7XG5cdFx0XHQgICAgfSk7XG5cblx0XHRcdFx0aWYgKCBzdHJpa2VUZWFtcyApe1xuXHRcdFx0XHRcdGZvciAodmFyIGkgPSBzdHJpa2VUZWFtcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0XHRcdFx0dmFyIHRvdGFsTWVtYmVyID0gMDtcblx0XHRcdFx0XHRcdHZhciB5ID0gbnVsbDtcblx0XHRcdFx0XHRcdHZhciBzdCA9IDA7XG5cdFx0XHRcdFx0XHR2YXIgeCA9IF8uaW5kZXhPZihzdHJpa2VUZWFtc1tpXS5wb3NpdGlvbnMsIHN0cmlrZVRlYW1zW2ldLnBvc2l0aW9uKTtcblx0XHRcdFx0XHRcdHZtLmFwYXJ0bWVudCA/IHkgPSBfLmluZGV4T2Yoc3RyaWtlVGVhbXNbaV0uZmxvb3JzLCBzdHJpa2VUZWFtc1tpXS5mbG9vcikgOiB5ID0gXy5pbmRleE9mKHN0cmlrZVRlYW1zW2ldLmFyZWFzLCBzdHJpa2VUZWFtc1tpXS5hcmVhKVxuXHRcdFx0XHRcdFx0ZGVwbG95QXJyYXlbeF1beV0uc3RUb3RhbCArPSAxO1xuXHRcdFx0XHRcdFx0ZGVwbG95QXJyYXlbeF1beV0udG90YWxNZW1iZXIgKz0gc3RyaWtlVGVhbXNbaV0ubWVtYmVycy5sZW5ndGg7XG5cdFx0XHRcdFx0XHR2YXIgc3RJbkZvID0ge307XG5cdFx0XHRcdFx0XHRzdEluRm8uaWQgPSBzdHJpa2VUZWFtc1tpXS5icmFuY2ggKyBzdHJpa2VUZWFtc1tpXS5pZFxuXHRcdFx0XHRcdFx0c3RJbkZvLm51bWJlciA9IHN0cmlrZVRlYW1zW2ldLm1lbWJlcnMubGVuZ3RoO1xuXHRcdFx0XHRcdFx0c3RJbkZvLmdyb3VwID0gc3RyaWtlVGVhbXNbaV0uZ3JvdXA7XG5cdFx0XHRcdFx0XHRkZXBsb3lBcnJheVt4XVt5XS5zdHMucHVzaChzdEluRm8pO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGRlcGxveUFycmF5XG5cdFx0XHR9O1xuXHRcdFx0XG5cdFx0XHR2bS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0ICAgICAgICBTb2NrZXRTdmMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG5cdFx0ICAgIH0pO1xuXHRcdH1cbn0pKCk7IiwiOyhmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcCBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAnKVxuXHRcdC5jb250cm9sbGVyKCdMb2dpbkNvbnRyb2xsZXInLExvZ2luQ29udHJvbGxlcik7XG5cblx0XHRMb2dpbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnVXNlclN2YycsICdzdG9yZScsICckc3RhdGUnLCdqd3RIZWxwZXInLCckaHR0cCcsICdTb2NrZXRTdmMnXTtcblxuXHRcdGZ1bmN0aW9uIExvZ2luQ29udHJvbGxlcihVc2VyU3ZjLCBzdG9yZSwgJHN0YXRlLGp3dEhlbHBlciwkaHR0cCwgU29ja2V0U3ZjICl7XG5cdFx0XHR2YXIgdm0gXHQgPSB0aGlzOyBcblx0XHRcdHZtLmxvZ2luID0gbG9naW47XG5cdFx0XHR2bS51c2VyICA9IHt9O1xuXG5cdFx0XHRmdW5jdGlvbiBsb2dpbigpe1xuXHRcdFx0XHRVc2VyU3ZjLmxvZ2luKHZtLnVzZXIpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHRcdFx0aWYgKGRhdGEuc3VjY2Vzcykge1xuXHRcdFx0XHRcdFx0c3RvcmUuc2V0KCdqd3QnLGRhdGEudG9rZW4pO1xuXHRcdFx0XHRcdFx0JGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ3gtYWNjZXNzLXRva2VuJ10gPSBkYXRhLnRva2VuO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGRhdGEudG9rZW47IFxuXHRcdFx0XHRcdH0gZWxzZSB7IFxuXHRcdFx0XHRcdFx0cmV0dXJuIGNvbnNvbGUubG9nKFwicGFzc3dvcmQgaXMgbm90IGV4aXN0ZWRcIik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KS50aGVuKGZ1bmN0aW9uKHRva2VuKXtcblx0XHRcdFx0XHRTb2NrZXRTdmMuaW5pdCh0b2tlbik7XG5cdFx0XHRcdFx0U29ja2V0U3ZjLmVtaXQoJ2xvZ2luJyk7XG5cdFx0XHRcdH0pLnRoZW4oZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRpZiAoand0SGVscGVyLmRlY29kZVRva2VuKHRva2VuKS5yb2xlID09IFwiYWRtaW5cIikge1xuXHRcdFx0XHRcdFx0dmFyIHVzZXJCcmFuY2ggPSBqd3RIZWxwZXIuZGVjb2RlVG9rZW4odG9rZW4pLmJyYW5jaDtcblx0XHRcdFx0XHRcdGlmICh1c2VyQnJhbmNoLnNsaWNlKHVzZXJCcmFuY2gubGVuZ3RoLTIgLHVzZXJCcmFuY2gubGVuZ3RoKSA9PSBcIuWkp+mailwiKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiAkc3RhdGUuZ28oJ2R1dHlEZXNrLmNvcnBzJylcblx0XHRcdFx0XHRcdH0gZWxzZXtcblx0XHRcdFx0XHRcdFx0cmV0dXJuICRzdGF0ZS5nbygnZHV0eURlc2suYnJhbmNoJylcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fWVsc2V7XG5cdFx0XHRcdFx0XHRyZXR1cm4gJHN0YXRlLmdvKCdkaXJlY3Rvci5zYWZldHkuaW5kZXgnKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSlcblx0XHRcdH07XG5cdFx0fTtcbn0pKCk7IiwiOyhmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAucm91dGVyJyxbJ3VpLnJvdXRlciddKVxuXHRcdC5jb25maWcocm91dGVyQ29uZmlnKVxuXG5cdFx0cm91dGVyQ29uZmlnLiRpbmplY3QgPSBbJyRzdGF0ZVByb3ZpZGVyJywnJHVybFJvdXRlclByb3ZpZGVyJywnJGxvY2F0aW9uUHJvdmlkZXInXTtcblx0XHRcblx0XHRmdW5jdGlvbiByb3V0ZXJDb25maWcoJHN0YXRlUHJvdmlkZXIsJHVybFJvdXRlclByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuXHRcdCAgICAkdXJsUm91dGVyUHJvdmlkZXJcbiAgICBcdFx0XHQub3RoZXJ3aXNlKCcvbG9naW4nKTtcblxuXHRcdCAgICAkc3RhdGVQcm92aWRlclxuXHRcdCAgICAgICAgLnN0YXRlKCdhbm9uJyx7XG5cdFx0ICAgICAgICAgICAgdXJsIDogXCJcIixcblx0XHQgICAgICAgICAgICBhYnN0cmFjdCA6IHRydWUsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGUgOiBcIjx1aS12aWV3PlwiLFxuXHRcdCAgICAgICAgfSlcblx0XHQgICAgICAgIC5zdGF0ZSgnYW5vbi5sb2dpbicse1xuXHRcdCAgICAgICAgICAgIHVybCA6IFwiL2xvZ2luXCIsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGVVcmwgOlwibG9naW4uaHRtbFwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIkxvZ2luQ29udHJvbGxlclwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6IFwiTG9naW5DdHJsXCJcblx0XHQgICAgICAgIH0pXG5cdFx0ICAgICAgICAuc3RhdGUoJ2Fub24uNDA0Jyx7XG5cdFx0ICAgICAgICAgICAgdXJsIDogXCIvNDA0XCIsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcIjQwNC5odG1sXCJcblx0XHQgICAgICAgIH0pXG5cbiAgICBcdFx0XHQvLyBkdXR5IGRlc2sgXG5cdFx0XHQkc3RhdGVQcm92aWRlclxuXHRcdFx0XHQuc3RhdGUoJ2R1dHlEZXNrJywge1xuXHRcdCAgICAgICAgICAgIGFic3RyYWN0OiB0cnVlLFxuXHRcdCAgICAgICAgICAgIHVybDogXCIvZHV0eURlc2tcIixcblx0XHQgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJ2aWV3cy9jb21tb24vY29udGVudC5odG1sXCIsXG5cdFx0ICAgICAgICAgICAgZGF0YSA6IHtcblx0XHQgICAgICAgICAgICAgICAgcmVxdWlyZWRMb2dpbiA6IHRydWUsXG5cdFx0ICAgICAgICAgICAgICAgIHJvbGUgOiBbXCJhZG1pblwiXVxuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgIH0pXG5cdFx0ICAgICAgICAuc3RhdGUoJ2R1dHlEZXNrLmNvcnBzJywge1xuXHRcdCAgICAgICAgICAgIHVybDogXCIvY29ycHNcIixcblx0XHQgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJ2aWV3cy9kYXNoYm9hcmQvY29ycHMuZGFzaGJvYXJkLmh0bWxcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyIDogXCJEYXNoYm9hcmRDb250cm9sbGVyXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlckFzIDogXCJEYXNoYm9hcmRDdHJsXCIsXG5cdFx0ICAgICAgICAgICAgZGF0YSA6IHtcblx0XHQgICAgICAgICAgICAgICAgcmVxdWlyZWRMb2dpbiA6IHRydWUsXG5cdFx0ICAgICAgICAgICAgICAgIHJvbGUgOiBbXCJhZG1pblwiXVxuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgIH0pXG5cdFx0ICAgICAgICAuc3RhdGUoJ2R1dHlEZXNrLmJyYW5jaCcse1xuXHRcdCAgICAgICAgICAgIHVybCA6IFwiL2JyYW5jaFwiLFxuXHRcdCAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogXCJ2aWV3cy9kYXNoYm9hcmQvYnJhbmNoLmRhc2hib2FyZC5odG1sXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlciA6IFwiRGFzaGJvYXJkQ29udHJvbGxlclwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6IFwiRGFzaGJvYXJkQ3RybFwiLFxuXHRcdCAgICAgICAgICAgIGRhdGUgOiB7XG5cdFx0ICAgICAgICAgICAgICAgIHJlcXVpcmVkTG9naW4gOiB0cnVlLFxuXHRcdCAgICAgICAgICAgICAgICByb2xlIDogW1wiYWRtaW5cIl1cblx0XHQgICAgICAgICAgICB9XG5cdFx0ICAgICAgICB9KVxuXHRcdCAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5jYXNlJyx7XG5cdFx0ICAgICAgICAgICAgYWJzdHJhY3QgOiB0cnVlLFxuXHRcdCAgICAgICAgICAgIHRlbXBsYXRlIDogXCI8dWktdmlldz5cIlxuXHRcdCAgICAgICAgfSlcblx0XHQgICAgICAgIC5zdGF0ZSgnZHV0eURlc2suY2FzZS5pbmRleCcsIHtcblx0XHQgICAgICAgICAgICB1cmw6IFwiL2Nhc2VcIixcblx0XHQgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJjYXNlL2Nhc2UuaW5kZXguaHRtbFwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIkNhc2VDb250cm9sbGVyXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlckFzIDogXCJDYXNlQ3RybFwiXG5cdFx0ICAgICAgICB9KVxuXHRcdCAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5jYXNlLm5ldycse1xuXHRcdCAgICAgICAgICAgIHVybCA6IFwiL2Nhc2UvbmV3XCIsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcImNhc2UvY2FzZS5uZXcuaHRtbFwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIkNhc2VOZXdDb250cm9sbGVyXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlckFzIDogXCJDYXNlTmV3Q3RybFwiXG5cdFx0ICAgICAgICB9KVxuXHRcdCAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5jYXNlLnNob3cnLHtcblx0XHQgICAgICAgICAgICB1cmwgOiBcIi9jYXNlLzppZC9zaG93XCIsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcImNhc2UvY2FzZS5zaG93Lmh0bWxcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyIDogXCJDYXNlU2hvd0NvbnRyb2xsZXJcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcIkNhc2VTaG93Q3RybFwiXG5cdFx0ICAgICAgICB9KVxuXHRcdCAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5jYXNlLmVkaXQnLHtcblx0XHQgICAgICAgICAgICB1cmwgOiBcIi9jYXNlLzppZC9lZGl0XCIsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcImNhc2UvY2FzZS5lZGl0Lmh0bWxcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyIDogXCJDYXNlRWRpdENvbnRyb2xsZXJcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcIkNhc2VFZGl0Q3RybFwiXG5cdFx0ICAgICAgICB9KVxuXHRcdCAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5zYWZldHknLHtcblx0XHQgICAgICAgICAgICB1cmwgOiBcIi9jYXNlLzppZFwiLFxuXHRcdCAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogXCJzdW1tYXJ5L3N1bW1hcnkuaW5kZXguaHRtbFwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIlN1bW1hcnlDb250cm9sbGVyXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlckFzIDogXCJTdW1tYXJ5Q3RybFwiXG5cdFx0ICAgICAgICB9KVxuXHRcdCAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5kdXR5bGlzdCcse1xuXHRcdCAgICAgICAgICAgIGFic3RyYWN0IDogdHJ1ZSxcblx0XHQgICAgICAgICAgICB0ZW1wbGF0ZSA6IFwiPHVpLXZpZXc+XCJcblx0XHQgICAgICAgIH0pXG5cdFx0ICAgICAgICAuc3RhdGUoJ2R1dHlEZXNrLmR1dHlsaXN0LmluZGV4Jywge1xuXHRcdCAgICAgICAgICAgIHVybDogXCIvZHV0eWxpc3QvOmJyYW5jaFwiLFxuXHRcdCAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInZpZXdzL2R1dHlsaXN0L2R1dHlsaXN0LmluZGV4Lmh0bWxcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyIDogXCJEdXR5TGlzdENvbnRyb2xsZXJcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcIkR1dHlMaXN0Q3RybFwiXG5cdFx0ICAgICAgICB9KVxuXHRcdCAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5kdXR5bGlzdC5zaG93Jyx7XG5cdFx0ICAgICAgICBcdHVybCA6IFwiL2R1dHlsaXN0LzpicmFuY2gvaW5kZXhcIixcblx0XHQgICAgICAgIFx0dGVtcGxhdGUgOiBcIjxoMj4gc2hvdyA8L2gyPlwiXG5cdFx0ICAgICAgICB9KVxuXHRcdCAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5kdXR5bGlzdC5lZGl0Jywge1xuXHRcdCAgICAgICAgICAgIHVybDogXCIvZHV0eWxpc3QvOmJyYW5jaC9lZGl0XCIsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGVVcmwgIDogXCJ2aWV3cy9kdXR5bGlzdC9kdXR5bGlzdC5lZGl0Lmh0bWxcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyICAgOiBcIkR1dHlMaXN0RWRpdENvbnRyb2xsZXJcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcIkR1dHlMaXN0RWRpdEN0cmxcIlxuXHRcdCAgICAgICAgfSlcblx0XHQgICAgICAgIC5zdGF0ZSgnZHV0eURlc2subWVtYmVyJyx7XG5cdFx0ICAgICAgICAgICAgYWJzdHJhY3QgOiB0cnVlLFxuXHRcdCAgICAgICAgICAgIHRlbXBsYXRlIDogXCI8dWktdmlldz5cIlxuXHRcdCAgICAgICAgfSlcblx0XHQgICAgICAgIC5zdGF0ZSgnZHV0eURlc2subWVtYmVyLnNob3cnLCB7XG5cdFx0ICAgICAgICAgICAgdXJsOiBcIi9tZW1iZXIvOmJyYW5jaFwiLFxuXHRcdCAgICAgICAgICAgIHRlbXBsYXRlVXJsICA6IFwidmlld3MvbWVtYmVyL21lbWJlci5pbmRleC5odG1sXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlciAgIDogXCJNZW1iZXJDb250cm9sbGVyXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlckFzIDogXCJNZW1iZXJDdHJsXCJcblx0XHQgICAgICAgIH0pXG5cdFx0ICAgICAgICAuc3RhdGUoJ2R1dHlEZXNrLm1lbWJlci5lZGl0Jywge1xuXHRcdCAgICAgICAgICAgIHVybDogXCIvbWVtYmVyLzpicmFuY2gvZWRpdFwiLFxuXHRcdCAgICAgICAgICAgIHRlbXBsYXRlVXJsICA6IFwidmlld3MvbWVtYmVyL21lbWJlci5lZGl0Lmh0bWxcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyIFx0IDogXCJNZW1iZXJFZGl0Q29udHJvbGxlclwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6IFwiTWVtYmVyRWRpdEN0cmxcIlxuXHRcdCAgICAgICAgfSlcblx0XHQgICAgICAgIC5zdGF0ZSgnZHV0eURlc2suY2FyJywge1xuXHRcdCAgICAgICAgICAgIGFic3RyYWN0IDogdHJ1ZSxcblx0XHQgICAgICAgICAgICB0ZW1wbGF0ZSA6IFwiPHVpLXZpZXc+XCJcblx0XHQgICAgICAgIH0pXG5cdFx0ICAgICAgICAuc3RhdGUoJ2R1dHlEZXNrLmNhci5zaG93Jyx7XG5cdFx0ICAgICAgICAgICAgdXJsOiBcIi9jYXIvOmJyYW5jaFwiLFxuXHRcdCAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogXCJ2aWV3cy9jYXJzL2Nhci5pbmRleC5odG1sXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlciA6IFwiQ2FySW5kZXhDb250cm9sbGVyXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlckFzIDogXCJDYXJJbmRleEN0cmxcIlxuXHRcdCAgICAgICAgfSlcblx0XHQgICAgICAgIC5zdGF0ZSgnZHV0eURlc2suY2FyLmVkaXQnLHtcblx0XHQgICAgICAgICAgICB1cmw6IFwiL2Nhci86YnJhbmNoL2VkaXRcIixcblx0XHQgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6IFwidmlld3MvY2Fycy9jYXIuZWRpdC5odG1sXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlciA6IFwiQ2FyRWRpdENvbnRyb2xsZXJcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcIkNhckVkaXRDdHJsXCJcblx0XHQgICAgICAgIH0pXG5cdFx0fVxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuXHQvKipcblx0KiBhcHAuZGFzaGJvYXJkIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5kYXNoYm9hcmQnKVxuXHRcdC5jb250cm9sbGVyKCdEYXNoYm9hcmRDb250cm9sbGVyJyxEYXNoYm9hcmRDb250cm9sbGVyKTtcblxuXHREYXNoYm9hcmRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRsb2NhdGlvbicsICdTb2NrZXRTdmMnLCAnVXNlclN2YycsICdCcmFuY2hTdmMnXTtcblx0ZnVuY3Rpb24gRGFzaGJvYXJkQ29udHJvbGxlcigkbG9jYXRpb24sIFNvY2tldFN2YywgVXNlclN2YywgQnJhbmNoU3ZjKXtcblx0XHR2YXIgdm0gPSB0aGlzOyBcblxuXHRcdEJyYW5jaFN2Yy5mZXRjaEJ5Q29ycHMoVXNlclN2Yy51c2VyQ29ycHMoKSkuc3VjY2VzcyhmdW5jdGlvbihicmFuY2hlcyl7XG5cdFx0XHRyZXR1cm4gdm0uYnJhbmNoZXMgPSBicmFuY2hlcztcblx0XHR9KTtcblxuXHRcdFVzZXJTdmMuZmV0Y2hPbmxpbmVVc2VyKCkuc3VjY2VzcyhmdW5jdGlvbih1c2Vycyl7XG5cdFx0XHRyZXR1cm4gdm0udXNlcnMgPSB1c2Vycztcblx0XHR9KTtcblxuXHRcdFNvY2tldFN2Yy5vbigndXNlckxvZ2luJyxmdW5jdGlvbih1c2VyKXtcblx0XHRcdHJldHVybiB2bS51c2Vycy5wdXNoKHVzZXIpO1xuXHRcdH0pO1xuXG5cdFx0U29ja2V0U3ZjLm9uKCd1c2VyRGlzY29ubmVjdCcsZnVuY3Rpb24oZGlzY29ubmVjdFVzZXIpe1xuXHRcdFx0dm0udXNlcnMgPSB2bS51c2Vycy5maWx0ZXIoZnVuY3Rpb24odXNlcikge1xuXHRcdFx0XHRyZXR1cm4gdXNlci51c2VybmFtZSAhPSBkaXNjb25uZWN0VXNlci51c2VybmFtZVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHRTb2NrZXRTdmMub24oJ3VzZXJMb2dvdXQnLGZ1bmN0aW9uKGxvZ291dFVzZXIpe1xuXHRcdFx0dm0udXNlcnMgPSB2bS51c2Vycy5maWx0ZXIoZnVuY3Rpb24odXNlcikge1xuXHRcdFx0XHRyZXR1cm4gdXNlci51c2VybmFtZSAhPSBsb2dvdXRVc2VyLnVzZXJuYW1lXG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdHZtLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICByZXR1cm4gU29ja2V0U3ZjLnJlbW92ZUFsbExpc3RlbmVycygpO1xuXHQgICAgfSk7XG5cdH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLmRpcmVjdG9yIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5kaXJlY3RvcicpXG5cdFx0LmNvbnRyb2xsZXIoJ0RpckR1dHlMaXN0Q29udHJvbGxlcicsRGlyRHV0eUxpc3RDb250cm9sbGVyKTtcblxuXHREaXJEdXR5TGlzdENvbnRyb2xsZXIuJGluamVjdCA9IFsnVXNlclN2YycsICdCcmFuY2hTdmMnXTtcblxuXHRmdW5jdGlvbiBEaXJEdXR5TGlzdENvbnRyb2xsZXIoIFVzZXJTdmMgLCBCcmFuY2hTdmMgKXtcblx0XHR2YXIgdm0gPSB0aGlzO1xuXHRcdHZhciBicmFuY2ggPSBVc2VyU3ZjLnVzZXJCcmFuY2goKTtcblx0XHRcblx0XHRCcmFuY2hTdmMuZmV0Y2hCeU5hbWUoYnJhbmNoKS5zdWNjZXNzKGZ1bmN0aW9uKGJyYW5jaCl7XG5cdFx0XHR2bS5icmFuY2ggXHRcdD0gYnJhbmNoO1xuXHRcdFx0dm0ub25EdXR5VG90YWwgXHQ9IHZtLmJyYW5jaC5tZW1iZXJzLmZpbHRlcihmdW5jdGlvbihtZW1iZXIpIHtcblx0XHRcdFx0cmV0dXJuIG1lbWJlci5vbkR1dHkgPT0gdHJ1ZSBcblx0XHRcdH0pO1xuXHRcdH0pOyBcblx0fTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLmRhc2hib2FyZCBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuZGlyZWN0b3InKVxuXHRcdC5jb250cm9sbGVyKCdEaXJEdXR5TGlzdEVkaXRDb250cm9sbGVyJyxEaXJEdXR5TGlzdEVkaXRDb250cm9sbGVyKTtcblxuXHREaXJEdXR5TGlzdEVkaXRDb250cm9sbGVyLiRpbmplY3QgPSBbJ0JyYW5jaFN2YycsICckc3RhdGVQYXJhbXMnLCdNZW1iZXJTdmMnLCAnJGxvY2F0aW9uJywgJyR3aW5kb3cnLCAnVXNlclN2YycsICdDYXJTdmMnLCAnU3RNaXNzaW9uRmFjJ107XG5cblx0ZnVuY3Rpb24gRGlyRHV0eUxpc3RFZGl0Q29udHJvbGxlcihCcmFuY2hTdmMsICRzdGF0ZVBhcmFtcyxNZW1iZXJTdmMsICRsb2NhdGlvbiwgJHdpbmRvdywgVXNlclN2YywgQ2FyU3ZjLCBTdE1pc3Npb25GYWMpe1xuXHRcdHZhciB2bSA9IHRoaXM7XG5cdFx0dmFyIGJyYW5jaCBcdD0gVXNlclN2Yy51c2VyQnJhbmNoKCk7XG5cdFx0dm0uY2hlY2sgXHQ9IGNoZWNrO1xuXHRcdHZtLnNhdmUgXHQ9IHNhdmU7ICAgXG5cblx0XHRCcmFuY2hTdmMuZmV0Y2hCeU5hbWUoYnJhbmNoKS5zdWNjZXNzKGZ1bmN0aW9uKGJyYW5jaCl7XG5cdFx0XHR2bS5icmFuY2ggPSBicmFuY2g7XG5cdFx0XHR2bS5pc0NvcnBzID0gIHRydWUgPyBicmFuY2gubmFtZS5zcGxpdChcIuaVkeeBveaVkeitt1wiKVsxXSA6IGZhbHNlIFxuXHRcdFx0dmFyIG1lbWJlcnMgPSBfLnBsdWNrKGJyYW5jaC5tZW1iZXJzLmZpbHRlcihmdW5jdGlvbihtZW1iZXIpIHsgcmV0dXJuIG1lbWJlci5sZXZlbCA8IDIuNCB9KSwgJ25hbWUnKVxuXHRcdFx0dm0uYnJhbmNoLnNhZmV0eU1hbmFnZXIgXHQ9IGJyYW5jaC5zYWZldHlNYW5hZ2VyO1xuXHRcdFx0dm0uYnJhbmNoLnNhZmV0eU1hbmFnZXJzIFx0PSBtZW1iZXJzO1xuXHRcdFx0dm0ub25EdXR5VG90YWwgPSAwO1xuXHRcdFx0Xy5tYXAodm0uYnJhbmNoLm1lbWJlcnMsZnVuY3Rpb24obWVtYmVyKXsgXG5cdFx0XHRcdG1lbWJlci5ncm91cElkcyA9IF8ucmFuZ2UoMSxNYXRoLnJvdW5kKHZtLmJyYW5jaC5tZW1iZXJzLmxlbmd0aC82KSwxKTtcblx0XHRcdFx0bWVtYmVyLmdyb3VwSUQgPSBtZW1iZXIuZ3JvdXAgKyBtZW1iZXIuZ3JvdXBJZCBcblx0XHRcdH0pXG5cdFx0fSlcblxuXHRcdGZ1bmN0aW9uIGNoZWNrKG1lbWJlcil7XG5cdFx0XHRtZW1iZXIub25EdXR5IFx0ID0gIW1lbWJlci5vbkR1dHk7XG5cdFx0XHRtZW1iZXIuaXNDaGVja2VkID0gIW1lbWJlci5pc0NoZWNrZWQ7XG5cdFx0XHRtZW1iZXIuZ3JvdXBJRCBcdCA9IG1lbWJlci5ncm91cCArIG1lbWJlci5ncm91cElkXG5cdFx0fTtcblxuXHRcdFxuXHRcdGZ1bmN0aW9uIHNhdmUoKXtcblx0XHRcdHZhciBEaXNwYXRjaE51bWJlciA9IHZtLmJyYW5jaC5tZW1iZXJzLmZpbHRlcihmdW5jdGlvbihtZW1iZXIpIHtcblx0XHRcdFx0cmV0dXJuIG1lbWJlci5vbkR1dHlcblx0XHRcdH0pO1xuXG5cdFx0XHRCcmFuY2hTdmMudXBkYXRlTWlzc2lvbih7XG5cdFx0XHRcdGJyYW5jaCAgIFx0XHQ6IHZtLmJyYW5jaC5uYW1lLFxuXHRcdFx0XHRkaXJlY3RvciBcdFx0OiB2bS5icmFuY2guZGlyZWN0b3IsXG5cdFx0XHRcdGRpc3BhdGNoTnVtIFx0OiBEaXNwYXRjaE51bWJlci5sZW5ndGgsXG5cdFx0XHRcdHNhZmV0eU1hbmFnZXIgXHQ6IHZtLmJyYW5jaC5zYWZldHlNYW5hZ2VyLFxuXHRcdFx0XHRtZW1iZXJzIFx0XHQ6IHZtLmJyYW5jaC5tZW1iZXJzXG5cdFx0XHR9KTtcblx0XHRcdCR3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG5cdFx0fTtcblx0fTtcblxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdC8qKlxuXHQqIGFwcC5kaXNwYXRjaCBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuZGlzcGF0Y2gnLCBbXSlcblx0XHQuY29udHJvbGxlcignRGlzcGF0Y2hDb250cm9sbGVyJyxEaXNwYXRjaENvbnRyb2xsZXIpO1xuXG5cdERpc3BhdGNoQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc3RhdGVQYXJhbXMnLCckbW9kYWwnLCdDYXNlU3ZjJywnQnJhbmNoU3ZjJywgJ0NhclN2YycsICdVc2VyU3ZjJ107XG5cdGZ1bmN0aW9uIERpc3BhdGNoQ29udHJvbGxlcigkc3RhdGVQYXJhbXMsJG1vZGFsLENhc2VTdmMsQnJhbmNoU3ZjLCBDYXJTdmMsIFVzZXJTdmMpe1xuXHRcdHZhciB2bSA9IHRoaXM7IFxuXHRcdENhc2VTdmMuZmV0Y2goVXNlclN2Yy51c2VyQ29ycHMoKSkuc3VjY2VzcyhmdW5jdGlvbihjYXNlcyl7XG5cdFx0XHR2bS5jYXNlcyA9IGNhc2VzO1xuXHRcdFx0Q2FzZVN2Yy5mZXRjaEJ5SWQodm0uY2FzZXNbJHN0YXRlUGFyYW1zLmNhc2VJZF0uX2lkKS5zdWNjZXNzKGZ1bmN0aW9uKF9jYXNlKXtcblx0XHRcdFx0XHRyZXR1cm4gdm0uY2FzZURldGFpbHMgPSBfY2FzZTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0QnJhbmNoU3ZjLmZldGNoQnlDb3JwcyhVc2VyU3ZjLnVzZXJDb3JwcygpKS5zdWNjZXNzKGZ1bmN0aW9uKGJyYW5jaGVzKXtcblx0XHQgICAgcmV0dXJuIHZtLmJyYW5jaExpc3QgPSBicmFuY2hlcztcblx0XHQgfSk7XG5cblx0XHRDYXJTdmMuZmV0Y2goKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xuXHRcdCAgICByZXR1cm4gdm0uY2Fyc0RhdGEgPSBkYXRhO1xuXHRcdH0pO1xuXG5cdFx0dm0uYWRkTmV3Q2FzZSA9IGZ1bmN0aW9uICgpIHtcblx0XHQgIFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XG5cdFx0XHQgICAgdGVtcGxhdGVVcmw6ICcvcGFydGlhbHMvY2FzZVBhbmVsL2Nhc2VBZGRNb2RhbCcsXG5cdFx0XHQgICAgY29udHJvbGxlcjogJ0Nhc2VBZGRNb2RhbEN0cmwnLFxuXHRcdFx0ICAgIHNpemU6IFwibGdcIixcblx0XHRcdCAgICByZXNvbHZlIDoge1xuXHRcdFx0ICAgIFx0Y2FzZUlkIDogZnVuY3Rpb24oKXtcblx0XHRcdCAgICBcdFx0cmV0dXJuIHZtLmlkID0gXCLmlrDlop7moYjku7ZcIlxuXHRcdFx0ICAgIFx0fSxcblx0XHRcdCAgICBcdGJyYW5jaExpc3QgOiBmdW5jdGlvbigpe1xuXHRcdFx0ICAgIFx0XHRyZXR1cm4gdm0uYnJhbmNoTGlzdDtcblx0XHRcdCAgICBcdH0sXG5cdFx0XHQgICAgXHRjYXJzRGF0YSA6IGZ1bmN0aW9uKCl7XG5cdFx0XHQgICAgXHRcdHJldHVybiB2bS5jYXJzRGF0YTtcblx0XHRcdCAgICBcdH0sXG5cdFx0XHQgICAgXHRpc05ldyA6IGZ1bmN0aW9uKCl7XG5cdFx0XHQgICAgXHRcdHJldHVybiB0cnVlO1xuXHRcdFx0ICAgIFx0fSxcblx0XHRcdCAgICBcdGNhc2VEZXRhaWxzIDogZnVuY3Rpb24oKXtcblx0XHRcdCAgICBcdFx0cmV0dXJuIHt9XG5cdFx0XHQgICAgXHR9XG5cdFx0XHQgICAgfVxuXHRcdCAgICB9KTtcblx0XHQgfTtcblxuXHRcdCB2bS5lZGl0Q2FzZSA9IGZ1bmN0aW9uKCl7XG5cdFx0IFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XG5cdFx0XHQgICAgdGVtcGxhdGVVcmw6ICcvcGFydGlhbHMvY2FzZVBhbmVsL2Nhc2VBZGRNb2RhbCcsXG5cdFx0XHQgICAgY29udHJvbGxlcjogJ0Nhc2VBZGRNb2RhbEN0cmwnLFxuXHRcdFx0ICAgIHNpemU6IFwibGdcIixcblx0XHRcdCAgICByZXNvbHZlIDoge1xuXHRcdFx0ICAgIFx0Y2FzZUlkIDogZnVuY3Rpb24oKXtcblx0XHRcdCAgICBcdFx0cmV0dXJuIHZtLmlkID0gdm0uY2FzZXNbJHN0YXRlUGFyYW1zLmNhc2VJZF0uY2FzZUlkOyBcblx0XHRcdCAgICBcdH0sXG5cdFx0XHQgICAgXHRicmFuY2hMaXN0IDogZnVuY3Rpb24oKXtcblx0XHRcdCAgICBcdFx0cmV0dXJuIHZtLmJyYW5jaExpc3Q7XG5cdFx0XHQgICAgXHR9LFxuXHRcdFx0ICAgIFx0Y2Fyc0RhdGEgOiBmdW5jdGlvbigpe1xuXHRcdFx0ICAgIFx0XHRmb3IgKHZhciBpID0gdm0uY2Fyc0RhdGEubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdCAgICBcdFx0XHRmb3IgKHZhciBqID0gdm0uY2FzZURldGFpbHMuY2Fycy5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuXHRcdFx0ICAgIFx0XHRcdFx0aWYgKCB2bS5jYXJzRGF0YVtpXS5yYWRpb0NvZGUgPT09IHZtLmNhc2VEZXRhaWxzLmNhcnNbal0ucmFkaW9fY29kZSkge1xuXHRcdFx0ICAgIFx0XHRcdFx0XHRyZXR1cm4gdm0uY2Fyc0RhdGFbaV0uaXNDaGVja2VkID0gdHJ1ZSA7XG5cdFx0XHQgICAgXHRcdFx0XHR9O1xuXHRcdFx0ICAgIFx0XHRcdH07XHRcdCAgICBcdFx0XHRcblx0XHRcdCAgICBcdFx0fTtcblx0XHRcdCAgICBcdFx0cmV0dXJuIHZtLmNhcnNEYXRhO1xuXHRcdFx0ICAgIFx0fSxcblx0XHRcdCAgICBcdGlzTmV3IDogZnVuY3Rpb24oKXtcblx0XHRcdCAgICBcdFx0cmV0dXJuIGZhbHNlOyBcblx0XHRcdCAgICBcdH0sXG5cdFx0XHQgICAgXHRjYXNlRGV0YWlscyA6IGZ1bmN0aW9uKCl7XG5cdFx0XHQgICAgXHRcdHJldHVybiB2bS5jYXNlRGV0YWlscztcblx0XHRcdCAgICBcdH1cblx0XHRcdCAgICB9XG5cdFx0ICAgIH0pO1xuXHRcdCB9O1xuXHR9XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQvKipcblx0KiBhcHAuZHV0eWxpc3QgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLmR1dHlsaXN0JywgW10pXG5cdFx0LmNvbnRyb2xsZXIoJ0R1dHlMaXN0Q29udHJvbGxlcicsRHV0eUxpc3RDb250cm9sbGVyKTtcblxuXHREdXR5TGlzdENvbnRyb2xsZXIuJGluamVjdCA9IFsnQnJhbmNoU3ZjJywgJyRzdGF0ZVBhcmFtcycsICdTb2NrZXRTdmMnLCAnVXNlclN2YycsICckcSddO1xuXHRmdW5jdGlvbiBEdXR5TGlzdENvbnRyb2xsZXIoQnJhbmNoU3ZjLCAkc3RhdGVQYXJhbXMsIFNvY2tldFN2YywgVXNlclN2YywgJHEpe1xuXHRcdHZhciB2bSA9IHRoaXM7IFxuXHRcdHZhciBicmFuY2hJZCA9ICRzdGF0ZVBhcmFtcy5icmFuY2g7XG5cdFx0XG5cdFx0QnJhbmNoU3ZjLnRvdGFsTGlzdEZpbmRCeU5hbWUoYnJhbmNoSWQpLnN1Y2Nlc3MoZnVuY3Rpb24oYnJhbmNoKXtcblx0XHRcdHZtLmJyYW5jaCA9IGJyYW5jaDtcblx0XHRcdHZtLm9uRHV0eVRvdGFsID0gdm0uYnJhbmNoLm1lbWJlcnMuZmlsdGVyKGZ1bmN0aW9uKG1lbWJlcikge1xuXHRcdFx0XHRyZXR1cm4gbWVtYmVyLm9uRHV0eSA9PSB0cnVlXG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5nZW8gTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLmdlbycpXG5cdFx0LnNlcnZpY2UoJ0dlb1N2YycsR2VvU3ZjKTtcblxuXHRHZW9TdmMuJGluamVjdCA9IFsnJHEnLCckaHR0cCddO1xuXG5cdGZ1bmN0aW9uIEdlb1N2Yygpe1xuXHRcdHZhciBzdmMgPSB0aGlzOyBcblx0XHRzdmMuZ2V0R2VvbG9jYXRpb25Db29yZGluYXRlcyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cdCAgICAgICAgbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbihcblx0ICAgICAgICAgICAgZnVuY3Rpb24ocG9zaXRpb24pIHsgZGVmZXJyZWQucmVzb2x2ZShwb3NpdGlvbi5jb29yZHMpOyB9LFxuXHQgICAgICAgICAgICBmdW5jdGlvbihlcnJvcikgeyBkZWZlcnJlZC5yZXNvbHZlKG51bGwpOyB9XG5cdCAgICAgICAgKTtcblx0ICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0ICAgIH07XG5cblx0ICAgIHN2Yy5nZXRHZW9FbmNvZGVkSW5mbyA9IGZ1bmN0aW9uKGFkZHJlc3Mpe1xuXHQgICAgXHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXHQgICAgXHQvLyByZXR1cm4gJGh0dHAuZ2V0KCdodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvZ2VvY29kZS9qc29uP2FkZHJlc3M9JysgYWRkcmVzcyArJyZrZXk9QUl6YVN5QXhxLVpreFJyMVpBckJYRkRPbzh4Z2k0Q2wyUGVpdEFvJylcblx0ICAgIFx0dmFyIGdlb2NvZGVyID0gbmV3IGdvb2dsZS5tYXBzLkdlb2NvZGVyKCk7XG5cdCAgICBcdGlmIChnZW9jb2Rlcikge1xuXHRcdCAgICAgIGdlb2NvZGVyLmdlb2NvZGUoeyAnYWRkcmVzcyc6IGFkZHJlc3MgfSwgZnVuY3Rpb24gKHJlc3VsdHMsIHN0YXR1cykge1xuXHRcdCAgICAgICAgIGlmIChzdGF0dXMgPT0gZ29vZ2xlLm1hcHMuR2VvY29kZXJTdGF0dXMuT0spIHtcblx0XHQgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb24pIFxuXHRcdCAgICAgICAgIH1cblx0XHQgICAgICAgICBlbHNlIHtcblx0XHQgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCBcIkdlb2NvZGluZyBmYWlsZWQ6IFwiICsgc3RhdHVzIClcblx0XHQgICAgICAgICB9XG5cdFx0ICAgICAgfSk7XG5cdFx0ICAgfSBcblx0XHQgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTsgIFxuXHQgICAgfTtcblxuXHQgICAgc3ZjLmZldGNoQmFzZUxvY2F0aW9uID0gZnVuY3Rpb24oY29ycHMpe1xuXHQgICAgXHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2dlb2xvY2F0aW9ucz9jb3Jwcz0nICsgY29ycHMpXG5cdCAgICB9O1xuXG5cdCAgICBzdmMuZ2V0RGlzdGFuY2UgPSBmdW5jdGlvbiggZnJvbV9sb2MgLCB0b19sb2MgKXtcblxuXHQgICAgXHRpZiAodHlwZW9mKE51bWJlci5wcm90b3R5cGUudG9SYWQpID09PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0XHQgIE51bWJlci5wcm90b3R5cGUudG9SYWQgPSBmdW5jdGlvbigpIHtcblx0XHRcdCAgICByZXR1cm4gc3ZjICogTWF0aC5QSSAvIDE4MDtcblx0XHRcdCAgfVxuXHRcdFx0fVxuXHRcdFx0dmFyIFIgPSA2MzcxOyAvLyBSYWRpdXMgb2YgdGhlIGVhcnRoIGluIGttXG5cdFx0XHR2YXIgZExhdCA9ICh0b19sb2MubGF0IC0gZnJvbV9sb2MubGF0ICkudG9SYWQoKTsgIC8vIEphdmFzY3JpcHQgZnVuY3Rpb25zIGluIHJhZGlhbnNcblx0XHRcdHZhciBkTG9uID0gKHRvX2xvYy5sbmcgLSBmcm9tX2xvYy5sbmcgKS50b1JhZCgpOyBcblx0XHRcdHZhciBhID0gTWF0aC5zaW4oZExhdC8yKSAqIE1hdGguc2luKGRMYXQvMikgK1xuXHRcdFx0ICAgICAgICBNYXRoLmNvcyhmcm9tX2xvYy5sYXQudG9SYWQoKSkgKiBNYXRoLmNvcyh0b19sb2MubGF0LnRvUmFkKCkpICogXG5cdFx0XHQgICAgICAgIE1hdGguc2luKGRMb24vMikgKiBNYXRoLnNpbihkTG9uLzIpOyBcblx0XHRcdHZhciBjID0gMiAqIE1hdGguYXRhbjIoTWF0aC5zcXJ0KGEpLCBNYXRoLnNxcnQoMS1hKSk7IFxuXHRcdFx0cmV0dXJuIFIgKiBjO1xuXHQgICAgfTtcblxuXHQgICAgc3ZjLmRlZmF1bHRMb2NhdGlvbiA9IGZ1bmN0aW9uKCl7XG5cdCAgICBcdHJldHVybiB7IGxhdCA6IDI1LjA5MjcyOTcgLCBsbmcgOiAgMTIxLjQ2MDg2MzksIGFkZHJlc3MgOiBudWxsfTtcblx0ICAgIH07XG5cdH07XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcCBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAudG9wbmF2JywgW10pXG5cdFx0LmNvbnRyb2xsZXIoJ1RvcE5hdkNvbnRyb2xsZXInLFRvcE5hdkNvbnRyb2xsZXIpO1xuXG5cdFRvcE5hdkNvbnRyb2xsZXIuJGluamVjdCA9IFtdO1xuXHRmdW5jdGlvbiBUb3BOYXZDb250cm9sbGVyKCRsb2NhdGlvbiwkc3RhdGUsICRpbnRlcnZhbCwgc3RvcmUsIFNvY2tldFN2YywgVXNlclN2YywgJHdpbmRvdyl7XG5cdFx0dmFyIHZtID0gdGhpczsgXG5cdFx0dm0uY3VycmVudFRpbWUgPSAgbW9tZW50KCkuZm9ybWF0KCdNTU0gRG8sIGg6bW06c3MgYScpO1xuXHRcdHZtLmxvZ291dCA9IGxvZ291dDtcblxuXG5cdFx0JGludGVydmFsKGZ1bmN0aW9uKCl7XG5cdFx0XHRtb21lbnQubG9jYWxlKCd6aC10dycpO1xuXHRcdFx0dm0uY3VycmVudFRpbWUgPSAgbW9tZW50KCkuZm9ybWF0KCdNTU0gRG8sIGg6bW06c3MgYScpO1xuXHRcdH0sIDEwMDApO1xuXHRcdCBcblx0XHRmdW5jdGlvbiBsb2dvdXQoKXtcblx0XHRcdHZhciBhY2NvdW50ID0gVXNlclN2Yy5jdXJyZW50QWNjb3VudCgpO1xuXHRcdFx0U29ja2V0U3ZjLmVtaXQoJ2xvZ291dCcpO1xuXHRcdFx0JHN0YXRlLmdvKCdhbm9uLmxvZ2luJyk7XG5cdFx0fTtcblx0fVxuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5tYXAgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLm1hcCcsIFtdKVxuXHRcdC5jb250cm9sbGVyKCdNYXBJbmRleENvbnRyb2xsZXInLE1hcEluZGV4Q29udHJvbGxlcik7XG5cblx0TWFwSW5kZXhDb250cm9sbGVyLiRpbmplY3QgPSBbJ2xlYWZsZXREYXRhJywgJ0dlb1N2YyddO1xuXHRmdW5jdGlvbiBNYXBJbmRleENvbnRyb2xsZXIobGVhZmxldERhdGEsIEdlb1N2Yyl7XG5cdFx0dmFyIHZtID0gdGhpczsgXG5cblx0XHRHZW9TdmMuZ2V0R2VvbG9jYXRpb25Db29yZGluYXRlcygpLnRoZW4oZnVuY3Rpb24oY29vcmQpe1xuXHQgICAgICAgIHZtLm5vd1Bvcy5sYXQgPSBjb29yZC5sYXRpdHVkZTtcblx0ICAgICAgICB2bS5ub3dQb3MubG5nID0gY29vcmQubG9uZ2l0dWRlO1xuXHQgICAgICAgIHZtLm5vd1Bvcy56b29tID0gMTc7XG5cdCAgICB9KVxuXG5cdCAgICBhbmd1bGFyLmV4dGVuZCh2bSwge1xuXHQgICAgICAgIG5vd1Bvczoge1xuXHQgICAgICAgICAgICBsYXQ6IDI0Ljk4OCxcblx0ICAgICAgICAgICAgbG5nOiAxMjEuNTc1Mixcblx0ICAgICAgICAgICAgem9vbTogMTdcblx0ICAgICAgICB9LFxuXHQgICAgICAgIGNvbnRyb2xzOiB7XG5cdCAgICAgICAgICAgIGRyYXc6IHt9XG5cdCAgICAgICAgfVxuXHQgICAgfSlcblxuXHQgICAgbGVhZmxldERhdGEuZ2V0TWFwKCkudGhlbihmdW5jdGlvbihtYXApIHtcblx0ICAgICAgdmFyIGRyYXduSXRlbXMgPSB2bS5jb250cm9scy5lZGl0LmZlYXR1cmVHcm91cDtcblx0ICAgICAgbWFwLm9uKCdkcmF3OmNyZWF0ZWQnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIHZhciBsYXllciA9IGUubGF5ZXI7XG5cdCAgICAgICAgZHJhd25JdGVtcy5hZGRMYXllcihsYXllcik7XG5cdCAgICAgICAgXG5cdCAgICAgICAgRmVhdHVyZUNvbGxlY3Rpb25zLnB1c2gobGF5ZXIudG9HZW9KU09OKCkpXG5cdCAgICAgICAgXG5cdCAgICAgIH0pO1xuXHQgICAgfSlcblx0fVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAubWVtYmVyIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5tZW1iZXInKVxuXHRcdC5jb250cm9sbGVyKCdNZW1iZXJBY2NvdW50TW9kYWxDb250cm9sbGVyJyxNZW1iZXJBY2NvdW50TW9kYWxDb250cm9sbGVyKTtcblxuXHRNZW1iZXJBY2NvdW50TW9kYWxDb250cm9sbGVyLiRpbmplY3QgPSBbJ1VzZXJTdmMnLCAnTWVtYmVyU3ZjJywgJ21lbWJlcicsICckbW9kYWxJbnN0YW5jZSddO1xuXHRmdW5jdGlvbiBNZW1iZXJBY2NvdW50TW9kYWxDb250cm9sbGVyKFVzZXJTdmMsIE1lbWJlclN2YywgbWVtYmVyLCAkbW9kYWxJbnN0YW5jZSl7XG5cdFx0dmFyIHZtID0gdGhpczsgXG5cdFx0dm0udXNlciA9IG1lbWJlcjtcblx0XHR2bS5zYXZlID0gc2F2ZTtcblx0XHR2bS5jYW5jZWwgPSBjYW5jZWw7IFxuXG5cdFx0ZnVuY3Rpb24gc2F2ZSgpe1xuXHRcdFx0aWYgKF8uaXNFbXB0eSh2bS51c2VyKSkge1xuXHRcdFx0XHRjb25zb2xlLmxvZyhcInBsZWFzZSBlbnRlciB5b3VyIGFjY291bnQgYW5kIHBhc3N3b3JkIVwiKVxuXHRcdFx0fSBlbHNle1xuXHRcdFx0XHRpZiAoIXZtLnVzZXIuYWNjb3VudCkge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwiYWNjb3VudCBjYW4ndCBiZSBibGFuayFcIilcblx0XHRcdFx0XHRpZiAoIXZtLnVzZXIucGFzc3dvcmQpIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKFwicGFzc3dvZCBjYW4ndCBiZSBibGFuayFcIilcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9IGVsc2UgaWYgKCF2bS51c2VyLnBhc3N3b3JkKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJwYXNzd29yZCBjYW4ndCBiZSBibGFua1wiKVxuXHRcdFx0XHR9ZWxzZXtcblx0XHRcdFx0XHRVc2VyU3ZjLmFjdGl2YXRlKHZtLnVzZXIpO1xuXHRcdFx0XHRcdE1lbWJlclN2Yy51cGRhdGVVc2VyKG1lbWJlci5uYW1lKTtcblx0XHRcdFx0XHQkbW9kYWxJbnN0YW5jZS5jbG9zZSh2bS51c2VyKTtcblx0XHRcdFx0fTtcblx0XHRcdH07XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGNhbmNlbCgpe1xuXHRcdFx0JG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XG5cdFx0fTtcblx0fTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHQvKipcblx0KiBhcHAubWVtYmVyIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5tZW1iZXInKVxuXHRcdC5jb250cm9sbGVyKCdNZW1iZXJFZGl0Q29udHJvbGxlcicsTWVtYmVyRWRpdENvbnRyb2xsZXIpO1xuXHRcblx0TWVtYmVyRWRpdENvbnRyb2xsZXIuJGluamVjdCA9IFsnTWVtYmVyU3ZjJywgJ0JyYW5jaFN2YycsICckc3RhdGVQYXJhbXMnLCAnJHdpbmRvdycsJyRtb2RhbCcsICckc3RhdGUnLCAnVXNlclN2YyddO1xuXHRcblx0ZnVuY3Rpb24gTWVtYmVyRWRpdENvbnRyb2xsZXIoIE1lbWJlclN2YywgQnJhbmNoU3ZjLCAkc3RhdGVQYXJhbXMsICR3aW5kb3csJG1vZGFsLCAkc3RhdGUsIFVzZXJTdmMpe1xuXHRcdHZhciB2bSA9IHRoaXM7IFxuXG5cdFx0dm0uYWxlcnRzID0gW107XG5cdFx0dm0ubWVtYmVyRGVsZXRlZCA9IGZhbHNlO1xuXHRcdHZhciB0ZW1wRGVsTWVtYmVyID0gbnVsbDtcblx0XHR2bS5hY2Nlc3NMZXZlbCA9IFVzZXJTdmMuYWNjZXNzTGV2ZWwoKTtcblx0XHR2bS5jbG9zZUFsZXJ0ID0gY2xvc2VBbGVydDtcblx0XHR2bS5zYXZlID0gc2F2ZTtcblx0XHR2bS5hZGROZXdNZW1iZXIgPSBhZGROZXdNZW1iZXI7XG5cdFx0dm0udXBkYXRlID0gdXBkYXRlO1xuXHRcdHZtLmFjdGl2YXRlQWNjb3VudCA9IGFjdGl2YXRlQWNjb3VudDtcblx0XHR2bS5kZWxldGVBbGVydCA9IGRlbGV0ZUFsZXJ0O1xuXHRcdHZtLmRlQWN0aXZhdGVBbGVydCA9IGRlQWN0aXZhdGVBbGVydDtcblx0XHRcblx0XHR2YXIgbWVtYmVySW5pdCA9IGZ1bmN0aW9uKCl7XG5cdFx0XHRNZW1iZXJTdmMuZmluZEJ5QnJhbmNoKCRzdGF0ZVBhcmFtcy5icmFuY2gpLnN1Y2Nlc3MoZnVuY3Rpb24obWVtYmVycyl7XG5cdFx0XHRcdHZtLm1lbWJlcnMgPSBtZW1iZXJzO1xuXHRcdFx0XHR2bS5tZW1iZXJzLmZvckVhY2goZnVuY3Rpb24obWVtYmVyKXtcblx0XHRcdFx0XHRtZW1iZXIud29ya2luZ1RpbWUgPSBtb21lbnQuZHVyYXRpb24obWVtYmVyLndvcmtpbmdUaW1lLCdzZWNvbmRzJyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdG1lbWJlckluaXQoKTtcblxuXHRcdHZhciBkZUFjdGl2YXRlQWNjb3VudCA9IGZ1bmN0aW9uKGluZGV4KXtcblx0XHRcdFVzZXJTdmMucmVtb3ZlVXNlcih0ZW1wRGVsTWVtYmVyLm5hbWUpLnN1Y2Nlc3MoZnVuY3Rpb24odXNlcil7XG5cdFx0XHRcdE1lbWJlclN2Yy5yZW1vdmVVc2VyKHVzZXIudXNlcm5hbWUpO1xuXHRcdFx0XHR2bS5jbG9zZUFsZXJ0KGluZGV4KTtcblx0XHRcdFx0bWVtYmVySW5pdCgpO1xuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdHZhciBkZWxldGVNZW1iZXIgPSBmdW5jdGlvbihpbmRleCl7XG5cdFx0XHR2bS5tZW1iZXJEZWxldGVkID0gdHJ1ZTtcblx0XHRcdE1lbWJlclN2Yy5kZWxldGVNZW1iZXIodGVtcERlbE1lbWJlcikuc3VjY2VzcyhmdW5jdGlvbigpe1xuXHRcdFx0XHR2bS5tZW1iZXJEZWxldGVkID0gZmFsc2U7XG5cdFx0XHR9KTtcblx0XHRcdHZtLmNsb3NlQWxlcnQoaW5kZXgpO1xuXHRcdFx0bWVtYmVySW5pdCgpO1xuXHRcdH07XG5cblx0XHR2YXIgY2FuY2VsRGVsID0gZnVuY3Rpb24oaW5kZXgpe1xuXHRcdFx0dm0ubWVtYmVyRGVsZXRlZCA9IGZhbHNlO1xuXHRcdFx0dm0uY2xvc2VBbGVydChpbmRleCk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHNhdmUoKXtcblx0XHRcdHZhciBkaXJlY3RvcnMgPSBfLnBsdWNrKCB2bS5tZW1iZXJzLmZpbHRlcihmdW5jdGlvbihtZW1iZXIpIHsgcmV0dXJuIG1lbWJlci5sZXZlbCA+IDEuMyAgfSkgLCAnbmFtZScpO1xuXHRcdFx0QnJhbmNoU3ZjLnVwZGF0ZSh7XG5cdFx0XHRcdGJyYW5jaCA6ICRzdGF0ZVBhcmFtcy5icmFuY2gsXG5cdFx0XHRcdG1lbWJlcnMgOiBfLnBsdWNrKCB2bS5tZW1iZXJzICwgJ19pZCcpLFxuXHRcdFx0XHRkaXJlY3RvcnMgOiBkaXJlY3RvcnMsXG5cdFx0XHRcdGRpcmVjdG9yIDogZGlyZWN0b3JzWzBdLFxuXHRcdFx0XHRzYWZldHlNYW5hZ2VyIDogZGlyZWN0b3JzWzBdXG5cdFx0XHR9KS5zdWNjZXNzKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdCR3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG5cdFx0XHR9KTtcdFx0XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGFkZE5ld01lbWJlcigpe1xuXHRcdFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XG5cdFx0XHQgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9tZW1iZXIvbWVtYmVyLm1vZGFsLmh0bWwnLFxuXHRcdFx0ICAgIGNvbnRyb2xsZXI6ICdNZW1iZXJNb2RhbEN0cmwnLFxuXHRcdFx0ICAgIHNpemU6IFwibWRcIixcblx0XHRcdCAgICByZXNvbHZlIDoge1xuXHRcdFx0ICAgIFx0YnJhbmNoIDogZnVuY3Rpb24oKXtcblx0XHRcdCAgICBcdFx0cmV0dXJuICRzdGF0ZVBhcmFtcy5icmFuY2ggXG5cdFx0XHQgICAgXHR9LFxuXHRcdFx0ICAgIFx0bWVtYmVyIDogZnVuY3Rpb24oKXtcblx0XHRcdCAgICBcdFx0cmV0dXJuIHsgd29ya2luZ1RpbWUgOiBudWxsIH07XG5cdFx0XHQgICAgXHR9XG5cdFx0XHQgICAgfVxuXHRcdCAgICB9KTtcblxuXHRcdCAgICBtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uKG1lbWJlcil7XG5cdFx0ICAgIFx0aWYgKG1lbWJlcikge1xuXHRcdCAgICBcdFx0bWVtYmVySW5pdCgpO1xuXHRcdCAgICBcdH1cblx0XHQgICAgXHR2bS5hbGVydHMucHVzaCh7IHR5cGUgOiBcInN1Y2Nlc3NcIiAsICBtc2c6ICfkurrlk6HmlrDlop7miJDlip/vvIEgJyArIG1lbWJlci5uYW1lICsgJyDlt7LliqDlhaUgJyArIG1lbWJlci5icmFuY2h9KTtcblx0XHQgICAgfSlcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gdXBkYXRlKG1lbWJlcil7XG5cdFx0XHR2YXIgb2xkTWVtYmVyID0gbWVtYmVyO1xuXHRcdFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XG5cdFx0XHQgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9tZW1iZXIvbWVtYmVyLm1vZGFsLmh0bWwnLFxuXHRcdFx0ICAgIGNvbnRyb2xsZXI6ICdNZW1iZXJNb2RhbEN0cmwnLFxuXHRcdFx0ICAgIHNpemU6IFwibWRcIixcblx0XHRcdCAgICByZXNvbHZlIDoge1xuXHRcdFx0ICAgIFx0YnJhbmNoIDogZnVuY3Rpb24oKXtcblx0XHRcdCAgICBcdFx0cmV0dXJuICRzdGF0ZVBhcmFtcy5icmFuY2ggXG5cdFx0XHQgICAgXHR9LFxuXHRcdFx0ICAgIFx0bWVtYmVyIDogZnVuY3Rpb24oKXtcblx0XHRcdCAgICBcdFx0cmV0dXJuIHtcblx0XHRcdCAgICBcdFx0XHRtZW1iZXJJZCA6IG1lbWJlci5faWQsXG5cdFx0XHQgICAgXHRcdFx0aWQgOiBtZW1iZXIuaWQsXG5cdFx0XHQgICAgXHRcdFx0bmFtZSA6IG1lbWJlci5uYW1lLFxuXHRcdFx0ICAgIFx0XHRcdHRpdGxlIDogbWVtYmVyLnRpdGxlLFxuXHRcdFx0ICAgIFx0XHRcdGJyYW5jaGVzIDogbWVtYmVyLmJyYW5jaGVzLFxuXHRcdFx0ICAgIFx0XHRcdGNvcnBzIDogbWVtYmVyLmNvcnBzLFxuXHRcdFx0ICAgIFx0XHRcdHJhZGlvQ29kZSA6IG1lbWJlci5yYWRpb0NvZGUsIFxuXHRcdFx0ICAgIFx0XHRcdHdvcmtpbmdUaW1lIDogbWVtYmVyLndvcmtpbmdUaW1lLm1pbnV0ZXMoKSAqIDYwICsgbWVtYmVyLndvcmtpbmdUaW1lLnNlY29uZHMoKVxuXHRcdFx0ICAgIFx0XHR9XG5cdFx0XHQgICAgXHR9XG5cdFx0XHQgICAgfVxuXHRcdCAgICB9KTtcblxuXHRcdCAgICBtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uKG1lbWJlcil7XG5cdFx0ICAgIFx0bWVtYmVySW5pdCgpO1xuXHRcdCAgICBcdHZtLmFsZXJ0cy5wdXNoKHsgdHlwZSA6IFwiaW5mb1wiICwgIG1zZzogIG9sZE1lbWJlci5uYW1lICsgJ+S/ruaUueaIkOWKnyEnIH0pO1xuXHRcdCAgICB9KTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gYWN0aXZhdGVBY2NvdW50KG1lbWJlcil7XG5cdFx0XHR2YXIgdXNlcnMgPSB2bS5tZW1iZXJzLmZpbHRlcihmdW5jdGlvbihtZW1iZXIpIHtcblx0XHRcdFx0cmV0dXJuIG1lbWJlci5pc1VzZXI7XG5cdFx0XHR9KTtcblxuXHRcdFx0aWYgKHVzZXJzLmxlbmd0aCA8IDMgKSB7XG5cdFx0XHRcdHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuXHRcdFx0XHQgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9tZW1iZXIvbWVtYmVyLmFjY291bnQuaHRtbCcsXG5cdFx0XHRcdCAgICBjb250cm9sbGVyOiAnTWVtYmVyQWNjb3VudE1vZGFsQ3RybCcsXG5cdFx0XHRcdCAgICBzaXplOiBcIm1kXCIsXG5cdFx0XHRcdCAgICByZXNvbHZlIDoge1xuXHRcdFx0XHQgICAgXHRtZW1iZXIgOiBmdW5jdGlvbigpe1xuXHRcdFx0XHQgICAgXHRcdHJldHVybiBtZW1iZXJcblx0XHRcdFx0ICAgIFx0fVxuXHRcdFx0XHQgICAgfVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uKG1lbWJlcil7XG5cdFx0XHRcdFx0bWVtYmVySW5pdCgpO1xuXHRcdFx0XHRcdHZtLmFsZXJ0cy5wdXNoKHsgdHlwZSA6IFwiaW5mb1wiICwgbXNnIDogbWVtYmVyLm5hbWUgKyBcIiDlt7LplovpgJrngrrkvb/nlKjogIVcIiB9KVxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZtLmFsZXJ0cy5wdXNoKHsgdHlwZSA6IFwid2FybmluZ1wiICwgbXNnIDogXCLnhKHms5XplovpgJpcIiArIG1lbWJlci5uYW1lICsgXCIg5Zug54K65L2/55So6ICF5bey6LaF6YGOM+S9je+8jOiri+ino+mZpOWFtuS7luS6uuW4s+iZn+W+jOWGjemWi+mAmiBcIn0pO1xuXHRcdFx0fTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gZGVsZXRlQWxlcnQobWVtYmVyKXtcblx0XHRcdHZtLmFsZXJ0cy5wdXNoKHsgXHRcblx0XHRcdFx0dHlwZSA6IFwiZGFuZ2VyXCIgLCAgXG5cdFx0XHRcdG1zZzogJ+aYr+WQpueiuuWumuimgeWIqumZpO+8gScgKyBtZW1iZXIubmFtZSwgXG5cdFx0XHRcdGV4ZWN1dGUgOiBkZWxldGVNZW1iZXIsXG5cdFx0XHRcdGNhbmNlbCA6ICBjYW5jZWxEZWxcblx0XHRcdH0pO1xuXHRcdFx0dGVtcERlbE1lbWJlciA9IG1lbWJlcjtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gZGVBY3RpdmF0ZUFsZXJ0KG1lbWJlcil7XG5cdFx0XHR2YXIgdXNlcnMgPSB2bS5tZW1iZXJzLmZpbHRlcihmdW5jdGlvbihtZW1iZXIpIHtcblx0XHRcdFx0cmV0dXJuIG1lbWJlci5pc1VzZXI7XG5cdFx0XHR9KTtcblx0XHRcdGlmICh1c2Vycy5sZW5ndGggPT0gMSApIHtcblx0XHRcdFx0dm0uYWxlcnRzLnB1c2goeyBcblx0XHRcdFx0XHR0eXBlIDogXCJ3YXJuaW5nXCIsICBcblx0XHRcdFx0XHRtc2c6ICfmr4/liIbpmoroh7PlsJHopoHmnIkx5YCL5L2/55So6ICF77yM54Sh5rOV5Y+W5raIJyArIG1lbWJlci5uYW1lICsgXCLnmoTnmbvlhaXmrIrpmZBcIixcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2V7XG5cdFx0XHRcdHZtLmFsZXJ0cy5wdXNoKHsgXG5cdFx0XHRcdFx0dHlwZSA6IFwiZGFuZ2VyXCIsICBcblx0XHRcdFx0XHRtc2c6ICfmmK/lkKbnorrlrpropoHop6PpmaQnICsgbWVtYmVyLm5hbWUgKyBcIueZu+WFpeasiumZkFwiLFxuXHRcdFx0XHRcdGV4ZWN1dGUgOiBkZUFjdGl2YXRlQWNjb3VudCxcblx0XHRcdFx0XHRjYW5jZWwgOiBjYW5jZWxEZWxcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHRlbXBEZWxNZW1iZXIgPSBtZW1iZXI7XG5cdFx0XHR9O1xuXHRcdH07XG5cdFxuXHRcdGZ1bmN0aW9uIGNsb3NlQWxlcnQoaW5kZXgpe1xuXHRcdFx0dm0uYWxlcnRzLnNwbGljZShpbmRleCwxKVxuXHRcdH07XG5cdH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHQvKipcblx0KiBhcHAubWVtYmVyIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5tZW1iZXInLCBbXSlcblx0XHQuY29udHJvbGxlcignTWVtYmVySW5kZXhDb250cm9sbGVyJyxNZW1iZXJJbmRleENvbnRyb2xsZXIpO1xuXG5cdE1lbWJlckluZGV4Q29udHJvbGxlci4kaW5qZWN0ID0gWyBNZW1iZXJTdmMgLCAkc3RhdGVQYXJhbXMgXTtcblx0ZnVuY3Rpb24gTWVtYmVySW5kZXhDb250cm9sbGVyKCBNZW1iZXJTdmMgLCAkc3RhdGVQYXJhbXMgKXtcblx0XHR2YXIgdm0gPSB0aGlzOyBcblxuXHRcdHZtLmJyYW5jaCA9ICRzdGF0ZVBhcmFtcy5icmFuY2g7XG5cdFx0TWVtYmVyU3ZjLmZpbmRCeUJyYW5jaCgkc3RhdGVQYXJhbXMuYnJhbmNoKS5zdWNjZXNzKGZ1bmN0aW9uKG1lbWJlcnMpe1xuXHRcdFx0dm0ubWVtYmVycyA9IG1lbWJlcnM7XG5cdFx0XHR2bS5tZW1iZXJzLmZvckVhY2goZnVuY3Rpb24obWVtYmVyKXtcblx0XHRcdFx0cmV0dXJuIG1lbWJlci53b3JraW5nVGltZSA9IG1vbWVudC5kdXJhdGlvbihtZW1iZXIud29ya2luZ1RpbWUsJ3NlY29uZHMnKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9O1xufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAubWVtYmVyIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5tZW1iZXInKVxuXHRcdC5jb250cm9sbGVyKCdNZW1iZXJNb2RhbENvbnRyb2xsZXInLE1lbWJlck1vZGFsQ29udHJvbGxlcik7XG5cblx0TWVtYmVyTW9kYWxDb250cm9sbGVyLiRpbmplY3QgPSBbJ2JyYW5jaCcsICdNZW1iZXJTdmMnLCAnJG1vZGFsSW5zdGFuY2UnLCAnJHN0YXRlJywgJ21lbWJlcicsJ0JyYW5jaFN2YycsICdVc2VyU3ZjJ107XG5cdGZ1bmN0aW9uIE1lbWJlck1vZGFsQ29udHJvbGxlcihicmFuY2gsIE1lbWJlclN2YywgJG1vZGFsSW5zdGFuY2UsICRzdGF0ZSwgbWVtYmVyLEJyYW5jaFN2YywgVXNlclN2Yyl7XG5cdFx0dmFyIHZtID0gdGhpczsgXG5cdFx0dm0uYWxlcnRzID0gW107XG5cdFx0dm0uaXNOZXcgID0gXy5pc051bGwobWVtYmVyLndvcmtpbmdUaW1lKTtcblx0XHR2bS5zYXZlICAgPSBzYXZlO1xuXHRcdHZtLnVwZGF0ZSA9IHVwZGF0ZTtcblx0XHR2bS5jYW5jZWwgPSBjYW5lbDtcblxuXHRcdHZtLm1lbWJlciA9IHtcblx0XHRcdGlkIFx0XHQgXHQ6IG1lbWJlci5pZCB8fCAgXCJcIiwgXG5cdFx0XHRuYW1lIFx0IFx0OiBtZW1iZXIubmFtZSB8fCBudWxsICwgXG5cdFx0XHR0aXRsZSAgICBcdDogXCLmtojpmLLpmorlk6FcIixcblx0XHRcdHRpdGxlcyAgIFx0OiBbXCLmtojpmLLpmorlk6FcIixcIuWwj+maiumVt1wiLFwi5YiG6ZqK6ZW3XCIsXCLkuK3pmorplbdcIixcIuWkp+maiumVt1wiLFwi5Ymv5aSn6ZqK6ZW3XCJdLFxuXHRcdFx0YnJhbmNoICAgXHQ6IG1lbWJlci5icmFuY2ggfHwgYnJhbmNoLFxuXHRcdFx0d29ya2luZ1RpbWUgOiBtZW1iZXIud29ya2luZ1RpbWUgfHwgIDEyMDAsXG5cdFx0XHRyYWRpb0NvZGUgXHQ6IG1lbWJlci5yYWRpb0NvZGUgfHwgIG51bGwsIFxuXHRcdFx0bWlzc2lvbiAgXHQ6IFwi556E5a2Q5omLXCIsXG5cdFx0XHRtaXNzaW9ucyBcdDogW1wi556E5a2Q5omLXCIsXCLlia/nnoTlrZDmiYtcIixcIuWPuOapn1wiLFwi5bCP57WE6ZW3XCIsXCLlronlhajnrqHliLblk6FcIixcIuiBr+e1oeWumFwiLF0sXG5cdFx0XHRjb3Jwc1x0IFx0OiBVc2VyU3ZjLnVzZXJDb3JwcygpLFxuXHRcdFx0Y29ycHNzIFx0IFx0OiBbXCLnrKzkuIDmlZHngb3mlZHorbflpKfpmopcIixcIuesrOS4ieaVkeeBveaVkeitt+Wkp+mailwiXSxcblx0XHR9O1xuXG5cdFx0QnJhbmNoU3ZjLmZldGNoQnlDb3JwcyhVc2VyU3ZjLnVzZXJDb3JwcygpKS5zdWNjZXNzKGZ1bmN0aW9uKGJyYW5jaGVzKXtcblx0XHRcdHZtLmJyYW5jaGVzID0gYnJhbmNoZXM7IFxuXHRcdFx0aWYgKCF2bS5pc05ldykge1xuXHRcdFx0XHR2YXIgYnJhbmNoQXJyeSA9IFtdO1xuXHRcdFx0XHRmb3IgKHZhciBpID0gYnJhbmNoZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0XHRicmFuY2hBcnJ5LnB1c2goYnJhbmNoZXNbaV0ubmFtZSk7XG5cdFx0XHRcdH07XG5cdFx0XHRcdHZtLm1lbWJlci5icmFuY2hlcyA9IGJyYW5jaEFycnk7XG5cdFx0XHR9OyBcblx0XHR9KTtcblxuXHRcdHZhciByYWRpb0NvZGVQcmVmaXggPSBmdW5jdGlvbihicmFuY2gpe1xuXHRcdFx0dmFyIHN1ZmZpeCA9ICBicmFuY2guc3BsaXQoJycpLnNsaWNlKC0yKS5qb2luKCcnKTtcblx0XHRcdGlmIChzdWZmaXggPT0gXCLlpKfpmopcIiB8fCBzdWZmaXggPT0gXCLkuK3pmopcIikge1xuXHRcdFx0XHRyZXR1cm4gXCLljJfmtbdcIjtcblx0XHRcdH0gZWxzZXtcblx0XHRcdFx0cmV0dXJuIGJyYW5jaC5zcGxpdCgnJykuc2xpY2UoMCwyKS5qb2luKCcnKTtcblx0XHRcdH07XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHNhdmUoKXtcblx0XHRcdGlmICh2bS5tZW1iZXIubmFtZSkge1xuXHRcdFx0XHR2bS5tZW1iZXIucmFkaW9Db2RlUHJlZml4ID0gcmFkaW9Db2RlUHJlZml4KHZtLm1lbWJlci5icmFuY2gpO1xuXHRcdFx0XHRNZW1iZXJTdmMuY3JlYXRlKHZtLm1lbWJlcikuc3VjY2VzcyhmdW5jdGlvbigpe1xuXHRcdFx0XHRcdHZtLm1lbWJlci53b3JraW5nVGltZSA9IG1vbWVudC5kdXJhdGlvbihwYXJzZUludCh2bS5tZW1iZXIud29ya2luZ1RpbWUpLCdzZWNvbmRzJyk7XG5cdFx0XHRcdH0pLnRoZW4oZnVuY3Rpb24oKXtcblx0XHRcdFx0XHQkbW9kYWxJbnN0YW5jZS5jbG9zZSh2bS5tZW1iZXIpO1xuXHRcdFx0XHR9KVxuXHRcdFx0fSBlbHNle1xuXG5cdFx0XHR9O1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiB1cGRhdGUoKXtcblx0XHRcdHZhciB1cGRhdGVNZW1iZXIgPSB7XG5cdFx0XHRcdCAgbWVtYmVySWQgIDogbWVtYmVyLm1lbWJlcklkLFxuXHRcdFx0XHQgIGlkIFx0XHQ6IFwiXCIsXG5cdFx0XHRcdCAgbmFtZSBcdFx0OiB2bS5tZW1iZXIubmFtZSxcblx0XHRcdFx0ICBjb3JwcyBcdDogdm0ubWVtYmVyLmNvcnBzLFxuXHRcdFx0XHQgIGJyYW5jaCBcdDogdm0ubWVtYmVyLmJyYW5jaCxcblx0XHRcdFx0ICB0aXRsZSBcdDogdm0ubWVtYmVyLnRpdGxlLFxuXHRcdFx0XHQgIHdvcmtpbmdUaW1lIDogdm0ubWVtYmVyLndvcmtpbmdUaW1lLFxuXHRcdFx0XHQgIHJhZGlvQ29kZSAgOiB2bS5tZW1iZXIucmFkaW9Db2RlLFxuXHRcdFx0XHQgIHJhZGlvQ29kZVByZWZpeCA6IHJhZGlvQ29kZVByZWZpeCh2bS5tZW1iZXIuYnJhbmNoKVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAodm0ubWVtYmVyLm5hbWUpIHtcblx0XHRcdFx0TWVtYmVyU3ZjLnVwZGF0ZUJ5TWVtYmVySWQodXBkYXRlTWVtYmVyKTtcblx0XHRcdFx0JG1vZGFsSW5zdGFuY2UuY2xvc2UodXBkYXRlTWVtYmVyKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFxuXHRcdFx0fTtcblx0XHR9O1xuXHRcblx0XHRmdW5jdGlvbiBjYW5jZWwoKXtcblx0XHRcdCRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuXHRcdH07XG5cdH07XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5tZW1iZXIgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLm1lbWJlcicpXG5cdFx0LnNlcnZpY2UoJ01lbWJlclN2YycsTWVtYmVyU3ZjKVxuXHRcblx0TWVtYmVyU3ZjLiRpbmplY3QgPSBbJyRodHRwJ107XG5cdFxuXHRmdW5jdGlvbiBNZW1iZXJTdmMoKXtcblx0XHR2YXIgc3ZjID0gdGhpczsgXG5cdFx0c3ZjLmZldGNoID0gZmV0Y2g7XG5cdFx0c3ZjLmZpbmRCeUJyYW5jaCA9IGZpbmRCeUJyYW5jaDtcblx0XHRzdmMuZmV0Y2hPbkR1dHkgPSBmZXRjaE9uRHV0eTtcblx0XHRzdmMuY3JlYXRlID0gY3JlYXRlOyBcblx0XHRzdmMudXBkYXRlID0gdXBkYXRlOyBcblx0XHRzdmMudXBkYXRlT25EdXR5ID0gdXBkYXRlT25EdXR5O1xuXHRcdHN2Yy51cGRhdGVCeU1lbWJlcklkID0gdXBkYXRlQnlNZW1iZXJJZDtcblx0XHRzdmMudXBkYXRlSXNDaGVja2VkID0gdXBkYXRlSXNDaGVja2VkO1xuXHRcdHN2Yy51cGRhdGVVc2VyID0gdXBkYXRlVXNlcjtcblx0XHRzdmMucmVtb3ZlVXNlciA9IHJlbW92ZVVzZXI7XG5cdFx0c3ZjLmRlbGV0ZU1lbWJlciA9IGRlbGV0ZU1lbWJlcjtcblxuXHRcdGZ1bmN0aW9uIGZldGNoKCl7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL21lbWJlcnMnKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gZmluZEJ5QnJhbmNoKCBicmFuY2ggKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvbWVtYmVycy8nICsgYnJhbmNoICk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGZldGNoT25EdXR5KGJyYW5jaCl7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL21lbWJlcnMvb25EdXR5P2JyYW5jaD0nICsgYnJhbmNoKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gY3JlYXRlKG1lbWJlcil7XG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9tZW1iZXJzLycsIG1lbWJlcik7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHVwZGF0ZShtZW1iZXIpe1xuXHRcdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9tZW1iZXJzLycsIG1lbWJlci5pZCk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHVwZGF0ZU9uRHV0eShtZW1iZXIpe1xuXHRcdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9tZW1iZXJzL29uRHV0eS9maW5kQnlJZD9tZW1iZXJJZD0nICsgbWVtYmVyLm1lbWJlcklkLCBtZW1iZXIpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiB1cGRhdGVCeU1lbWJlcklkKHVwZGF0ZU1lbWJlcil7XG5cdFx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL21lbWJlcnMvZmluZEJ5SWQvJyArIHVwZGF0ZU1lbWJlci5tZW1iZXJJZCAsIHVwZGF0ZU1lbWJlcik7XG5cdFx0fVxuXHRcdFxuXHRcdGZ1bmN0aW9uIHVwZGF0ZUlzQ2hlY2tlZChtZW1iZXJEYXRhKXtcblx0XHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvbWVtYmVycz9pZD0nICsgbWVtYmVyRGF0YS5tZW1iZXJJZCwgbWVtYmVyRGF0YSlcblx0XHR9O1xuXHRcdFxuXHRcdGZ1bmN0aW9uIHVwZGF0ZVVzZXIodXNlcm5hbWUpe1xuXHRcdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9tZW1iZXJzL3VzZXI/dXNlcm5hbWU9JysgdXNlcm5hbWUpO1xuXHRcdH07XG5cdFx0XG5cdFx0ZnVuY3Rpb24gcmVtb3ZlVXNlcih1c2VybmFtZSl7XG5cdFx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL21lbWJlcnMvdXNlci9yZW1vdmU/dXNlcm5hbWU9JyArIHVzZXJuYW1lKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gZGVsZXRlTWVtYmVyKG1lbWJlcil7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZGVsZXRlKCcvYXBpL21lbWJlcnMvJyArIG1lbWJlci5faWQpO1xuXHRcdH07XG5cdH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLm5vdGlmaWNhdGlvbiBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAubm90aWZpY2F0aW9uJylcblx0XHQuc2VydmljZSgnTnRmU3ZjJyxOdGZTdmMpO1xuXG5cdE50ZlN2Yy4kaW5qZWN0ID0gWyckaHR0cCddO1xuXHRcblx0ZnVuY3Rpb24gTnRmU3ZjKCRodHRwKXtcblx0XHR2YXIgc3ZjID0gdGhpcztcblx0XHRzdmMuZmV0Y2ggPSBmZXRjaDsgXG5cdFx0ZnVuY3Rpb24gZmV0Y2goKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvbnRmcycpO1xuXHRcdH0gO1xuXHR9O1xuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cblx0LyoqXG5cdCogYXBwLnNhZmV0eSBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuc2FmZXR5Jylcblx0XHQuY29udHJvbGxlcignU2FmZXR5Q21kU2hvd0NvbnRyb2xsZXInLFNhZmV0eUNtZFNob3dDb250cm9sbGVyKTtcblxuXHRTYWZldHlDbWRTaG93Q29udHJvbGxlci4kaW5qZWN0ID0gWydDYXNlU3ZjJywgJ0JyYW5jaFN2YycsICdVc2VyU3ZjJywgJyRzdGF0ZVBhcmFtcycsICdHZW9TdmMnXTtcblx0XG5cdGZ1bmN0aW9uIFNhZmV0eUNtZFNob3dDb250cm9sbGVyKENhc2VTdmMsIEJyYW5jaFN2YywgVXNlclN2YywgJHN0YXRlUGFyYW1zLCBHZW9TdmMpe1xuXHRcdFxuXHRcdHZhciB2bSA9IHRoaXM7IFxuXHRcdHZhciBicmFuY2ggPSBVc2VyU3ZjLnVzZXJCcmFuY2goKTtcblx0XG5cdFx0QnJhbmNoU3ZjLnRvdGFsTGlzdEZpbmRCeU5hbWUoYnJhbmNoKS5zdWNjZXNzKGZ1bmN0aW9uKGJyYW5jaCl7XG5cdFx0XHR2bS5tZW1iZXJzID0gYnJhbmNoLm1lbWJlcnMuZmlsdGVyKGZ1bmN0aW9uKG1lbWJlcikge1xuXHRcdFx0XHRtZW1iZXIubGltaXRUaW1lID0gbW9tZW50LmR1cmF0aW9uKG1lbWJlci53b3JraW5nVGltZSwgJ3NlY29uZHMnKTtcblx0XHRcdFx0cmV0dXJuIG1lbWJlci5vbkR1dHkgPT0gdHJ1ZSBcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Q2FzZVN2Yy5mZXRjaERldGFpbHMoJHN0YXRlUGFyYW1zLmNhc2VJZCkuc3VjY2VzcyhmdW5jdGlvbihfY2FzZSl7XG5cdFx0XHR2bS5jYXNlRGV0YWlsID0gX2Nhc2U7XG5cdFx0XHR2bS5vbkR1dHlCcmFuY2hlcyA9IF9jYXNlLmJyYW5jaElkcztcblx0XHRcdGlmIChfY2FzZS5sb2NhdGlvbikge1xuXHRcdFx0XHR2YXIgbG9jYXRpb24gPSBKU09OLnBhcnNlKF9jYXNlLmxvY2F0aW9uKTtcblx0XHRcdFx0dm0ubWFya2Vycy5tYWluTWFya2VyID0ge1xuXHRcdFx0XHRcdGxhdCA6IE51bWJlcihsb2NhdGlvbi5sYXQpLFxuXHRcdFx0XHRcdGxuZyA6IE51bWJlcihsb2NhdGlvbi5sbmcpLFxuXHRcdFx0XHRcdG1lc3NhZ2UgOiBcIuahiOS7tuaomeeahFwiXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0dm0uYmF0dGxlUmFkaXVzcyA9IF9jYXNlLmJhdHRsZVJhZGl1c3M7XG5cdFx0XHR9O1xuXHRcdH0pLnRoZW4oZnVuY3Rpb24oKXtcblx0XHRcdHZtLm9uRHV0eUJyYW5jaGVzLmZvckVhY2goZnVuY3Rpb24oYnJhbmNoKXtcblx0XHRcdFx0YnJhbmNoLm1lbWJlcnMuZm9yRWFjaChmdW5jdGlvbihtZW1iZXIpe1xuXHRcdFx0XHRcdGlmIChicmFuY2guZGlyZWN0b3IgPT0gbWVtYmVyLm5hbWUgKSB7XG5cdFx0XHRcdFx0XHRicmFuY2guZGlyZWN0b3JSYWRpb0NvZGUgPSBtZW1iZXIucmFkaW9Db2RlUHJlZml4ICsgIFN0cmluZyhtZW1iZXIucmFkaW9Db2RlKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdGlmIChicmFuY2guc2FmZXR5TWFuYWdlciA9PSBtZW1iZXIubmFtZSkge1xuXHRcdFx0XHRcdFx0YnJhbmNoLnNhZmV0eU1hbmFnZXJSYWRpb0NvZGUgPSBtZW1iZXIucmFkaW9Db2RlUHJlZml4ICsgU3RyaW5nKG1lbWJlci5yYWRpb0NvZGUpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGlmICh2bS5iYXR0bGVSYWRpdXMpIHtcblx0XHRcdFx0XHR2bS5iYXR0bGVSYWRpdXNzLmZvckVhY2goZnVuY3Rpb24oYmF0dGxlUmFkaXVzKXtcblx0XHRcdFx0XHRcdHZhciByYWRpdXMgPSBKU09OLnBhcnNlKGJhdHRsZVJhZGl1cylcblx0XHRcdFx0XHRcdGlmIChicmFuY2gubmFtZSA9PSByYWRpdXMuYmFzZSkge1xuXHRcdFx0XHRcdFx0XHRicmFuY2guZXN0aW1hdGVkQXJyaXZpbmdUaW1lID0gIE1hdGgucm91bmQoKCByYWRpdXMuZCAvIDUwICkgKiA2MCk7XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH0pXHRcdFxuXHRcdFx0XHR9O1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cbiAgICAgICBHZW9TdmMuZ2V0R2VvbG9jYXRpb25Db29yZGluYXRlcygpLnRoZW4oZnVuY3Rpb24oY29vcmQpe1xuXHQgICAgICAgIHZtLm5vd1Bvcy5sYXQgPSBjb29yZC5sYXRpdHVkZTtcblx0ICAgICAgICB2bS5ub3dQb3MubG5nID0gY29vcmQubG9uZ2l0dWRlO1xuXHQgICAgICAgIHZtLm5vd1Bvcy56b29tID0gMTc7XG5cdCAgICAgICAgdm0ubWFya2Vycy5ub3dQb3MgPSB7XG5cdCAgICAgICAgXHRsYXQgOiB2bS5ub3dQb3MubGF0LFxuXHQgICAgICAgIFx0bG5nIDogdm0ubm93UG9zLmxuZyxcblx0ICAgICAgICBcdG1lc3NhZ2UgOiBcIuePvuWcqOS9jee9rlwiXG5cdCAgICAgICAgfVxuXHQgICAgfSlcblxuXHQgICAgYW5ndWxhci5leHRlbmQodm0sIHtcblx0ICAgICAgICBub3dQb3M6IHtcblx0ICAgICAgICAgICAgbGF0OiAyNC45ODgsXG5cdCAgICAgICAgICAgIGxuZzogMTIxLjU3NTIsXG5cdCAgICAgICAgICAgIHpvb206IDEzXG5cdCAgICAgICAgfSxcblx0ICAgICAgICBtYXJrZXJzOiB7fSxcblx0ICAgIH0pO1x0XHRcblx0fVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuc2FmZXR5IE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5zYWZldHknKVxuXHRcdC5jb250cm9sbGVyKCdTYWZldHlJbmRleENvbnRyb2xsZXInLFNhZmV0eUluZGV4Q29udHJvbGxlcik7XG5cdFNhZmV0eUluZGV4Q29udHJvbGxlci4kaW5qZWN0ID0gWydDYXNlU3ZjJywgJ1VzZXJTdmMnXTtcblx0ZnVuY3Rpb24gU2FmZXR5SW5kZXhDb250cm9sbGVyKCl7XG5cdFx0dmFyIHZtID0gdGhpczsgXG5cdFx0dmFyIHVzZXJDb25kaXRpb24gPSB7XG5cdFx0XHRicmFuY2ggXHRcdDogVXNlclN2Yy51c2VyQnJhbmNoKCksXG5cdFx0XHRhY2Nlc3NMZXZlbCA6IFVzZXJTdmMuYWNjZXNzTGV2ZWwoKSxcblx0XHRcdGNvcnBzIFx0XHQ6IFVzZXJTdmMudXNlckNvcnBzKClcblx0XHR9O1xuXG5cdFx0Q2FzZVN2Yy5mZXRjaFJlbGF0aXZlQ2FzZSh1c2VyQ29uZGl0aW9uKS5zdWNjZXNzKGZ1bmN0aW9uKGNhc2VzKXsgXG5cdFx0XHR2bS5jYXNlcyA9IGNhc2VzO1xuXHRcdFx0Y2FzZXMuZm9yRWFjaChmdW5jdGlvbihfY2FzZSl7XG5cdFx0XHRcdF9jYXNlLmRpc3BhdGNoQnJhbmNoZXMgPSAnJ1xuXHRcdFx0XHRfY2FzZS5icmFuY2hlcy5mb3JFYWNoKGZ1bmN0aW9uKGJyYW5jaCl7XG5cdFx0XHRcdFx0X2Nhc2UuZGlzcGF0Y2hCcmFuY2hlcyArPSBicmFuY2ggKyAnICdcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdHZtLmlzQnJhbmNoTWVtYmVyID0gdHJ1ZSA/IFVzZXJTdmMuYWNjZXNzTGV2ZWwoKSA8IDIgIDogZmFsc2UgOyBcblx0fVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuc2FmZXR5IE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5zYWZldHknKVxuXHRcdC5jb250cm9sbGVyKCdTYWZldHlNYW5hZ2VDb250cm9sbGVyJyxTYWZldHlNYW5hZ2VDb250cm9sbGVyKTtcblx0XG5cdFNhZmV0eU1hbmFnZUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHN0YXRlUGFyYW1zJywgJyRtb2RhbCcsICdTdFN2YycsICckc3RhdGUnLCAnTWVtYmVyU3ZjJywnJGxvZycsICdVc2VyU3ZjJywgJ0JyYW5jaFN2YycsICdTb2NrZXRTdmMnLCAnQ2FzZVN2YycsICdTdE1pc3Npb25GYWMnXTtcblx0XG5cdGZ1bmN0aW9uIFNhZmV0eU1hbmFnZUNvbnRyb2xsZXIoJHN0YXRlUGFyYW1zLCAkbW9kYWwsIFN0U3ZjLCAkc3RhdGUsIE1lbWJlclN2YywkbG9nLCBVc2VyU3ZjLCBCcmFuY2hTdmMsIFNvY2tldFN2YywgQ2FzZVN2YywgU3RNaXNzaW9uRmFjKXtcblx0XHR2YXIgdm0gPSB0aGlzOyBcblx0XHR2YXIgQlJBTkNIIFx0XHQ9IFVzZXJTdmMudXNlckJyYW5jaCgpO1xuXHRcdHZhciBjYXNlRGV0YWlsIFx0PSBudWxsO1xuXHRcdHZtLnF1aWNrU3RhcnQgXHQ9IGZhbHNlO1xuXHRcdHZtLmFwYXJ0bWVudCBcdD0gdHJ1ZTsgXG5cdFx0dm0uQUNDRVNTTEVWRUwgXHQ9IFVzZXJTdmMuYWNjZXNzTGV2ZWwoKTtcblx0XHR2bS5xdWlja09yZ2FuaXppbmcgPSBxdWlja09yZ2FuaXppbmc7XG5cdFx0dm0uc3RyaWtlVGVhbSA9IHN0cmlrZVRlYW07XG5cdFx0dm0ub3BlblNldHRpbmdNb2RhbCA9IG9wZW5TZXR0aW5nTW9kYWw7XG5cdFx0dm0uZGlzbWlzcyA9IGRpc21pc3M7IFxuXG5cdFx0dm0uYnJhbmNoT3B0aW9ucyA9IHtcblx0XHRcdGJyYW5jaCA6IEJSQU5DSCxcblx0XHRcdGJyYW5jaGVzIDogW11cblx0XHR9O1xuXG5cdFx0Q2FzZVN2Yy5mZXRjaEJ5SWQoJHN0YXRlUGFyYW1zLmNhc2VJZCkuc3VjY2VzcyhmdW5jdGlvbihfY2FzZSl7XG5cdFx0XHRjYXNlRGV0YWlsID0gX2Nhc2U7XG5cdFx0XHRfY2FzZS5lbnYgPT0gJ+S9j+WuheeBq+itpic/IHZtLmFwYXJ0bWVudCA9IHRydWUgOiB2bS5hcGFydG1lbnQgPSBmYWxzZTsgXG5cdFx0XHR2bS5icmFuY2hPcHRpb25zLmJyYW5jaGVzID0gX2Nhc2UuYnJhbmNoZXNcblx0XHRcdHZtLmJyYW5jaE9wdGlvbnMuYnJhbmNoZXMuc3BsaWNlKDAsMCxCUkFOQ0gpO1xuXHRcdH0pO1xuXG5cdFx0QnJhbmNoU3ZjLmZldGNoQnlOYW1lKEJSQU5DSCkuc3VjY2VzcyhmdW5jdGlvbihkZXRhaWxzKXtcblx0XHRcdHZtLmRldGFpbHMgPSBkZXRhaWxzO1xuXHRcdH0pLnRoZW4oZnVuY3Rpb24oKXtcblx0XHRcdGlmICh2bS5BQ0NFU1NMRVZFTCA+IDEgKSB7XG5cdFx0XHRcdFN0U3ZjLmZldGNoQnlDYXNlKCRzdGF0ZVBhcmFtcy5jYXNlSWQpLnN1Y2Nlc3MoZnVuY3Rpb24oc3RzKXtcblx0XHRcdFx0XHR2bS5zdHJpa2VUZWFtcyA9IHN0czsgXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0U3RTdmMuZmV0Y2goJHN0YXRlUGFyYW1zLmNhc2VJZCxCUkFOQ0gpLnN1Y2Nlc3MoZnVuY3Rpb24oc3RzKXtcblx0XHRcdFx0XHR2bS5zdHJpa2VUZWFtcyA9IHN0cztcblx0XHRcdFx0XHRpZiAodm0uZGV0YWlscy5kaXNwYXRjaE51bSA8IDggJiYgXy5pc0VtcHR5KHZtLnN0cmlrZVRlYW1zKSkgeyB2bS5xdWlja1N0YXJ0ID0gdHJ1ZSAgfTsgXG5cdFx0XHRcdH0pOyBcblx0XHRcdH07XG5cdFx0fSk7XG5cblx0XHRTb2NrZXRTdmMub24oJ25ld1N0JywgZnVuY3Rpb24oc3Qpe1xuXHRcdFx0aWYgKHZtLkFDQ0VTU0xFVkVMID4gMSAmJiBhbmd1bGFyLmVxdWFscygkc3RhdGVQYXJhbXMuY2FzZUlkLHN0LmNhc2VJZCkgKSB7XG5cdFx0XHRcdFx0dm0uc3RyaWtlVGVhbXMucHVzaChzdCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoYW5ndWxhci5lcXVhbHMoQlJBTkNILHN0LmJyYW5jaCkgJiYgYW5ndWxhci5lcXVhbHMoJHN0YXRlUGFyYW1zLmNhc2VJZCxzdC5jYXNlSWQpICkge1xuXHRcdFx0XHRcdHZtLnN0cmlrZVRlYW1zLnB1c2goc3QpO1xuXHRcdFx0XHR9O1xuXHRcdFx0fTtcblx0XHR9KTtcblxuXHRcdFNvY2tldFN2Yy5vbigndXBkYXRlU3QnLCBmdW5jdGlvbihkYXRhKXtcblx0XHRcdHZhciBtZW1iZXJzID0gYW5ndWxhci5jb3B5KGRhdGEubWVtYmVycyk7XG5cdFx0XHRmb3IgKHZhciBpID0gdm0uc3RyaWtlVGVhbXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0aWYoYW5ndWxhci5lcXVhbHModm0uc3RyaWtlVGVhbXNbaV0uX2lkLGRhdGEuaWQpKXtcblx0XHRcdFx0XHR2bS5zdHJpa2VUZWFtc1tpXS5wb3NpdGlvbiBcdD0gZGF0YS5wb3NpdGlvbjtcblx0XHRcdFx0XHR2bS5zdHJpa2VUZWFtc1tpXS5hcmVhIFx0XHQ9IGRhdGEuYXJlYTtcblx0XHRcdFx0XHR2bS5zdHJpa2VUZWFtc1tpXS5mbG9vciBcdD0gZGF0YS5mbG9vcjtcblx0XHRcdFx0XHR2bS5zdHJpa2VUZWFtc1tpXS5taXNzaW9uIFx0PSBkYXRhLm1pc3Npb247XG5cdFx0XHRcdH07XG5cdFx0XHR9O1xuXHRcdH0pXG5cblx0XHRTb2NrZXRTdmMub24oJ2Rpc21pc3MnLCBmdW5jdGlvbihzdCl7XG5cdFx0XHR2YXIgX3N0SWQgPSBzdC5zdElkO1xuXHRcdFx0dm0uc3RyaWtlVGVhbXMgPSB2bS5zdHJpa2VUZWFtcy5maWx0ZXIoZnVuY3Rpb24oc3QpIHtcdFx0XHRcdFxuXHRcdFx0XHRyZXR1cm4gc3QuX2lkICE9IF9zdElkO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdFx0XG5cdFx0ZnVuY3Rpb24gc3RyaWtlVGVhbSgpe1xuXHRcdFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XG5cdFx0XHQgIFx0dGVtcGxhdGVVcmw6ICd2aWV3cy9zYWZldHkvc2FmZXR5Lm1vZGFsLmh0bWwnLFxuXHRcdFx0ICAgIGNvbnRyb2xsZXI6ICdTYWZldHlNb2RhbEN0cmwnLFxuXHRcdFx0ICAgIHNpemU6IFwibWRcIixcblx0XHRcdCAgICByZXNvbHZlIDoge1xuXHRcdFx0ICAgIFx0c3RJZCA6IGZ1bmN0aW9uKCl7XG5cdFx0XHQgICAgXHRcdGlmICggXy5pc0VtcHR5KHZtLnN0cmlrZVRlYW1zKSkge1xuXHRcdFx0ICAgIFx0XHRcdHJldHVybiAwXG5cdFx0XHQgICAgXHRcdH0gZWxzZXtcblx0XHRcdCAgICBcdFx0XHRyZXR1cm4gdm0uc3RyaWtlVGVhbXNbdm0uc3RyaWtlVGVhbXMubGVuZ3RoLTFdLmlkO1xuXHRcdFx0ICAgIFx0XHR9O1xuXHRcdFx0ICAgIFx0fSxcblx0XHRcdCAgICBcdGJyYW5jaCA6IGZ1bmN0aW9uKCl7XG5cdFx0XHQgICAgXHRcdHJldHVybiB2bS5icmFuY2hPcHRpb25zLmJyYW5jaDtcblx0XHRcdCAgICBcdH0sXG5cdFx0XHQgICAgXHRjYXNlRGV0YWlsIDogZnVuY3Rpb24oKXtcblx0XHRcdCAgICBcdFx0cmV0dXJuIGNhc2VEZXRhaWxcblx0XHRcdCAgICBcdH1cblx0XHRcdCAgICB9XG5cdFx0ICAgIH0pO1xuXHRcdH07XG5cblx0XHRcblx0XHRmdW5jdGlvbiBvcGVuU2V0dGluZ01vZGFsKHN0cmlrZVRlYW0sIGlkKXtcblx0ICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcblx0ICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICd2aWV3cy9zYWZldHkvc2FmZXR5LnNldHRpbmcubW9kYWwuaHRtbCcsXG5cdCAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdTYWZldHlTZXR0aW5nQ3RybCcsXG5cdCAgICAgICAgICAgIHNpemU6IFwibGdcIixcblx0ICAgICAgICAgICAgcmVzb2x2ZToge1xuXHQgICAgICAgICAgICAgICAgc3RyaWtlVGVhbSA6IGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0cmlrZVRlYW07XG5cdCAgICAgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICAgICAgY2FzZURldGFpbCA6IGZ1bmN0aW9uKCl7XG5cdCAgICAgICAgICAgICAgICBcdHJldHVybiBjYXNlRGV0YWlsO1xuXHQgICAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICB9O1xuXG5cdFx0XG5cdFx0ZnVuY3Rpb24gZGlzbWlzcyhzdHJpa2VUZWFtICwgaWQpe1xuXG5cdFx0XHRTb2NrZXRTdmMuZW1pdChcImRpc21pc3NTdHJpa2VUZWFtXCIse1xuXHRcdFx0XHRpZCA6IHN0cmlrZVRlYW0uX2lkLFxuXHRcdFx0XHRtZW1iZXJzIDogc3RyaWtlVGVhbS5tZW1iZXJzIFxuXHRcdFx0fSk7XG5cdCAgICAgICBcdHZtLnN0cmlrZVRlYW1zLnNwbGljZShpZCwxKTtcblx0XHR9O1xuXG5cdFx0XG5cdFx0ZnVuY3Rpb24gcXVpY2tPcmdhbml6aW5nKCl7XG5cdFx0XHR2bS5xdWlja1N0YXJ0ID0gZmFsc2U7XG5cdFx0XG5cdFx0XHR2YXIgbWVtYmVycyA9ICB2bS5kZXRhaWxzLm1lbWJlcnMuZmlsdGVyKGZ1bmN0aW9uKG1lbWJlcikge1xuXHRcdFx0XHRpZiAoIG1lbWJlci5taXNzaW9uID09ICflj7jmqZ8nIHx8IG1lbWJlci5taXNzaW9uID09ICflronlhajnrqHliLblk6EnIHx8IG1lbWJlci5taXNzaW9uID09ICfmlZHorbfkurrlk6EnKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlICBcblx0XHRcdFx0fWVsc2Uge1xuXHRcdFx0XHRcdG1lbWJlci5pc0NoZWNrZWQgPSB0cnVlO1xuXHRcdFx0XHRcdHJldHVybiBtZW1iZXIub25EdXR5O1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0dmFyIHN0cmlrZVRlYW0gPSB7XG5cdFx0XHRcdGlkIFx0XHQgIDogMSxcblx0XHRcdFx0Y2FzZUlkIFx0ICA6IGNhc2VEZXRhaWwuX2lkLFxuXHRcdFx0XHRicmFuY2ggXHQgIDogVXNlclN2Yy51c2VyQnJhbmNoKCksXG5cdFx0XHRcdGRpcmVjdG9yICA6IF8ucGx1Y2sobWVtYmVycy5maWx0ZXIoZnVuY3Rpb24obWVtYmVyKSB7IHJldHVybiBtZW1iZXIubWlzc2lvbiA9PSAn5bi26ZqK5a6YJ30pLCduYW1lJylbMF0sXG5cdFx0XHRcdHBvc2l0aW9uICA6IFN0TWlzc2lvbkZhYy5wb3NpdGlvbigpLmRlZmF1bHRQb3MsXG5cdFx0XHRcdHBvc2l0aW9ucyA6IFN0TWlzc2lvbkZhYy5wb3NpdGlvbigpLnBvc3MsXG5cdFx0XHRcdGdyb3VwICAgICA6IFN0TWlzc2lvbkZhYy5ncm91cHMoKS5icmFuY2hbMV0sXG5cdFx0XHRcdGdyb3VwcyAgICA6IFN0TWlzc2lvbkZhYy5ncm91cHMoKS5icmFuY2gsXG5cdFx0XHRcdGFyZWEgXHQgIDogU3RNaXNzaW9uRmFjLmFyZWEoKS5kZWZhdWx0QXJlYSxcblx0XHRcdFx0YXJlYXMgXHQgIDogU3RNaXNzaW9uRmFjLmFyZWEoKS5hcmVhcyxcblx0XHRcdFx0Zmxvb3IgXHQgIDogMSwgXG5cdFx0XHRcdGZsb29ycyAgICA6IFsxLDIsMyw0LDVdLFxuXHRcdFx0XHRtZW1iZXJJZHMgOiBfLnBsdWNrKG1lbWJlcnMsJ19pZCcpLFxuXHRcdFx0XHRtZW1iZXJzICAgOiBtZW1iZXJzLFxuXHRcdFx0XHRjcmVhdG9yICAgOiBVc2VyU3ZjLmN1cnJlbnRVc2VyKCksXG5cdFx0XHR9O1xuXHQgICAgICBcdFNvY2tldFN2Yy5lbWl0KFwiY3JlYXRlU3RyaWtlVGVhbVwiLCBzdHJpa2VUZWFtKTtcblx0XHR9O1xuXG5cdFx0dm0uJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgICAgIFNvY2tldFN2Yy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblx0ICAgIH0pXG5cdH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLnNhZmV0eSBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuc2FmZXR5Jylcblx0XHQuY29udHJvbGxlcignTWVtYmVyTW9kYWxDb250cm9sbGVyJyxNZW1iZXJNb2RhbENvbnRyb2xsZXIpO1xuXG5cdE1lbWJlck1vZGFsQ29udHJvbGxlci4kaW5qZWN0ID0gWydicmFuY2gnLCAnTWVtYmVyU3ZjJywgJyRtb2RhbEluc3RhbmNlJywgJyRzdGF0ZScsICdtZW1iZXInLCdCcmFuY2hTdmMnLCAnVXNlclN2YyddO1xuXHRmdW5jdGlvbiBNZW1iZXJNb2RhbENvbnRyb2xsZXIoKXtcblx0XHR2YXIgdm0gPSB0aGlzOyBcblx0XHR2bS5hbGVydHMgPSBbXTtcblx0XHR2bS5pc05ldyA9IF8uaXNOdWxsKG1lbWJlci53b3JraW5nVGltZSk7XG5cdFx0dm0uc2F2ZSA9IHNhdmU7XG5cdFx0dm0udXBkYXRlID0gdXBkYXRlOyBcblx0XHR2bS5jYW5jZWwgPSBjYW5jZWw7ICBcblxuXHRcdHZtLm1lbWJlciA9IHtcblx0XHRcdGlkIFx0XHQgXHQ6IG1lbWJlci5pZCB8fCAgXCJcIiwgXG5cdFx0XHRuYW1lIFx0IFx0OiBtZW1iZXIubmFtZSB8fCBudWxsICwgXG5cdFx0XHR0aXRsZSAgICBcdDogXCLmtojpmLLpmorlk6FcIixcblx0XHRcdHRpdGxlcyAgIFx0OiBbXCLmtojpmLLpmorlk6FcIixcIuWwj+maiumVt1wiLFwi5YiG6ZqK6ZW3XCIsXCLkuK3pmorplbdcIixcIuWkp+maiumVt1wiLFwi5Ymv5aSn6ZqK6ZW3XCJdLFxuXHRcdFx0YnJhbmNoICAgXHQ6IG1lbWJlci5icmFuY2ggfHwgYnJhbmNoLFxuXHRcdFx0d29ya2luZ1RpbWUgOiBtZW1iZXIud29ya2luZ1RpbWUgfHwgIDEyMDAsXG5cdFx0XHRyYWRpb0NvZGUgXHQ6IG1lbWJlci5yYWRpb0NvZGUgfHwgIG51bGwsIFxuXHRcdFx0bWlzc2lvbiAgXHQ6IFwi556E5a2Q5omLXCIsXG5cdFx0XHRtaXNzaW9ucyBcdDogW1wi556E5a2Q5omLXCIsXCLlia/nnoTlrZDmiYtcIixcIuWPuOapn1wiLFwi5bCP57WE6ZW3XCIsXCLlronlhajnrqHliLblk6FcIixcIuiBr+e1oeWumFwiLF0sXG5cdFx0XHRjb3Jwc1x0IFx0OiBVc2VyU3ZjLnVzZXJDb3JwcygpLFxuXHRcdFx0Y29ycHNzIFx0IFx0OiBbXCLnrKzkuIDmlZHngb3mlZHorbflpKfpmopcIixcIuesrOS4ieaVkeeBveaVkeitt+Wkp+mailwiXSxcblx0XHR9O1xuXG5cdFx0QnJhbmNoU3ZjLmZldGNoQnlDb3JwcyhVc2VyU3ZjLnVzZXJDb3JwcygpKS5zdWNjZXNzKGZ1bmN0aW9uKGJyYW5jaGVzKXtcblx0XHRcdHZtLmJyYW5jaGVzID0gYnJhbmNoZXM7IFxuXHRcdFx0aWYgKCF2bS5pc05ldykge1xuXHRcdFx0XHR2YXIgYnJhbmNoQXJyeSA9IFtdO1xuXHRcdFx0XHRmb3IgKHZhciBpID0gYnJhbmNoZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0XHRicmFuY2hBcnJ5LnB1c2goYnJhbmNoZXNbaV0ubmFtZSk7XG5cdFx0XHRcdH07XG5cdFx0XHRcdHZtLm1lbWJlci5icmFuY2hlcyA9IGJyYW5jaEFycnk7XG5cdFx0XHR9OyBcblx0XHR9KTtcblxuXHRcdHZhciByYWRpb0NvZGVQcmVmaXggPSBmdW5jdGlvbihicmFuY2gpe1xuXHRcdFx0dmFyIHN1ZmZpeCA9ICBicmFuY2guc3BsaXQoJycpLnNsaWNlKC0yKS5qb2luKCcnKTtcblx0XHRcdGlmIChzdWZmaXggPT0gXCLlpKfpmopcIiB8fCBzdWZmaXggPT0gXCLkuK3pmopcIikge1xuXHRcdFx0XHRyZXR1cm4gXCLljJfmtbdcIjtcblx0XHRcdH0gZWxzZXtcblx0XHRcdFx0cmV0dXJuIGJyYW5jaC5zcGxpdCgnJykuc2xpY2UoMCwyKS5qb2luKCcnKTtcblx0XHRcdH07XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHNhdmUoKXtcblx0XHRcdGlmICh2bS5tZW1iZXIubmFtZSkge1xuXHRcdFx0XHR2bS5tZW1iZXIucmFkaW9Db2RlUHJlZml4ID0gcmFkaW9Db2RlUHJlZml4KHZtLm1lbWJlci5icmFuY2gpO1xuXHRcdFx0XHRNZW1iZXJTdmMuY3JlYXRlKHZtLm1lbWJlcikuc3VjY2VzcyhmdW5jdGlvbigpe1xuXHRcdFx0XHRcdHZtLm1lbWJlci53b3JraW5nVGltZSA9IG1vbWVudC5kdXJhdGlvbihwYXJzZUludCh2bS5tZW1iZXIud29ya2luZ1RpbWUpLCdzZWNvbmRzJyk7XG5cdFx0XHRcdH0pLnRoZW4oZnVuY3Rpb24oKXtcblx0XHRcdFx0XHQkbW9kYWxJbnN0YW5jZS5jbG9zZSh2bS5tZW1iZXIpO1xuXHRcdFx0XHR9KVxuXHRcdFx0fTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gdXBkYXRlKCl7XG5cdFx0XHR2YXIgdXBkYXRlTWVtYmVyID0ge1xuXHRcdFx0XHQgIG1lbWJlcklkICA6IG1lbWJlci5tZW1iZXJJZCxcblx0XHRcdFx0ICBpZCBcdFx0OiBcIlwiLFxuXHRcdFx0XHQgIG5hbWUgXHRcdDogdm0ubWVtYmVyLm5hbWUsXG5cdFx0XHRcdCAgY29ycHMgXHQ6IHZtLm1lbWJlci5jb3Jwcyxcblx0XHRcdFx0ICBicmFuY2ggXHQ6IHZtLm1lbWJlci5icmFuY2gsXG5cdFx0XHRcdCAgdGl0bGUgXHQ6IHZtLm1lbWJlci50aXRsZSxcblx0XHRcdFx0ICB3b3JraW5nVGltZSA6IHZtLm1lbWJlci53b3JraW5nVGltZSxcblx0XHRcdFx0ICByYWRpb0NvZGUgIDogdm0ubWVtYmVyLnJhZGlvQ29kZSxcblx0XHRcdFx0ICByYWRpb0NvZGVQcmVmaXggOiByYWRpb0NvZGVQcmVmaXgodm0ubWVtYmVyLmJyYW5jaClcblx0XHRcdH1cblxuXHRcdFx0aWYgKHZtLm1lbWJlci5uYW1lKSB7XG5cdFx0XHRcdE1lbWJlclN2Yy51cGRhdGVCeU1lbWJlcklkKHVwZGF0ZU1lbWJlcik7XG5cdFx0XHRcdCRtb2RhbEluc3RhbmNlLmNsb3NlKHVwZGF0ZU1lbWJlcik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcblx0XHRcdH07XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGNhbmNlbCgpe1xuXHRcdFx0JG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XG5cdFx0fTtcblx0fVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuc2FmZXR5IE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5zYWZldHknKVxuXHRcdC5jb250cm9sbGVyKCdTYWZldHlTZXR0aW5nQ29udHJvbGxlcicsU2FmZXR5U2V0dGluZ0NvbnRyb2xsZXIpO1xuXG5cdFNhZmV0eVNldHRpbmdDb250cm9sbGVyLiRpbmplY3QgPSBbJ3N0cmlrZVRlYW0nLCAnJG1vZGFsSW5zdGFuY2UnLCAnU3RTdmMnLCAnJHN0YXRlJywgJ01lbWJlclN2YycsICdDYXNlU3ZjJywgJyRzdGF0ZVBhcmFtcycsICdTb2NrZXRTdmMnLCAnY2FzZURldGFpbCddO1xuXHRcblx0ZnVuY3Rpb24gU2FmZXR5U2V0dGluZ0NvbnRyb2xsZXIoc3RyaWtlVGVhbSwgJG1vZGFsSW5zdGFuY2UsIFN0U3ZjLCAkc3RhdGUsIE1lbWJlclN2YywgQ2FzZVN2YywgJHN0YXRlUGFyYW1zLCBTb2NrZXRTdmMsIGNhc2VEZXRhaWwpe1xuXHRcdHZhciB2bSA9IHRoaXM7IFxuXHRcdHZtLnN0cmlrZVRlYW0gPSBzdHJpa2VUZWFtO1xuXHRcdHZtLmNob29zZUJyYW5jaCA9IGNob29zZUJyYW5jaDtcblx0XHR2bS5jYW5jZWwgPSBjYW5jZWw7XG5cdFx0dm0uY2hlY2sgPSBjaGVjaztcblx0XHR2bS51bmNoZWNrID0gdW5jaGVjaztcblx0XHR2bS5zYXZlID0gc2F2ZTsgICBcblx0XHRjYXNlRGV0YWlsLmVudiA9PSAn5L2P5a6F54Gr6K2mJz8gdm0uYXBhcnRtZW50ID0gIHRydWUgIDogdm0uYXBhcnRtZW50ID0gZmFsc2UgXG5cblx0XHR2YXIgbmV3TWVtYmVycyA9IFtdO1xuXG5cdFx0Q2FzZVN2Yy5mZXRjaERldGFpbHMoJHN0YXRlUGFyYW1zLmNhc2VJZCkuc3VjY2VzcyhmdW5jdGlvbihkZXRhaWxzKXtcblx0XHRcdHZtLmRpc3BhdGNoID0gZGV0YWlscy5icmFuY2hJZHM7XG5cdFx0XHR2bS5jdXJyZW50QnJhbmNoID0gdm0uZGlzcGF0Y2hbMF0ubmFtZTtcblx0XHRcdHZhciBtZW1iZXJMaXN0ID0gXy5wbHVjayhkZXRhaWxzLmJyYW5jaElkcywnbWVtYmVycycpO1xuXHRcdFx0dm0ubWVtYmVycyA9IFtdXG5cdFx0XHRtZW1iZXJMaXN0LmZvckVhY2goZnVuY3Rpb24oYnJhbmNoTWVtYmVycyl7XG5cdFx0XHRcdHZtLm1lbWJlcnMucHVzaC5hcHBseSh2bS5tZW1iZXJzLCBicmFuY2hNZW1iZXJzKVxuXHRcdFx0fSk7XG5cdFx0XHR2bS5tZW1iZXJzID0gdm0ubWVtYmVycy5maWx0ZXIoZnVuY3Rpb24obWVtYmVyKSB7IHJldHVybiAhbWVtYmVyLmlzQ2hlY2tlZCB9KTtcblx0XHR9KVxuXG5cdFx0ZnVuY3Rpb24gY2hvb3NlQnJhbmNoKGJyYW5jaCl7XG5cdFx0XHR2bS5jdXJyZW50QnJhbmNoID0gYnJhbmNoO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBjYW5jZWwoKXtcblx0XHRcdCRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBjaGVjayhtZW1iZXIpe1xuXHRcdFx0bWVtYmVyLmlzQ2hlY2tlZCA9ICFtZW1iZXIuaXNDaGVja2VkO1xuXHRcdFx0bmV3TWVtYmVycy5wdXNoKG1lbWJlcik7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHVuY2hlY2sobWVtYmVyLCBpZCl7XG5cdFx0XHRtZW1iZXIuaXNDaGVja2VkID0gIW1lbWJlci5pc0NoZWNrZWQ7XG5cdFx0XHRuZXdNZW1iZXJzLnNwbGljZShfLnBsdWNrKG5ld01lbWJlcnMsICdfaWQnKS5pbmRleE9mKG1lbWJlci5faWQpLDEpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBzYXZlKCl7XG5cdFx0XHR2bS5zdHJpa2VUZWFtLm1lbWJlcnMucHVzaC5hcHBseSh2bS5zdHJpa2VUZWFtLm1lbWJlcnMsIG5ld01lbWJlcnMpO1xuXHRcdFx0U29ja2V0U3ZjLmVtaXQoJ3VwZGF0ZVN0cmlrZVRlYW0nLHtcblx0XHRcdFx0aWQgOiBzdHJpa2VUZWFtLl9pZCwgXG5cdFx0XHRcdHBvc2l0aW9uIDogc3RyaWtlVGVhbS5wb3NpdGlvbixcblx0XHRcdFx0YXJlYSA6IHN0cmlrZVRlYW0uYXJlYSwgXG5cdFx0XHRcdGZsb29yIDogc3RyaWtlVGVhbS5mbG9vcixcblx0XHRcdFx0Z3JvdXAgOiBzdHJpa2VUZWFtLmdyb3VwLFxuXHRcdFx0XHRtZW1iZXJJZHMgOiBfLnBsdWNrKHZtLnN0cmlrZVRlYW0ubWVtYmVycywnX2lkJyksIFxuXHRcdFx0XHRtZW1iZXJzIDogdm0uc3RyaWtlVGVhbS5tZW1iZXJzXG5cdFx0XHR9KTtcblxuXHRcdFx0JG1vZGFsSW5zdGFuY2UuY2xvc2UoJ2Rpc21pc3MnKTtcdFx0XHRcblx0XHR9O1xuXHR9O1xuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5zYWZldHkgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLnNhZmV0eScpXG5cdFx0LmNvbnRyb2xsZXIoJ1NhZmV0eVNob3dDb250cm9sbGVyJyxTYWZldHlTaG93Q29udHJvbGxlcik7XG5cblx0U2FmZXR5U2hvd0NvbnRyb2xsZXIuJGluamVjdCA9IFsnQ2FzZVN2YycsICdVc2VyU3ZjJywgJ1NvY2tldFN2YycsJ0dlb1N2YycsICdCcmFuY2hTdmMnLCAnJHN0YXRlUGFyYW1zJ107XG5cblx0ZnVuY3Rpb24gU2FmZXR5U2hvd0NvbnRyb2xsZXIoKXtcblx0XHR2YXIgdm0gPSB0aGlzOyBcblx0XHR2YXIgYnJhbmNoID0gVXNlclN2Yy51c2VyQnJhbmNoKCk7XG5cdFx0XG5cdFx0QnJhbmNoU3ZjLmZldGNoQnlOYW1lKGJyYW5jaCkuc3VjY2VzcyhmdW5jdGlvbihicmFuY2gpe1xuXHRcdFx0dm0ubWVtYmVycyA9IGJyYW5jaC5tZW1iZXJzLmZpbHRlcihmdW5jdGlvbihtZW1iZXIpIHtcblx0XHRcdFx0bWVtYmVyLmxpbWl0VGltZSA9IG1vbWVudC5kdXJhdGlvbihtZW1iZXIud29ya2luZ1RpbWUsICdzZWNvbmRzJyk7XG5cdFx0XHRcdHJldHVybiBtZW1iZXIub25EdXR5ID09IHRydWUgXG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdENhc2VTdmMuZmV0Y2hEZXRhaWxzKCRzdGF0ZVBhcmFtcy5jYXNlSWQpLnN1Y2Nlc3MoZnVuY3Rpb24oX2Nhc2Upe1xuXHRcdFx0dm0uY2FzZURldGFpbCA9IF9jYXNlO1xuXHRcdFx0aWYgKF9jYXNlLmxvY2F0aW9uKSB7XG5cdFx0XHRcdHZhciBsb2NhdGlvbiA9IEpTT04ucGFyc2UoX2Nhc2UubG9jYXRpb24pO1xuXHRcdFx0XHR2bS5tYXJrZXJzLm1haW5NYXJrZXIgPSB7XG5cdFx0XHRcdFx0bGF0IDogTnVtYmVyKGxvY2F0aW9uLmxhdCksXG5cdFx0XHRcdFx0bG5nIDogTnVtYmVyKGxvY2F0aW9uLmxuZyksXG5cdFx0XHRcdFx0bWVzc2FnZSA6IFwi5qGI5Lu25qiZ55qEXCJcblx0XHRcdFx0fTtcblx0XHRcdH07XG5cdFx0fSk7XG5cbiAgICAgICBHZW9TdmMuZ2V0R2VvbG9jYXRpb25Db29yZGluYXRlcygpLnRoZW4oZnVuY3Rpb24oY29vcmQpe1xuXHQgICAgICAgIHZtLm5vd1Bvcy5sYXQgPSBjb29yZC5sYXRpdHVkZTtcblx0ICAgICAgICB2bS5ub3dQb3MubG5nID0gY29vcmQubG9uZ2l0dWRlO1xuXHQgICAgICAgIHZtLm5vd1Bvcy56b29tID0gMTc7XG5cdCAgICAgICAgdm0ubWFya2Vycy5ub3dQb3MgPXtcblx0ICAgICAgICBcdGxhdCA6IHZtLm5vd1Bvcy5sYXQsXG5cdCAgICAgICAgXHRsbmcgOiB2bS5ub3dQb3MubG5nLFxuXHQgICAgICAgIFx0bWVzc2FnZSA6IFwi54++5Zyo5L2N572uXCJcblx0ICAgICAgICB9XG5cdCAgICB9KVxuXG5cdCAgICBhbmd1bGFyLmV4dGVuZCh2bSwge1xuXHQgICAgICAgIG5vd1Bvczoge1xuXHQgICAgICAgICAgICBsYXQ6IDI0Ljk4OCxcblx0ICAgICAgICAgICAgbG5nOiAxMjEuNTc1Mixcblx0ICAgICAgICAgICAgem9vbTogMTNcblx0ICAgICAgICB9LFxuXHQgICAgICAgIG1hcmtlcnM6IHt9LFxuXHQgICAgfSk7XHRcdFxuXHR9XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5zb2NrZXQgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLnNvY2tldCcpXG5cdFx0LnNlcnZpY2UoJ1NvY2tldFN2YycsU29ja2V0U3ZjKTtcblxuXHRTb2NrZXRTdmMuJGluamVjdCA9IFsnJHJvb3RTY29wZScsICdzdG9yZScsICckcScsICckdGltZW91dCddO1xuXHRcblx0ZnVuY3Rpb24gU29ja2V0U3ZjKCRyb290U2NvcGUsIHN0b3JlLCAkcSwgJHRpbWVvdXQpe1xuXHRcdHZhciBzdmMgPSB0aGlzOyBcblx0XHRzdmMuaW5pdCA9ICBmdW5jdGlvbih0b2tlbil7XG5cdCAgICBcdHZhciBhdXRoVG9rZW4gPSBudWxsXG5cdCAgICBcdGlmICh0b2tlbikge1xuXHRcdCAgICAgIGF1dGhUb2tlbiA9IHRva2VuIFxuXHRcdFx0fSBlbHNlIHtcblx0XHQgICAgICBhdXRoVG9rZW4gPSBzdG9yZS5nZXQoJ2p3dCcpXG5cdFx0ICAgIH07XG5cdFx0ICAgIHJldHVybiBpby5jb25uZWN0KCdodHRwOi8vbG9jYWxob3N0OjMwMDAnLHsgcXVlcnkgOiAndG9rZW49JyArIGF1dGhUb2tlbiAsICdmb3JjZU5ldyc6dHJ1ZSB9KTtcblx0XHR9XG5cblx0ICBcdHZhciBzb2NrZXQgPSBzdmMuaW5pdCgpO1xuXG5cdCAgXHRzdmMub24gPSAgZnVuY3Rpb24gKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcblx0ICAgIFx0c3ZjLmluaXQoKS5vbihldmVudE5hbWUsIGZ1bmN0aW9uICgpIHsgIFxuXHRcdCAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuXHRcdCAgICAgICRyb290U2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICAgIGNhbGxiYWNrLmFwcGx5KHNvY2tldCwgYXJncyk7XG5cdFx0ICAgICAgfSk7XG5cdFx0ICAgIH0pO1xuXHRcdH07XG5cblx0ICBcdHN2Yy5lbWl0ID0gIGZ1bmN0aW9uIChldmVudE5hbWUsIGRhdGEsIGNhbGxiYWNrKSB7XG5cdCAgICBcdHN2Yy5pbml0KCkuZW1pdChldmVudE5hbWUsIGRhdGEsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgXHRcdHZhciBhcmdzID0gYXJndW1lbnRzO1xuXHQgICAgICBcdFx0JHJvb3RTY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIFx0XHRpZiAoY2FsbGJhY2spIHtcblx0ICAgICAgICAgIFx0XHRcdGNhbGxiYWNrLmFwcGx5KHNvY2tldCwgYXJncyk7XG5cdCAgICAgICAgXHRcdH07XG5cdCAgICAgIFx0XHR9KTtcblx0ICAgIFx0fSlcblx0ICBcdH07XG5cblx0XHRzdmMucmVtb3ZlQWxsTGlzdGVuZXJzID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcblx0XHQgICAgc3ZjLmluaXQoKS5yZW1vdmVBbGxMaXN0ZW5lcnMoZXZlbnROYW1lLCBmdW5jdGlvbigpIHtcblx0XHQgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuXHRcdCAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuXHRcdCAgICAgICAgICBjYWxsYmFjay5hcHBseShzb2NrZXQsIGFyZ3MpO1xuXHRcdCAgICAgICAgfSk7XG5cdFx0ICAgIH0pOyBcblx0XHR9O1xuXHR9O1xufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuc3RyaWtlVGVhbSBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuc3RyaWtlVGVhbScsIFtdKVxuXHRcdC5mYWN0b3J5KCdTdE1pc3Npb25GYWMnLFN0TWlzc2lvbkZhYyk7XG5cblx0U3RNaXNzaW9uRmFjLiRpbmplY3QgPSBbXTtcblx0ZnVuY3Rpb24gU3RNaXNzaW9uRmFjKCl7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGdyb3VwczogZnVuY3Rpb24oKXtcblx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRjb3JwcyA6IFsgXCLoga/ntaHntYRcIiAsIFwi5rC05rqQ57WEXCIgLCBcIuW+jOWLpOe1hFwiXSxcblx0XHRcdFx0XHRzcXVhZHJvbiA6IFtcIlwiXSxcblx0XHRcdFx0XHRicmFuY2ggOiBbXCLluLbpmorlrphcIixcIua7heeBq+Wwj+e1hFwiLFwi5pCc5pWR5bCP57WEXCIsXCLmkLbmlZHlsI/ntYRcIixcIuW+jOWLpOWwj+e1hFwiXSxcblx0XHRcdFx0XHRwcmVTdCAgOiBbXCLmkJzmlZHlsI/ntYRcIixcIuaQtuaVkeWwj+e1hFwiLFwi5ruF54Gr5bCP57WEXCJdXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRwb3NpdGlvbiA6IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0ZGVmYXVsdFBvcyA6IFwi56ys5LiA6Z2iXCIsXG5cdFx0XHRcdFx0cG9zcyA6IFtcIuesrOS4gOmdolwiLFwi56ys5LqM6Z2iXCIsXCLnrKzkuInpnaJcIixcIuesrOWbm+mdolwiXVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0YXJlYSA6IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0ZGVmYXVsdEFyZWEgOiBcIuesrOS4gOWNgFwiLFxuXHRcdFx0XHRcdGFyZWFzIDogW1wi56ys5LiA5Y2AXCIsXCLnrKzkuozljYBcIixcIuesrOS4ieWNgFwiLFwi56ys5Zub5Y2AXCIsXCLnrKzkupTljYBcIl1cblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9O1xuXHR9O1xufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuc3RyaWtUZWFtIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5zdHJpa1RlYW0nKVxuXHRcdC5zZXJpdmNlKCdTdFN2YycsU3RTdmMpO1xuXHRcdFxuXHRTdFN2Yy4kaW5qZWN0ID0gWyckaHR0cCddO1xuXG5cdGZ1bmN0aW9uIFN0U3ZjKCl7XG5cdFx0dmFyIHN2YyA9IHRoaXM7IFxuXHRcdHN2Yy5mZXRjaCA9IGZldGNoO1xuXHRcdHN2Yy5mZXRjaEJ5Q2FzZSA9IGZldGNoQnlDYXNlO1xuXHRcdHN2Yy5maW5kQnlJZCA9IGZpbmRCeUlkO1xuXHRcdHN2Yy5kaXNtaXNzU3QgPSBkaXNtaXNzU3Q7XG5cdFx0c3ZjLnVwZGF0ZVN0ID0gdXBkYXRlU3Q7XG5cdFx0c3ZjLnVwZGF0ZVRpbWVSZWNvcmQgPSB1cGRhdGVUaW1lUmVjb3JkO1xuXHRcdHN2Yy5jcmVhdGUgPSBjcmVhdGU7XG5cdFx0c3ZjLmNvdW50ID0gY291bnQ7IFxuXG5cdFx0ZnVuY3Rpb24gZmV0Y2goY2FzZUlkLCBicmFuY2gpe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9zdHJpa2VUZWFtcz9jYXNlSWQ9JyArIGNhc2VJZCArICcmYnJhbmNoPScgKyBicmFuY2gpO1xuXHRcdH07XG5cdFxuXHRcdGZ1bmN0aW9uIGZldGNoQnlDYXNlKGNhc2VJZCl7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3N0cmlrZVRlYW1zL3RvdGFsP2Nhc2VJZD0nICsgY2FzZUlkKTtcblx0XHR9O1xuXHRcdFxuXHRcdGZ1bmN0aW9uIGZpbmRCeUlkKGNhc2VJZCl7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3N0cmlrZVRlYW1zLycgKyBjYXNlSWQpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBkaXNtaXNzU3QoZGF0YSl7XG5cdFx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL3N0cmlrZVRlYW1zL2Rpc21pc3M/aWQ9JyArIGRhdGEuaWQpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiB1cGRhdGVTdChkYXRhKXtcblx0XHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvc3RyaWtlVGVhbXMvdXBkYXRlP2lkPScgKyBkYXRhLmlkLCBkYXRhKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gdXBkYXRlVGltZVJlY29yZChkYXRhKXtcblx0XHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvc3RyaWtlVGVhbXMvdGltZT9pZD0nICsgZGF0YS5pZCwgZGF0YSk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGNyZWF0ZShzdHJpa2VUZWFtKXtcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3N0cmlrZVRlYW1zJywgc3RyaWtlVGVhbSk7XG5cdFx0fTtcblx0XHRcblx0XHRmdW5jdGlvbiBjb3VudChjYXNlSWQpe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9zdHJpa2VUZWFtcy9jb3VudD9jYXNlSWQ9JyArIGNhc2VJZCk7XG5cdFx0fTtcblx0fVxuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5zdW1tYXJ5IE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5zdW1tYXJ5Jylcblx0XHQuY29udHJvbGxlcignU3VtbWFyeUNvbnRyb2xsZXInLFN1bW1hcnlDb250cm9sbGVyKTtcblxuXHRTdW1tYXJ5Q29udHJvbGxlci4kaW5qZWN0ID0gWydTdFN2YycsICckc3RhdGVQYXJhbXMnLCAnJGludGVydmFsJywgJyRzdGF0ZScsICdTb2NrZXRTdmMnLCAnQ2FzZVN2YyddO1xuXHRmdW5jdGlvbiBTdW1tYXJ5Q29udHJvbGxlcigpe1xuXHRcdHZhciB2bSA9IHRoaXM7IFxuXHRcdHZtLmlzQ29sbGFwc2VkID0gdHJ1ZSA7XG5cdFx0dm0ubWVtYmVycyA9IFtdO1xuXG5cdFx0U29ja2V0U3ZjLm9uKCd0aW1lclJ1bm5pbmcnLGZ1bmN0aW9uKHN0KXtcblx0XHRcdGZvciAodmFyIGkgPSB2bS5zdHJpa2VUZWFtcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0XHRpZiggYW5ndWxhci5lcXVhbHModm0uc3RyaWtlVGVhbXNbaV0uX2lkLCBzdC5zdElkKSl7XG5cdFx0XHRcdFx0cmV0dXJuIHZtLnN0cmlrZVRlYW1zW2ldLnRpbWVyUnVubmluZyA9IHN0LnRpbWVyUnVubmluZztcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9KVxuXG5cdFx0U29ja2V0U3ZjLm9uKCdwcm9ncmVzc1VwZGF0ZScsZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHRmb3IgKHZhciBpID0gdm0uc3RyaWtlVGVhbXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0aWYoIGFuZ3VsYXIuZXF1YWxzKHZtLnN0cmlrZVRlYW1zW2ldLl9pZCwgZGF0YS5pZCkgKXtcblx0XHRcdFx0XHR2bS5zdHJpa2VUZWFtc1tpXS50aW1lclx0PSBtb21lbnQuZHVyYXRpb24oZGF0YS5taWxsaXMpOyBcblx0XHRcdFx0XHR2bS5zdHJpa2VUZWFtc1tpXS5wcm9ncmVzcyAgPSBkYXRhLnByb2dyZXNzO1xuXHRcdFx0XHRcdHZtLnN0cmlrZVRlYW1zW2ldLnByb2dyZXNzU3RhdGUgPSAgZGF0YS5wcm9ncmVzc1N0YXRlO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH0pXG5cblx0XHRTb2NrZXRTdmMub24oJ25ld1N0JywgZnVuY3Rpb24oc3Qpe1xuXHRcdFx0aWYgKCBhbmd1bGFyLmVxdWFscyhjYXNlSWQsc3QuY2FzZUlkKSkge1xuXHRcdFx0XHR2YXIgbmV3U3QgPSBhbmd1bGFyLmNvcHkoc3QpO1xuXHRcdFx0XHRyZXR1cm4gdm0uc3RyaWtlVGVhbXMucHVzaChuZXdTdCk7XG5cdFx0XHR9O1xuXHRcdFx0dm0uZGVwbG95cyA9IGluaXRUYWJsZSh2bS5zdHJpa2VUZWFtcyk7XG5cdFx0fSk7XG5cblx0XHRcblxuXHRcdFNvY2tldFN2Yy5vbigndXBkYXRlU3QnLCBmdW5jdGlvbihkYXRhKXtcblx0XHRcdFN0U3ZjLmZldGNoQnlDYXNlKGNhc2VJZCkuc3VjY2VzcyhmdW5jdGlvbihzdHJpa2VUZWFtcyl7XG5cdFx0XHRcdHZtLnN0cmlrZVRlYW1zID0gc3RyaWtlVGVhbXM7XG5cdFx0XHRcdHZtLnN0cmlrZVRlYW1zLmZvckVhY2goZnVuY3Rpb24oc3Qpe1xuXHRcdFx0XHRcdHN0LmxpbWl0VGltZSA9IG1vbWVudC5kdXJhdGlvbihzdC53b3JraW5nVGltZSwnc2Vjb25kcycpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0dm0uZGVwbG95cyA9IGluaXRUYWJsZSh2bS5zdHJpa2VUZWFtcyk7XG5cdFx0XHR9KTtcblxuXHRcdH0pXG5cblx0XHRTb2NrZXRTdmMub24oJ2Rpc21pc3MnLCBmdW5jdGlvbihkYXRhKXtcblx0XHRcdFN0U3ZjLmZldGNoQnlDYXNlKGNhc2VJZCkuc3VjY2VzcyhmdW5jdGlvbihzdHJpa2VUZWFtcyl7XG5cdFx0XHRcdHZtLnN0cmlrZVRlYW1zID0gc3RyaWtlVGVhbXM7XG5cdFx0XHRcdHZtLmRlcGxveXMgPSBpbml0VGFibGUodm0uc3RyaWtlVGVhbXMpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblxuXHRcdHZhciBjYXNlSWQgPSAkc3RhdGVQYXJhbXMuY2FzZUlkO1xuXHRcdENhc2VTdmMuZmV0Y2hCeUlkKGNhc2VJZCkuc3VjY2VzcyhmdW5jdGlvbihfY2FzZSl7XG5cdFx0XHRfY2FzZS5lbnYgPT0gJ+S9j+WuheeBq+itpicgPyB2bS5hcGFydG1lbnQgPSB0cnVlIDogdm0uYXBhcnRtZW50ID0gZmFsc2U7XG5cdFx0XHR2bS5jYXNlRGV0YWlsID0gX2Nhc2U7XG5cdFx0XHR2bS5wb3NpdGlvbiA9IHtcblx0XHRcdFx0ZGVmYXVsdFBvcyBcdDogXCLnrKzkuIDpnaJcIixcblx0XHRcdFx0cG9zaXRpb25zIFx0OiBbXCLnrKzkuIDpnaJcIixcIuesrOS6jOmdolwiLFwi56ys5LiJ6Z2iXCIsXCLnrKzlm5vpnaJcIl0sXG5cdFx0XHRcdGZsb29yIFx0XHQ6IHZtLmNhc2VEZXRhaWwuZmxvb3IsXG5cdFx0XHRcdGZsb29ycyAgXHQ6IHZtLmNhc2VEZXRhaWwuZmxvb3IgPCA1PyBfLnJhbmdlKDEsNiwxKSA6IF8ucmFuZ2Uodm0uY2FzZURldGFpbC5mbG9vci0yLHZtLmNhc2VEZXRhaWwuZmxvb3IrMywxKVxuXHRcdFx0fTtcblx0XHR9KVxuXG5cdFx0U3RTdmMuZmV0Y2hCeUNhc2UoY2FzZUlkKS5zdWNjZXNzKGZ1bmN0aW9uKHN0cmlrZVRlYW1zKXtcblx0XHRcdGlmIChzdHJpa2VUZWFtcykge1xuXHRcdFx0XHR2bS5zdHJpa2VUZWFtcyA9IHN0cmlrZVRlYW1zO1xuXHRcdFx0XHR2bS5zdHJpa2VUZWFtcy5mb3JFYWNoKGZ1bmN0aW9uKHN0KXtcblx0XHRcdFx0XHRzdC5saW1pdFRpbWUgPSBtb21lbnQuZHVyYXRpb24oc3Qud29ya2luZ1RpbWUsJ3NlY29uZHMnKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHZtLmRlcGxveXMgPSBpbml0VGFibGUodm0uc3RyaWtlVGVhbXMpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIFxuXHRcdFx0fTtcblx0XHR9KTtcblxuXG5cblx0XHR2YXIgaW5pdFRhYmxlID0gIGZ1bmN0aW9uKHN0cmlrZVRlYW1zKXtcblx0XHQgIFx0dmFyIGRlcGxveUFycmF5ID0gXy5yYW5nZSg0KS5tYXAoZnVuY3Rpb24gKCkge1xuXHRcdCAgICAgICAgcmV0dXJuIF8ucmFuZ2UoNSkubWFwKGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICAgICAgICByZXR1cm4geyB0b3RhbE1lbWJlciA6IDAsIHN0VG90YWwgOiAwICwgc3RzIDogW10gfSA7XG5cdFx0ICAgICAgICB9KTtcblx0XHQgICAgfSk7XG5cblx0XHRcdGlmICggc3RyaWtlVGVhbXMgKXtcblx0XHRcdFx0Zm9yICh2YXIgaSA9IHN0cmlrZVRlYW1zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRcdFx0dmFyIHRvdGFsTWVtYmVyID0gMDtcblx0XHRcdFx0XHR2YXIgeSA9IG51bGw7XG5cdFx0XHRcdFx0dmFyIHN0ID0gMDtcblx0XHRcdFx0XHR2YXIgeCA9IF8uaW5kZXhPZihzdHJpa2VUZWFtc1tpXS5wb3NpdGlvbnMsIHN0cmlrZVRlYW1zW2ldLnBvc2l0aW9uKTtcblx0XHRcdFx0XHR2bS5hcGFydG1lbnQgPyB5ID0gXy5pbmRleE9mKHN0cmlrZVRlYW1zW2ldLmZsb29ycywgc3RyaWtlVGVhbXNbaV0uZmxvb3IpIDogeSA9IF8uaW5kZXhPZihzdHJpa2VUZWFtc1tpXS5hcmVhcywgc3RyaWtlVGVhbXNbaV0uYXJlYSlcblx0XHRcdFx0XHRkZXBsb3lBcnJheVt4XVt5XS5zdFRvdGFsICs9IDE7XG5cdFx0XHRcdFx0ZGVwbG95QXJyYXlbeF1beV0udG90YWxNZW1iZXIgKz0gc3RyaWtlVGVhbXNbaV0ubWVtYmVycy5sZW5ndGg7XG5cdFx0XHRcdFx0dmFyIHN0SW5GbyA9IHt9O1xuXHRcdFx0XHRcdHN0SW5Gby5pZCA9IHN0cmlrZVRlYW1zW2ldLmJyYW5jaCArIHN0cmlrZVRlYW1zW2ldLmlkXG5cdFx0XHRcdFx0c3RJbkZvLm51bWJlciA9IHN0cmlrZVRlYW1zW2ldLm1lbWJlcnMubGVuZ3RoO1xuXHRcdFx0XHRcdHN0SW5Gby5ncm91cCA9IHN0cmlrZVRlYW1zW2ldLmdyb3VwO1xuXHRcdFx0XHRcdGRlcGxveUFycmF5W3hdW3ldLnN0cy5wdXNoKHN0SW5Gbyk7XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZGVwbG95QXJyYXlcblx0XHR9O1xuXHRcdFxuXHRcdHZtLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICBTb2NrZXRTdmMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG5cdCAgICB9KTtcblx0fTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHQvKipcblx0KiBhcHAudGltZXIgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLnRpbWVyJylcblx0XHQuY29udHJvbGxlcignVGltZXJDb250cm9sbGVyJyxUaW1lckNvbnRyb2xsZXIpO1xuXG5cdFRpbWVyQ29udHJvbGxlci4kaW5qZWN0ID0gWydTb2NrZXRTdmMnXTtcblxuXHRmdW5jdGlvbiBUaW1lckNvbnRyb2xsZXIoKXtcblx0XHR2YXIgdm0gPSB0aGlzOyBcblx0XHR2bS50aW1lclJ1bm5pbmcgPSBmYWxzZTtcblx0XHR2bS5zdGFydFRpbWVyID0gc3RhcnRUaW1lcjtcblx0XHR2bS5zdG9wVGltZXIgPSBzdG9wVGltZXI7XG5cdCAgICBcblx0ICAgIGZ1bmN0aW9uIHN0YXJ0VGltZXIoc3QsIGlkKXtcblx0ICAgIFx0dm0uJGJyb2FkY2FzdCgndGltZXItc3RhcnQnKTtcblx0ICAgIFx0dm0udGltZXJSdW5uaW5nID0gdHJ1ZTtcblx0ICAgICAgICBTb2NrZXRTdmMuZW1pdCgndGltZXInLCB7IHN0SWQgOiBzdC5faWQsIHRpbWVyUnVubmluZyA6IHRydWUgfSApXG5cdCAgICB9O1xuXHQgICAgXG5cdCAgICBmdW5jdGlvbiBzdG9wVGltZXIoc3QsaWQpe1xuXHQgICAgXHR2bS4kYnJvYWRjYXN0KCd0aW1lci1zdG9wJyk7XG5cdCAgICBcdHZtLnRpbWVyUnVubmluZyA9IGZhbHNlO1xuXHQgICAgICAgIFNvY2tldFN2Yy5lbWl0KCd0aW1lcicsIHsgc3RJZCA6IHN0Ll9pZCwgdGltZXJSdW5uaW5nIDogZmFsc2UgfSApXG5cdCAgICB9O1xuXHR9O1xuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC51c2VyIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC51c2VyJylcblx0XHQuc2VydmljZSgnVXNlclN2YycsVXNlclN2Yyk7XG5cblx0VXNlclN2Yy4kaW5qZWN0ID0gWyckaHR0cCcsICdzdG9yZScsICdqd3RIZWxwZXInXTtcblx0ZnVuY3Rpb24gVXNlclN2Yygpe1xuXHRcdHZhciBzdmMgPSB0aGlzOyBcblx0XHRzdmMuZmV0Y2hPbmxpbmVVc2VyID0gZmV0Y2hPbmxpbmVVc2VyO1xuXHRcdHN2Yy5hY3RpdmF0ZSA9IGFjdGl2YXRlO1xuXHRcdHN2Yy5yZW1vdmVVc2VyID0gcmVtb3ZlVXNlcjtcblx0XHRzdmMubG9naW4gPSBsb2dpbjtcblx0XHRzdmMuaXNMb2dnZWRJbiA9IGlzTG9nZ2VkSW47XG5cdFx0c3ZjLmlzVmFsaWQgPSBpc1ZhbGlkO1xuXHRcdHN2Yy51c2VyQnJhbmNoID0gdXNlckJyYW5jaDtcblx0XHRzdmMudXNlckNvcnBzID0gdXNlckNvcnBzO1xuXHRcdHN2Yy5jdXJyZW50VXNlciA9IGN1cnJlbnRVc2VyO1xuXHRcdHN2Yy5jdXJyZW50QWNjb3VudCA9IGN1cnJlbnRBY2NvdW50O1xuXHRcdHN2Yy5hY2Nlc3NMZXZlbCA9IGFjY2Vzc0xldmVsO1xuXHRcdHN2Yy5jYXNlSWQgPSBjYXNlSWQ7XG5cblxuXHRcdGZ1bmN0aW9uIGZldGNoT25saW5lVXNlcigpe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS91c2Vycy91c2VyU3RhdGUnKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gYWN0aXZhdGUodXNlcil7XG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS91c2VycycsIHVzZXIpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiByZW1vdmVVc2VyKHVzZXJuYW1lKXtcblx0XHRcdHJldHVybiAkaHR0cC5kZWxldGUoJy9hcGkvdXNlcnMvZGVsZXRlP3VzZXJuYW1lPScgKyB1c2VybmFtZSk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGxvZ2luKHVzZXIpe1xuXHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvdXNlcnMvYXV0aGVudGljYXRlJywgdXNlcik7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGlzTG9nZ2VkSW4oKXtcblx0XHRcdHJldHVybiBzdG9yZS5nZXQoJ2p3dCcpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBpc1ZhbGlkKCBicmFuY2ggKXtcblx0XHRcdGlmIChzdmMuaXNMb2dnZWRJbikge1xuXHRcdFx0XHRpZiAoand0SGVscGVyLmRlY29kZVRva2VuKHN0b3JlLmdldCgnand0JykpLmFjY2Vzc0xldmVsID4gMSAgIHx8IGp3dEhlbHBlci5kZWNvZGVUb2tlbihzdG9yZS5nZXQoJ2p3dCcpKS5icmFuY2ggPT0gYnJhbmNoKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7IFxuXHRcdFx0XHR9ZWxzZSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9O1xuXHRcdFx0fTtcblxuXHRcdFx0cmV0dXJuIGZhbHNlIFxuXHRcdH07XG5cblx0XHRmdW5jdGlvbiB1c2VyQnJhbmNoKCl7XG5cdFx0XHRpZiAoc3ZjLmlzTG9nZ2VkSW4pIHtcblx0XHRcdFx0cmV0dXJuIGp3dEhlbHBlci5kZWNvZGVUb2tlbihzdG9yZS5nZXQoJ2p3dCcpKS5icmFuY2g7XG5cdFx0XHR9O1xuXHRcdH07XG5cdFxuXHRcdGZ1bmN0aW9uIHVzZXJDb3Jwcygpe1xuXHRcdFx0aWYgKHN2Yy5pc0xvZ2dlZEluKSB7XG5cdFx0XHRcdHJldHVybiBqd3RIZWxwZXIuZGVjb2RlVG9rZW4oc3RvcmUuZ2V0KCdqd3QnKSkuY29ycHM7XG5cdFx0XHR9O1xuXHRcdH07XG5cdFxuXHRcdGZ1bmN0aW9uIGN1cnJlbnRVc2VyKCl7XG5cdFx0XHRpZiAoc3ZjLmlzTG9nZ2VkSW4pIHtcblx0XHRcdFx0cmV0dXJuIGp3dEhlbHBlci5kZWNvZGVUb2tlbihzdG9yZS5nZXQoJ2p3dCcpKS51c2VybmFtZTtcblx0XHRcdH07XG5cdFx0fTtcblx0XG5cdFx0ZnVuY3Rpb24gY3VycmVudEFjY291bnQoKXtcblx0XHRcdGlmIChzdmMuaXNMb2dnZWRJbikge1xuXHRcdFx0XHRyZXR1cm4gand0SGVscGVyLmRlY29kZVRva2VuKHN0b3JlLmdldCgnand0JykpLmFjY291bnQ7XG5cdFx0XHR9OyBcblx0XHR9O1xuXHRcblx0XHRmdW5jdGlvbiBhY2Nlc3NMZXZlbCgpe1xuXHRcdFx0aWYgKHN2Yy5pc0xvZ2dlZEluKSB7XG5cdFx0XHRcdHJldHVybiBqd3RIZWxwZXIuZGVjb2RlVG9rZW4oc3RvcmUuZ2V0KCdqd3QnKSkuYWNjZXNzTGV2ZWw7XG5cdFx0XHR9O1xuXHRcdH07XG5cdFxuXHRcdGZ1bmN0aW9uIGNhc2VJZCgpe1xuXHRcdFx0aWYgKHN2Yy5pc0xvZ2dlZEluKSB7XG5cdFx0XHRcdHJldHVybiBqd3RIZWxwZXIuZGVjb2RlVG9rZW4oc3RvcmUuZ2V0KCdqd3QnKSkuY2FzZUlkO1xuXHRcdFx0fTtcblx0XHR9O1xuXHR9O1xuXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
