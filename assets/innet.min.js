;(function(){
	'use strict';
	angular.module('app',[
		'app.router',
		'app.topnav',
		'app.case',
		'app.car',
		'app.branch',
		'app.map',
		'app.member',
		'app.strikeTeam',
		'app.socket',
		'app.user',
		'app.timer',
		'app.notification'
	])
})();


(function(){
	'use strict';
	/**
	* app.branch Module
	*
	* Description
	*/
	angular
		.module('app.branch',[])
})();
(function(){
	'use strict';
	/**
	* app.car Module
	*
	* Description
	*/
	angular.module('app.car', [])
})();
(function(){
	'use strict';
	/**
	* app.case Module
	*
	* Description
	*/
	angular.module('app.case', [
		'ui.router',
		'ui.bootstrap'
	])
})();
(function(){
	/**
	* app.dashboard Module
	*
	* Description
	*/
	angular
		.module('app.dashboard',[]);
})();
(function(){
	'use strict';
	/**
	* app.director Module
	*
	* Description
	*/
	angular.module('app.director', [])

})();
(function(){
	'use strict';
	/**
	* app.dispatch Module
	*
	* Description
	*/
	angular.module('app.dispatch', [])
})();
(function(){
	'use strict';
	/**
	* app.dutylist Module
	*
	* Description
	*/
	angular.module('app.dutylist', [])
})();
(function(){
	'use strict';
	/**
	* app.geo Module
	*
	* Description
	*/
	angular.module('app.geo', []);
})();
(function(){
	/**
	* app.map Module
	*
	* Description
	*/
	angular.module('app.map', [])
})();
(function(){
	/**
	* app.member Module
	*
	* Description
	*/
	angular.module('app.member', [])
})();
(function(){
	'use strict';
	/**
	* app.notification Module
	*
	* Description
	*/
	angular.module('app.notification', []);
})();
(function(){
	'use strict';
	/**
	* app.socket Module
	*
	* Description
	*/
	angular.module('app.socket', []);
})();
(function(){
	'use strict';
	/**
	* app.safety Module
	*
	* Description
	*/
	angular.module('app.safety',[])
})();
(function(){
	'use strict';
	/**
	* app.strikeTeam Module
	*
	* Description
	*/
	angular.module('app.strikeTeam',[]);
})();
(function(){
	'use strict';
	/**
	* app.summary Module
	*
	* Description
	*/
	angular.module('app.summary',[]);
})();
(function(){
	'use strict';
	/**
	* app.timer Module
	*
	* Description
	*/
	angular.module('app.timer', [])
})();
(function(){
	'use strict';
	/**
	* app.user Module
	*
	* Description
	*/
	angular.module('app.user', []);
});
(function(){

	/**
	* app.branch Module
	*
	* Description
	*/
	angular
		.module('app.branch')
		.controller('BranchSvc',BranchSvc);

	BranchSvc.$inject = ['$http'];
	function BranchSvc($http){
		var svc = this;
		svc.fetchByCorps 	= fetchByCorps;
		svc.fetchByName 	= fetchByName;
		svc.totalListFindByName = totalListFindByName;
		svc.getDetails 		= getDetails;
		svc.fetchOnDutyBranches = fetchOnDutyBranches;
		svc.update 			= update;
		svc.updateMission 	= updateMission;
		
		function fetchByCorps(corps){
			return $http.get('/api/branches?corps=' + corps);
		};
		
		function fetchByName(branch){
			return $http.get('/api/branches?branch=' + branch);
		};

		function totalListFindByName(branch){
			return $http.get('/api/branches/' + branch)
		}

		function getDetails(id){
			return $http.get('/api/branches/' + id);
		};

		function fetchOnDutyBranches(branches){
			return $http.post('/api/branches/onduty',branches);
		};
	
		function update(data){
			return $http.put('/api/branches/' + data.branch , data);
		};

		function updateMission(data){
			return $http.put('/api/branches?branch=' + data.branch, data);
		};
	};

})();
(function(){
	'use strict';
	/**
	* app.car Module
	*
	* Description
	*/
	angular
		.module('app.car')
		.controller('CarEditController',CarEditController);

	CarEditController.$inject = [];
	function CarEditController(){

	};

})();
(function(){
	'use strict';
	/**
	* app.car Module
	*
	* Description
	*/
	angular
		.module('app.car')
		.controller('CarIndexController',CarIndexController);

	CarIndexController.$inject = [];
	function CarIndexController(){

	};

})();
(function(){
	'use strict';

	/**
	* app.car Module
	*
	* Description
	*/
	angular
		.module('app.car')
		.serice('CarSvc',CarSvc);

	CarSvc.$inject = ['$http'];
	
	function CarSvc($http){
		var vm = this; 
		vm.fetchByCorps  = fetchByCorps;
		vm.fetchByBranch = fetchByBranch;
		vm.update 		 = update; 

		function fetchByCorps(corps){
			return $http.get('/api/cars?corps=' + corps);
		};

		function fetchByBranch( branch ){
			return $http.get('/api/cars?branch=' + branch );
		};
		
		function update(data){
			return $http.put('/api/cars/' + data.id , data);
		};
	};
})();
;(function(){
	'use strict';
	/**
	* app Module
	*
	* Description
	*/
	angular
		.module('app')
		.controller('LoginController',LoginController);

		LoginController.$inject = ['UserSvc', 'store', '$state','jwtHelper','$http', 'SocketSvc'];

		function LoginController(UserSvc, store, $state,jwtHelper,$http, SocketSvc ){
			var vm 	 = this; 
			vm.login = login;
			vm.user  = {};

			function login(){
				UserSvc.login(vm.user).success(function(data){
					if (data.success) {
						store.set('jwt',data.token);
						$http.defaults.headers.common['x-access-token'] = data.token;
						return data.token; 
					} else { 
						return console.log("password is not existed");
					}
				}).then(function(token){
					SocketSvc.init(token);
					SocketSvc.emit('login');
				}).then(function(){
					if (jwtHelper.decodeToken(token).role == "admin") {
						var userBranch = jwtHelper.decodeToken(token).branch;
						if (userBranch.slice(userBranch.length-2 ,userBranch.length) == "大隊") {
							return $state.go('dutyDesk.corps')
						} else{
							return $state.go('dutyDesk.branch')
						};
					}else{
						return $state.go('director.safety.index')
					}
				})
			};
		};
})();
;(function(){
	'use strict';
	angular
		.module('app.router',['ui.router'])
		.config(routerConfig)

		routerConfig.$inject = ['$stateProvider','$urlRouterProvider','$locationProvider'];
		
		function routerConfig($stateProvider,$urlRouterProvider, $locationProvider) {
		    $urlRouterProvider
    			.otherwise('/login');

		    $stateProvider
		        .state('anon',{
		            url : "",
		            abstract : true,
		            template : "<ui-view>",
		        })
		        .state('anon.login',{
		            url : "/login",
		            templateUrl :"login.html",
		            controller : "LoginController",
		            controllerAs : "LoginCtrl"
		        })
		        .state('anon.404',{
		            url : "/404",
		            templateUrl : "404.html"
		        })

    			// duty desk 
			$stateProvider
				.state('dutyDesk', {
		            abstract: true,
		            url: "/dutyDesk",
		            templateUrl: "views/common/content.html",
		            data : {
		                requiredLogin : true,
		                role : ["admin"]
		            }
		        })
		        .state('dutyDesk.corps', {
		            url: "/corps",
		            templateUrl: "views/dashboard/corps.dashboard.html",
		            controller : "DashboardController",
		            controllerAs : "DashboardCtrl",
		            data : {
		                requiredLogin : true,
		                role : ["admin"]
		            }
		        })
		        .state('dutyDesk.branch',{
		            url : "/branch",
		            templateUrl : "views/dashboard/branch.dashboard.html",
		            controller : "DashboardController",
		            controllerAs : "DashboardCtrl",
		            date : {
		                requiredLogin : true,
		                role : ["admin"]
		            }
		        })
		        .state('dutyDesk.case',{
		            abstract : true,
		            template : "<ui-view>"
		        })
		        .state('dutyDesk.case.index', {
		            url: "/case",
		            templateUrl: "case/case.index.html",
		            controller : "CaseController",
		            controllerAs : "CaseCtrl"
		        })
		        .state('dutyDesk.case.new',{
		            url : "/case/new",
		            templateUrl : "case/case.new.html",
		            controller : "CaseNewController",
		            controllerAs : "CaseNewCtrl"
		        })
		        .state('dutyDesk.case.show',{
		            url : "/case/:id/show",
		            templateUrl : "case/case.show.html",
		            controller : "CaseShowController",
		            controllerAs : "CaseShowCtrl"
		        })
		        .state('dutyDesk.case.edit',{
		            url : "/case/:id/edit",
		            templateUrl : "case/case.edit.html",
		            controller : "CaseEditController",
		            controllerAs : "CaseEditCtrl"
		        })
		        .state('dutyDesk.safety',{
		            url : "/case/:id",
		            templateUrl : "summary/summary.index.html",
		            controller : "SummaryController",
		            controllerAs : "SummaryCtrl"
		        })
		        .state('dutyDesk.dutylist',{
		            abstract : true,
		            template : "<ui-view>"
		        })
		        .state('dutyDesk.dutylist.index', {
		            url: "/dutylist/:branch",
		            templateUrl: "views/dutylist/dutylist.index.html",
		            controller : "DutyListController",
		            controllerAs : "DutyListCtrl"
		        })
		        .state('dutyDesk.dutylist.show',{
		        	url : "/dutylist/:branch/index",
		        	template : "<h2> show </h2>"
		        })
		        .state('dutyDesk.dutylist.edit', {
		            url: "/dutylist/:branch/edit",
		            templateUrl  : "views/dutylist/dutylist.edit.html",
		            controller   : "DutyListEditController",
		            controllerAs : "DutyListEditCtrl"
		        })
		        .state('dutyDesk.member',{
		            abstract : true,
		            template : "<ui-view>"
		        })
		        .state('dutyDesk.member.show', {
		            url: "/member/:branch",
		            templateUrl  : "views/member/member.index.html",
		            controller   : "MemberController",
		            controllerAs : "MemberCtrl"
		        })
		        .state('dutyDesk.member.edit', {
		            url: "/member/:branch/edit",
		            templateUrl  : "views/member/member.edit.html",
		            controller 	 : "MemberEditController",
		            controllerAs : "MemberEditCtrl"
		        })
		        .state('dutyDesk.car', {
		            abstract : true,
		            template : "<ui-view>"
		        })
		        .state('dutyDesk.car.show',{
		            url: "/car/:branch",
		            templateUrl : "views/cars/car.index.html",
		            controller : "CarIndexController",
		            controllerAs : "CarIndexCtrl"
		        })
		        .state('dutyDesk.car.edit',{
		            url: "/car/:branch/edit",
		            templateUrl : "views/cars/car.edit.html",
		            controller : "CarEditController",
		            controllerAs : "CarEditCtrl"
		        })
		}
})();

(function(){
	'use strict';
	/**
	* app Module
	*
	* Description
	*/
	angular
		.module('app.topnav', [])
		.controller('TopNavController',TopNavController);

	TopNavController.$inject = [];
	function TopNavController($location,$state, $interval, store, SocketSvc, UserSvc, $window){
		var vm = this; 
		vm.currentTime =  moment().format('MMM Do, h:mm:ss a');
		vm.logout = logout;


		$interval(function(){
			moment.locale('zh-tw');
			vm.currentTime =  moment().format('MMM Do, h:mm:ss a');
		}, 1000);
		 
		function logout(){
			var account = UserSvc.currentAccount();
			SocketSvc.emit('logout');
			$state.go('anon.login');
		};
	}

})();
(function(){
	'use strict';
	/**
	* app.case Module
	*
	* Description
	*/
	angular
		.module('app.case')
		.controller('CaseConfirmController',CaseConfirmController);

	CaseConfirmController.$inject = ['UserSvc', 'CaseSvc', '$stateParams','$state','$modalInstance'];
	function CaseConfirmController(UserSvc, CaseSvc, $stateParams,$state,$modalInstance){
		var vm = this;
		
		vm.user = {};
		vm.send = send; 
		vm.caseInfo = {
			id : $stateParams.id,
			endAt : moment().format('YYYY-MMM-DD, h:mm:ss a')
		}; 

		function send(){
			UserSvc.login(vm.user).success(function(data){
				CaseSvc.closeCase(vm.caseInfo).success(function(){
					$modalInstance.dismiss('cancel');
					$state.go('dutyDesk.case.index');
				})
			});
		};
	};
})();
(function(){
	'use strict';
	/**
	* app.case Module
	*
	* Description
	*/
	angular
		.module('app.case')
		.controller('CaseEditController',CaseEditController);

	CaseEditController.$inject = ['$stateParams', 'CaseSvc', 'CarSvc', 'UserSvc', 'BranchSvc', '$window', '$modal','NtfSvc'];

	function CaseEditController($stateParams, CaseSvc, CarSvc, UserSvc, BranchSvc, $window, $modal,NtfSvc){
		var vm = this; 
		var dispatchCars  = [];
		vm.terminateCase  = terminateCase;
		vm.dispatch 	  = dispatch;
		vm.selectBranch   = selectBranch;
		vm.cancelDispatch = cancelDispatch;
		vm.save 		  = save; 

		angular.extend(vm, {
	        nowPos: {
	            lat: 24.988,
	            lng: 121.5752,
	            zoom: 17
	        },
	        controls: {
	            draw: {}
	        }
	    });

		var caseId = $stateParams.id;

		BranchSvc.fetchByCorps(UserSvc.userCorps()).success(function(branches){
		    vm.branches = branches;
		    vm.currentBranch = branches[0].name
		});

		function selectBranch(branch){
	    	vm.currentBranch = branch.name;
	    };

		BranchSvc.fetchByCorps(UserSvc.userCorps()).success(function(branches){
		    vm.branches = branches;
		    vm.currentBranch = branches[0].name
		})

		CaseSvc.fetchById(caseId).success(function(_case){
			vm.currentCase = _case;
			vm.dispatchList = _.pluck(_case.cars, 'radioCode').join(' ')
			vm.currentCase.carIds = _.pluck(_case.cars,'_id');
		}).then(function(){
			CarSvc.fetchByCorps(UserSvc.userCorps()).success(function(cars){
				vm.cars = cars
				for (var i = 0; i < vm.cars.length; i++) {
					if ( vm.currentCase.carIds.indexOf(vm.cars[i]._id) > -1 ) {
						vm.cars[i].isChecked = true;
						dispatchCars.push(vm.cars[i]);
					};
				};
			});

			NtfSvc.fetch().success(function(ntfs){
				vm.ntfs = ntfs;
				vm.currentCase.ntfs = _.pluck(ntfs,'type')
				vm.currentCase.ntf  = vm.currentCase.ntfs[0];
			});
		});

		function getBranchId(branchesList){
			var branches = _.unique(branchesList);
			var branchIds = [];
			for (var i = 0; i < vm.branches.length; i++) {
				if (branches.indexOf(vm.branches[i].name) > -1) {
					branchIds.push(vm.branches[i]._id);
				};
			};
			return  branchIds;
		};

		function dispatch( car ){
			car.isChecked = true; 
			dispatchCars.push(car);
			vm.dispatchList = _.pluck(dispatchCars, 'radioCode').join(" ")
		};

		function cancelDispatch(car){
			car.isChecked = false;
			dispatchCars.splice(_.pluck(dispatchCars, '_id').indexOf(car._id),1)
			vm.dispatchList = _.pluck(dispatchCars, 'radioCode').join(" ")
		};

		function save(){
			var currentNtf;

			vm.ntfs.forEach(function(ntf,id){
				if (ntf.type == vm.currentCase.ntf ) {
					currentNtf  = vm.ntfs[id];
				};
			});
			CaseSvc.update({
				caseId    : vm.currentCase._id,
				address   : vm.currentCase.address || "測試",
				officerReceiver : UserSvc.currentUser() ||  "劉曉曼",
				type      : vm.currentCase.type || "火警",
				types 	  : vm.currentCase.types,
				phone     : vm.currentCase.phone || "測試",
				branches  : _.unique(_.pluck(dispatchCars, 'branch')),
				branchIds : getBranchId(vm.currentCase.branches),
		  		cars      : _.pluck(dispatchCars,'_id'),
				isOngoing : true,
				corps 	  : UserSvc.userCorps(),
				env 	  : vm.currentCase.env,
				envs 	  : vm.currentCase.envs,
				floor 	  : vm.currentCase.floor,
				ntf       : currentNtf._id,
				lastUpdate : moment().format('YYYY-MMM-DD h:mm:ss a')
			}).success(function(){
				$window.history.back();
			})
		};

		function terminateCase (){
			var modalInstance = $modal.open({
			  	templateUrl: 'views/case/case.confirm.modal.html',
			    controller: 'CaseConfirmCtrl',
			    size: "md"	    
			});
		};
	}
})();
(function(){
	'use strict';

	angular
		.module('app.case')
		.controller('CaseController',CaseController);
	
	CaseController.$inject = ['$stateParams','$modal','CaseSvc', '$log', 'SocketSvc', 'UserSvc', '$location'];
	function CaseController($stateParams,$modal,CaseSvc, $log, SocketSvc, UserSvc, $location){
		var vm = this; 
		vm.maxSize 		= 5; 
		vm.itemsPerPage = 3;
		vm.currentPage  = 1;
		vm.pageChanged  = pageChanged;
		vm.queryCases   = queryCases;
		vm.choose 		= choose;
		
		vm.queryCases();

		function pageChanged(){
			CaseSvc.fetch(UserSvc.userCorps(), vm.currentPage , vm.itemsPerPage ).success(function(data){
				vm.cases = data.cases;
			});
		};

		function queryCases(){
			CaseSvc.fetch(UserSvc.userCorps(), vm.currentPage, vm.itemsPerPage).success(function(data){
				vm.cases = data.cases;
				vm.totalItems = data.totalCases;
			});
		};

		function choose(id){
			CaseSvc.fetchById(vm.cases[id]._id).success(function(_case){
					vm.caseDetails = _case;
			});
		};

		SocketSvc.on('newCase',function(_case){
			vm.cases.unshift(_case);
		});

		SocketSvc.on('caseModified',function(_case){
			vm.cases[_case.caseId-1] = _case;
		});
	};

})();
(function(){
	'use strict';
	/**
	* app.case Module
	*
	* Description
	*/
	angular
		.module('app.case')
		.controller('CaseModalController',CaseModalController);

	CaseModalController.$inject = ['CarSvc', '$modalInstance', 'CaseSvc','$state', 'caseId','caseDetails', 'StSvc', '$window', 'BranchSvc', 'UserSvc', 'NtfSvc'];

	function CaseModalController(CarSvc, $modalInstance, CaseSvc,$state, caseId,caseDetails, StSvc, $window, BranchSvc, UserSvc, NtfSvc){
		var vm = this; 
		vm.nftOption = {};
		vm.dispatchList = vm.caseObj.dispatchList.join(" ");
		vm.caseObj = {
			address : caseDetails.address || null,
			phone : caseDetails.phone || null,
		    type : caseDetails.type ||  "火警", 
		    types : [ "火警", "救護", "災害", "檢舉","其他"],
		    env   : "住宅火警",
		    envs  : ["住宅火警","高樓、地下與工廠","搶救困難區","其他"],
		    floor : 1, 
		    carIds : getCarsDetail(caseDetails).carIds  || [],
		    dispatchList : getCarsDetail(caseDetails).dispatchList ||  [],
		    branches : getCarsDetail(caseDetails).branches ||  []
		};
		vm.update 	 = update;
		vm.getCars 	 = getCars;
		vm.cancel 	 = cancel;
		vm.cancelDispatch = cancelDispatch;
		vm.dispatch  = dispatch;
		vm.closeCase = closeCase;
		vm.save 	 = save;

		if (_.isEmpty(caseDetails)) {
			vm.isNew = true;
			carObjs = [];
		}else{
			vm.isNew = false;
			var carObjs = caseDetails.cars;
		};

		NtfSvc.fetch().success(function(nfts){
			vm.nftOption.nfts = nfts;
		}).then(function(){
			vm.nftOption.nft = vm.nftOption.nfts[0];
		})

		BranchSvc.fetchByCorps(UserSvc.userCorps()).success(function(branches){
		    vm.branches = branches;
		});

		function getCarsDetail(obj){
			var dispatchList = [];
			var carIds = [];
			var branches = [];

			if (obj.cars) {
				for (var i = obj.cars.length - 1; i >= 0; i--) {
					dispatchList.push(obj.cars[i].radioCode);
					carIds.push(obj.cars[i]._id);
					branches.push(obj.cars[i].branch); 
				};
				return {dispatchList : dispatchList , carIds : carIds , branches :  branches}

			}else{
				return {};
			};
		};

		function getBranchId(branchesList){
			var branches = _.unique(branchesList);
			var branchIds = [];
			for (var i = 0; i < vm.branches.length; i++) {
				if (branches.indexOf(vm.branches[i].name) > -1) {
					branchIds.push(vm.branches[i]._id);
				};
			};
			return  branchIds;
		};
		
		function getCars( branch ){
			 CarSvc.fetchByBranch(branch.name).success(function(cars){
			 	for (var i = cars.length - 1; i >= 0; i--) {
			 		if (vm.caseObj.carIds.indexOf(cars[i]._id) > -1 ) {
			 			cars[i].isChecked = true; 
			 		};
			 	};
			 	vm.cars = cars;
			 });
		};

		function cancel() {
			$modalInstance.dismiss('cancel');
		};

		function cancelDispatch(car){
			car.isChecked = false;
			carObjs.splice(carObjs.indexOf(car),1)
			vm.caseObj.carIds.splice(vm.caseObj.dispatchList.indexOf(car._id),1);
			vm.caseObj.dispatchList.splice(vm.caseObj.dispatchList.indexOf(car.radioCode),1);
			vm.caseObj.branches.splice(vm.caseObj.dispatchList.indexOf(car.branch),1);
			vm.dispatchList = vm.caseObj.dispatchList.join(" ");
		};
		
		function dispatch( car ){
			car.isChecked = true; 
			carObjs.push(car);
			vm.caseObj.carIds.push(car._id);
			vm.caseObj.dispatchList.push(car.radioCode);
			vm.caseObj.branches.push(car.branch);
			vm.dispatchList = vm.caseObj.dispatchList.join(" ");
		};

		function closeCase(){
			StSvc.count(caseDetails._id).success(function(total){
				if (total > 0 ) {
					$window.alert("尚有隊員在安全管制")
				}else{
					CaseSvc.closeCase({
						id : caseDetails._id,
						isOngoing : false
					}).success(function(msg){
						console.log(msg)
					});
					$modalInstance.dismiss('cancel');
					$state.reload()
				};
			});
		};

		function save(){
			CaseSvc.create({
				caseId   : caseId + 1, 
				address   : vm.caseObj.address || "測試",
				officerReceiver : UserSvc.currentUser() ||  "劉曉曼",
				type      : vm.caseObj.type || "救護",
				phone     : vm.caseObj.phone || "測試",
				branches  : _.unique(vm.caseObj.branches),
				branchIds : getBranchId(vm.caseObj.branches),
		  		cars      : vm.caseObj.carIds,
				isOngoing : true,
				corps 	  : UserSvc.userCorps(),
				env 	  : vm.caseObj.env,
				floor 	  : vm.caseObj.floor
			}).success(function(newCase){
				$modalInstance.close(newCase)
			});
		};

		function update(){
			var content = {
				id : caseDetails._id,
				caseId   : caseId, 
				address   : vm.caseObj.address,
				officerReceiver : UserSvc.currentUser() || "劉曉曼",
				type      : vm.caseObj.type,
				phone     : vm.caseObj.phone,
				branches  : _.unique(vm.caseObj.branches),
				branchIds : getBranchId(vm.caseObj.branches),
		  		cars      : vm.caseObj.carIds,
				isOngoing : true,
				env 	  : vm.caseObj.env,
				floor 	  : vm.caseObj.floor
			};
			
			CaseSvc.update(content);
			$modalInstance.dismiss('cancel');
		};
	}
})();
(function(){
	'use strict';
	/**
	* app.case Module
	*
	* Description
	*/
	angular
		.module('app.case')
		.controller('CaseNewController',CaseNewController);

	CaseNewController.$inject = ['CarSvc', 'BranchSvc', 'NtfSvc', 'UserSvc','$location','leafletData', '$stateParams', 'CaseSvc', '$window', '$state', 'GeoSvc'];

	function CaseNewController(CarSvc, BranchSvc, NtfSvc, UserSvc,$location,leafletData, $stateParams, CaseSvc, $window, $state, GeoSvc){
		var vm = this;
		vm.selectBranch = selectBranch;
		vm.save = save;
		vm.locateAddress = locateAddress;
		vm.cancelDispatch = cancelDispatch;
		vm.dispatch = dispatch;
		vm.currentTime =  moment().format('h:mm:ss a'); 
		var battleRadiuss = [];
		var dispatchCars = [];
		var notifications;
		vm.dispatchList = vm.currentCase.dispatchList.join(' ');
		
		vm.currentCase = {
			phone 	: null,
		    type 	: '火警', 
		    types 	: [ '火警', '救護', '災害', '檢舉','其他'],
		    env   	: '住宅火警',
		    envs  	: ['住宅火警','高樓、地下與工廠','搶救困難區','其他'],
		    floor 	: 1, 
		    carIds  : [],
		    dispatchList : [],
		    branches :  [],
		    location : GeoSvc.defaultLocation()
		}; 

		GeoSvc.fetchBaseLocation(UserSvc.userCorps()).success(function(locations){
			vm.locations = locations;
		});

	    angular.extend(vm, {
	        nowPos: {
	            lat: GeoSvc.defaultLocation().lat,
	            lng: GeoSvc.defaultLocation().lng,
	            zoom: 17
	        },
	       markers: {},
	    });

		BranchSvc.fetchByCorps(UserSvc.userCorps()).success(function(branches){
		    vm.branches = branches;
		    vm.currentBranch = branches[0].name
		});

		CarSvc.fetchByCorps(UserSvc.userCorps()).success(function(cars){
			vm.cars = cars; 
		});

		NtfSvc.fetch().success(function(ntfs){
			notifications = ntfs;
			vm.currentCase.ntfs = _.pluck(ntfs,'type')
			vm.currentCase.ntf  = vm.currentCase.ntfs[0];
		});

		function locateAddress(){
			if (vm.currentCase.address) {
				GeoSvc.getGeoEncodedInfo(vm.currentCase.address).then(function(res){
			        vm.nowPos.lat = res.J;
			        vm.nowPos.lng = res.M;
		            vm.markers.mainMarker = {
		            	lat: res.J,
		                lng: res.M,
		                focus: true,
		                message: "案件標的",
		            };

		            if (res) {
		            	vm.locations.forEach(function(location){
			            	var r = GeoSvc.getDistance( location, { lat : res.J , lng : res.M } );
			            	var battleRadius =  { base : location.branch,  to : { lat : res.J, lng :  res.M }, from : { lat : location.lat, lng : location.lng }, d : r }; 
			            	battleRadiuss.push( JSON.stringify(battleRadius));
			            });
		            };
				});
			};
		};

		function selectBranch(branch){
	    	vm.currentBranch = branch.name;
	    };

		function dispatch( car ){
			car.isChecked = true; 
			dispatchCars.push(car);
			vm.dispatchList = _.pluck(dispatchCars, 'radioCode').join(" ");
		};

		function cancelDispatch(car){
			car.isChecked = false;
			dispatchCars.splice(_.pluck(dispatchCars, '_id').indexOf(car._id),1);
			vm.dispatchList = _.pluck(dispatchCars, 'radioCode').join(" ");
			vm.dispatchList = vm.currentCase.dispatchList.join(" ");
		};
	
		function save(){
			var currentNtf;
			var branches  = _.unique(_.pluck(dispatchCars, 'branch'));
			var dispatch = vm.branches.filter(function(branch) { return branches.indexOf(branch.name) > -1 });

			notifications.forEach(function(ntf,id){
				if (ntf.type == vm.currentCase.ntf ){
					currentNtf  = notifications[id]
				};
			});

			CaseSvc.create({
				officerReceiver : UserSvc.currentUser() ||  '劉曉曼',
				type      		: vm.currentCase.type || '火警',
				types 	  		: vm.currentCase.types,
				phone     		: vm.currentCase.phone || '測試',
				branches  		: _.unique(_.pluck(dispatchCars, 'branch')),
				branchIds 		: _.pluck(dispatch, '_id'),
		  		cars      		: _.pluck(dispatchCars,'_id'),
				corps 	  		: UserSvc.userCorps(),
				env 	  		: vm.currentCase.env,
				envs 	  		: vm.currentCase.envs,
				floor 	  		: vm.currentCase.floor,
				ntf       		: currentNtf._id,
				createAt  		: moment().format('YYYY-MMM-DD, h:mm:ss a'),
				lastUpdate 		: moment().format('YYYY-MMM-DD, h:mm:ss a'),
				location  		:  {
					lat 	: vm.currentCase.location.lat,
					lng 	: vm.currentCase.location.lng,
					address : vm.currentCase.location.address || '測試'
				},
				battleRadiuss 	: battleRadiuss
			}).success(function(){
				$window.history.back();
			});
		};
	}
})();
(function(){
	'use strict';
	/**
	* app.case Module
	*
	* Description
	*/
	angular
		.module('app.case')
		.service('CaseSvc', CaseSvc);

	CaseSvc.$inject = ['$http'];

	function CaseSvc( $http ) {
		var svc = this;
		svc.fetch 		= fetch;
		svc.fetchAll 	= fetchAll;
		svc.closeCase 	= closeCase;
		svc.fetchRelativeCase = fetchRelativeCase; 
		svc.fetchDetails = fetchDetails;
		svc.fetchById 	= fetchById;
		svc.create 		= create;
		svc.delete 		= deleteCase;
		svc.update 		= update;
		
		function fetch(corps, page, itemsPerPage){
			return $http.get('/api/cases?corps=' + corps + '&page=' + page + '&ipp=' + itemsPerPage );
		};

		function fetchAll(){
			return $http.get('/api/cases/details');
		};
		
		function fetchRelativeCase(con){
			return $http.get('/api/cases/branch?branch=' + con.branch + '&accessLevel=' + con.accessLevel + '&corps=' + con.corps );
		};
		
		function fetchDetails(caseId){
			return $http.get('/api/cases/details/' + caseId);
		};

		function fetchById( caseId ){
			return $http.get('/api/cases/' + caseId );
		};
		
		function create(case_info){
			return $http.post('/api/cases', case_info);
		};

		function deleteCase(caseId){
			return $http.post('/api/cases/' + caseId);
		};

		function update(updated_case){
			return $http.put('/api/cases/' + updated_case.caseId , updated_case);
		};
		
		function closeCase(data){
			return $http.put('/api/cases/close?id=' + data.id, data );
		};
	}
})();
(function(){
	'use strict';
	/**
	* app.case Module
	*
	* Description
	*/
	angular
		.module('app.case')
		.controller('CaseShowController', CaseShowController);

		CaseShowController.$inject =  [ 'StSvc', '$stateParams', '$interval', '$state', 'SocketSvc', 'CaseSvc', 'BranchSvc', 'StMissionFac'];

		function CaseShowController(){
			var vm = this; 
			vm.isCollapsed = true ;
			vm.members = [];
			vm.positions = StMissionFac.position().poss;

			SocketSvc.on('newSt', function(st){
				if ( angular.equals(caseId,st.caseId)) {
					var newSt = angular.copy(st);
					vm.strikeTeams.push(newSt);
				};
				vm.deploys = initTable(vm.strikeTeams);
				vm.deployDetails = initDeploy(vm.strikeTeams);
			});

			SocketSvc.on('updateSt', function(data){
				StSvc.fetchByCase(caseId).success(function(strikeTeams){
					vm.strikeTeams = strikeTeams;
					vm.strikeTeams.forEach(function(st){
						st.limitTime = moment.duration(st.workingTime,'seconds');
					});
					vm.deploys = initTable(vm.strikeTeams);
					vm.deployDetails = initDeploy(vm.strikeTeams);
				});

			})

			SocketSvc.on('dismiss', function(data){
				StSvc.fetchByCase(caseId).success(function(strikeTeams){
					vm.strikeTeams 	 = strikeTeams;
					vm.deploys 		 = initTable(vm.strikeTeams);
					vm.deployDetails = initDeploy(vm.strikeTeams);
				});
			});


			var caseId = $stateParams.id;
			CaseSvc.fetchDetails(caseId).success(function(_case){
				_case.env == '住宅火警' ? vm.apartment = true : vm.apartment = false;
				vm.caseDetail = _case;
				vm.position = {
					defaultPos 	: "第一面",
					positions 	: ["第一面","第二面","第三面","第四面"],
					floor 		: vm.caseDetail.floor,
					floors  	: vm.caseDetail.floor < 5? _.range(1,6,1) : _.range(vm.caseDetail.floor-2,vm.caseDetail.floor+3,1)
				};
			});

			StSvc.fetchByCase(caseId).success(function(strikeTeams){
				if (strikeTeams) {
					vm.strikeTeams = strikeTeams;
					vm.strikeTeams.forEach(function(st){
						st.limitTime = moment.duration(st.workingTime,'seconds');
					});
					vm.deploys = initTable(vm.strikeTeams);
					vm.deployDetails =initDeploy(vm.strikeTeams);
					
				} else {
					return 
				};
			});


			var initDeploy = function(strikeTeams){
				return  _.groupBy(strikeTeams,function(st){
						return st.position;
				});
			};

			var initTable =  function(strikeTeams){
			  	var deployArray = _.range(4).map(function () {
			        return _.range(5).map(function () {
			            return { totalMember : 0, stTotal : 0 , sts : [] } ;
			        });
			    });

				if ( strikeTeams ){
					for (var i = strikeTeams.length - 1; i >= 0; i--) {
						var totalMember = 0;
						var y = null;
						var st = 0;
						var x = _.indexOf(strikeTeams[i].positions, strikeTeams[i].position);
						vm.apartment ? y = _.indexOf(strikeTeams[i].floors, strikeTeams[i].floor) : y = _.indexOf(strikeTeams[i].areas, strikeTeams[i].area)
						deployArray[x][y].stTotal += 1;
						deployArray[x][y].totalMember += strikeTeams[i].members.length;
						var stInFo = {};
						stInFo.id = strikeTeams[i].branch + strikeTeams[i].id
						stInFo.number = strikeTeams[i].members.length;
						stInFo.group = strikeTeams[i].group;
						deployArray[x][y].sts.push(stInFo);
					};
				}
				return deployArray
			};
			
			vm.$on('$destroy', function (event) {
		        SocketSvc.removeAllListeners();
		    });
		}
})();
(function(){
	/**
	* app.dashboard Module
	*
	* Description
	*/
	angular
		.module('app.dashboard')
		.controller('DashboardController',DashboardController);

	DashboardController.$inject = ['$location', 'SocketSvc', 'UserSvc', 'BranchSvc'];
	function DashboardController($location, SocketSvc, UserSvc, BranchSvc){
		var vm = this; 

		BranchSvc.fetchByCorps(UserSvc.userCorps()).success(function(branches){
			return vm.branches = branches;
		});

		UserSvc.fetchOnlineUser().success(function(users){
			return vm.users = users;
		});

		SocketSvc.on('userLogin',function(user){
			return vm.users.push(user);
		});

		SocketSvc.on('userDisconnect',function(disconnectUser){
			vm.users = vm.users.filter(function(user) {
				return user.username != disconnectUser.username
			});
		});

		SocketSvc.on('userLogout',function(logoutUser){
			vm.users = vm.users.filter(function(user) {
				return user.username != logoutUser.username
			});
		});

		vm.$on('$destroy', function (event) {
	        return SocketSvc.removeAllListeners();
	    });
	}
})();
(function(){
	'use strict';
	/**
	* app.director Module
	*
	* Description
	*/
	angular
		.module('app.director')
		.controller('DirDutyListController',DirDutyListController);

	DirDutyListController.$inject = ['UserSvc', 'BranchSvc'];

	function DirDutyListController( UserSvc , BranchSvc ){
		var vm = this;
		var branch = UserSvc.userBranch();
		
		BranchSvc.fetchByName(branch).success(function(branch){
			vm.branch 		= branch;
			vm.onDutyTotal 	= vm.branch.members.filter(function(member) {
				return member.onDuty == true 
			});
		}); 
	};
})();
(function(){
	'use strict';
	/**
	* app.dashboard Module
	*
	* Description
	*/
	angular
		.module('app.director')
		.controller('DirDutyListEditController',DirDutyListEditController);

	DirDutyListEditController.$inject = ['BranchSvc', '$stateParams','MemberSvc', '$location', '$window', 'UserSvc', 'CarSvc', 'StMissionFac'];

	function DirDutyListEditController(BranchSvc, $stateParams,MemberSvc, $location, $window, UserSvc, CarSvc, StMissionFac){
		var vm = this;
		var branch 	= UserSvc.userBranch();
		vm.check 	= check;
		vm.save 	= save;   

		BranchSvc.fetchByName(branch).success(function(branch){
			vm.branch = branch;
			vm.isCorps =  true ? branch.name.split("救災救護")[1] : false 
			var members = _.pluck(branch.members.filter(function(member) { return member.level < 2.4 }), 'name')
			vm.branch.safetyManager 	= branch.safetyManager;
			vm.branch.safetyManagers 	= members;
			vm.onDutyTotal = 0;
			_.map(vm.branch.members,function(member){ 
				member.groupIds = _.range(1,Math.round(vm.branch.members.length/6),1);
				member.groupID = member.group + member.groupId 
			})
		})

		function check(member){
			member.onDuty 	 = !member.onDuty;
			member.isChecked = !member.isChecked;
			member.groupID 	 = member.group + member.groupId
		};

		
		function save(){
			var DispatchNumber = vm.branch.members.filter(function(member) {
				return member.onDuty
			});

			BranchSvc.updateMission({
				branch   		: vm.branch.name,
				director 		: vm.branch.director,
				dispatchNum 	: DispatchNumber.length,
				safetyManager 	: vm.branch.safetyManager,
				members 		: vm.branch.members
			});
			$window.history.back();
		};
	};

})();
(function(){
	'use strict';

	/**
	* app.dispatch Module
	*
	* Description
	*/
	angular
		.module('app.dispatch', [])
		.controller('DispatchController',DispatchController);

	DispatchController.$inject = ['$stateParams','$modal','CaseSvc','BranchSvc', 'CarSvc', 'UserSvc'];
	function DispatchController($stateParams,$modal,CaseSvc,BranchSvc, CarSvc, UserSvc){
		var vm = this; 
		CaseSvc.fetch(UserSvc.userCorps()).success(function(cases){
			vm.cases = cases;
			CaseSvc.fetchById(vm.cases[$stateParams.caseId]._id).success(function(_case){
					return vm.caseDetails = _case;
			});
		});

		BranchSvc.fetchByCorps(UserSvc.userCorps()).success(function(branches){
		    return vm.branchList = branches;
		 });

		CarSvc.fetch().success(function(data){
		    return vm.carsData = data;
		});

		vm.addNewCase = function () {
		  	var modalInstance = $modal.open({
			    templateUrl: '/partials/casePanel/caseAddModal',
			    controller: 'CaseAddModalCtrl',
			    size: "lg",
			    resolve : {
			    	caseId : function(){
			    		return vm.id = "新增案件"
			    	},
			    	branchList : function(){
			    		return vm.branchList;
			    	},
			    	carsData : function(){
			    		return vm.carsData;
			    	},
			    	isNew : function(){
			    		return true;
			    	},
			    	caseDetails : function(){
			    		return {}
			    	}
			    }
		    });
		 };

		 vm.editCase = function(){
		 	var modalInstance = $modal.open({
			    templateUrl: '/partials/casePanel/caseAddModal',
			    controller: 'CaseAddModalCtrl',
			    size: "lg",
			    resolve : {
			    	caseId : function(){
			    		return vm.id = vm.cases[$stateParams.caseId].caseId; 
			    	},
			    	branchList : function(){
			    		return vm.branchList;
			    	},
			    	carsData : function(){
			    		for (var i = vm.carsData.length - 1; i >= 0; i--) {
			    			for (var j = vm.caseDetails.cars.length - 1; j >= 0; j--) {
			    				if ( vm.carsData[i].radioCode === vm.caseDetails.cars[j].radio_code) {
			    					return vm.carsData[i].isChecked = true ;
			    				};
			    			};		    			
			    		};
			    		return vm.carsData;
			    	},
			    	isNew : function(){
			    		return false; 
			    	},
			    	caseDetails : function(){
			    		return vm.caseDetails;
			    	}
			    }
		    });
		 };
	}
})();
(function(){
	/**
	* app.dutylist Module
	*
	* Description
	*/
	angular
		.module('app.dutylist', [])
		.controller('DutyListController',DutyListController);

	DutyListController.$inject = ['BranchSvc', '$stateParams', 'SocketSvc', 'UserSvc', '$q'];
	function DutyListController(BranchSvc, $stateParams, SocketSvc, UserSvc, $q){
		var vm = this; 
		var branchId = $stateParams.branch;
		
		BranchSvc.totalListFindByName(branchId).success(function(branch){
			vm.branch = branch;
			vm.onDutyTotal = vm.branch.members.filter(function(member) {
				return member.onDuty == true
			});
		});
	}

})();
(function(){
	'use strict';
	/**
	* app.geo Module
	*
	* Description
	*/
	angular
		.module('app.geo')
		.service('GeoSvc',GeoSvc);

	GeoSvc.$inject = ['$q','$http'];

	function GeoSvc(){
		var svc = this; 
		svc.getGeolocationCoordinates = function() {
	        var deferred = $q.defer();
	        navigator.geolocation.getCurrentPosition(
	            function(position) { deferred.resolve(position.coords); },
	            function(error) { deferred.resolve(null); }
	        );
	        return deferred.promise;
	    };

	    svc.getGeoEncodedInfo = function(address){
	    	var deferred = $q.defer();
	    	// return $http.get('https://maps.googleapis.com/maps/api/geocode/json?address='+ address +'&key=AIzaSyAxq-ZkxRr1ZArBXFDOo8xgi4Cl2PeitAo')
	    	var geocoder = new google.maps.Geocoder();
	    	if (geocoder) {
		      geocoder.geocode({ 'address': address }, function (results, status) {
		         if (status == google.maps.GeocoderStatus.OK) {
		            deferred.resolve(results[0].geometry.location) 
		         }
		         else {
		            deferred.resolve( "Geocoding failed: " + status )
		         }
		      });
		   } 
		   return deferred.promise;  
	    };

	    svc.fetchBaseLocation = function(corps){
	    	return $http.get('/api/geolocations?corps=' + corps)
	    };

	    svc.getDistance = function( from_loc , to_loc ){

	    	if (typeof(Number.prototype.toRad) === "undefined") {
			  Number.prototype.toRad = function() {
			    return svc * Math.PI / 180;
			  }
			}
			var R = 6371; // Radius of the earth in km
			var dLat = (to_loc.lat - from_loc.lat ).toRad();  // Javascript functions in radians
			var dLon = (to_loc.lng - from_loc.lng ).toRad(); 
			var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
			        Math.cos(from_loc.lat.toRad()) * Math.cos(to_loc.lat.toRad()) * 
			        Math.sin(dLon/2) * Math.sin(dLon/2); 
			var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
			return R * c;
	    };

	    svc.defaultLocation = function(){
	    	return { lat : 25.0927297 , lng :  121.4608639, address : null};
	    };
	};
})();
(function(){
	'use strict';
	/**
	* app.map Module
	*
	* Description
	*/
	angular
		.module('app.map', [])
		.controller('MapIndexController',MapIndexController);

	MapIndexController.$inject = ['leafletData', 'GeoSvc'];
	function MapIndexController(leafletData, GeoSvc){
		var vm = this; 

		GeoSvc.getGeolocationCoordinates().then(function(coord){
	        vm.nowPos.lat = coord.latitude;
	        vm.nowPos.lng = coord.longitude;
	        vm.nowPos.zoom = 17;
	    })

	    angular.extend(vm, {
	        nowPos: {
	            lat: 24.988,
	            lng: 121.5752,
	            zoom: 17
	        },
	        controls: {
	            draw: {}
	        }
	    })

	    leafletData.getMap().then(function(map) {
	      var drawnItems = vm.controls.edit.featureGroup;
	      map.on('draw:created', function (e) {
	        var layer = e.layer;
	        drawnItems.addLayer(layer);
	        
	        FeatureCollections.push(layer.toGeoJSON())
	        
	      });
	    })
	}
})();
(function(){
	'use strict';
	/**
	* app.member Module
	*
	* Description
	*/
	angular
		.module('app.member')
		.controller('MemberAccountModalController',MemberAccountModalController);

	MemberAccountModalController.$inject = ['UserSvc', 'MemberSvc', 'member', '$modalInstance'];
	function MemberAccountModalController(UserSvc, MemberSvc, member, $modalInstance){
		var vm = this; 
		vm.user = member;
		vm.save = save;
		vm.cancel = cancel; 

		function save(){
			if (_.isEmpty(vm.user)) {
				console.log("please enter your account and password!")
			} else{
				if (!vm.user.account) {
					console.log("account can't be blank!")
					if (!vm.user.password) {
						console.log("passwod can't be blank!")
					};
				} else if (!vm.user.password) {
					console.log("password can't be blank")
				}else{
					UserSvc.activate(vm.user);
					MemberSvc.updateUser(member.name);
					$modalInstance.close(vm.user);
				};
			};
		};

		function cancel(){
			$modalInstance.dismiss('cancel');
		};
	};
})();
(function(){
	'use strict';

	/**
	* app.member Module
	*
	* Description
	*/
	angular
		.module('app.member')
		.controller('MemberEditController',MemberEditController);
	
	MemberEditController.$inject = ['MemberSvc', 'BranchSvc', '$stateParams', '$window','$modal', '$state', 'UserSvc'];
	
	function MemberEditController( MemberSvc, BranchSvc, $stateParams, $window,$modal, $state, UserSvc){
		var vm = this; 

		vm.alerts = [];
		vm.memberDeleted = false;
		var tempDelMember = null;
		vm.accessLevel = UserSvc.accessLevel();
		vm.closeAlert = closeAlert;
		vm.save = save;
		vm.addNewMember = addNewMember;
		vm.update = update;
		vm.activateAccount = activateAccount;
		vm.deleteAlert = deleteAlert;
		vm.deActivateAlert = deActivateAlert;
		
		var memberInit = function(){
			MemberSvc.findByBranch($stateParams.branch).success(function(members){
				vm.members = members;
				vm.members.forEach(function(member){
					member.workingTime = moment.duration(member.workingTime,'seconds');
				});
			});
		};

		memberInit();

		var deActivateAccount = function(index){
			UserSvc.removeUser(tempDelMember.name).success(function(user){
				MemberSvc.removeUser(user.username);
				vm.closeAlert(index);
				memberInit();
			});
		};

		var deleteMember = function(index){
			vm.memberDeleted = true;
			MemberSvc.deleteMember(tempDelMember).success(function(){
				vm.memberDeleted = false;
			});
			vm.closeAlert(index);
			memberInit();
		};

		var cancelDel = function(index){
			vm.memberDeleted = false;
			vm.closeAlert(index);
		};

		function save(){
			var directors = _.pluck( vm.members.filter(function(member) { return member.level > 1.3  }) , 'name');
			BranchSvc.update({
				branch : $stateParams.branch,
				members : _.pluck( vm.members , '_id'),
				directors : directors,
				director : directors[0],
				safetyManager : directors[0]
			}).success(function(){
				$window.history.back();
			});		
		};

		function addNewMember(){
			var modalInstance = $modal.open({
			    templateUrl: 'views/member/member.modal.html',
			    controller: 'MemberModalCtrl',
			    size: "md",
			    resolve : {
			    	branch : function(){
			    		return $stateParams.branch 
			    	},
			    	member : function(){
			    		return { workingTime : null };
			    	}
			    }
		    });

		    modalInstance.result.then(function(member){
		    	if (member) {
		    		memberInit();
		    	}
		    	vm.alerts.push({ type : "success" ,  msg: '人員新增成功！ ' + member.name + ' 已加入 ' + member.branch});
		    })
		};

		function update(member){
			var oldMember = member;
			var modalInstance = $modal.open({
			    templateUrl: 'views/member/member.modal.html',
			    controller: 'MemberModalCtrl',
			    size: "md",
			    resolve : {
			    	branch : function(){
			    		return $stateParams.branch 
			    	},
			    	member : function(){
			    		return {
			    			memberId : member._id,
			    			id : member.id,
			    			name : member.name,
			    			title : member.title,
			    			branches : member.branches,
			    			corps : member.corps,
			    			radioCode : member.radioCode, 
			    			workingTime : member.workingTime.minutes() * 60 + member.workingTime.seconds()
			    		}
			    	}
			    }
		    });

		    modalInstance.result.then(function(member){
		    	memberInit();
		    	vm.alerts.push({ type : "info" ,  msg:  oldMember.name + '修改成功!' });
		    });
		};

		function activateAccount(member){
			var users = vm.members.filter(function(member) {
				return member.isUser;
			});

			if (users.length < 3 ) {
				var modalInstance = $modal.open({
				    templateUrl: 'views/member/member.account.html',
				    controller: 'MemberAccountModalCtrl',
				    size: "md",
				    resolve : {
				    	member : function(){
				    		return member
				    	}
				    }
				});

				modalInstance.result.then(function(member){
					memberInit();
					vm.alerts.push({ type : "info" , msg : member.name + " 已開通為使用者" })
				});
			} else {
				vm.alerts.push({ type : "warning" , msg : "無法開通" + member.name + " 因為使用者已超過3位，請解除其他人帳號後再開通 "});
			};
		};

		function deleteAlert(member){
			vm.alerts.push({ 	
				type : "danger" ,  
				msg: '是否確定要刪除！' + member.name, 
				execute : deleteMember,
				cancel :  cancelDel
			});
			tempDelMember = member;
		};

		function deActivateAlert(member){
			var users = vm.members.filter(function(member) {
				return member.isUser;
			});
			if (users.length == 1 ) {
				vm.alerts.push({ 
					type : "warning",  
					msg: '每分隊至少要有1個使用者，無法取消' + member.name + "的登入權限",
				});
			} else{
				vm.alerts.push({ 
					type : "danger",  
					msg: '是否確定要解除' + member.name + "登入權限",
					execute : deActivateAccount,
					cancel : cancelDel
				});
				tempDelMember = member;
			};
		};
	
		function closeAlert(index){
			vm.alerts.splice(index,1)
		};
	}
})();
(function(){
	'use strict';

	/**
	* app.member Module
	*
	* Description
	*/
	angular
		.module('app.member', [])
		.controller('MemberIndexController',MemberIndexController);

	MemberIndexController.$inject = [ MemberSvc , $stateParams ];
	function MemberIndexController( MemberSvc , $stateParams ){
		var vm = this; 

		vm.branch = $stateParams.branch;
		MemberSvc.findByBranch($stateParams.branch).success(function(members){
			vm.members = members;
			vm.members.forEach(function(member){
				return member.workingTime = moment.duration(member.workingTime,'seconds');
			});
		});
	};
})();
(function(){
	'use strict';
	/**
	* app.member Module
	*
	* Description
	*/
	angular
		.module('app.member')
		.controller('MemberModalController',MemberModalController);

	MemberModalController.$inject = ['branch', 'MemberSvc', '$modalInstance', '$state', 'member','BranchSvc', 'UserSvc'];
	function MemberModalController(branch, MemberSvc, $modalInstance, $state, member,BranchSvc, UserSvc){
		var vm = this; 
		vm.alerts = [];
		vm.isNew  = _.isNull(member.workingTime);
		vm.save   = save;
		vm.update = update;
		vm.cancel = canel;

		vm.member = {
			id 		 	: member.id ||  "", 
			name 	 	: member.name || null , 
			title    	: "消防隊員",
			titles   	: ["消防隊員","小隊長","分隊長","中隊長","大隊長","副大隊長"],
			branch   	: member.branch || branch,
			workingTime : member.workingTime ||  1200,
			radioCode 	: member.radioCode ||  null, 
			mission  	: "瞄子手",
			missions 	: ["瞄子手","副瞄子手","司機","小組長","安全管制員","聯絡官",],
			corps	 	: UserSvc.userCorps(),
			corpss 	 	: ["第一救災救護大隊","第三救災救護大隊"],
		};

		BranchSvc.fetchByCorps(UserSvc.userCorps()).success(function(branches){
			vm.branches = branches; 
			if (!vm.isNew) {
				var branchArry = [];
				for (var i = branches.length - 1; i >= 0; i--) {
					branchArry.push(branches[i].name);
				};
				vm.member.branches = branchArry;
			}; 
		});

		var radioCodePrefix = function(branch){
			var suffix =  branch.split('').slice(-2).join('');
			if (suffix == "大隊" || suffix == "中隊") {
				return "北海";
			} else{
				return branch.split('').slice(0,2).join('');
			};
		};

		function save(){
			if (vm.member.name) {
				vm.member.radioCodePrefix = radioCodePrefix(vm.member.branch);
				MemberSvc.create(vm.member).success(function(){
					vm.member.workingTime = moment.duration(parseInt(vm.member.workingTime),'seconds');
				}).then(function(){
					$modalInstance.close(vm.member);
				})
			} else{

			};
		};

		function update(){
			var updateMember = {
				  memberId  : member.memberId,
				  id 		: "",
				  name 		: vm.member.name,
				  corps 	: vm.member.corps,
				  branch 	: vm.member.branch,
				  title 	: vm.member.title,
				  workingTime : vm.member.workingTime,
				  radioCode  : vm.member.radioCode,
				  radioCodePrefix : radioCodePrefix(vm.member.branch)
			}

			if (vm.member.name) {
				MemberSvc.updateByMemberId(updateMember);
				$modalInstance.close(updateMember);
			} else {
				
			};
		};
	
		function cancel(){
			$modalInstance.dismiss('cancel');
		};
	};
})();
(function(){
	'use strict';
	/**
	* app.member Module
	*
	* Description
	*/
	angular
		.module('app.member')
		.service('MemberSvc',MemberSvc)
	
	MemberSvc.$inject = ['$http'];
	
	function MemberSvc(){
		var svc = this; 
		svc.fetch = fetch;
		svc.findByBranch = findByBranch;
		svc.fetchOnDuty = fetchOnDuty;
		svc.create = create; 
		svc.update = update; 
		svc.updateOnDuty = updateOnDuty;
		svc.updateByMemberId = updateByMemberId;
		svc.updateIsChecked = updateIsChecked;
		svc.updateUser = updateUser;
		svc.removeUser = removeUser;
		svc.deleteMember = deleteMember;

		function fetch(){
			return $http.get('/api/members');
		};

		function findByBranch( branch ){
			return $http.get('/api/members/' + branch );
		};

		function fetchOnDuty(branch){
			return $http.get('/api/members/onDuty?branch=' + branch);
		};

		function create(member){
			return $http.post('/api/members/', member);
		};

		function update(member){
			return $http.put('/api/members/', member.id);
		};

		function updateOnDuty(member){
			return $http.put('/api/members/onDuty/findById?memberId=' + member.memberId, member);
		};

		function updateByMemberId(updateMember){
			return $http.put('/api/members/findById/' + updateMember.memberId , updateMember);
		}
		
		function updateIsChecked(memberData){
			return $http.put('/api/members?id=' + memberData.memberId, memberData)
		};
		
		function updateUser(username){
			return $http.put('/api/members/user?username='+ username);
		};
		
		function removeUser(username){
			return $http.put('/api/members/user/remove?username=' + username);
		};

		function deleteMember(member){
			return $http.delete('/api/members/' + member._id);
		};
	}
})();
(function(){
	'use strict';
	/**
	* app.notification Module
	*
	* Description
	*/
	angular
		.module('app.notification')
		.service('NtfSvc',NtfSvc);

	NtfSvc.$inject = ['$http'];
	
	function NtfSvc($http){
		var svc = this;
		svc.fetch = fetch; 
		function fetch(){
			return $http.get('/api/ntfs');
		} ;
	};

})();
(function(){
	'use strict';
	/**
	* app.socket Module
	*
	* Description
	*/
	angular
		.module('app.socket')
		.service('SocketSvc',SocketSvc);

	SocketSvc.$inject = ['$rootScope', 'store', '$q', '$timeout'];
	
	function SocketSvc($rootScope, store, $q, $timeout){
		var svc = this; 
		svc.init =  function(token){
	    	var authToken = null
	    	if (token) {
		      authToken = token 
			} else {
		      authToken = store.get('jwt')
		    };
		    return io.connect('http://localhost:3000',{ query : 'token=' + authToken , 'forceNew':true });
		}

	  	var socket = svc.init();

	  	svc.on =  function (eventName, callback) {
	    	svc.init().on(eventName, function () {  
		      var args = arguments;
		      $rootScope.$apply(function () {
		        callback.apply(socket, args);
		      });
		    });
		};

	  	svc.emit =  function (eventName, data, callback) {
	    	svc.init().emit(eventName, data, function () {
	      		var args = arguments;
	      		$rootScope.$apply(function () {
	        		if (callback) {
	          			callback.apply(socket, args);
	        		};
	      		});
	    	})
	  	};

		svc.removeAllListeners = function (eventName, callback) {
		    svc.init().removeAllListeners(eventName, function() {
		        var args = arguments;
		        $rootScope.$apply(function () {
		          callback.apply(socket, args);
		        });
		    }); 
		};
	};
})();
(function(){
	'use strict';

	/**
	* app.safety Module
	*
	* Description
	*/
	angular
		.module('app.safety')
		.controller('SafetyCmdShowController',SafetyCmdShowController);

	SafetyCmdShowController.$inject = ['CaseSvc', 'BranchSvc', 'UserSvc', '$stateParams', 'GeoSvc'];
	
	function SafetyCmdShowController(CaseSvc, BranchSvc, UserSvc, $stateParams, GeoSvc){
		
		var vm = this; 
		var branch = UserSvc.userBranch();
	
		BranchSvc.totalListFindByName(branch).success(function(branch){
			vm.members = branch.members.filter(function(member) {
				member.limitTime = moment.duration(member.workingTime, 'seconds');
				return member.onDuty == true 
			});
		});

		CaseSvc.fetchDetails($stateParams.caseId).success(function(_case){
			vm.caseDetail = _case;
			vm.onDutyBranches = _case.branchIds;
			if (_case.location) {
				var location = JSON.parse(_case.location);
				vm.markers.mainMarker = {
					lat : Number(location.lat),
					lng : Number(location.lng),
					message : "案件標的"
				};

				vm.battleRadiuss = _case.battleRadiuss;
			};
		}).then(function(){
			vm.onDutyBranches.forEach(function(branch){
				branch.members.forEach(function(member){
					if (branch.director == member.name ) {
						branch.directorRadioCode = member.radioCodePrefix +  String(member.radioCode);
					};
					if (branch.safetyManager == member.name) {
						branch.safetyManagerRadioCode = member.radioCodePrefix + String(member.radioCode);
					};
				});

				if (vm.battleRadius) {
					vm.battleRadiuss.forEach(function(battleRadius){
						var radius = JSON.parse(battleRadius)
						if (branch.name == radius.base) {
							branch.estimatedArrivingTime =  Math.round(( radius.d / 50 ) * 60);
						};
					})		
				};
			});
		});

       GeoSvc.getGeolocationCoordinates().then(function(coord){
	        vm.nowPos.lat = coord.latitude;
	        vm.nowPos.lng = coord.longitude;
	        vm.nowPos.zoom = 17;
	        vm.markers.nowPos = {
	        	lat : vm.nowPos.lat,
	        	lng : vm.nowPos.lng,
	        	message : "現在位置"
	        }
	    })

	    angular.extend(vm, {
	        nowPos: {
	            lat: 24.988,
	            lng: 121.5752,
	            zoom: 13
	        },
	        markers: {},
	    });		
	}
})();
(function(){
	'use strict';
	/**
	* app.safety Module
	*
	* Description
	*/
	angular
		.module('app.safety')
		.controller('SafetyIndexController',SafetyIndexController);
	SafetyIndexController.$inject = ['CaseSvc', 'UserSvc'];
	function SafetyIndexController(){
		var vm = this; 
		var userCondition = {
			branch 		: UserSvc.userBranch(),
			accessLevel : UserSvc.accessLevel(),
			corps 		: UserSvc.userCorps()
		};

		CaseSvc.fetchRelativeCase(userCondition).success(function(cases){ 
			vm.cases = cases;
			cases.forEach(function(_case){
				_case.dispatchBranches = ''
				_case.branches.forEach(function(branch){
					_case.dispatchBranches += branch + ' '
				});
			});
		});

		vm.isBranchMember = true ? UserSvc.accessLevel() < 2  : false ; 
	}
})();
(function(){
	'use strict';
	/**
	* app.safety Module
	*
	* Description
	*/
	angular
		.module('app.safety')
		.controller('SafetyManageController',SafetyManageController);
	
	SafetyManageController.$inject = ['$stateParams', '$modal', 'StSvc', '$state', 'MemberSvc','$log', 'UserSvc', 'BranchSvc', 'SocketSvc', 'CaseSvc', 'StMissionFac'];
	
	function SafetyManageController($stateParams, $modal, StSvc, $state, MemberSvc,$log, UserSvc, BranchSvc, SocketSvc, CaseSvc, StMissionFac){
		var vm = this; 
		var BRANCH 		= UserSvc.userBranch();
		var caseDetail 	= null;
		vm.quickStart 	= false;
		vm.apartment 	= true; 
		vm.ACCESSLEVEL 	= UserSvc.accessLevel();
		vm.quickOrganizing = quickOrganizing;
		vm.strikeTeam = strikeTeam;
		vm.openSettingModal = openSettingModal;
		vm.dismiss = dismiss; 

		vm.branchOptions = {
			branch : BRANCH,
			branches : []
		};

		CaseSvc.fetchById($stateParams.caseId).success(function(_case){
			caseDetail = _case;
			_case.env == '住宅火警'? vm.apartment = true : vm.apartment = false; 
			vm.branchOptions.branches = _case.branches
			vm.branchOptions.branches.splice(0,0,BRANCH);
		});

		BranchSvc.fetchByName(BRANCH).success(function(details){
			vm.details = details;
		}).then(function(){
			if (vm.ACCESSLEVEL > 1 ) {
				StSvc.fetchByCase($stateParams.caseId).success(function(sts){
					vm.strikeTeams = sts; 
				});
			} else {
				StSvc.fetch($stateParams.caseId,BRANCH).success(function(sts){
					vm.strikeTeams = sts;
					if (vm.details.dispatchNum < 8 && _.isEmpty(vm.strikeTeams)) { vm.quickStart = true  }; 
				}); 
			};
		});

		SocketSvc.on('newSt', function(st){
			if (vm.ACCESSLEVEL > 1 && angular.equals($stateParams.caseId,st.caseId) ) {
					vm.strikeTeams.push(st);
			} else {
				if (angular.equals(BRANCH,st.branch) && angular.equals($stateParams.caseId,st.caseId) ) {
					vm.strikeTeams.push(st);
				};
			};
		});

		SocketSvc.on('updateSt', function(data){
			var members = angular.copy(data.members);
			for (var i = vm.strikeTeams.length - 1; i >= 0; i--) {
				if(angular.equals(vm.strikeTeams[i]._id,data.id)){
					vm.strikeTeams[i].position 	= data.position;
					vm.strikeTeams[i].area 		= data.area;
					vm.strikeTeams[i].floor 	= data.floor;
					vm.strikeTeams[i].mission 	= data.mission;
				};
			};
		})

		SocketSvc.on('dismiss', function(st){
			var _stId = st.stId;
			vm.strikeTeams = vm.strikeTeams.filter(function(st) {				
				return st._id != _stId;
			});
		});
		
		function strikeTeam(){
			var modalInstance = $modal.open({
			  	templateUrl: 'views/safety/safety.modal.html',
			    controller: 'SafetyModalCtrl',
			    size: "md",
			    resolve : {
			    	stId : function(){
			    		if ( _.isEmpty(vm.strikeTeams)) {
			    			return 0
			    		} else{
			    			return vm.strikeTeams[vm.strikeTeams.length-1].id;
			    		};
			    	},
			    	branch : function(){
			    		return vm.branchOptions.branch;
			    	},
			    	caseDetail : function(){
			    		return caseDetail
			    	}
			    }
		    });
		};

		
		function openSettingModal(strikeTeam, id){
	        var modalInstance = $modal.open({
	            templateUrl: 'views/safety/safety.setting.modal.html',
	            controller: 'SafetySettingCtrl',
	            size: "lg",
	            resolve: {
	                strikeTeam : function(){
	                    return strikeTeam;
	                },
	                caseDetail : function(){
	                	return caseDetail;
	                }
	            }
	        });
	    };

		
		function dismiss(strikeTeam , id){

			SocketSvc.emit("dismissStrikeTeam",{
				id : strikeTeam._id,
				members : strikeTeam.members 
			});
	       	vm.strikeTeams.splice(id,1);
		};

		
		function quickOrganizing(){
			vm.quickStart = false;
		
			var members =  vm.details.members.filter(function(member) {
				if ( member.mission == '司機' || member.mission == '安全管制員' || member.mission == '救護人員') {
					return false  
				}else {
					member.isChecked = true;
					return member.onDuty;
				}
			});

			var strikeTeam = {
				id 		  : 1,
				caseId 	  : caseDetail._id,
				branch 	  : UserSvc.userBranch(),
				director  : _.pluck(members.filter(function(member) { return member.mission == '帶隊官'}),'name')[0],
				position  : StMissionFac.position().defaultPos,
				positions : StMissionFac.position().poss,
				group     : StMissionFac.groups().branch[1],
				groups    : StMissionFac.groups().branch,
				area 	  : StMissionFac.area().defaultArea,
				areas 	  : StMissionFac.area().areas,
				floor 	  : 1, 
				floors    : [1,2,3,4,5],
				memberIds : _.pluck(members,'_id'),
				members   : members,
				creator   : UserSvc.currentUser(),
			};
	      	SocketSvc.emit("createStrikeTeam", strikeTeam);
		};

		vm.$on('$destroy', function (event) {
	        SocketSvc.removeAllListeners();
	    })
	}
})();
(function(){
	'use strict';
	/**
	* app.safety Module
	*
	* Description
	*/
	angular
		.module('app.safety')
		.controller('MemberModalController',MemberModalController);

	MemberModalController.$inject = ['branch', 'MemberSvc', '$modalInstance', '$state', 'member','BranchSvc', 'UserSvc'];
	function MemberModalController(){
		var vm = this; 
		vm.alerts = [];
		vm.isNew = _.isNull(member.workingTime);
		vm.save = save;
		vm.update = update; 
		vm.cancel = cancel;  

		vm.member = {
			id 		 	: member.id ||  "", 
			name 	 	: member.name || null , 
			title    	: "消防隊員",
			titles   	: ["消防隊員","小隊長","分隊長","中隊長","大隊長","副大隊長"],
			branch   	: member.branch || branch,
			workingTime : member.workingTime ||  1200,
			radioCode 	: member.radioCode ||  null, 
			mission  	: "瞄子手",
			missions 	: ["瞄子手","副瞄子手","司機","小組長","安全管制員","聯絡官",],
			corps	 	: UserSvc.userCorps(),
			corpss 	 	: ["第一救災救護大隊","第三救災救護大隊"],
		};

		BranchSvc.fetchByCorps(UserSvc.userCorps()).success(function(branches){
			vm.branches = branches; 
			if (!vm.isNew) {
				var branchArry = [];
				for (var i = branches.length - 1; i >= 0; i--) {
					branchArry.push(branches[i].name);
				};
				vm.member.branches = branchArry;
			}; 
		});

		var radioCodePrefix = function(branch){
			var suffix =  branch.split('').slice(-2).join('');
			if (suffix == "大隊" || suffix == "中隊") {
				return "北海";
			} else{
				return branch.split('').slice(0,2).join('');
			};
		};

		function save(){
			if (vm.member.name) {
				vm.member.radioCodePrefix = radioCodePrefix(vm.member.branch);
				MemberSvc.create(vm.member).success(function(){
					vm.member.workingTime = moment.duration(parseInt(vm.member.workingTime),'seconds');
				}).then(function(){
					$modalInstance.close(vm.member);
				})
			};
		};

		function update(){
			var updateMember = {
				  memberId  : member.memberId,
				  id 		: "",
				  name 		: vm.member.name,
				  corps 	: vm.member.corps,
				  branch 	: vm.member.branch,
				  title 	: vm.member.title,
				  workingTime : vm.member.workingTime,
				  radioCode  : vm.member.radioCode,
				  radioCodePrefix : radioCodePrefix(vm.member.branch)
			}

			if (vm.member.name) {
				MemberSvc.updateByMemberId(updateMember);
				$modalInstance.close(updateMember);
			} else {
				
			};
		};

		function cancel(){
			$modalInstance.dismiss('cancel');
		};
	}
})();
(function(){
	'use strict';
	/**
	* app.safety Module
	*
	* Description
	*/
	angular
		.module('app.safety')
		.controller('SafetySettingController',SafetySettingController);

	SafetySettingController.$inject = ['strikeTeam', '$modalInstance', 'StSvc', '$state', 'MemberSvc', 'CaseSvc', '$stateParams', 'SocketSvc', 'caseDetail'];
	
	function SafetySettingController(strikeTeam, $modalInstance, StSvc, $state, MemberSvc, CaseSvc, $stateParams, SocketSvc, caseDetail){
		var vm = this; 
		vm.strikeTeam = strikeTeam;
		vm.chooseBranch = chooseBranch;
		vm.cancel = cancel;
		vm.check = check;
		vm.uncheck = uncheck;
		vm.save = save;   
		caseDetail.env == '住宅火警'? vm.apartment =  true  : vm.apartment = false 

		var newMembers = [];

		CaseSvc.fetchDetails($stateParams.caseId).success(function(details){
			vm.dispatch = details.branchIds;
			vm.currentBranch = vm.dispatch[0].name;
			var memberList = _.pluck(details.branchIds,'members');
			vm.members = []
			memberList.forEach(function(branchMembers){
				vm.members.push.apply(vm.members, branchMembers)
			});
			vm.members = vm.members.filter(function(member) { return !member.isChecked });
		})

		function chooseBranch(branch){
			vm.currentBranch = branch;
		};

		function cancel(){
			$modalInstance.dismiss('cancel');
		};

		function check(member){
			member.isChecked = !member.isChecked;
			newMembers.push(member);
		};

		function uncheck(member, id){
			member.isChecked = !member.isChecked;
			newMembers.splice(_.pluck(newMembers, '_id').indexOf(member._id),1);
		};

		function save(){
			vm.strikeTeam.members.push.apply(vm.strikeTeam.members, newMembers);
			SocketSvc.emit('updateStrikeTeam',{
				id : strikeTeam._id, 
				position : strikeTeam.position,
				area : strikeTeam.area, 
				floor : strikeTeam.floor,
				group : strikeTeam.group,
				memberIds : _.pluck(vm.strikeTeam.members,'_id'), 
				members : vm.strikeTeam.members
			});

			$modalInstance.close('dismiss');			
		};
	};

})();
(function(){
	'use strict';
	/**
	* app.safety Module
	*
	* Description
	*/
	angular
		.module('app.safety')
		.controller('SafetyShowController',SafetyShowController);

	SafetyShowController.$inject = ['CaseSvc', 'UserSvc', 'SocketSvc','GeoSvc', 'BranchSvc', '$stateParams'];

	function SafetyShowController(){
		var vm = this; 
		var branch = UserSvc.userBranch();
		
		BranchSvc.fetchByName(branch).success(function(branch){
			vm.members = branch.members.filter(function(member) {
				member.limitTime = moment.duration(member.workingTime, 'seconds');
				return member.onDuty == true 
			});
		});

		CaseSvc.fetchDetails($stateParams.caseId).success(function(_case){
			vm.caseDetail = _case;
			if (_case.location) {
				var location = JSON.parse(_case.location);
				vm.markers.mainMarker = {
					lat : Number(location.lat),
					lng : Number(location.lng),
					message : "案件標的"
				};
			};
		});

       GeoSvc.getGeolocationCoordinates().then(function(coord){
	        vm.nowPos.lat = coord.latitude;
	        vm.nowPos.lng = coord.longitude;
	        vm.nowPos.zoom = 17;
	        vm.markers.nowPos ={
	        	lat : vm.nowPos.lat,
	        	lng : vm.nowPos.lng,
	        	message : "現在位置"
	        }
	    })

	    angular.extend(vm, {
	        nowPos: {
	            lat: 24.988,
	            lng: 121.5752,
	            zoom: 13
	        },
	        markers: {},
	    });		
	}
})();
(function(){
	'use strict';
	/**
	* app.strikeTeam Module
	*
	* Description
	*/
	angular
		.module('app.strikeTeam', [])
		.factory('StMissionFac',StMissionFac);

	StMissionFac.$inject = [];
	function StMissionFac(){
		return {
			groups: function(){
				return {
					corps : [ "聯絡組" , "水源組" , "後勤組"],
					squadron : [""],
					branch : ["帶隊官","滅火小組","搜救小組","搶救小組","後勤小組"],
					preSt  : ["搜救小組","搶救小組","滅火小組"]
				}
			},
			position : function(){
				return {
					defaultPos : "第一面",
					poss : ["第一面","第二面","第三面","第四面"]
				}
			},
			area : function(){
				return {
					defaultArea : "第一區",
					areas : ["第一區","第二區","第三區","第四區","第五區"]
				};
			}
		};
	};
})();
(function(){
	'use strict';
	/**
	* app.strikTeam Module
	*
	* Description
	*/
	angular
		.module('app.strikTeam')
		.serivce('StSvc',StSvc);
		
	StSvc.$inject = ['$http'];

	function StSvc(){
		var svc = this; 
		svc.fetch = fetch;
		svc.fetchByCase = fetchByCase;
		svc.findById = findById;
		svc.dismissSt = dismissSt;
		svc.updateSt = updateSt;
		svc.updateTimeRecord = updateTimeRecord;
		svc.create = create;
		svc.count = count; 

		function fetch(caseId, branch){
			return $http.get('/api/strikeTeams?caseId=' + caseId + '&branch=' + branch);
		};
	
		function fetchByCase(caseId){
			return $http.get('/api/strikeTeams/total?caseId=' + caseId);
		};
		
		function findById(caseId){
			return $http.get('/api/strikeTeams/' + caseId);
		};

		function dismissSt(data){
			return $http.put('/api/strikeTeams/dismiss?id=' + data.id);
		};

		function updateSt(data){
			return $http.put('/api/strikeTeams/update?id=' + data.id, data);
		};

		function updateTimeRecord(data){
			return $http.put('/api/strikeTeams/time?id=' + data.id, data);
		};

		function create(strikeTeam){
			return $http.post('/api/strikeTeams', strikeTeam);
		};
		
		function count(caseId){
			return $http.get('/api/strikeTeams/count?caseId=' + caseId);
		};
	}

})();
(function(){
	'use strict';
	/**
	* app.summary Module
	*
	* Description
	*/
	angular
		.module('app.summary')
		.controller('SummaryController',SummaryController);

	SummaryController.$inject = ['StSvc', '$stateParams', '$interval', '$state', 'SocketSvc', 'CaseSvc'];
	function SummaryController(){
		var vm = this; 
		vm.isCollapsed = true ;
		vm.members = [];

		SocketSvc.on('timerRunning',function(st){
			for (var i = vm.strikeTeams.length - 1; i >= 0; i--) {
				if( angular.equals(vm.strikeTeams[i]._id, st.stId)){
					return vm.strikeTeams[i].timerRunning = st.timerRunning;
				}
			};
		})

		SocketSvc.on('progressUpdate',function(data){
			for (var i = vm.strikeTeams.length - 1; i >= 0; i--) {
				if( angular.equals(vm.strikeTeams[i]._id, data.id) ){
					vm.strikeTeams[i].timer	= moment.duration(data.millis); 
					vm.strikeTeams[i].progress  = data.progress;
					vm.strikeTeams[i].progressState =  data.progressState;
				}
			};
		})

		SocketSvc.on('newSt', function(st){
			if ( angular.equals(caseId,st.caseId)) {
				var newSt = angular.copy(st);
				return vm.strikeTeams.push(newSt);
			};
			vm.deploys = initTable(vm.strikeTeams);
		});

		

		SocketSvc.on('updateSt', function(data){
			StSvc.fetchByCase(caseId).success(function(strikeTeams){
				vm.strikeTeams = strikeTeams;
				vm.strikeTeams.forEach(function(st){
					st.limitTime = moment.duration(st.workingTime,'seconds');
				});
				vm.deploys = initTable(vm.strikeTeams);
			});

		})

		SocketSvc.on('dismiss', function(data){
			StSvc.fetchByCase(caseId).success(function(strikeTeams){
				vm.strikeTeams = strikeTeams;
				vm.deploys = initTable(vm.strikeTeams);
			});
		});


		var caseId = $stateParams.caseId;
		CaseSvc.fetchById(caseId).success(function(_case){
			_case.env == '住宅火警' ? vm.apartment = true : vm.apartment = false;
			vm.caseDetail = _case;
			vm.position = {
				defaultPos 	: "第一面",
				positions 	: ["第一面","第二面","第三面","第四面"],
				floor 		: vm.caseDetail.floor,
				floors  	: vm.caseDetail.floor < 5? _.range(1,6,1) : _.range(vm.caseDetail.floor-2,vm.caseDetail.floor+3,1)
			};
		})

		StSvc.fetchByCase(caseId).success(function(strikeTeams){
			if (strikeTeams) {
				vm.strikeTeams = strikeTeams;
				vm.strikeTeams.forEach(function(st){
					st.limitTime = moment.duration(st.workingTime,'seconds');
				});
				vm.deploys = initTable(vm.strikeTeams);
			} else {
				return 
			};
		});



		var initTable =  function(strikeTeams){
		  	var deployArray = _.range(4).map(function () {
		        return _.range(5).map(function () {
		            return { totalMember : 0, stTotal : 0 , sts : [] } ;
		        });
		    });

			if ( strikeTeams ){
				for (var i = strikeTeams.length - 1; i >= 0; i--) {
					var totalMember = 0;
					var y = null;
					var st = 0;
					var x = _.indexOf(strikeTeams[i].positions, strikeTeams[i].position);
					vm.apartment ? y = _.indexOf(strikeTeams[i].floors, strikeTeams[i].floor) : y = _.indexOf(strikeTeams[i].areas, strikeTeams[i].area)
					deployArray[x][y].stTotal += 1;
					deployArray[x][y].totalMember += strikeTeams[i].members.length;
					var stInFo = {};
					stInFo.id = strikeTeams[i].branch + strikeTeams[i].id
					stInFo.number = strikeTeams[i].members.length;
					stInFo.group = strikeTeams[i].group;
					deployArray[x][y].sts.push(stInFo);
				};
			}
			return deployArray
		};
		
		vm.$on('$destroy', function (event) {
	        SocketSvc.removeAllListeners();
	    });
	};
})();
(function(){
	'use strict';

	/**
	* app.timer Module
	*
	* Description
	*/
	angular
		.module('app.timer')
		.controller('TimerController',TimerController);

	TimerController.$inject = ['SocketSvc'];

	function TimerController(){
		var vm = this; 
		vm.timerRunning = false;
		vm.startTimer = startTimer;
		vm.stopTimer = stopTimer;
	    
	    function startTimer(st, id){
	    	vm.$broadcast('timer-start');
	    	vm.timerRunning = true;
	        SocketSvc.emit('timer', { stId : st._id, timerRunning : true } )
	    };
	    
	    function stopTimer(st,id){
	    	vm.$broadcast('timer-stop');
	    	vm.timerRunning = false;
	        SocketSvc.emit('timer', { stId : st._id, timerRunning : false } )
	    };
	};

})();
(function(){
	'use strict';
	/**
	* app.user Module
	*
	* Description
	*/
	angular
		.module('app.user')
		.service('UserSvc',UserSvc);

	UserSvc.$inject = ['$http', 'store', 'jwtHelper'];
	function UserSvc(){
		var svc = this; 
		svc.fetchOnlineUser = fetchOnlineUser;
		svc.activate = activate;
		svc.removeUser = removeUser;
		svc.login = login;
		svc.isLoggedIn = isLoggedIn;
		svc.isValid = isValid;
		svc.userBranch = userBranch;
		svc.userCorps = userCorps;
		svc.currentUser = currentUser;
		svc.currentAccount = currentAccount;
		svc.accessLevel = accessLevel;
		svc.caseId = caseId;


		function fetchOnlineUser(){
			return $http.get('/api/users/userState');
		};

		function activate(user){
			return $http.post('/api/users', user);
		};

		function removeUser(username){
			return $http.delete('/api/users/delete?username=' + username);
		};

		function login(user){
			return $http.post('/api/users/authenticate', user);
		};

		function isLoggedIn(){
			return store.get('jwt');
		};

		function isValid( branch ){
			if (svc.isLoggedIn) {
				if (jwtHelper.decodeToken(store.get('jwt')).accessLevel > 1   || jwtHelper.decodeToken(store.get('jwt')).branch == branch) {
					return true; 
				}else {
					return false;
				};
			};

			return false 
		};

		function userBranch(){
			if (svc.isLoggedIn) {
				return jwtHelper.decodeToken(store.get('jwt')).branch;
			};
		};
	
		function userCorps(){
			if (svc.isLoggedIn) {
				return jwtHelper.decodeToken(store.get('jwt')).corps;
			};
		};
	
		function currentUser(){
			if (svc.isLoggedIn) {
				return jwtHelper.decodeToken(store.get('jwt')).username;
			};
		};
	
		function currentAccount(){
			if (svc.isLoggedIn) {
				return jwtHelper.decodeToken(store.get('jwt')).account;
			}; 
		};
	
		function accessLevel(){
			if (svc.isLoggedIn) {
				return jwtHelper.decodeToken(store.get('jwt')).accessLevel;
			};
		};
	
		function caseId(){
			if (svc.isLoggedIn) {
				return jwtHelper.decodeToken(store.get('jwt')).caseId;
			};
		};
	};

})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJicmFuY2gvYnJhbmNoLm1vZHVsZS5qcyIsImNhci9jYXIubW9kdWxlLmpzIiwiY2FzZS9jYXNlLm1vZHVsZS5qcyIsImRhc2hib2FyZC9kYXNoYm9hcmQubW9kdWxlLmpzIiwiZGlyZWN0b3IvZGlyZWN0b3IubW9kdWxlLmpzIiwiZGlzcGF0Y2gvZGlzcGF0Y2gubW9kdWxlLmpzIiwiZHV0eWxpc3QvZHV0eWxpc3QubW9kdWxlLmpzIiwiZ2VvL2dlby5tb2R1bGUuanMiLCJtYXAvbWFwLm1vZHVsZS5qcyIsIm1lbWJlci9tZW1iZXIubW9kdWxlLmpzIiwibm90aWZpY2F0aW9uL2FwcC5ub3RpZmljYXRpb24ubW9kdWxlLmpzIiwic29ja2V0L3NvY2tldC5tb2R1bGUuanMiLCJzYWZldHkvc2FmZXR5Lm1vZHVsZS5qcyIsInN0cmlrZVRlYW0vc3RyaWtlVGVhbS5tb2R1bGUuanMiLCJzdW1tYXJ5L3N1bW1hcnkubW9kdWxlLmpzIiwidGltZXIvdGltZXIubW9kdWxlLmpzIiwidXNlci91c2VyLm1vZHVsZS5qcyIsImJyYW5jaC9icmFuY2guc2VydmljZS5qcyIsImNhci9jYXIuZWRpdC5jb250cm9sbGVyLmpzIiwiY2FyL2Nhci5pbmRleC5jb250cm9sbGVyLmpzIiwiY2FyL2Nhci5zZXJ2aWNlLmpzIiwiY29yZS9sb2dpbi5jb250cm9sbGVyLmpzIiwiY29yZS9yb3V0ZXIuanMiLCJjb3JlL3RvcG5hdmJhci5jb250cm9sbGVyLmpzIiwiY2FzZS9jYXNlLmNvbmZpcm0ubW9kYWwuY29udHJvbGxlci5qcyIsImNhc2UvY2FzZS5lZGl0LmNvbnRyb2xsZXIuanMiLCJjYXNlL2Nhc2UuaW5kZXguY29udHJvbGxlci5qcyIsImNhc2UvY2FzZS5tb2RhbC5jb250cm9sbGVyLmpzIiwiY2FzZS9jYXNlLm5ldy5jb250cm9sbGVyLmpzIiwiY2FzZS9jYXNlLnNlcnZpY2UuanMiLCJjYXNlL2Nhc2Uuc2hvdy5jb250cm9sbGVyLmpzIiwiZGFzaGJvYXJkL2Rhc2hib2FyZC5jb250cm9sbGVyLmpzIiwiZGlyZWN0b3IvZGlyZWN0b3IuY29udHJvbGxlci5qcyIsImRpcmVjdG9yL2RpcmVjdG9yLmVkaXQuY29udHJvbGxlci5qcyIsImRpc3BhdGNoL2Rpc3BhdGNoLmNvbnRyb2xsZXIuanMiLCJkdXR5bGlzdC9kdXR5bGlzdC5jb250cm9sbGVyLmpzIiwiZ2VvL2dlby5zZXJ2aWNlLmpzIiwibWFwL21hcC5pbmRleC5jb250cm9sbGVyLmpzIiwibWVtYmVyL21lbWJlci5hY2NvdW50LmNvbnRyb2xsZXIuanMiLCJtZW1iZXIvbWVtYmVyLmVkaXQuY29udHJvbGxlci5qcyIsIm1lbWJlci9tZW1iZXIuaW5kZXguY29udHJvbGxlci5qcyIsIm1lbWJlci9tZW1iZXIubW9kYWwuY29udHJvbGxlci5qcyIsIm1lbWJlci9tZW1iZXIuc2VydmljZS5qcyIsIm5vdGlmaWNhdGlvbi9hcHAubm90aWZpY2F0aW9uLnNlcnZpY2UuanMiLCJzb2NrZXQvc29ja2V0LnNlcnZpY2UuanMiLCJzYWZldHkvc2FmZXR5LmNtZC5jb250cm9sbGVyLmpzIiwic2FmZXR5L3NhZmV0eS5pbmRleC5jb250cm9sbGVyLmpzIiwic2FmZXR5L3NhZmV0eS5tYW5hZ2UuY29udHJvbGxlci5qcyIsInNhZmV0eS9zYWZldHkubW9kYWwuY29udHJvbGxlci5qcyIsInNhZmV0eS9zYWZldHkuc2V0dGluZy5jb250cm9sbGVyLmpzIiwic2FmZXR5L3NhZmV0eS5zaG93LmNvbnRyb2xsZXIuanMiLCJzdHJpa2VUZWFtL3N0cmlrZVRlYW0uZmFjdG9yeS5qcyIsInN0cmlrZVRlYW0vc3RyaWtlVGVhbS5zZXJ2aWNlLmpzIiwic3VtbWFyeS9zdW1tYXJ5LmluZGV4LmNvbnRyb2xsZXIuanMiLCJ0aW1lci90aW1lci5jb250cm9sbGVyLmpzIiwidXNlci91c2VyLnNlcnZpY2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsQ0FBQSxDQUFBLFVBQUE7Q0FDQTtDQUNBLFFBQUEsT0FBQSxNQUFBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOzs7OztBQ2RBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUEsYUFBQTs7QUNSQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUEsUUFBQSxPQUFBLFdBQUE7O0FDUEEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BLFFBQUEsT0FBQSxZQUFBO0VBQ0E7RUFDQTs7O0FDVEEsQ0FBQSxVQUFBOzs7Ozs7Q0FNQTtHQUNBLE9BQUEsZ0JBQUE7O0FDUEEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BLFFBQUEsT0FBQSxnQkFBQTs7O0FDUEEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BLFFBQUEsT0FBQSxnQkFBQTs7QUNQQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUEsUUFBQSxPQUFBLGdCQUFBOztBQ1BBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQSxRQUFBLE9BQUEsV0FBQTs7QUNQQSxDQUFBLFVBQUE7Ozs7OztDQU1BLFFBQUEsT0FBQSxXQUFBOztBQ05BLENBQUEsVUFBQTs7Ozs7O0NBTUEsUUFBQSxPQUFBLGNBQUE7O0FDTkEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BLFFBQUEsT0FBQSxvQkFBQTs7QUNQQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUEsUUFBQSxPQUFBLGNBQUE7O0FDUEEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BLFFBQUEsT0FBQSxhQUFBOztBQ1BBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQSxRQUFBLE9BQUEsaUJBQUE7O0FDUEEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BLFFBQUEsT0FBQSxjQUFBOztBQ1BBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQSxRQUFBLE9BQUEsYUFBQTs7QUNQQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUEsUUFBQSxPQUFBLFlBQUE7O0FDUEEsQ0FBQSxVQUFBOzs7Ozs7O0NBT0E7R0FDQSxPQUFBO0dBQ0EsV0FBQSxZQUFBOztDQUVBLFVBQUEsVUFBQSxDQUFBO0NBQ0EsU0FBQSxVQUFBLE1BQUE7RUFDQSxJQUFBLE1BQUE7RUFDQSxJQUFBLGdCQUFBO0VBQ0EsSUFBQSxlQUFBO0VBQ0EsSUFBQSxzQkFBQTtFQUNBLElBQUEsZUFBQTtFQUNBLElBQUEsc0JBQUE7RUFDQSxJQUFBLFlBQUE7RUFDQSxJQUFBLGlCQUFBOztFQUVBLFNBQUEsYUFBQSxNQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEseUJBQUE7R0FDQTs7RUFFQSxTQUFBLFlBQUEsT0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLDBCQUFBO0dBQ0E7O0VBRUEsU0FBQSxvQkFBQSxPQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEsbUJBQUE7OztFQUdBLFNBQUEsV0FBQSxHQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEsbUJBQUE7R0FDQTs7RUFFQSxTQUFBLG9CQUFBLFNBQUE7R0FDQSxPQUFBLE1BQUEsS0FBQSx1QkFBQTtHQUNBOztFQUVBLFNBQUEsT0FBQSxLQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEsbUJBQUEsS0FBQSxTQUFBO0dBQ0E7O0VBRUEsU0FBQSxjQUFBLEtBQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSwwQkFBQSxLQUFBLFFBQUE7R0FDQTtFQUNBOzs7QUNqREEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFdBQUEsb0JBQUE7O0NBRUEsa0JBQUEsVUFBQTtDQUNBLFNBQUEsbUJBQUE7O0VBRUE7OztBQ2RBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxXQUFBLHFCQUFBOztDQUVBLG1CQUFBLFVBQUE7Q0FDQSxTQUFBLG9CQUFBOztFQUVBOzs7QUNkQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7OztDQU9BO0dBQ0EsT0FBQTtHQUNBLE9BQUEsU0FBQTs7Q0FFQSxPQUFBLFVBQUEsQ0FBQTs7Q0FFQSxTQUFBLE9BQUEsTUFBQTtFQUNBLElBQUEsS0FBQTtFQUNBLEdBQUEsZ0JBQUE7RUFDQSxHQUFBLGdCQUFBO0VBQ0EsR0FBQSxZQUFBOztFQUVBLFNBQUEsYUFBQSxNQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEscUJBQUE7R0FDQTs7RUFFQSxTQUFBLGVBQUEsUUFBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLHNCQUFBO0dBQ0E7O0VBRUEsU0FBQSxPQUFBLEtBQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSxlQUFBLEtBQUEsS0FBQTtHQUNBO0VBQ0E7O0FDL0JBLENBQUEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFdBQUEsa0JBQUE7O0VBRUEsZ0JBQUEsVUFBQSxDQUFBLFdBQUEsU0FBQSxTQUFBLFlBQUEsU0FBQTs7RUFFQSxTQUFBLGdCQUFBLFNBQUEsT0FBQSxPQUFBLFVBQUEsT0FBQSxXQUFBO0dBQ0EsSUFBQSxPQUFBO0dBQ0EsR0FBQSxRQUFBO0dBQ0EsR0FBQSxRQUFBOztHQUVBLFNBQUEsT0FBQTtJQUNBLFFBQUEsTUFBQSxHQUFBLE1BQUEsUUFBQSxTQUFBLEtBQUE7S0FDQSxJQUFBLEtBQUEsU0FBQTtNQUNBLE1BQUEsSUFBQSxNQUFBLEtBQUE7TUFDQSxNQUFBLFNBQUEsUUFBQSxPQUFBLG9CQUFBLEtBQUE7TUFDQSxPQUFBLEtBQUE7WUFDQTtNQUNBLE9BQUEsUUFBQSxJQUFBOztPQUVBLEtBQUEsU0FBQSxNQUFBO0tBQ0EsVUFBQSxLQUFBO0tBQ0EsVUFBQSxLQUFBO09BQ0EsS0FBQSxVQUFBO0tBQ0EsSUFBQSxVQUFBLFlBQUEsT0FBQSxRQUFBLFNBQUE7TUFDQSxJQUFBLGFBQUEsVUFBQSxZQUFBLE9BQUE7TUFDQSxJQUFBLFdBQUEsTUFBQSxXQUFBLE9BQUEsR0FBQSxXQUFBLFdBQUEsTUFBQTtPQUNBLE9BQUEsT0FBQSxHQUFBO1lBQ0E7T0FDQSxPQUFBLE9BQUEsR0FBQTtPQUNBO1VBQ0E7TUFDQSxPQUFBLE9BQUEsR0FBQTs7O0lBR0E7R0FDQTs7QUMzQ0EsQ0FBQSxDQUFBLFVBQUE7Q0FDQTtDQUNBO0dBQ0EsT0FBQSxhQUFBLENBQUE7R0FDQSxPQUFBOztFQUVBLGFBQUEsVUFBQSxDQUFBLGlCQUFBLHFCQUFBOztFQUVBLFNBQUEsYUFBQSxlQUFBLG9CQUFBLG1CQUFBO01BQ0E7UUFDQSxVQUFBOztNQUVBO1dBQ0EsTUFBQSxPQUFBO2NBQ0EsTUFBQTtjQUNBLFdBQUE7Y0FDQSxXQUFBOztXQUVBLE1BQUEsYUFBQTtjQUNBLE1BQUE7Y0FDQSxhQUFBO2NBQ0EsYUFBQTtjQUNBLGVBQUE7O1dBRUEsTUFBQSxXQUFBO2NBQ0EsTUFBQTtjQUNBLGNBQUE7Ozs7R0FJQTtLQUNBLE1BQUEsWUFBQTtjQUNBLFVBQUE7Y0FDQSxLQUFBO2NBQ0EsYUFBQTtjQUNBLE9BQUE7a0JBQ0EsZ0JBQUE7a0JBQ0EsT0FBQSxDQUFBOzs7V0FHQSxNQUFBLGtCQUFBO2NBQ0EsS0FBQTtjQUNBLGFBQUE7Y0FDQSxhQUFBO2NBQ0EsZUFBQTtjQUNBLE9BQUE7a0JBQ0EsZ0JBQUE7a0JBQ0EsT0FBQSxDQUFBOzs7V0FHQSxNQUFBLGtCQUFBO2NBQ0EsTUFBQTtjQUNBLGNBQUE7Y0FDQSxhQUFBO2NBQ0EsZUFBQTtjQUNBLE9BQUE7a0JBQ0EsZ0JBQUE7a0JBQ0EsT0FBQSxDQUFBOzs7V0FHQSxNQUFBLGdCQUFBO2NBQ0EsV0FBQTtjQUNBLFdBQUE7O1dBRUEsTUFBQSx1QkFBQTtjQUNBLEtBQUE7Y0FDQSxhQUFBO2NBQ0EsYUFBQTtjQUNBLGVBQUE7O1dBRUEsTUFBQSxvQkFBQTtjQUNBLE1BQUE7Y0FDQSxjQUFBO2NBQ0EsYUFBQTtjQUNBLGVBQUE7O1dBRUEsTUFBQSxxQkFBQTtjQUNBLE1BQUE7Y0FDQSxjQUFBO2NBQ0EsYUFBQTtjQUNBLGVBQUE7O1dBRUEsTUFBQSxxQkFBQTtjQUNBLE1BQUE7Y0FDQSxjQUFBO2NBQ0EsYUFBQTtjQUNBLGVBQUE7O1dBRUEsTUFBQSxrQkFBQTtjQUNBLE1BQUE7Y0FDQSxjQUFBO2NBQ0EsYUFBQTtjQUNBLGVBQUE7O1dBRUEsTUFBQSxvQkFBQTtjQUNBLFdBQUE7Y0FDQSxXQUFBOztXQUVBLE1BQUEsMkJBQUE7Y0FDQSxLQUFBO2NBQ0EsYUFBQTtjQUNBLGFBQUE7Y0FDQSxlQUFBOztXQUVBLE1BQUEseUJBQUE7V0FDQSxNQUFBO1dBQ0EsV0FBQTs7V0FFQSxNQUFBLDBCQUFBO2NBQ0EsS0FBQTtjQUNBLGVBQUE7Y0FDQSxlQUFBO2NBQ0EsZUFBQTs7V0FFQSxNQUFBLGtCQUFBO2NBQ0EsV0FBQTtjQUNBLFdBQUE7O1dBRUEsTUFBQSx3QkFBQTtjQUNBLEtBQUE7Y0FDQSxlQUFBO2NBQ0EsZUFBQTtjQUNBLGVBQUE7O1dBRUEsTUFBQSx3QkFBQTtjQUNBLEtBQUE7Y0FDQSxlQUFBO2NBQ0EsZUFBQTtjQUNBLGVBQUE7O1dBRUEsTUFBQSxnQkFBQTtjQUNBLFdBQUE7Y0FDQSxXQUFBOztXQUVBLE1BQUEsb0JBQUE7Y0FDQSxLQUFBO2NBQ0EsY0FBQTtjQUNBLGFBQUE7Y0FDQSxlQUFBOztXQUVBLE1BQUEsb0JBQUE7Y0FDQSxLQUFBO2NBQ0EsY0FBQTtjQUNBLGFBQUE7Y0FDQSxlQUFBOzs7OztBQ2hKQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBLGNBQUE7R0FDQSxXQUFBLG1CQUFBOztDQUVBLGlCQUFBLFVBQUE7Q0FDQSxTQUFBLGlCQUFBLFVBQUEsUUFBQSxXQUFBLE9BQUEsV0FBQSxTQUFBLFFBQUE7RUFDQSxJQUFBLEtBQUE7RUFDQSxHQUFBLGVBQUEsU0FBQSxPQUFBO0VBQ0EsR0FBQSxTQUFBOzs7RUFHQSxVQUFBLFVBQUE7R0FDQSxPQUFBLE9BQUE7R0FDQSxHQUFBLGVBQUEsU0FBQSxPQUFBO0tBQ0E7O0VBRUEsU0FBQSxRQUFBO0dBQ0EsSUFBQSxVQUFBLFFBQUE7R0FDQSxVQUFBLEtBQUE7R0FDQSxPQUFBLEdBQUE7R0FDQTs7OztBQzNCQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsV0FBQSx3QkFBQTs7Q0FFQSxzQkFBQSxVQUFBLENBQUEsV0FBQSxXQUFBLGVBQUEsU0FBQTtDQUNBLFNBQUEsc0JBQUEsU0FBQSxTQUFBLGFBQUEsT0FBQSxlQUFBO0VBQ0EsSUFBQSxLQUFBOztFQUVBLEdBQUEsT0FBQTtFQUNBLEdBQUEsT0FBQTtFQUNBLEdBQUEsV0FBQTtHQUNBLEtBQUEsYUFBQTtHQUNBLFFBQUEsU0FBQSxPQUFBOzs7RUFHQSxTQUFBLE1BQUE7R0FDQSxRQUFBLE1BQUEsR0FBQSxNQUFBLFFBQUEsU0FBQSxLQUFBO0lBQ0EsUUFBQSxVQUFBLEdBQUEsVUFBQSxRQUFBLFVBQUE7S0FDQSxlQUFBLFFBQUE7S0FDQSxPQUFBLEdBQUE7OztHQUdBO0VBQ0E7O0FDOUJBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxXQUFBLHFCQUFBOztDQUVBLG1CQUFBLFVBQUEsQ0FBQSxnQkFBQSxXQUFBLFVBQUEsV0FBQSxhQUFBLFdBQUEsU0FBQTs7Q0FFQSxTQUFBLG1CQUFBLGNBQUEsU0FBQSxRQUFBLFNBQUEsV0FBQSxTQUFBLE9BQUEsT0FBQTtFQUNBLElBQUEsS0FBQTtFQUNBLElBQUEsZ0JBQUE7RUFDQSxHQUFBLGlCQUFBO0VBQ0EsR0FBQSxjQUFBO0VBQ0EsR0FBQSxpQkFBQTtFQUNBLEdBQUEsaUJBQUE7RUFDQSxHQUFBLFdBQUE7O0VBRUEsUUFBQSxPQUFBLElBQUE7U0FDQSxRQUFBO2FBQ0EsS0FBQTthQUNBLEtBQUE7YUFDQSxNQUFBOztTQUVBLFVBQUE7YUFDQSxNQUFBOzs7O0VBSUEsSUFBQSxTQUFBLGFBQUE7O0VBRUEsVUFBQSxhQUFBLFFBQUEsYUFBQSxRQUFBLFNBQUEsU0FBQTtNQUNBLEdBQUEsV0FBQTtNQUNBLEdBQUEsZ0JBQUEsU0FBQSxHQUFBOzs7RUFHQSxTQUFBLGFBQUEsT0FBQTtNQUNBLEdBQUEsZ0JBQUEsT0FBQTtNQUNBOztFQUVBLFVBQUEsYUFBQSxRQUFBLGFBQUEsUUFBQSxTQUFBLFNBQUE7TUFDQSxHQUFBLFdBQUE7TUFDQSxHQUFBLGdCQUFBLFNBQUEsR0FBQTs7O0VBR0EsUUFBQSxVQUFBLFFBQUEsUUFBQSxTQUFBLE1BQUE7R0FDQSxHQUFBLGNBQUE7R0FDQSxHQUFBLGVBQUEsRUFBQSxNQUFBLE1BQUEsTUFBQSxhQUFBLEtBQUE7R0FDQSxHQUFBLFlBQUEsU0FBQSxFQUFBLE1BQUEsTUFBQSxLQUFBO0tBQ0EsS0FBQSxVQUFBO0dBQ0EsT0FBQSxhQUFBLFFBQUEsYUFBQSxRQUFBLFNBQUEsS0FBQTtJQUNBLEdBQUEsT0FBQTtJQUNBLEtBQUEsSUFBQSxJQUFBLEdBQUEsSUFBQSxHQUFBLEtBQUEsUUFBQSxLQUFBO0tBQ0EsS0FBQSxHQUFBLFlBQUEsT0FBQSxRQUFBLEdBQUEsS0FBQSxHQUFBLE9BQUEsQ0FBQSxJQUFBO01BQ0EsR0FBQSxLQUFBLEdBQUEsWUFBQTtNQUNBLGFBQUEsS0FBQSxHQUFBLEtBQUE7TUFDQTtLQUNBOzs7R0FHQSxPQUFBLFFBQUEsUUFBQSxTQUFBLEtBQUE7SUFDQSxHQUFBLE9BQUE7SUFDQSxHQUFBLFlBQUEsT0FBQSxFQUFBLE1BQUEsS0FBQTtJQUNBLEdBQUEsWUFBQSxPQUFBLEdBQUEsWUFBQSxLQUFBOzs7O0VBSUEsU0FBQSxZQUFBLGFBQUE7R0FDQSxJQUFBLFdBQUEsRUFBQSxPQUFBO0dBQ0EsSUFBQSxZQUFBO0dBQ0EsS0FBQSxJQUFBLElBQUEsR0FBQSxJQUFBLEdBQUEsU0FBQSxRQUFBLEtBQUE7SUFDQSxJQUFBLFNBQUEsUUFBQSxHQUFBLFNBQUEsR0FBQSxRQUFBLENBQUEsR0FBQTtLQUNBLFVBQUEsS0FBQSxHQUFBLFNBQUEsR0FBQTtLQUNBO0lBQ0E7R0FDQSxRQUFBO0dBQ0E7O0VBRUEsU0FBQSxVQUFBLEtBQUE7R0FDQSxJQUFBLFlBQUE7R0FDQSxhQUFBLEtBQUE7R0FDQSxHQUFBLGVBQUEsRUFBQSxNQUFBLGNBQUEsYUFBQSxLQUFBO0dBQ0E7O0VBRUEsU0FBQSxlQUFBLElBQUE7R0FDQSxJQUFBLFlBQUE7R0FDQSxhQUFBLE9BQUEsRUFBQSxNQUFBLGNBQUEsT0FBQSxRQUFBLElBQUEsS0FBQTtHQUNBLEdBQUEsZUFBQSxFQUFBLE1BQUEsY0FBQSxhQUFBLEtBQUE7R0FDQTs7RUFFQSxTQUFBLE1BQUE7R0FDQSxJQUFBOztHQUVBLEdBQUEsS0FBQSxRQUFBLFNBQUEsSUFBQSxHQUFBO0lBQ0EsSUFBQSxJQUFBLFFBQUEsR0FBQSxZQUFBLE1BQUE7S0FDQSxjQUFBLEdBQUEsS0FBQTtLQUNBOztHQUVBLFFBQUEsT0FBQTtJQUNBLFlBQUEsR0FBQSxZQUFBO0lBQ0EsWUFBQSxHQUFBLFlBQUEsV0FBQTtJQUNBLGtCQUFBLFFBQUEsa0JBQUE7SUFDQSxZQUFBLEdBQUEsWUFBQSxRQUFBO0lBQ0EsV0FBQSxHQUFBLFlBQUE7SUFDQSxZQUFBLEdBQUEsWUFBQSxTQUFBO0lBQ0EsWUFBQSxFQUFBLE9BQUEsRUFBQSxNQUFBLGNBQUE7SUFDQSxZQUFBLFlBQUEsR0FBQSxZQUFBO01BQ0EsWUFBQSxFQUFBLE1BQUEsYUFBQTtJQUNBLFlBQUE7SUFDQSxXQUFBLFFBQUE7SUFDQSxTQUFBLEdBQUEsWUFBQTtJQUNBLFVBQUEsR0FBQSxZQUFBO0lBQ0EsV0FBQSxHQUFBLFlBQUE7SUFDQSxZQUFBLFdBQUE7SUFDQSxhQUFBLFNBQUEsT0FBQTtNQUNBLFFBQUEsVUFBQTtJQUNBLFFBQUEsUUFBQTs7R0FFQTs7RUFFQSxTQUFBLGdCQUFBO0dBQ0EsSUFBQSxnQkFBQSxPQUFBLEtBQUE7TUFDQSxhQUFBO09BQ0EsWUFBQTtPQUNBLE1BQUE7O0dBRUE7OztBQ2xJQSxDQUFBLFVBQUE7Q0FDQTs7Q0FFQTtHQUNBLE9BQUE7R0FDQSxXQUFBLGlCQUFBOztDQUVBLGVBQUEsVUFBQSxDQUFBLGVBQUEsU0FBQSxXQUFBLFFBQUEsYUFBQSxXQUFBO0NBQ0EsU0FBQSxlQUFBLGFBQUEsT0FBQSxTQUFBLE1BQUEsV0FBQSxTQUFBLFVBQUE7RUFDQSxJQUFBLEtBQUE7RUFDQSxHQUFBLFlBQUE7RUFDQSxHQUFBLGVBQUE7RUFDQSxHQUFBLGVBQUE7RUFDQSxHQUFBLGVBQUE7RUFDQSxHQUFBLGVBQUE7RUFDQSxHQUFBLFdBQUE7O0VBRUEsR0FBQTs7RUFFQSxTQUFBLGFBQUE7R0FDQSxRQUFBLE1BQUEsUUFBQSxhQUFBLEdBQUEsY0FBQSxHQUFBLGVBQUEsUUFBQSxTQUFBLEtBQUE7SUFDQSxHQUFBLFFBQUEsS0FBQTs7R0FFQTs7RUFFQSxTQUFBLFlBQUE7R0FDQSxRQUFBLE1BQUEsUUFBQSxhQUFBLEdBQUEsYUFBQSxHQUFBLGNBQUEsUUFBQSxTQUFBLEtBQUE7SUFDQSxHQUFBLFFBQUEsS0FBQTtJQUNBLEdBQUEsYUFBQSxLQUFBOztHQUVBOztFQUVBLFNBQUEsT0FBQSxHQUFBO0dBQ0EsUUFBQSxVQUFBLEdBQUEsTUFBQSxJQUFBLEtBQUEsUUFBQSxTQUFBLE1BQUE7S0FDQSxHQUFBLGNBQUE7O0dBRUE7O0VBRUEsVUFBQSxHQUFBLFVBQUEsU0FBQSxNQUFBO0dBQ0EsR0FBQSxNQUFBLFFBQUE7OztFQUdBLFVBQUEsR0FBQSxlQUFBLFNBQUEsTUFBQTtHQUNBLEdBQUEsTUFBQSxNQUFBLE9BQUEsS0FBQTs7RUFFQTs7O0FDN0NBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxXQUFBLHNCQUFBOztDQUVBLG9CQUFBLFVBQUEsQ0FBQSxVQUFBLGtCQUFBLFVBQUEsVUFBQSxTQUFBLGVBQUEsU0FBQSxXQUFBLGFBQUEsV0FBQTs7Q0FFQSxTQUFBLG9CQUFBLFFBQUEsZ0JBQUEsUUFBQSxRQUFBLE9BQUEsYUFBQSxPQUFBLFNBQUEsV0FBQSxTQUFBLE9BQUE7RUFDQSxJQUFBLEtBQUE7RUFDQSxHQUFBLFlBQUE7RUFDQSxHQUFBLGVBQUEsR0FBQSxRQUFBLGFBQUEsS0FBQTtFQUNBLEdBQUEsVUFBQTtHQUNBLFVBQUEsWUFBQSxXQUFBO0dBQ0EsUUFBQSxZQUFBLFNBQUE7TUFDQSxPQUFBLFlBQUEsU0FBQTtNQUNBLFFBQUEsRUFBQSxNQUFBLE1BQUEsTUFBQSxLQUFBO01BQ0EsUUFBQTtNQUNBLFFBQUEsQ0FBQSxPQUFBLFdBQUEsUUFBQTtNQUNBLFFBQUE7TUFDQSxTQUFBLGNBQUEsYUFBQSxXQUFBO01BQ0EsZUFBQSxjQUFBLGFBQUEsaUJBQUE7TUFDQSxXQUFBLGNBQUEsYUFBQSxhQUFBOztFQUVBLEdBQUEsV0FBQTtFQUNBLEdBQUEsWUFBQTtFQUNBLEdBQUEsV0FBQTtFQUNBLEdBQUEsaUJBQUE7RUFDQSxHQUFBLFlBQUE7RUFDQSxHQUFBLFlBQUE7RUFDQSxHQUFBLFNBQUE7O0VBRUEsSUFBQSxFQUFBLFFBQUEsY0FBQTtHQUNBLEdBQUEsUUFBQTtHQUNBLFVBQUE7T0FDQTtHQUNBLEdBQUEsUUFBQTtHQUNBLElBQUEsVUFBQSxZQUFBO0dBQ0E7O0VBRUEsT0FBQSxRQUFBLFFBQUEsU0FBQSxLQUFBO0dBQ0EsR0FBQSxVQUFBLE9BQUE7S0FDQSxLQUFBLFVBQUE7R0FDQSxHQUFBLFVBQUEsTUFBQSxHQUFBLFVBQUEsS0FBQTs7O0VBR0EsVUFBQSxhQUFBLFFBQUEsYUFBQSxRQUFBLFNBQUEsU0FBQTtNQUNBLEdBQUEsV0FBQTs7O0VBR0EsU0FBQSxjQUFBLElBQUE7R0FDQSxJQUFBLGVBQUE7R0FDQSxJQUFBLFNBQUE7R0FDQSxJQUFBLFdBQUE7O0dBRUEsSUFBQSxJQUFBLE1BQUE7SUFDQSxLQUFBLElBQUEsSUFBQSxJQUFBLEtBQUEsU0FBQSxHQUFBLEtBQUEsR0FBQSxLQUFBO0tBQ0EsYUFBQSxLQUFBLElBQUEsS0FBQSxHQUFBO0tBQ0EsT0FBQSxLQUFBLElBQUEsS0FBQSxHQUFBO0tBQ0EsU0FBQSxLQUFBLElBQUEsS0FBQSxHQUFBO0tBQ0E7SUFDQSxPQUFBLENBQUEsZUFBQSxlQUFBLFNBQUEsU0FBQSxZQUFBOztRQUVBO0lBQ0EsT0FBQTtJQUNBO0dBQ0E7O0VBRUEsU0FBQSxZQUFBLGFBQUE7R0FDQSxJQUFBLFdBQUEsRUFBQSxPQUFBO0dBQ0EsSUFBQSxZQUFBO0dBQ0EsS0FBQSxJQUFBLElBQUEsR0FBQSxJQUFBLEdBQUEsU0FBQSxRQUFBLEtBQUE7SUFDQSxJQUFBLFNBQUEsUUFBQSxHQUFBLFNBQUEsR0FBQSxRQUFBLENBQUEsR0FBQTtLQUNBLFVBQUEsS0FBQSxHQUFBLFNBQUEsR0FBQTtLQUNBO0lBQ0E7R0FDQSxRQUFBO0dBQ0E7O0VBRUEsU0FBQSxTQUFBLFFBQUE7SUFDQSxPQUFBLGNBQUEsT0FBQSxNQUFBLFFBQUEsU0FBQSxLQUFBO0tBQ0EsS0FBQSxJQUFBLElBQUEsS0FBQSxTQUFBLEdBQUEsS0FBQSxHQUFBLEtBQUE7TUFDQSxJQUFBLEdBQUEsUUFBQSxPQUFBLFFBQUEsS0FBQSxHQUFBLE9BQUEsQ0FBQSxJQUFBO09BQ0EsS0FBQSxHQUFBLFlBQUE7T0FDQTtNQUNBO0tBQ0EsR0FBQSxPQUFBOztHQUVBOztFQUVBLFNBQUEsU0FBQTtHQUNBLGVBQUEsUUFBQTtHQUNBOztFQUVBLFNBQUEsZUFBQSxJQUFBO0dBQ0EsSUFBQSxZQUFBO0dBQ0EsUUFBQSxPQUFBLFFBQUEsUUFBQSxLQUFBO0dBQ0EsR0FBQSxRQUFBLE9BQUEsT0FBQSxHQUFBLFFBQUEsYUFBQSxRQUFBLElBQUEsS0FBQTtHQUNBLEdBQUEsUUFBQSxhQUFBLE9BQUEsR0FBQSxRQUFBLGFBQUEsUUFBQSxJQUFBLFdBQUE7R0FDQSxHQUFBLFFBQUEsU0FBQSxPQUFBLEdBQUEsUUFBQSxhQUFBLFFBQUEsSUFBQSxRQUFBO0dBQ0EsR0FBQSxlQUFBLEdBQUEsUUFBQSxhQUFBLEtBQUE7R0FDQTs7RUFFQSxTQUFBLFVBQUEsS0FBQTtHQUNBLElBQUEsWUFBQTtHQUNBLFFBQUEsS0FBQTtHQUNBLEdBQUEsUUFBQSxPQUFBLEtBQUEsSUFBQTtHQUNBLEdBQUEsUUFBQSxhQUFBLEtBQUEsSUFBQTtHQUNBLEdBQUEsUUFBQSxTQUFBLEtBQUEsSUFBQTtHQUNBLEdBQUEsZUFBQSxHQUFBLFFBQUEsYUFBQSxLQUFBO0dBQ0E7O0VBRUEsU0FBQSxXQUFBO0dBQ0EsTUFBQSxNQUFBLFlBQUEsS0FBQSxRQUFBLFNBQUEsTUFBQTtJQUNBLElBQUEsUUFBQSxJQUFBO0tBQ0EsUUFBQSxNQUFBO1NBQ0E7S0FDQSxRQUFBLFVBQUE7TUFDQSxLQUFBLFlBQUE7TUFDQSxZQUFBO1FBQ0EsUUFBQSxTQUFBLElBQUE7TUFDQSxRQUFBLElBQUE7O0tBRUEsZUFBQSxRQUFBO0tBQ0EsT0FBQTtLQUNBOztHQUVBOztFQUVBLFNBQUEsTUFBQTtHQUNBLFFBQUEsT0FBQTtJQUNBLFdBQUEsU0FBQTtJQUNBLFlBQUEsR0FBQSxRQUFBLFdBQUE7SUFDQSxrQkFBQSxRQUFBLGtCQUFBO0lBQ0EsWUFBQSxHQUFBLFFBQUEsUUFBQTtJQUNBLFlBQUEsR0FBQSxRQUFBLFNBQUE7SUFDQSxZQUFBLEVBQUEsT0FBQSxHQUFBLFFBQUE7SUFDQSxZQUFBLFlBQUEsR0FBQSxRQUFBO01BQ0EsWUFBQSxHQUFBLFFBQUE7SUFDQSxZQUFBO0lBQ0EsV0FBQSxRQUFBO0lBQ0EsU0FBQSxHQUFBLFFBQUE7SUFDQSxXQUFBLEdBQUEsUUFBQTtNQUNBLFFBQUEsU0FBQSxRQUFBO0lBQ0EsZUFBQSxNQUFBOztHQUVBOztFQUVBLFNBQUEsUUFBQTtHQUNBLElBQUEsVUFBQTtJQUNBLEtBQUEsWUFBQTtJQUNBLFdBQUE7SUFDQSxZQUFBLEdBQUEsUUFBQTtJQUNBLGtCQUFBLFFBQUEsaUJBQUE7SUFDQSxZQUFBLEdBQUEsUUFBQTtJQUNBLFlBQUEsR0FBQSxRQUFBO0lBQ0EsWUFBQSxFQUFBLE9BQUEsR0FBQSxRQUFBO0lBQ0EsWUFBQSxZQUFBLEdBQUEsUUFBQTtNQUNBLFlBQUEsR0FBQSxRQUFBO0lBQ0EsWUFBQTtJQUNBLFNBQUEsR0FBQSxRQUFBO0lBQ0EsV0FBQSxHQUFBLFFBQUE7OztHQUdBLFFBQUEsT0FBQTtHQUNBLGVBQUEsUUFBQTtHQUNBOzs7QUMzS0EsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFdBQUEsb0JBQUE7O0NBRUEsa0JBQUEsVUFBQSxDQUFBLFVBQUEsYUFBQSxVQUFBLFVBQUEsWUFBQSxlQUFBLGdCQUFBLFdBQUEsV0FBQSxVQUFBOztDQUVBLFNBQUEsa0JBQUEsUUFBQSxXQUFBLFFBQUEsUUFBQSxVQUFBLGFBQUEsY0FBQSxTQUFBLFNBQUEsUUFBQSxPQUFBO0VBQ0EsSUFBQSxLQUFBO0VBQ0EsR0FBQSxlQUFBO0VBQ0EsR0FBQSxPQUFBO0VBQ0EsR0FBQSxnQkFBQTtFQUNBLEdBQUEsaUJBQUE7RUFDQSxHQUFBLFdBQUE7RUFDQSxHQUFBLGVBQUEsU0FBQSxPQUFBO0VBQ0EsSUFBQSxnQkFBQTtFQUNBLElBQUEsZUFBQTtFQUNBLElBQUE7RUFDQSxHQUFBLGVBQUEsR0FBQSxZQUFBLGFBQUEsS0FBQTs7RUFFQSxHQUFBLGNBQUE7R0FDQSxTQUFBO01BQ0EsUUFBQTtNQUNBLFNBQUEsRUFBQSxNQUFBLE1BQUEsTUFBQSxLQUFBO01BQ0EsU0FBQTtNQUNBLFNBQUEsQ0FBQSxPQUFBLFdBQUEsUUFBQTtNQUNBLFNBQUE7TUFDQSxVQUFBO01BQ0EsZUFBQTtNQUNBLFlBQUE7TUFDQSxXQUFBLE9BQUE7OztFQUdBLE9BQUEsa0JBQUEsUUFBQSxhQUFBLFFBQUEsU0FBQSxVQUFBO0dBQ0EsR0FBQSxZQUFBOzs7S0FHQSxRQUFBLE9BQUEsSUFBQTtTQUNBLFFBQUE7YUFDQSxLQUFBLE9BQUEsa0JBQUE7YUFDQSxLQUFBLE9BQUEsa0JBQUE7YUFDQSxNQUFBOztRQUVBLFNBQUE7OztFQUdBLFVBQUEsYUFBQSxRQUFBLGFBQUEsUUFBQSxTQUFBLFNBQUE7TUFDQSxHQUFBLFdBQUE7TUFDQSxHQUFBLGdCQUFBLFNBQUEsR0FBQTs7O0VBR0EsT0FBQSxhQUFBLFFBQUEsYUFBQSxRQUFBLFNBQUEsS0FBQTtHQUNBLEdBQUEsT0FBQTs7O0VBR0EsT0FBQSxRQUFBLFFBQUEsU0FBQSxLQUFBO0dBQ0EsZ0JBQUE7R0FDQSxHQUFBLFlBQUEsT0FBQSxFQUFBLE1BQUEsS0FBQTtHQUNBLEdBQUEsWUFBQSxPQUFBLEdBQUEsWUFBQSxLQUFBOzs7RUFHQSxTQUFBLGVBQUE7R0FDQSxJQUFBLEdBQUEsWUFBQSxTQUFBO0lBQ0EsT0FBQSxrQkFBQSxHQUFBLFlBQUEsU0FBQSxLQUFBLFNBQUEsSUFBQTtXQUNBLEdBQUEsT0FBQSxNQUFBLElBQUE7V0FDQSxHQUFBLE9BQUEsTUFBQSxJQUFBO2NBQ0EsR0FBQSxRQUFBLGFBQUE7ZUFDQSxLQUFBLElBQUE7a0JBQ0EsS0FBQSxJQUFBO2tCQUNBLE9BQUE7a0JBQ0EsU0FBQTs7O2NBR0EsSUFBQSxLQUFBO2VBQ0EsR0FBQSxVQUFBLFFBQUEsU0FBQSxTQUFBO2dCQUNBLElBQUEsSUFBQSxPQUFBLGFBQUEsVUFBQSxFQUFBLE1BQUEsSUFBQSxJQUFBLE1BQUEsSUFBQTtnQkFDQSxJQUFBLGdCQUFBLEVBQUEsT0FBQSxTQUFBLFNBQUEsS0FBQSxFQUFBLE1BQUEsSUFBQSxHQUFBLE9BQUEsSUFBQSxLQUFBLE9BQUEsRUFBQSxNQUFBLFNBQUEsS0FBQSxNQUFBLFNBQUEsT0FBQSxJQUFBO2dCQUNBLGNBQUEsTUFBQSxLQUFBLFVBQUE7O2VBRUE7O0lBRUE7R0FDQTs7RUFFQSxTQUFBLGFBQUEsT0FBQTtNQUNBLEdBQUEsZ0JBQUEsT0FBQTtNQUNBOztFQUVBLFNBQUEsVUFBQSxLQUFBO0dBQ0EsSUFBQSxZQUFBO0dBQ0EsYUFBQSxLQUFBO0dBQ0EsR0FBQSxlQUFBLEVBQUEsTUFBQSxjQUFBLGFBQUEsS0FBQTtHQUNBOztFQUVBLFNBQUEsZUFBQSxJQUFBO0dBQ0EsSUFBQSxZQUFBO0dBQ0EsYUFBQSxPQUFBLEVBQUEsTUFBQSxjQUFBLE9BQUEsUUFBQSxJQUFBLEtBQUE7R0FDQSxHQUFBLGVBQUEsRUFBQSxNQUFBLGNBQUEsYUFBQSxLQUFBO0dBQ0EsR0FBQSxlQUFBLEdBQUEsWUFBQSxhQUFBLEtBQUE7R0FDQTs7RUFFQSxTQUFBLE1BQUE7R0FDQSxJQUFBO0dBQ0EsSUFBQSxZQUFBLEVBQUEsT0FBQSxFQUFBLE1BQUEsY0FBQTtHQUNBLElBQUEsV0FBQSxHQUFBLFNBQUEsT0FBQSxTQUFBLFFBQUEsRUFBQSxPQUFBLFNBQUEsUUFBQSxPQUFBLFFBQUEsQ0FBQTs7R0FFQSxjQUFBLFFBQUEsU0FBQSxJQUFBLEdBQUE7SUFDQSxJQUFBLElBQUEsUUFBQSxHQUFBLFlBQUEsS0FBQTtLQUNBLGNBQUEsY0FBQTtLQUNBOzs7R0FHQSxRQUFBLE9BQUE7SUFDQSxrQkFBQSxRQUFBLGtCQUFBO0lBQ0EsY0FBQSxHQUFBLFlBQUEsUUFBQTtJQUNBLGFBQUEsR0FBQSxZQUFBO0lBQ0EsY0FBQSxHQUFBLFlBQUEsU0FBQTtJQUNBLGNBQUEsRUFBQSxPQUFBLEVBQUEsTUFBQSxjQUFBO0lBQ0EsY0FBQSxFQUFBLE1BQUEsVUFBQTtNQUNBLGNBQUEsRUFBQSxNQUFBLGFBQUE7SUFDQSxhQUFBLFFBQUE7SUFDQSxXQUFBLEdBQUEsWUFBQTtJQUNBLFlBQUEsR0FBQSxZQUFBO0lBQ0EsYUFBQSxHQUFBLFlBQUE7SUFDQSxjQUFBLFdBQUE7SUFDQSxjQUFBLFNBQUEsT0FBQTtJQUNBLGVBQUEsU0FBQSxPQUFBO0lBQ0EsZUFBQTtLQUNBLE9BQUEsR0FBQSxZQUFBLFNBQUE7S0FDQSxPQUFBLEdBQUEsWUFBQSxTQUFBO0tBQ0EsVUFBQSxHQUFBLFlBQUEsU0FBQSxXQUFBOztJQUVBLGlCQUFBO01BQ0EsUUFBQSxVQUFBO0lBQ0EsUUFBQSxRQUFBOztHQUVBOzs7QUM5SUEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFFBQUEsV0FBQTs7Q0FFQSxRQUFBLFVBQUEsQ0FBQTs7Q0FFQSxTQUFBLFNBQUEsUUFBQTtFQUNBLElBQUEsTUFBQTtFQUNBLElBQUEsVUFBQTtFQUNBLElBQUEsWUFBQTtFQUNBLElBQUEsYUFBQTtFQUNBLElBQUEsb0JBQUE7RUFDQSxJQUFBLGVBQUE7RUFDQSxJQUFBLGFBQUE7RUFDQSxJQUFBLFdBQUE7RUFDQSxJQUFBLFdBQUE7RUFDQSxJQUFBLFdBQUE7O0VBRUEsU0FBQSxNQUFBLE9BQUEsTUFBQSxhQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEsc0JBQUEsUUFBQSxXQUFBLE9BQUEsVUFBQTtHQUNBOztFQUVBLFNBQUEsVUFBQTtHQUNBLE9BQUEsTUFBQSxJQUFBO0dBQ0E7O0VBRUEsU0FBQSxrQkFBQSxJQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEsOEJBQUEsSUFBQSxTQUFBLGtCQUFBLElBQUEsY0FBQSxZQUFBLElBQUE7R0FDQTs7RUFFQSxTQUFBLGFBQUEsT0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLHdCQUFBO0dBQ0E7O0VBRUEsU0FBQSxXQUFBLFFBQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSxnQkFBQTtHQUNBOztFQUVBLFNBQUEsT0FBQSxVQUFBO0dBQ0EsT0FBQSxNQUFBLEtBQUEsY0FBQTtHQUNBOztFQUVBLFNBQUEsV0FBQSxPQUFBO0dBQ0EsT0FBQSxNQUFBLEtBQUEsZ0JBQUE7R0FDQTs7RUFFQSxTQUFBLE9BQUEsYUFBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLGdCQUFBLGFBQUEsU0FBQTtHQUNBOztFQUVBLFNBQUEsVUFBQSxLQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEseUJBQUEsS0FBQSxJQUFBO0dBQ0E7OztBQzNEQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsV0FBQSxzQkFBQTs7RUFFQSxtQkFBQSxXQUFBLEVBQUEsU0FBQSxnQkFBQSxhQUFBLFVBQUEsYUFBQSxXQUFBLGFBQUE7O0VBRUEsU0FBQSxvQkFBQTtHQUNBLElBQUEsS0FBQTtHQUNBLEdBQUEsY0FBQTtHQUNBLEdBQUEsVUFBQTtHQUNBLEdBQUEsWUFBQSxhQUFBLFdBQUE7O0dBRUEsVUFBQSxHQUFBLFNBQUEsU0FBQSxHQUFBO0lBQ0EsS0FBQSxRQUFBLE9BQUEsT0FBQSxHQUFBLFNBQUE7S0FDQSxJQUFBLFFBQUEsUUFBQSxLQUFBO0tBQ0EsR0FBQSxZQUFBLEtBQUE7S0FDQTtJQUNBLEdBQUEsVUFBQSxVQUFBLEdBQUE7SUFDQSxHQUFBLGdCQUFBLFdBQUEsR0FBQTs7O0dBR0EsVUFBQSxHQUFBLFlBQUEsU0FBQSxLQUFBO0lBQ0EsTUFBQSxZQUFBLFFBQUEsUUFBQSxTQUFBLFlBQUE7S0FDQSxHQUFBLGNBQUE7S0FDQSxHQUFBLFlBQUEsUUFBQSxTQUFBLEdBQUE7TUFDQSxHQUFBLFlBQUEsT0FBQSxTQUFBLEdBQUEsWUFBQTs7S0FFQSxHQUFBLFVBQUEsVUFBQSxHQUFBO0tBQ0EsR0FBQSxnQkFBQSxXQUFBLEdBQUE7Ozs7O0dBS0EsVUFBQSxHQUFBLFdBQUEsU0FBQSxLQUFBO0lBQ0EsTUFBQSxZQUFBLFFBQUEsUUFBQSxTQUFBLFlBQUE7S0FDQSxHQUFBLGdCQUFBO0tBQ0EsR0FBQSxhQUFBLFVBQUEsR0FBQTtLQUNBLEdBQUEsZ0JBQUEsV0FBQSxHQUFBOzs7OztHQUtBLElBQUEsU0FBQSxhQUFBO0dBQ0EsUUFBQSxhQUFBLFFBQUEsUUFBQSxTQUFBLE1BQUE7SUFDQSxNQUFBLE9BQUEsU0FBQSxHQUFBLFlBQUEsT0FBQSxHQUFBLFlBQUE7SUFDQSxHQUFBLGFBQUE7SUFDQSxHQUFBLFdBQUE7S0FDQSxjQUFBO0tBQ0EsYUFBQSxDQUFBLE1BQUEsTUFBQSxNQUFBO0tBQ0EsVUFBQSxHQUFBLFdBQUE7S0FDQSxXQUFBLEdBQUEsV0FBQSxRQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsRUFBQSxLQUFBLEVBQUEsTUFBQSxHQUFBLFdBQUEsTUFBQSxFQUFBLEdBQUEsV0FBQSxNQUFBLEVBQUE7Ozs7R0FJQSxNQUFBLFlBQUEsUUFBQSxRQUFBLFNBQUEsWUFBQTtJQUNBLElBQUEsYUFBQTtLQUNBLEdBQUEsY0FBQTtLQUNBLEdBQUEsWUFBQSxRQUFBLFNBQUEsR0FBQTtNQUNBLEdBQUEsWUFBQSxPQUFBLFNBQUEsR0FBQSxZQUFBOztLQUVBLEdBQUEsVUFBQSxVQUFBLEdBQUE7S0FDQSxHQUFBLGVBQUEsV0FBQSxHQUFBOztXQUVBO0tBQ0E7S0FDQTs7OztHQUlBLElBQUEsYUFBQSxTQUFBLFlBQUE7SUFDQSxRQUFBLEVBQUEsUUFBQSxZQUFBLFNBQUEsR0FBQTtNQUNBLE9BQUEsR0FBQTs7OztHQUlBLElBQUEsYUFBQSxTQUFBLFlBQUE7TUFDQSxJQUFBLGNBQUEsRUFBQSxNQUFBLEdBQUEsSUFBQSxZQUFBO1dBQ0EsT0FBQSxFQUFBLE1BQUEsR0FBQSxJQUFBLFlBQUE7ZUFDQSxPQUFBLEVBQUEsY0FBQSxHQUFBLFVBQUEsSUFBQSxNQUFBOzs7O0lBSUEsS0FBQSxhQUFBO0tBQ0EsS0FBQSxJQUFBLElBQUEsWUFBQSxTQUFBLEdBQUEsS0FBQSxHQUFBLEtBQUE7TUFDQSxJQUFBLGNBQUE7TUFDQSxJQUFBLElBQUE7TUFDQSxJQUFBLEtBQUE7TUFDQSxJQUFBLElBQUEsRUFBQSxRQUFBLFlBQUEsR0FBQSxXQUFBLFlBQUEsR0FBQTtNQUNBLEdBQUEsWUFBQSxJQUFBLEVBQUEsUUFBQSxZQUFBLEdBQUEsUUFBQSxZQUFBLEdBQUEsU0FBQSxJQUFBLEVBQUEsUUFBQSxZQUFBLEdBQUEsT0FBQSxZQUFBLEdBQUE7TUFDQSxZQUFBLEdBQUEsR0FBQSxXQUFBO01BQ0EsWUFBQSxHQUFBLEdBQUEsZUFBQSxZQUFBLEdBQUEsUUFBQTtNQUNBLElBQUEsU0FBQTtNQUNBLE9BQUEsS0FBQSxZQUFBLEdBQUEsU0FBQSxZQUFBLEdBQUE7TUFDQSxPQUFBLFNBQUEsWUFBQSxHQUFBLFFBQUE7TUFDQSxPQUFBLFFBQUEsWUFBQSxHQUFBO01BQ0EsWUFBQSxHQUFBLEdBQUEsSUFBQSxLQUFBO01BQ0E7O0lBRUEsT0FBQTs7O0dBR0EsR0FBQSxJQUFBLFlBQUEsVUFBQSxPQUFBO1VBQ0EsVUFBQTs7OztBQzdHQSxDQUFBLFVBQUE7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFdBQUEsc0JBQUE7O0NBRUEsb0JBQUEsVUFBQSxDQUFBLGFBQUEsYUFBQSxXQUFBO0NBQ0EsU0FBQSxvQkFBQSxXQUFBLFdBQUEsU0FBQSxVQUFBO0VBQ0EsSUFBQSxLQUFBOztFQUVBLFVBQUEsYUFBQSxRQUFBLGFBQUEsUUFBQSxTQUFBLFNBQUE7R0FDQSxPQUFBLEdBQUEsV0FBQTs7O0VBR0EsUUFBQSxrQkFBQSxRQUFBLFNBQUEsTUFBQTtHQUNBLE9BQUEsR0FBQSxRQUFBOzs7RUFHQSxVQUFBLEdBQUEsWUFBQSxTQUFBLEtBQUE7R0FDQSxPQUFBLEdBQUEsTUFBQSxLQUFBOzs7RUFHQSxVQUFBLEdBQUEsaUJBQUEsU0FBQSxlQUFBO0dBQ0EsR0FBQSxRQUFBLEdBQUEsTUFBQSxPQUFBLFNBQUEsTUFBQTtJQUNBLE9BQUEsS0FBQSxZQUFBLGVBQUE7Ozs7RUFJQSxVQUFBLEdBQUEsYUFBQSxTQUFBLFdBQUE7R0FDQSxHQUFBLFFBQUEsR0FBQSxNQUFBLE9BQUEsU0FBQSxNQUFBO0lBQ0EsT0FBQSxLQUFBLFlBQUEsV0FBQTs7OztFQUlBLEdBQUEsSUFBQSxZQUFBLFVBQUEsT0FBQTtTQUNBLE9BQUEsVUFBQTs7OztBQ3ZDQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsV0FBQSx3QkFBQTs7Q0FFQSxzQkFBQSxVQUFBLENBQUEsV0FBQTs7Q0FFQSxTQUFBLHVCQUFBLFVBQUEsV0FBQTtFQUNBLElBQUEsS0FBQTtFQUNBLElBQUEsU0FBQSxRQUFBOztFQUVBLFVBQUEsWUFBQSxRQUFBLFFBQUEsU0FBQSxPQUFBO0dBQ0EsR0FBQSxXQUFBO0dBQ0EsR0FBQSxlQUFBLEdBQUEsT0FBQSxRQUFBLE9BQUEsU0FBQSxRQUFBO0lBQ0EsT0FBQSxPQUFBLFVBQUE7OztFQUdBOztBQ3ZCQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsV0FBQSw0QkFBQTs7Q0FFQSwwQkFBQSxVQUFBLENBQUEsYUFBQSxlQUFBLGFBQUEsYUFBQSxXQUFBLFdBQUEsVUFBQTs7Q0FFQSxTQUFBLDBCQUFBLFdBQUEsYUFBQSxXQUFBLFdBQUEsU0FBQSxTQUFBLFFBQUEsYUFBQTtFQUNBLElBQUEsS0FBQTtFQUNBLElBQUEsVUFBQSxRQUFBO0VBQ0EsR0FBQSxTQUFBO0VBQ0EsR0FBQSxRQUFBOztFQUVBLFVBQUEsWUFBQSxRQUFBLFFBQUEsU0FBQSxPQUFBO0dBQ0EsR0FBQSxTQUFBO0dBQ0EsR0FBQSxXQUFBLE9BQUEsT0FBQSxLQUFBLE1BQUEsUUFBQSxLQUFBO0dBQ0EsSUFBQSxVQUFBLEVBQUEsTUFBQSxPQUFBLFFBQUEsT0FBQSxTQUFBLFFBQUEsRUFBQSxPQUFBLE9BQUEsUUFBQSxRQUFBO0dBQ0EsR0FBQSxPQUFBLGlCQUFBLE9BQUE7R0FDQSxHQUFBLE9BQUEsa0JBQUE7R0FDQSxHQUFBLGNBQUE7R0FDQSxFQUFBLElBQUEsR0FBQSxPQUFBLFFBQUEsU0FBQSxPQUFBO0lBQ0EsT0FBQSxXQUFBLEVBQUEsTUFBQSxFQUFBLEtBQUEsTUFBQSxHQUFBLE9BQUEsUUFBQSxPQUFBLEdBQUE7SUFDQSxPQUFBLFVBQUEsT0FBQSxRQUFBLE9BQUE7Ozs7RUFJQSxTQUFBLE1BQUEsT0FBQTtHQUNBLE9BQUEsV0FBQSxDQUFBLE9BQUE7R0FDQSxPQUFBLFlBQUEsQ0FBQSxPQUFBO0dBQ0EsT0FBQSxZQUFBLE9BQUEsUUFBQSxPQUFBO0dBQ0E7OztFQUdBLFNBQUEsTUFBQTtHQUNBLElBQUEsaUJBQUEsR0FBQSxPQUFBLFFBQUEsT0FBQSxTQUFBLFFBQUE7SUFDQSxPQUFBLE9BQUE7OztHQUdBLFVBQUEsY0FBQTtJQUNBLGFBQUEsR0FBQSxPQUFBO0lBQ0EsYUFBQSxHQUFBLE9BQUE7SUFDQSxlQUFBLGVBQUE7SUFDQSxpQkFBQSxHQUFBLE9BQUE7SUFDQSxZQUFBLEdBQUEsT0FBQTs7R0FFQSxRQUFBLFFBQUE7R0FDQTtFQUNBOzs7QUNyREEsQ0FBQSxVQUFBO0NBQ0E7Ozs7Ozs7Q0FPQTtHQUNBLE9BQUEsZ0JBQUE7R0FDQSxXQUFBLHFCQUFBOztDQUVBLG1CQUFBLFVBQUEsQ0FBQSxlQUFBLFNBQUEsVUFBQSxhQUFBLFVBQUE7Q0FDQSxTQUFBLG1CQUFBLGFBQUEsT0FBQSxRQUFBLFdBQUEsUUFBQSxRQUFBO0VBQ0EsSUFBQSxLQUFBO0VBQ0EsUUFBQSxNQUFBLFFBQUEsYUFBQSxRQUFBLFNBQUEsTUFBQTtHQUNBLEdBQUEsUUFBQTtHQUNBLFFBQUEsVUFBQSxHQUFBLE1BQUEsYUFBQSxRQUFBLEtBQUEsUUFBQSxTQUFBLE1BQUE7S0FDQSxPQUFBLEdBQUEsY0FBQTs7OztFQUlBLFVBQUEsYUFBQSxRQUFBLGFBQUEsUUFBQSxTQUFBLFNBQUE7TUFDQSxPQUFBLEdBQUEsYUFBQTs7O0VBR0EsT0FBQSxRQUFBLFFBQUEsU0FBQSxLQUFBO01BQ0EsT0FBQSxHQUFBLFdBQUE7OztFQUdBLEdBQUEsYUFBQSxZQUFBO0tBQ0EsSUFBQSxnQkFBQSxPQUFBLEtBQUE7T0FDQSxhQUFBO09BQ0EsWUFBQTtPQUNBLE1BQUE7T0FDQSxVQUFBO1FBQ0EsU0FBQSxVQUFBO1NBQ0EsT0FBQSxHQUFBLEtBQUE7O1FBRUEsYUFBQSxVQUFBO1NBQ0EsT0FBQSxHQUFBOztRQUVBLFdBQUEsVUFBQTtTQUNBLE9BQUEsR0FBQTs7UUFFQSxRQUFBLFVBQUE7U0FDQSxPQUFBOztRQUVBLGNBQUEsVUFBQTtTQUNBLE9BQUE7Ozs7OztHQU1BLEdBQUEsV0FBQSxVQUFBO0lBQ0EsSUFBQSxnQkFBQSxPQUFBLEtBQUE7T0FDQSxhQUFBO09BQ0EsWUFBQTtPQUNBLE1BQUE7T0FDQSxVQUFBO1FBQ0EsU0FBQSxVQUFBO1NBQ0EsT0FBQSxHQUFBLEtBQUEsR0FBQSxNQUFBLGFBQUEsUUFBQTs7UUFFQSxhQUFBLFVBQUE7U0FDQSxPQUFBLEdBQUE7O1FBRUEsV0FBQSxVQUFBO1NBQ0EsS0FBQSxJQUFBLElBQUEsR0FBQSxTQUFBLFNBQUEsR0FBQSxLQUFBLEdBQUEsS0FBQTtVQUNBLEtBQUEsSUFBQSxJQUFBLEdBQUEsWUFBQSxLQUFBLFNBQUEsR0FBQSxLQUFBLEdBQUEsS0FBQTtXQUNBLEtBQUEsR0FBQSxTQUFBLEdBQUEsY0FBQSxHQUFBLFlBQUEsS0FBQSxHQUFBLFlBQUE7WUFDQSxPQUFBLEdBQUEsU0FBQSxHQUFBLFlBQUE7WUFDQTtXQUNBO1VBQ0E7U0FDQSxPQUFBLEdBQUE7O1FBRUEsUUFBQSxVQUFBO1NBQ0EsT0FBQTs7UUFFQSxjQUFBLFVBQUE7U0FDQSxPQUFBLEdBQUE7Ozs7Ozs7QUNqRkEsQ0FBQSxVQUFBOzs7Ozs7Q0FNQTtHQUNBLE9BQUEsZ0JBQUE7R0FDQSxXQUFBLHFCQUFBOztDQUVBLG1CQUFBLFVBQUEsQ0FBQSxhQUFBLGdCQUFBLGFBQUEsV0FBQTtDQUNBLFNBQUEsbUJBQUEsV0FBQSxjQUFBLFdBQUEsU0FBQSxHQUFBO0VBQ0EsSUFBQSxLQUFBO0VBQ0EsSUFBQSxXQUFBLGFBQUE7O0VBRUEsVUFBQSxvQkFBQSxVQUFBLFFBQUEsU0FBQSxPQUFBO0dBQ0EsR0FBQSxTQUFBO0dBQ0EsR0FBQSxjQUFBLEdBQUEsT0FBQSxRQUFBLE9BQUEsU0FBQSxRQUFBO0lBQ0EsT0FBQSxPQUFBLFVBQUE7Ozs7OztBQ2xCQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsUUFBQSxTQUFBOztDQUVBLE9BQUEsVUFBQSxDQUFBLEtBQUE7O0NBRUEsU0FBQSxRQUFBO0VBQ0EsSUFBQSxNQUFBO0VBQ0EsSUFBQSw0QkFBQSxXQUFBO1NBQ0EsSUFBQSxXQUFBLEdBQUE7U0FDQSxVQUFBLFlBQUE7YUFDQSxTQUFBLFVBQUEsRUFBQSxTQUFBLFFBQUEsU0FBQTthQUNBLFNBQUEsT0FBQSxFQUFBLFNBQUEsUUFBQTs7U0FFQSxPQUFBLFNBQUE7OztLQUdBLElBQUEsb0JBQUEsU0FBQSxRQUFBO01BQ0EsSUFBQSxXQUFBLEdBQUE7O01BRUEsSUFBQSxXQUFBLElBQUEsT0FBQSxLQUFBO01BQ0EsSUFBQSxVQUFBO1FBQ0EsU0FBQSxRQUFBLEVBQUEsV0FBQSxXQUFBLFVBQUEsU0FBQSxRQUFBO1dBQ0EsSUFBQSxVQUFBLE9BQUEsS0FBQSxlQUFBLElBQUE7Y0FDQSxTQUFBLFFBQUEsUUFBQSxHQUFBLFNBQUE7O2dCQUVBO2NBQ0EsU0FBQSxTQUFBLHVCQUFBOzs7O0tBSUEsT0FBQSxTQUFBOzs7S0FHQSxJQUFBLG9CQUFBLFNBQUEsTUFBQTtNQUNBLE9BQUEsTUFBQSxJQUFBLDZCQUFBOzs7S0FHQSxJQUFBLGNBQUEsVUFBQSxXQUFBLFFBQUE7O01BRUEsSUFBQSxPQUFBLE9BQUEsVUFBQSxXQUFBLGFBQUE7S0FDQSxPQUFBLFVBQUEsUUFBQSxXQUFBO09BQ0EsT0FBQSxNQUFBLEtBQUEsS0FBQTs7O0dBR0EsSUFBQSxJQUFBO0dBQ0EsSUFBQSxPQUFBLENBQUEsT0FBQSxNQUFBLFNBQUEsTUFBQTtHQUNBLElBQUEsT0FBQSxDQUFBLE9BQUEsTUFBQSxTQUFBLE1BQUE7R0FDQSxJQUFBLElBQUEsS0FBQSxJQUFBLEtBQUEsS0FBQSxLQUFBLElBQUEsS0FBQTtXQUNBLEtBQUEsSUFBQSxTQUFBLElBQUEsV0FBQSxLQUFBLElBQUEsT0FBQSxJQUFBO1dBQ0EsS0FBQSxJQUFBLEtBQUEsS0FBQSxLQUFBLElBQUEsS0FBQTtHQUNBLElBQUEsSUFBQSxJQUFBLEtBQUEsTUFBQSxLQUFBLEtBQUEsSUFBQSxLQUFBLEtBQUEsRUFBQTtHQUNBLE9BQUEsSUFBQTs7O0tBR0EsSUFBQSxrQkFBQSxVQUFBO01BQ0EsT0FBQSxFQUFBLE1BQUEsYUFBQSxPQUFBLGFBQUEsVUFBQTs7RUFFQTs7QUNqRUEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQSxXQUFBO0dBQ0EsV0FBQSxxQkFBQTs7Q0FFQSxtQkFBQSxVQUFBLENBQUEsZUFBQTtDQUNBLFNBQUEsbUJBQUEsYUFBQSxPQUFBO0VBQ0EsSUFBQSxLQUFBOztFQUVBLE9BQUEsNEJBQUEsS0FBQSxTQUFBLE1BQUE7U0FDQSxHQUFBLE9BQUEsTUFBQSxNQUFBO1NBQ0EsR0FBQSxPQUFBLE1BQUEsTUFBQTtTQUNBLEdBQUEsT0FBQSxPQUFBOzs7S0FHQSxRQUFBLE9BQUEsSUFBQTtTQUNBLFFBQUE7YUFDQSxLQUFBO2FBQ0EsS0FBQTthQUNBLE1BQUE7O1NBRUEsVUFBQTthQUNBLE1BQUE7Ozs7S0FJQSxZQUFBLFNBQUEsS0FBQSxTQUFBLEtBQUE7T0FDQSxJQUFBLGFBQUEsR0FBQSxTQUFBLEtBQUE7T0FDQSxJQUFBLEdBQUEsZ0JBQUEsVUFBQSxHQUFBO1NBQ0EsSUFBQSxRQUFBLEVBQUE7U0FDQSxXQUFBLFNBQUE7O1NBRUEsbUJBQUEsS0FBQSxNQUFBOzs7Ozs7QUN0Q0EsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFdBQUEsK0JBQUE7O0NBRUEsNkJBQUEsVUFBQSxDQUFBLFdBQUEsYUFBQSxVQUFBO0NBQ0EsU0FBQSw2QkFBQSxTQUFBLFdBQUEsUUFBQSxlQUFBO0VBQ0EsSUFBQSxLQUFBO0VBQ0EsR0FBQSxPQUFBO0VBQ0EsR0FBQSxPQUFBO0VBQ0EsR0FBQSxTQUFBOztFQUVBLFNBQUEsTUFBQTtHQUNBLElBQUEsRUFBQSxRQUFBLEdBQUEsT0FBQTtJQUNBLFFBQUEsSUFBQTtTQUNBO0lBQ0EsSUFBQSxDQUFBLEdBQUEsS0FBQSxTQUFBO0tBQ0EsUUFBQSxJQUFBO0tBQ0EsSUFBQSxDQUFBLEdBQUEsS0FBQSxVQUFBO01BQ0EsUUFBQSxJQUFBO01BQ0E7V0FDQSxJQUFBLENBQUEsR0FBQSxLQUFBLFVBQUE7S0FDQSxRQUFBLElBQUE7U0FDQTtLQUNBLFFBQUEsU0FBQSxHQUFBO0tBQ0EsVUFBQSxXQUFBLE9BQUE7S0FDQSxlQUFBLE1BQUEsR0FBQTtLQUNBO0lBQ0E7R0FDQTs7RUFFQSxTQUFBLFFBQUE7R0FDQSxlQUFBLFFBQUE7R0FDQTtFQUNBOztBQ3hDQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7OztDQU9BO0dBQ0EsT0FBQTtHQUNBLFdBQUEsdUJBQUE7O0NBRUEscUJBQUEsVUFBQSxDQUFBLGFBQUEsYUFBQSxnQkFBQSxVQUFBLFVBQUEsVUFBQTs7Q0FFQSxTQUFBLHNCQUFBLFdBQUEsV0FBQSxjQUFBLFFBQUEsUUFBQSxRQUFBLFFBQUE7RUFDQSxJQUFBLEtBQUE7O0VBRUEsR0FBQSxTQUFBO0VBQ0EsR0FBQSxnQkFBQTtFQUNBLElBQUEsZ0JBQUE7RUFDQSxHQUFBLGNBQUEsUUFBQTtFQUNBLEdBQUEsYUFBQTtFQUNBLEdBQUEsT0FBQTtFQUNBLEdBQUEsZUFBQTtFQUNBLEdBQUEsU0FBQTtFQUNBLEdBQUEsa0JBQUE7RUFDQSxHQUFBLGNBQUE7RUFDQSxHQUFBLGtCQUFBOztFQUVBLElBQUEsYUFBQSxVQUFBO0dBQ0EsVUFBQSxhQUFBLGFBQUEsUUFBQSxRQUFBLFNBQUEsUUFBQTtJQUNBLEdBQUEsVUFBQTtJQUNBLEdBQUEsUUFBQSxRQUFBLFNBQUEsT0FBQTtLQUNBLE9BQUEsY0FBQSxPQUFBLFNBQUEsT0FBQSxZQUFBOzs7OztFQUtBOztFQUVBLElBQUEsb0JBQUEsU0FBQSxNQUFBO0dBQ0EsUUFBQSxXQUFBLGNBQUEsTUFBQSxRQUFBLFNBQUEsS0FBQTtJQUNBLFVBQUEsV0FBQSxLQUFBO0lBQ0EsR0FBQSxXQUFBO0lBQ0E7Ozs7RUFJQSxJQUFBLGVBQUEsU0FBQSxNQUFBO0dBQ0EsR0FBQSxnQkFBQTtHQUNBLFVBQUEsYUFBQSxlQUFBLFFBQUEsVUFBQTtJQUNBLEdBQUEsZ0JBQUE7O0dBRUEsR0FBQSxXQUFBO0dBQ0E7OztFQUdBLElBQUEsWUFBQSxTQUFBLE1BQUE7R0FDQSxHQUFBLGdCQUFBO0dBQ0EsR0FBQSxXQUFBOzs7RUFHQSxTQUFBLE1BQUE7R0FDQSxJQUFBLFlBQUEsRUFBQSxPQUFBLEdBQUEsUUFBQSxPQUFBLFNBQUEsUUFBQSxFQUFBLE9BQUEsT0FBQSxRQUFBLFVBQUE7R0FDQSxVQUFBLE9BQUE7SUFDQSxTQUFBLGFBQUE7SUFDQSxVQUFBLEVBQUEsT0FBQSxHQUFBLFVBQUE7SUFDQSxZQUFBO0lBQ0EsV0FBQSxVQUFBO0lBQ0EsZ0JBQUEsVUFBQTtNQUNBLFFBQUEsVUFBQTtJQUNBLFFBQUEsUUFBQTs7R0FFQTs7RUFFQSxTQUFBLGNBQUE7R0FDQSxJQUFBLGdCQUFBLE9BQUEsS0FBQTtPQUNBLGFBQUE7T0FDQSxZQUFBO09BQ0EsTUFBQTtPQUNBLFVBQUE7UUFDQSxTQUFBLFVBQUE7U0FDQSxPQUFBLGFBQUE7O1FBRUEsU0FBQSxVQUFBO1NBQ0EsT0FBQSxFQUFBLGNBQUE7Ozs7O01BS0EsY0FBQSxPQUFBLEtBQUEsU0FBQSxPQUFBO09BQ0EsSUFBQSxRQUFBO1FBQ0E7O09BRUEsR0FBQSxPQUFBLEtBQUEsRUFBQSxPQUFBLGFBQUEsS0FBQSxhQUFBLE9BQUEsT0FBQSxVQUFBLE9BQUE7O0dBRUE7O0VBRUEsU0FBQSxPQUFBLE9BQUE7R0FDQSxJQUFBLFlBQUE7R0FDQSxJQUFBLGdCQUFBLE9BQUEsS0FBQTtPQUNBLGFBQUE7T0FDQSxZQUFBO09BQ0EsTUFBQTtPQUNBLFVBQUE7UUFDQSxTQUFBLFVBQUE7U0FDQSxPQUFBLGFBQUE7O1FBRUEsU0FBQSxVQUFBO1NBQ0EsT0FBQTtVQUNBLFdBQUEsT0FBQTtVQUNBLEtBQUEsT0FBQTtVQUNBLE9BQUEsT0FBQTtVQUNBLFFBQUEsT0FBQTtVQUNBLFdBQUEsT0FBQTtVQUNBLFFBQUEsT0FBQTtVQUNBLFlBQUEsT0FBQTtVQUNBLGNBQUEsT0FBQSxZQUFBLFlBQUEsS0FBQSxPQUFBLFlBQUE7Ozs7OztNQU1BLGNBQUEsT0FBQSxLQUFBLFNBQUEsT0FBQTtPQUNBO09BQ0EsR0FBQSxPQUFBLEtBQUEsRUFBQSxPQUFBLFVBQUEsTUFBQSxVQUFBLE9BQUE7O0dBRUE7O0VBRUEsU0FBQSxnQkFBQSxPQUFBO0dBQ0EsSUFBQSxRQUFBLEdBQUEsUUFBQSxPQUFBLFNBQUEsUUFBQTtJQUNBLE9BQUEsT0FBQTs7O0dBR0EsSUFBQSxNQUFBLFNBQUEsSUFBQTtJQUNBLElBQUEsZ0JBQUEsT0FBQSxLQUFBO1FBQ0EsYUFBQTtRQUNBLFlBQUE7UUFDQSxNQUFBO1FBQ0EsVUFBQTtTQUNBLFNBQUEsVUFBQTtVQUNBLE9BQUE7Ozs7O0lBS0EsY0FBQSxPQUFBLEtBQUEsU0FBQSxPQUFBO0tBQ0E7S0FDQSxHQUFBLE9BQUEsS0FBQSxFQUFBLE9BQUEsU0FBQSxNQUFBLE9BQUEsT0FBQTs7VUFFQTtJQUNBLEdBQUEsT0FBQSxLQUFBLEVBQUEsT0FBQSxZQUFBLE1BQUEsU0FBQSxPQUFBLE9BQUE7SUFDQTtHQUNBOztFQUVBLFNBQUEsWUFBQSxPQUFBO0dBQ0EsR0FBQSxPQUFBLEtBQUE7SUFDQSxPQUFBO0lBQ0EsS0FBQSxhQUFBLE9BQUE7SUFDQSxVQUFBO0lBQ0EsVUFBQTs7R0FFQSxnQkFBQTtHQUNBOztFQUVBLFNBQUEsZ0JBQUEsT0FBQTtHQUNBLElBQUEsUUFBQSxHQUFBLFFBQUEsT0FBQSxTQUFBLFFBQUE7SUFDQSxPQUFBLE9BQUE7O0dBRUEsSUFBQSxNQUFBLFVBQUEsSUFBQTtJQUNBLEdBQUEsT0FBQSxLQUFBO0tBQ0EsT0FBQTtLQUNBLEtBQUEsc0JBQUEsT0FBQSxPQUFBOztTQUVBO0lBQ0EsR0FBQSxPQUFBLEtBQUE7S0FDQSxPQUFBO0tBQ0EsS0FBQSxZQUFBLE9BQUEsT0FBQTtLQUNBLFVBQUE7S0FDQSxTQUFBOztJQUVBLGdCQUFBO0lBQ0E7R0FDQTs7RUFFQSxTQUFBLFdBQUEsTUFBQTtHQUNBLEdBQUEsT0FBQSxPQUFBLE1BQUE7R0FDQTs7O0FDM0xBLENBQUEsVUFBQTtDQUNBOzs7Ozs7O0NBT0E7R0FDQSxPQUFBLGNBQUE7R0FDQSxXQUFBLHdCQUFBOztDQUVBLHNCQUFBLFVBQUEsRUFBQSxZQUFBO0NBQ0EsU0FBQSx1QkFBQSxZQUFBLGNBQUE7RUFDQSxJQUFBLEtBQUE7O0VBRUEsR0FBQSxTQUFBLGFBQUE7RUFDQSxVQUFBLGFBQUEsYUFBQSxRQUFBLFFBQUEsU0FBQSxRQUFBO0dBQ0EsR0FBQSxVQUFBO0dBQ0EsR0FBQSxRQUFBLFFBQUEsU0FBQSxPQUFBO0lBQ0EsT0FBQSxPQUFBLGNBQUEsT0FBQSxTQUFBLE9BQUEsWUFBQTs7O0VBR0E7O0FDdkJBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxXQUFBLHdCQUFBOztDQUVBLHNCQUFBLFVBQUEsQ0FBQSxVQUFBLGFBQUEsa0JBQUEsVUFBQSxTQUFBLGFBQUE7Q0FDQSxTQUFBLHNCQUFBLFFBQUEsV0FBQSxnQkFBQSxRQUFBLE9BQUEsV0FBQSxRQUFBO0VBQ0EsSUFBQSxLQUFBO0VBQ0EsR0FBQSxTQUFBO0VBQ0EsR0FBQSxTQUFBLEVBQUEsT0FBQSxPQUFBO0VBQ0EsR0FBQSxTQUFBO0VBQ0EsR0FBQSxTQUFBO0VBQ0EsR0FBQSxTQUFBOztFQUVBLEdBQUEsU0FBQTtHQUNBLFNBQUEsT0FBQSxPQUFBO0dBQ0EsVUFBQSxPQUFBLFFBQUE7R0FDQSxZQUFBO0dBQ0EsWUFBQSxDQUFBLE9BQUEsTUFBQSxNQUFBLE1BQUEsTUFBQTtHQUNBLFlBQUEsT0FBQSxVQUFBO0dBQ0EsY0FBQSxPQUFBLGdCQUFBO0dBQ0EsYUFBQSxPQUFBLGNBQUE7R0FDQSxZQUFBO0dBQ0EsWUFBQSxDQUFBLE1BQUEsT0FBQSxLQUFBLE1BQUEsUUFBQTtHQUNBLFVBQUEsUUFBQTtHQUNBLFlBQUEsQ0FBQSxXQUFBOzs7RUFHQSxVQUFBLGFBQUEsUUFBQSxhQUFBLFFBQUEsU0FBQSxTQUFBO0dBQ0EsR0FBQSxXQUFBO0dBQ0EsSUFBQSxDQUFBLEdBQUEsT0FBQTtJQUNBLElBQUEsYUFBQTtJQUNBLEtBQUEsSUFBQSxJQUFBLFNBQUEsU0FBQSxHQUFBLEtBQUEsR0FBQSxLQUFBO0tBQ0EsV0FBQSxLQUFBLFNBQUEsR0FBQTtLQUNBO0lBQ0EsR0FBQSxPQUFBLFdBQUE7SUFDQTs7O0VBR0EsSUFBQSxrQkFBQSxTQUFBLE9BQUE7R0FDQSxJQUFBLFVBQUEsT0FBQSxNQUFBLElBQUEsTUFBQSxDQUFBLEdBQUEsS0FBQTtHQUNBLElBQUEsVUFBQSxRQUFBLFVBQUEsTUFBQTtJQUNBLE9BQUE7U0FDQTtJQUNBLE9BQUEsT0FBQSxNQUFBLElBQUEsTUFBQSxFQUFBLEdBQUEsS0FBQTtJQUNBOzs7RUFHQSxTQUFBLE1BQUE7R0FDQSxJQUFBLEdBQUEsT0FBQSxNQUFBO0lBQ0EsR0FBQSxPQUFBLGtCQUFBLGdCQUFBLEdBQUEsT0FBQTtJQUNBLFVBQUEsT0FBQSxHQUFBLFFBQUEsUUFBQSxVQUFBO0tBQ0EsR0FBQSxPQUFBLGNBQUEsT0FBQSxTQUFBLFNBQUEsR0FBQSxPQUFBLGFBQUE7T0FDQSxLQUFBLFVBQUE7S0FDQSxlQUFBLE1BQUEsR0FBQTs7U0FFQTs7SUFFQTtHQUNBOztFQUVBLFNBQUEsUUFBQTtHQUNBLElBQUEsZUFBQTtNQUNBLFlBQUEsT0FBQTtNQUNBLE9BQUE7TUFDQSxTQUFBLEdBQUEsT0FBQTtNQUNBLFNBQUEsR0FBQSxPQUFBO01BQ0EsVUFBQSxHQUFBLE9BQUE7TUFDQSxTQUFBLEdBQUEsT0FBQTtNQUNBLGNBQUEsR0FBQSxPQUFBO01BQ0EsYUFBQSxHQUFBLE9BQUE7TUFDQSxrQkFBQSxnQkFBQSxHQUFBLE9BQUE7OztHQUdBLElBQUEsR0FBQSxPQUFBLE1BQUE7SUFDQSxVQUFBLGlCQUFBO0lBQ0EsZUFBQSxNQUFBO1VBQ0E7O0lBRUE7R0FDQTs7RUFFQSxTQUFBLFFBQUE7R0FDQSxlQUFBLFFBQUE7R0FDQTtFQUNBOztBQzNGQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsUUFBQSxZQUFBOztDQUVBLFVBQUEsVUFBQSxDQUFBOztDQUVBLFNBQUEsV0FBQTtFQUNBLElBQUEsTUFBQTtFQUNBLElBQUEsUUFBQTtFQUNBLElBQUEsZUFBQTtFQUNBLElBQUEsY0FBQTtFQUNBLElBQUEsU0FBQTtFQUNBLElBQUEsU0FBQTtFQUNBLElBQUEsZUFBQTtFQUNBLElBQUEsbUJBQUE7RUFDQSxJQUFBLGtCQUFBO0VBQ0EsSUFBQSxhQUFBO0VBQ0EsSUFBQSxhQUFBO0VBQ0EsSUFBQSxlQUFBOztFQUVBLFNBQUEsT0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBO0dBQ0E7O0VBRUEsU0FBQSxjQUFBLFFBQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSxrQkFBQTtHQUNBOztFQUVBLFNBQUEsWUFBQSxPQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEsZ0NBQUE7R0FDQTs7RUFFQSxTQUFBLE9BQUEsT0FBQTtHQUNBLE9BQUEsTUFBQSxLQUFBLGlCQUFBO0dBQ0E7O0VBRUEsU0FBQSxPQUFBLE9BQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSxpQkFBQSxPQUFBO0dBQ0E7O0VBRUEsU0FBQSxhQUFBLE9BQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSwyQ0FBQSxPQUFBLFVBQUE7R0FDQTs7RUFFQSxTQUFBLGlCQUFBLGFBQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSwyQkFBQSxhQUFBLFdBQUE7OztFQUdBLFNBQUEsZ0JBQUEsV0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLHFCQUFBLFdBQUEsVUFBQTtHQUNBOztFQUVBLFNBQUEsV0FBQSxTQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEsK0JBQUE7R0FDQTs7RUFFQSxTQUFBLFdBQUEsU0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLHVDQUFBO0dBQ0E7O0VBRUEsU0FBQSxhQUFBLE9BQUE7R0FDQSxPQUFBLE1BQUEsT0FBQSxrQkFBQSxPQUFBO0dBQ0E7OztBQ3JFQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsUUFBQSxTQUFBOztDQUVBLE9BQUEsVUFBQSxDQUFBOztDQUVBLFNBQUEsT0FBQSxNQUFBO0VBQ0EsSUFBQSxNQUFBO0VBQ0EsSUFBQSxRQUFBO0VBQ0EsU0FBQSxPQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUE7SUFDQTtFQUNBOzs7QUNuQkEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFFBQUEsWUFBQTs7Q0FFQSxVQUFBLFVBQUEsQ0FBQSxjQUFBLFNBQUEsTUFBQTs7Q0FFQSxTQUFBLFVBQUEsWUFBQSxPQUFBLElBQUEsU0FBQTtFQUNBLElBQUEsTUFBQTtFQUNBLElBQUEsUUFBQSxTQUFBLE1BQUE7TUFDQSxJQUFBLFlBQUE7TUFDQSxJQUFBLE9BQUE7UUFDQSxZQUFBO1VBQ0E7UUFDQSxZQUFBLE1BQUEsSUFBQTtPQUNBO01BQ0EsT0FBQSxHQUFBLFFBQUEsd0JBQUEsRUFBQSxRQUFBLFdBQUEsWUFBQSxXQUFBOzs7SUFHQSxJQUFBLFNBQUEsSUFBQTs7SUFFQSxJQUFBLE1BQUEsVUFBQSxXQUFBLFVBQUE7TUFDQSxJQUFBLE9BQUEsR0FBQSxXQUFBLFlBQUE7UUFDQSxJQUFBLE9BQUE7UUFDQSxXQUFBLE9BQUEsWUFBQTtVQUNBLFNBQUEsTUFBQSxRQUFBOzs7OztJQUtBLElBQUEsUUFBQSxVQUFBLFdBQUEsTUFBQSxVQUFBO01BQ0EsSUFBQSxPQUFBLEtBQUEsV0FBQSxNQUFBLFlBQUE7U0FDQSxJQUFBLE9BQUE7U0FDQSxXQUFBLE9BQUEsWUFBQTtXQUNBLElBQUEsVUFBQTtjQUNBLFNBQUEsTUFBQSxRQUFBO1lBQ0E7Ozs7O0VBS0EsSUFBQSxxQkFBQSxVQUFBLFdBQUEsVUFBQTtNQUNBLElBQUEsT0FBQSxtQkFBQSxXQUFBLFdBQUE7VUFDQSxJQUFBLE9BQUE7VUFDQSxXQUFBLE9BQUEsWUFBQTtZQUNBLFNBQUEsTUFBQSxRQUFBOzs7O0VBSUE7O0FDdkRBLENBQUEsVUFBQTtDQUNBOzs7Ozs7O0NBT0E7R0FDQSxPQUFBO0dBQ0EsV0FBQSwwQkFBQTs7Q0FFQSx3QkFBQSxVQUFBLENBQUEsV0FBQSxhQUFBLFdBQUEsZ0JBQUE7O0NBRUEsU0FBQSx3QkFBQSxTQUFBLFdBQUEsU0FBQSxjQUFBLE9BQUE7O0VBRUEsSUFBQSxLQUFBO0VBQ0EsSUFBQSxTQUFBLFFBQUE7O0VBRUEsVUFBQSxvQkFBQSxRQUFBLFFBQUEsU0FBQSxPQUFBO0dBQ0EsR0FBQSxVQUFBLE9BQUEsUUFBQSxPQUFBLFNBQUEsUUFBQTtJQUNBLE9BQUEsWUFBQSxPQUFBLFNBQUEsT0FBQSxhQUFBO0lBQ0EsT0FBQSxPQUFBLFVBQUE7Ozs7RUFJQSxRQUFBLGFBQUEsYUFBQSxRQUFBLFFBQUEsU0FBQSxNQUFBO0dBQ0EsR0FBQSxhQUFBO0dBQ0EsR0FBQSxpQkFBQSxNQUFBO0dBQ0EsSUFBQSxNQUFBLFVBQUE7SUFDQSxJQUFBLFdBQUEsS0FBQSxNQUFBLE1BQUE7SUFDQSxHQUFBLFFBQUEsYUFBQTtLQUNBLE1BQUEsT0FBQSxTQUFBO0tBQ0EsTUFBQSxPQUFBLFNBQUE7S0FDQSxVQUFBOzs7SUFHQSxHQUFBLGdCQUFBLE1BQUE7SUFDQTtLQUNBLEtBQUEsVUFBQTtHQUNBLEdBQUEsZUFBQSxRQUFBLFNBQUEsT0FBQTtJQUNBLE9BQUEsUUFBQSxRQUFBLFNBQUEsT0FBQTtLQUNBLElBQUEsT0FBQSxZQUFBLE9BQUEsT0FBQTtNQUNBLE9BQUEsb0JBQUEsT0FBQSxtQkFBQSxPQUFBLE9BQUE7TUFDQTtLQUNBLElBQUEsT0FBQSxpQkFBQSxPQUFBLE1BQUE7TUFDQSxPQUFBLHlCQUFBLE9BQUEsa0JBQUEsT0FBQSxPQUFBO01BQ0E7OztJQUdBLElBQUEsR0FBQSxjQUFBO0tBQ0EsR0FBQSxjQUFBLFFBQUEsU0FBQSxhQUFBO01BQ0EsSUFBQSxTQUFBLEtBQUEsTUFBQTtNQUNBLElBQUEsT0FBQSxRQUFBLE9BQUEsTUFBQTtPQUNBLE9BQUEseUJBQUEsS0FBQSxNQUFBLEVBQUEsT0FBQSxJQUFBLE9BQUE7T0FDQTs7S0FFQTs7OztPQUlBLE9BQUEsNEJBQUEsS0FBQSxTQUFBLE1BQUE7U0FDQSxHQUFBLE9BQUEsTUFBQSxNQUFBO1NBQ0EsR0FBQSxPQUFBLE1BQUEsTUFBQTtTQUNBLEdBQUEsT0FBQSxPQUFBO1NBQ0EsR0FBQSxRQUFBLFNBQUE7VUFDQSxNQUFBLEdBQUEsT0FBQTtVQUNBLE1BQUEsR0FBQSxPQUFBO1VBQ0EsVUFBQTs7OztLQUlBLFFBQUEsT0FBQSxJQUFBO1NBQ0EsUUFBQTthQUNBLEtBQUE7YUFDQSxLQUFBO2FBQ0EsTUFBQTs7U0FFQSxTQUFBOzs7O0FDOUVBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxXQUFBLHdCQUFBO0NBQ0Esc0JBQUEsVUFBQSxDQUFBLFdBQUE7Q0FDQSxTQUFBLHVCQUFBO0VBQ0EsSUFBQSxLQUFBO0VBQ0EsSUFBQSxnQkFBQTtHQUNBLFdBQUEsUUFBQTtHQUNBLGNBQUEsUUFBQTtHQUNBLFVBQUEsUUFBQTs7O0VBR0EsUUFBQSxrQkFBQSxlQUFBLFFBQUEsU0FBQSxNQUFBO0dBQ0EsR0FBQSxRQUFBO0dBQ0EsTUFBQSxRQUFBLFNBQUEsTUFBQTtJQUNBLE1BQUEsbUJBQUE7SUFDQSxNQUFBLFNBQUEsUUFBQSxTQUFBLE9BQUE7S0FDQSxNQUFBLG9CQUFBLFNBQUE7Ozs7O0VBS0EsR0FBQSxpQkFBQSxPQUFBLFFBQUEsZ0JBQUEsS0FBQTs7O0FDN0JBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxXQUFBLHlCQUFBOztDQUVBLHVCQUFBLFVBQUEsQ0FBQSxnQkFBQSxVQUFBLFNBQUEsVUFBQSxZQUFBLFFBQUEsV0FBQSxhQUFBLGFBQUEsV0FBQTs7Q0FFQSxTQUFBLHVCQUFBLGNBQUEsUUFBQSxPQUFBLFFBQUEsVUFBQSxNQUFBLFNBQUEsV0FBQSxXQUFBLFNBQUEsYUFBQTtFQUNBLElBQUEsS0FBQTtFQUNBLElBQUEsV0FBQSxRQUFBO0VBQ0EsSUFBQSxjQUFBO0VBQ0EsR0FBQSxjQUFBO0VBQ0EsR0FBQSxhQUFBO0VBQ0EsR0FBQSxlQUFBLFFBQUE7RUFDQSxHQUFBLGtCQUFBO0VBQ0EsR0FBQSxhQUFBO0VBQ0EsR0FBQSxtQkFBQTtFQUNBLEdBQUEsVUFBQTs7RUFFQSxHQUFBLGdCQUFBO0dBQ0EsU0FBQTtHQUNBLFdBQUE7OztFQUdBLFFBQUEsVUFBQSxhQUFBLFFBQUEsUUFBQSxTQUFBLE1BQUE7R0FDQSxhQUFBO0dBQ0EsTUFBQSxPQUFBLFFBQUEsR0FBQSxZQUFBLE9BQUEsR0FBQSxZQUFBO0dBQ0EsR0FBQSxjQUFBLFdBQUEsTUFBQTtHQUNBLEdBQUEsY0FBQSxTQUFBLE9BQUEsRUFBQSxFQUFBOzs7RUFHQSxVQUFBLFlBQUEsUUFBQSxRQUFBLFNBQUEsUUFBQTtHQUNBLEdBQUEsVUFBQTtLQUNBLEtBQUEsVUFBQTtHQUNBLElBQUEsR0FBQSxjQUFBLElBQUE7SUFDQSxNQUFBLFlBQUEsYUFBQSxRQUFBLFFBQUEsU0FBQSxJQUFBO0tBQ0EsR0FBQSxjQUFBOztVQUVBO0lBQ0EsTUFBQSxNQUFBLGFBQUEsT0FBQSxRQUFBLFFBQUEsU0FBQSxJQUFBO0tBQ0EsR0FBQSxjQUFBO0tBQ0EsSUFBQSxHQUFBLFFBQUEsY0FBQSxLQUFBLEVBQUEsUUFBQSxHQUFBLGNBQUEsRUFBQSxHQUFBLGFBQUEsT0FBQTs7SUFFQTs7O0VBR0EsVUFBQSxHQUFBLFNBQUEsU0FBQSxHQUFBO0dBQ0EsSUFBQSxHQUFBLGNBQUEsS0FBQSxRQUFBLE9BQUEsYUFBQSxPQUFBLEdBQUEsVUFBQTtLQUNBLEdBQUEsWUFBQSxLQUFBO1VBQ0E7SUFDQSxJQUFBLFFBQUEsT0FBQSxPQUFBLEdBQUEsV0FBQSxRQUFBLE9BQUEsYUFBQSxPQUFBLEdBQUEsVUFBQTtLQUNBLEdBQUEsWUFBQSxLQUFBO0tBQ0E7SUFDQTs7O0VBR0EsVUFBQSxHQUFBLFlBQUEsU0FBQSxLQUFBO0dBQ0EsSUFBQSxVQUFBLFFBQUEsS0FBQSxLQUFBO0dBQ0EsS0FBQSxJQUFBLElBQUEsR0FBQSxZQUFBLFNBQUEsR0FBQSxLQUFBLEdBQUEsS0FBQTtJQUNBLEdBQUEsUUFBQSxPQUFBLEdBQUEsWUFBQSxHQUFBLElBQUEsS0FBQSxJQUFBO0tBQ0EsR0FBQSxZQUFBLEdBQUEsWUFBQSxLQUFBO0tBQ0EsR0FBQSxZQUFBLEdBQUEsU0FBQSxLQUFBO0tBQ0EsR0FBQSxZQUFBLEdBQUEsU0FBQSxLQUFBO0tBQ0EsR0FBQSxZQUFBLEdBQUEsV0FBQSxLQUFBO0tBQ0E7SUFDQTs7O0VBR0EsVUFBQSxHQUFBLFdBQUEsU0FBQSxHQUFBO0dBQ0EsSUFBQSxRQUFBLEdBQUE7R0FDQSxHQUFBLGNBQUEsR0FBQSxZQUFBLE9BQUEsU0FBQSxJQUFBO0lBQ0EsT0FBQSxHQUFBLE9BQUE7Ozs7RUFJQSxTQUFBLFlBQUE7R0FDQSxJQUFBLGdCQUFBLE9BQUEsS0FBQTtNQUNBLGFBQUE7T0FDQSxZQUFBO09BQ0EsTUFBQTtPQUNBLFVBQUE7UUFDQSxPQUFBLFVBQUE7U0FDQSxLQUFBLEVBQUEsUUFBQSxHQUFBLGNBQUE7VUFDQSxPQUFBO2VBQ0E7VUFDQSxPQUFBLEdBQUEsWUFBQSxHQUFBLFlBQUEsT0FBQSxHQUFBO1VBQ0E7O1FBRUEsU0FBQSxVQUFBO1NBQ0EsT0FBQSxHQUFBLGNBQUE7O1FBRUEsYUFBQSxVQUFBO1NBQ0EsT0FBQTs7OztHQUlBOzs7RUFHQSxTQUFBLGlCQUFBLFlBQUEsR0FBQTtTQUNBLElBQUEsZ0JBQUEsT0FBQSxLQUFBO2FBQ0EsYUFBQTthQUNBLFlBQUE7YUFDQSxNQUFBO2FBQ0EsU0FBQTtpQkFDQSxhQUFBLFVBQUE7cUJBQ0EsT0FBQTs7aUJBRUEsYUFBQSxVQUFBO2tCQUNBLE9BQUE7Ozs7TUFJQTs7O0VBR0EsU0FBQSxRQUFBLGFBQUEsR0FBQTs7R0FFQSxVQUFBLEtBQUEsb0JBQUE7SUFDQSxLQUFBLFdBQUE7SUFDQSxVQUFBLFdBQUE7O1NBRUEsR0FBQSxZQUFBLE9BQUEsR0FBQTtHQUNBOzs7RUFHQSxTQUFBLGlCQUFBO0dBQ0EsR0FBQSxhQUFBOztHQUVBLElBQUEsV0FBQSxHQUFBLFFBQUEsUUFBQSxPQUFBLFNBQUEsUUFBQTtJQUNBLEtBQUEsT0FBQSxXQUFBLFFBQUEsT0FBQSxXQUFBLFdBQUEsT0FBQSxXQUFBLFFBQUE7S0FDQSxPQUFBO1VBQ0E7S0FDQSxPQUFBLFlBQUE7S0FDQSxPQUFBLE9BQUE7Ozs7R0FJQSxJQUFBLGFBQUE7SUFDQSxTQUFBO0lBQ0EsWUFBQSxXQUFBO0lBQ0EsWUFBQSxRQUFBO0lBQ0EsWUFBQSxFQUFBLE1BQUEsUUFBQSxPQUFBLFNBQUEsUUFBQSxFQUFBLE9BQUEsT0FBQSxXQUFBLFFBQUEsUUFBQTtJQUNBLFlBQUEsYUFBQSxXQUFBO0lBQ0EsWUFBQSxhQUFBLFdBQUE7SUFDQSxZQUFBLGFBQUEsU0FBQSxPQUFBO0lBQ0EsWUFBQSxhQUFBLFNBQUE7SUFDQSxVQUFBLGFBQUEsT0FBQTtJQUNBLFdBQUEsYUFBQSxPQUFBO0lBQ0EsV0FBQTtJQUNBLFlBQUEsQ0FBQSxFQUFBLEVBQUEsRUFBQSxFQUFBO0lBQ0EsWUFBQSxFQUFBLE1BQUEsUUFBQTtJQUNBLFlBQUE7SUFDQSxZQUFBLFFBQUE7O1FBRUEsVUFBQSxLQUFBLG9CQUFBO0dBQ0E7O0VBRUEsR0FBQSxJQUFBLFlBQUEsVUFBQSxPQUFBO1NBQ0EsVUFBQTs7OztBQ3JLQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsV0FBQSx3QkFBQTs7Q0FFQSxzQkFBQSxVQUFBLENBQUEsVUFBQSxhQUFBLGtCQUFBLFVBQUEsU0FBQSxhQUFBO0NBQ0EsU0FBQSx1QkFBQTtFQUNBLElBQUEsS0FBQTtFQUNBLEdBQUEsU0FBQTtFQUNBLEdBQUEsUUFBQSxFQUFBLE9BQUEsT0FBQTtFQUNBLEdBQUEsT0FBQTtFQUNBLEdBQUEsU0FBQTtFQUNBLEdBQUEsU0FBQTs7RUFFQSxHQUFBLFNBQUE7R0FDQSxTQUFBLE9BQUEsT0FBQTtHQUNBLFVBQUEsT0FBQSxRQUFBO0dBQ0EsWUFBQTtHQUNBLFlBQUEsQ0FBQSxPQUFBLE1BQUEsTUFBQSxNQUFBLE1BQUE7R0FDQSxZQUFBLE9BQUEsVUFBQTtHQUNBLGNBQUEsT0FBQSxnQkFBQTtHQUNBLGFBQUEsT0FBQSxjQUFBO0dBQ0EsWUFBQTtHQUNBLFlBQUEsQ0FBQSxNQUFBLE9BQUEsS0FBQSxNQUFBLFFBQUE7R0FDQSxVQUFBLFFBQUE7R0FDQSxZQUFBLENBQUEsV0FBQTs7O0VBR0EsVUFBQSxhQUFBLFFBQUEsYUFBQSxRQUFBLFNBQUEsU0FBQTtHQUNBLEdBQUEsV0FBQTtHQUNBLElBQUEsQ0FBQSxHQUFBLE9BQUE7SUFDQSxJQUFBLGFBQUE7SUFDQSxLQUFBLElBQUEsSUFBQSxTQUFBLFNBQUEsR0FBQSxLQUFBLEdBQUEsS0FBQTtLQUNBLFdBQUEsS0FBQSxTQUFBLEdBQUE7S0FDQTtJQUNBLEdBQUEsT0FBQSxXQUFBO0lBQ0E7OztFQUdBLElBQUEsa0JBQUEsU0FBQSxPQUFBO0dBQ0EsSUFBQSxVQUFBLE9BQUEsTUFBQSxJQUFBLE1BQUEsQ0FBQSxHQUFBLEtBQUE7R0FDQSxJQUFBLFVBQUEsUUFBQSxVQUFBLE1BQUE7SUFDQSxPQUFBO1NBQ0E7SUFDQSxPQUFBLE9BQUEsTUFBQSxJQUFBLE1BQUEsRUFBQSxHQUFBLEtBQUE7SUFDQTs7O0VBR0EsU0FBQSxNQUFBO0dBQ0EsSUFBQSxHQUFBLE9BQUEsTUFBQTtJQUNBLEdBQUEsT0FBQSxrQkFBQSxnQkFBQSxHQUFBLE9BQUE7SUFDQSxVQUFBLE9BQUEsR0FBQSxRQUFBLFFBQUEsVUFBQTtLQUNBLEdBQUEsT0FBQSxjQUFBLE9BQUEsU0FBQSxTQUFBLEdBQUEsT0FBQSxhQUFBO09BQ0EsS0FBQSxVQUFBO0tBQ0EsZUFBQSxNQUFBLEdBQUE7O0lBRUE7R0FDQTs7RUFFQSxTQUFBLFFBQUE7R0FDQSxJQUFBLGVBQUE7TUFDQSxZQUFBLE9BQUE7TUFDQSxPQUFBO01BQ0EsU0FBQSxHQUFBLE9BQUE7TUFDQSxTQUFBLEdBQUEsT0FBQTtNQUNBLFVBQUEsR0FBQSxPQUFBO01BQ0EsU0FBQSxHQUFBLE9BQUE7TUFDQSxjQUFBLEdBQUEsT0FBQTtNQUNBLGFBQUEsR0FBQSxPQUFBO01BQ0Esa0JBQUEsZ0JBQUEsR0FBQSxPQUFBOzs7R0FHQSxJQUFBLEdBQUEsT0FBQSxNQUFBO0lBQ0EsVUFBQSxpQkFBQTtJQUNBLGVBQUEsTUFBQTtVQUNBOztJQUVBO0dBQ0E7O0VBRUEsU0FBQSxRQUFBO0dBQ0EsZUFBQSxRQUFBO0dBQ0E7OztBQ3hGQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsV0FBQSwwQkFBQTs7Q0FFQSx3QkFBQSxVQUFBLENBQUEsY0FBQSxrQkFBQSxTQUFBLFVBQUEsYUFBQSxXQUFBLGdCQUFBLGFBQUE7O0NBRUEsU0FBQSx3QkFBQSxZQUFBLGdCQUFBLE9BQUEsUUFBQSxXQUFBLFNBQUEsY0FBQSxXQUFBLFdBQUE7RUFDQSxJQUFBLEtBQUE7RUFDQSxHQUFBLGFBQUE7RUFDQSxHQUFBLGVBQUE7RUFDQSxHQUFBLFNBQUE7RUFDQSxHQUFBLFFBQUE7RUFDQSxHQUFBLFVBQUE7RUFDQSxHQUFBLE9BQUE7RUFDQSxXQUFBLE9BQUEsUUFBQSxHQUFBLGFBQUEsUUFBQSxHQUFBLFlBQUE7O0VBRUEsSUFBQSxhQUFBOztFQUVBLFFBQUEsYUFBQSxhQUFBLFFBQUEsUUFBQSxTQUFBLFFBQUE7R0FDQSxHQUFBLFdBQUEsUUFBQTtHQUNBLEdBQUEsZ0JBQUEsR0FBQSxTQUFBLEdBQUE7R0FDQSxJQUFBLGFBQUEsRUFBQSxNQUFBLFFBQUEsVUFBQTtHQUNBLEdBQUEsVUFBQTtHQUNBLFdBQUEsUUFBQSxTQUFBLGNBQUE7SUFDQSxHQUFBLFFBQUEsS0FBQSxNQUFBLEdBQUEsU0FBQTs7R0FFQSxHQUFBLFVBQUEsR0FBQSxRQUFBLE9BQUEsU0FBQSxRQUFBLEVBQUEsT0FBQSxDQUFBLE9BQUE7OztFQUdBLFNBQUEsYUFBQSxPQUFBO0dBQ0EsR0FBQSxnQkFBQTtHQUNBOztFQUVBLFNBQUEsUUFBQTtHQUNBLGVBQUEsUUFBQTtHQUNBOztFQUVBLFNBQUEsTUFBQSxPQUFBO0dBQ0EsT0FBQSxZQUFBLENBQUEsT0FBQTtHQUNBLFdBQUEsS0FBQTtHQUNBOztFQUVBLFNBQUEsUUFBQSxRQUFBLEdBQUE7R0FDQSxPQUFBLFlBQUEsQ0FBQSxPQUFBO0dBQ0EsV0FBQSxPQUFBLEVBQUEsTUFBQSxZQUFBLE9BQUEsUUFBQSxPQUFBLEtBQUE7R0FDQTs7RUFFQSxTQUFBLE1BQUE7R0FDQSxHQUFBLFdBQUEsUUFBQSxLQUFBLE1BQUEsR0FBQSxXQUFBLFNBQUE7R0FDQSxVQUFBLEtBQUEsbUJBQUE7SUFDQSxLQUFBLFdBQUE7SUFDQSxXQUFBLFdBQUE7SUFDQSxPQUFBLFdBQUE7SUFDQSxRQUFBLFdBQUE7SUFDQSxRQUFBLFdBQUE7SUFDQSxZQUFBLEVBQUEsTUFBQSxHQUFBLFdBQUEsUUFBQTtJQUNBLFVBQUEsR0FBQSxXQUFBOzs7R0FHQSxlQUFBLE1BQUE7R0FDQTtFQUNBOzs7QUNwRUEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFdBQUEsdUJBQUE7O0NBRUEscUJBQUEsVUFBQSxDQUFBLFdBQUEsV0FBQSxZQUFBLFVBQUEsYUFBQTs7Q0FFQSxTQUFBLHNCQUFBO0VBQ0EsSUFBQSxLQUFBO0VBQ0EsSUFBQSxTQUFBLFFBQUE7O0VBRUEsVUFBQSxZQUFBLFFBQUEsUUFBQSxTQUFBLE9BQUE7R0FDQSxHQUFBLFVBQUEsT0FBQSxRQUFBLE9BQUEsU0FBQSxRQUFBO0lBQ0EsT0FBQSxZQUFBLE9BQUEsU0FBQSxPQUFBLGFBQUE7SUFDQSxPQUFBLE9BQUEsVUFBQTs7OztFQUlBLFFBQUEsYUFBQSxhQUFBLFFBQUEsUUFBQSxTQUFBLE1BQUE7R0FDQSxHQUFBLGFBQUE7R0FDQSxJQUFBLE1BQUEsVUFBQTtJQUNBLElBQUEsV0FBQSxLQUFBLE1BQUEsTUFBQTtJQUNBLEdBQUEsUUFBQSxhQUFBO0tBQ0EsTUFBQSxPQUFBLFNBQUE7S0FDQSxNQUFBLE9BQUEsU0FBQTtLQUNBLFVBQUE7O0lBRUE7OztPQUdBLE9BQUEsNEJBQUEsS0FBQSxTQUFBLE1BQUE7U0FDQSxHQUFBLE9BQUEsTUFBQSxNQUFBO1NBQ0EsR0FBQSxPQUFBLE1BQUEsTUFBQTtTQUNBLEdBQUEsT0FBQSxPQUFBO1NBQ0EsR0FBQSxRQUFBLFFBQUE7VUFDQSxNQUFBLEdBQUEsT0FBQTtVQUNBLE1BQUEsR0FBQSxPQUFBO1VBQ0EsVUFBQTs7OztLQUlBLFFBQUEsT0FBQSxJQUFBO1NBQ0EsUUFBQTthQUNBLEtBQUE7YUFDQSxLQUFBO2FBQ0EsTUFBQTs7U0FFQSxTQUFBOzs7O0FDckRBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUEsa0JBQUE7R0FDQSxRQUFBLGVBQUE7O0NBRUEsYUFBQSxVQUFBO0NBQ0EsU0FBQSxjQUFBO0VBQ0EsT0FBQTtHQUNBLFFBQUEsVUFBQTtJQUNBLE9BQUE7S0FDQSxRQUFBLEVBQUEsUUFBQSxRQUFBO0tBQ0EsV0FBQSxDQUFBO0tBQ0EsU0FBQSxDQUFBLE1BQUEsT0FBQSxPQUFBLE9BQUE7S0FDQSxTQUFBLENBQUEsT0FBQSxPQUFBOzs7R0FHQSxXQUFBLFVBQUE7SUFDQSxPQUFBO0tBQ0EsYUFBQTtLQUNBLE9BQUEsQ0FBQSxNQUFBLE1BQUEsTUFBQTs7O0dBR0EsT0FBQSxVQUFBO0lBQ0EsT0FBQTtLQUNBLGNBQUE7S0FDQSxRQUFBLENBQUEsTUFBQSxNQUFBLE1BQUEsTUFBQTs7OztFQUlBOztBQ25DQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsUUFBQSxRQUFBOztDQUVBLE1BQUEsVUFBQSxDQUFBOztDQUVBLFNBQUEsT0FBQTtFQUNBLElBQUEsTUFBQTtFQUNBLElBQUEsUUFBQTtFQUNBLElBQUEsY0FBQTtFQUNBLElBQUEsV0FBQTtFQUNBLElBQUEsWUFBQTtFQUNBLElBQUEsV0FBQTtFQUNBLElBQUEsbUJBQUE7RUFDQSxJQUFBLFNBQUE7RUFDQSxJQUFBLFFBQUE7O0VBRUEsU0FBQSxNQUFBLFFBQUEsT0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLDZCQUFBLFNBQUEsYUFBQTtHQUNBOztFQUVBLFNBQUEsWUFBQSxPQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEsbUNBQUE7R0FDQTs7RUFFQSxTQUFBLFNBQUEsT0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLHNCQUFBO0dBQ0E7O0VBRUEsU0FBQSxVQUFBLEtBQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSxpQ0FBQSxLQUFBO0dBQ0E7O0VBRUEsU0FBQSxTQUFBLEtBQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSxnQ0FBQSxLQUFBLElBQUE7R0FDQTs7RUFFQSxTQUFBLGlCQUFBLEtBQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSw4QkFBQSxLQUFBLElBQUE7R0FDQTs7RUFFQSxTQUFBLE9BQUEsV0FBQTtHQUNBLE9BQUEsTUFBQSxLQUFBLG9CQUFBO0dBQ0E7O0VBRUEsU0FBQSxNQUFBLE9BQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSxtQ0FBQTtHQUNBOzs7O0FDdERBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxXQUFBLG9CQUFBOztDQUVBLGtCQUFBLFVBQUEsQ0FBQSxTQUFBLGdCQUFBLGFBQUEsVUFBQSxhQUFBO0NBQ0EsU0FBQSxtQkFBQTtFQUNBLElBQUEsS0FBQTtFQUNBLEdBQUEsY0FBQTtFQUNBLEdBQUEsVUFBQTs7RUFFQSxVQUFBLEdBQUEsZUFBQSxTQUFBLEdBQUE7R0FDQSxLQUFBLElBQUEsSUFBQSxHQUFBLFlBQUEsU0FBQSxHQUFBLEtBQUEsR0FBQSxLQUFBO0lBQ0EsSUFBQSxRQUFBLE9BQUEsR0FBQSxZQUFBLEdBQUEsS0FBQSxHQUFBLE1BQUE7S0FDQSxPQUFBLEdBQUEsWUFBQSxHQUFBLGVBQUEsR0FBQTs7SUFFQTs7O0VBR0EsVUFBQSxHQUFBLGlCQUFBLFNBQUEsS0FBQTtHQUNBLEtBQUEsSUFBQSxJQUFBLEdBQUEsWUFBQSxTQUFBLEdBQUEsS0FBQSxHQUFBLEtBQUE7SUFDQSxJQUFBLFFBQUEsT0FBQSxHQUFBLFlBQUEsR0FBQSxLQUFBLEtBQUEsS0FBQTtLQUNBLEdBQUEsWUFBQSxHQUFBLFFBQUEsT0FBQSxTQUFBLEtBQUE7S0FDQSxHQUFBLFlBQUEsR0FBQSxZQUFBLEtBQUE7S0FDQSxHQUFBLFlBQUEsR0FBQSxpQkFBQSxLQUFBOztJQUVBOzs7RUFHQSxVQUFBLEdBQUEsU0FBQSxTQUFBLEdBQUE7R0FDQSxLQUFBLFFBQUEsT0FBQSxPQUFBLEdBQUEsU0FBQTtJQUNBLElBQUEsUUFBQSxRQUFBLEtBQUE7SUFDQSxPQUFBLEdBQUEsWUFBQSxLQUFBO0lBQ0E7R0FDQSxHQUFBLFVBQUEsVUFBQSxHQUFBOzs7OztFQUtBLFVBQUEsR0FBQSxZQUFBLFNBQUEsS0FBQTtHQUNBLE1BQUEsWUFBQSxRQUFBLFFBQUEsU0FBQSxZQUFBO0lBQ0EsR0FBQSxjQUFBO0lBQ0EsR0FBQSxZQUFBLFFBQUEsU0FBQSxHQUFBO0tBQ0EsR0FBQSxZQUFBLE9BQUEsU0FBQSxHQUFBLFlBQUE7O0lBRUEsR0FBQSxVQUFBLFVBQUEsR0FBQTs7Ozs7RUFLQSxVQUFBLEdBQUEsV0FBQSxTQUFBLEtBQUE7R0FDQSxNQUFBLFlBQUEsUUFBQSxRQUFBLFNBQUEsWUFBQTtJQUNBLEdBQUEsY0FBQTtJQUNBLEdBQUEsVUFBQSxVQUFBLEdBQUE7Ozs7O0VBS0EsSUFBQSxTQUFBLGFBQUE7RUFDQSxRQUFBLFVBQUEsUUFBQSxRQUFBLFNBQUEsTUFBQTtHQUNBLE1BQUEsT0FBQSxTQUFBLEdBQUEsWUFBQSxPQUFBLEdBQUEsWUFBQTtHQUNBLEdBQUEsYUFBQTtHQUNBLEdBQUEsV0FBQTtJQUNBLGNBQUE7SUFDQSxhQUFBLENBQUEsTUFBQSxNQUFBLE1BQUE7SUFDQSxVQUFBLEdBQUEsV0FBQTtJQUNBLFdBQUEsR0FBQSxXQUFBLFFBQUEsR0FBQSxFQUFBLE1BQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxNQUFBLEdBQUEsV0FBQSxNQUFBLEVBQUEsR0FBQSxXQUFBLE1BQUEsRUFBQTs7OztFQUlBLE1BQUEsWUFBQSxRQUFBLFFBQUEsU0FBQSxZQUFBO0dBQ0EsSUFBQSxhQUFBO0lBQ0EsR0FBQSxjQUFBO0lBQ0EsR0FBQSxZQUFBLFFBQUEsU0FBQSxHQUFBO0tBQ0EsR0FBQSxZQUFBLE9BQUEsU0FBQSxHQUFBLFlBQUE7O0lBRUEsR0FBQSxVQUFBLFVBQUEsR0FBQTtVQUNBO0lBQ0E7SUFDQTs7Ozs7RUFLQSxJQUFBLGFBQUEsU0FBQSxZQUFBO0tBQ0EsSUFBQSxjQUFBLEVBQUEsTUFBQSxHQUFBLElBQUEsWUFBQTtVQUNBLE9BQUEsRUFBQSxNQUFBLEdBQUEsSUFBQSxZQUFBO2NBQ0EsT0FBQSxFQUFBLGNBQUEsR0FBQSxVQUFBLElBQUEsTUFBQTs7OztHQUlBLEtBQUEsYUFBQTtJQUNBLEtBQUEsSUFBQSxJQUFBLFlBQUEsU0FBQSxHQUFBLEtBQUEsR0FBQSxLQUFBO0tBQ0EsSUFBQSxjQUFBO0tBQ0EsSUFBQSxJQUFBO0tBQ0EsSUFBQSxLQUFBO0tBQ0EsSUFBQSxJQUFBLEVBQUEsUUFBQSxZQUFBLEdBQUEsV0FBQSxZQUFBLEdBQUE7S0FDQSxHQUFBLFlBQUEsSUFBQSxFQUFBLFFBQUEsWUFBQSxHQUFBLFFBQUEsWUFBQSxHQUFBLFNBQUEsSUFBQSxFQUFBLFFBQUEsWUFBQSxHQUFBLE9BQUEsWUFBQSxHQUFBO0tBQ0EsWUFBQSxHQUFBLEdBQUEsV0FBQTtLQUNBLFlBQUEsR0FBQSxHQUFBLGVBQUEsWUFBQSxHQUFBLFFBQUE7S0FDQSxJQUFBLFNBQUE7S0FDQSxPQUFBLEtBQUEsWUFBQSxHQUFBLFNBQUEsWUFBQSxHQUFBO0tBQ0EsT0FBQSxTQUFBLFlBQUEsR0FBQSxRQUFBO0tBQ0EsT0FBQSxRQUFBLFlBQUEsR0FBQTtLQUNBLFlBQUEsR0FBQSxHQUFBLElBQUEsS0FBQTtLQUNBOztHQUVBLE9BQUE7OztFQUdBLEdBQUEsSUFBQSxZQUFBLFVBQUEsT0FBQTtTQUNBLFVBQUE7O0VBRUE7O0FDdkhBLENBQUEsVUFBQTtDQUNBOzs7Ozs7O0NBT0E7R0FDQSxPQUFBO0dBQ0EsV0FBQSxrQkFBQTs7Q0FFQSxnQkFBQSxVQUFBLENBQUE7O0NBRUEsU0FBQSxpQkFBQTtFQUNBLElBQUEsS0FBQTtFQUNBLEdBQUEsZUFBQTtFQUNBLEdBQUEsYUFBQTtFQUNBLEdBQUEsWUFBQTs7S0FFQSxTQUFBLFdBQUEsSUFBQSxHQUFBO01BQ0EsR0FBQSxXQUFBO01BQ0EsR0FBQSxlQUFBO1NBQ0EsVUFBQSxLQUFBLFNBQUEsRUFBQSxPQUFBLEdBQUEsS0FBQSxlQUFBO01BQ0E7O0tBRUEsU0FBQSxVQUFBLEdBQUEsR0FBQTtNQUNBLEdBQUEsV0FBQTtNQUNBLEdBQUEsZUFBQTtTQUNBLFVBQUEsS0FBQSxTQUFBLEVBQUEsT0FBQSxHQUFBLEtBQUEsZUFBQTtNQUNBO0VBQ0E7OztBQy9CQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsUUFBQSxVQUFBOztDQUVBLFFBQUEsVUFBQSxDQUFBLFNBQUEsU0FBQTtDQUNBLFNBQUEsU0FBQTtFQUNBLElBQUEsTUFBQTtFQUNBLElBQUEsa0JBQUE7RUFDQSxJQUFBLFdBQUE7RUFDQSxJQUFBLGFBQUE7RUFDQSxJQUFBLFFBQUE7RUFDQSxJQUFBLGFBQUE7RUFDQSxJQUFBLFVBQUE7RUFDQSxJQUFBLGFBQUE7RUFDQSxJQUFBLFlBQUE7RUFDQSxJQUFBLGNBQUE7RUFDQSxJQUFBLGlCQUFBO0VBQ0EsSUFBQSxjQUFBO0VBQ0EsSUFBQSxTQUFBOzs7RUFHQSxTQUFBLGlCQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUE7R0FDQTs7RUFFQSxTQUFBLFNBQUEsS0FBQTtHQUNBLE9BQUEsTUFBQSxLQUFBLGNBQUE7R0FDQTs7RUFFQSxTQUFBLFdBQUEsU0FBQTtHQUNBLE9BQUEsTUFBQSxPQUFBLGdDQUFBO0dBQ0E7O0VBRUEsU0FBQSxNQUFBLEtBQUE7R0FDQSxPQUFBLE1BQUEsS0FBQSwyQkFBQTtHQUNBOztFQUVBLFNBQUEsWUFBQTtHQUNBLE9BQUEsTUFBQSxJQUFBO0dBQ0E7O0VBRUEsU0FBQSxTQUFBLFFBQUE7R0FDQSxJQUFBLElBQUEsWUFBQTtJQUNBLElBQUEsVUFBQSxZQUFBLE1BQUEsSUFBQSxRQUFBLGNBQUEsT0FBQSxVQUFBLFlBQUEsTUFBQSxJQUFBLFFBQUEsVUFBQSxRQUFBO0tBQ0EsT0FBQTtVQUNBO0tBQ0EsT0FBQTtLQUNBO0lBQ0E7O0dBRUEsT0FBQTtHQUNBOztFQUVBLFNBQUEsWUFBQTtHQUNBLElBQUEsSUFBQSxZQUFBO0lBQ0EsT0FBQSxVQUFBLFlBQUEsTUFBQSxJQUFBLFFBQUE7SUFDQTtHQUNBOztFQUVBLFNBQUEsV0FBQTtHQUNBLElBQUEsSUFBQSxZQUFBO0lBQ0EsT0FBQSxVQUFBLFlBQUEsTUFBQSxJQUFBLFFBQUE7SUFDQTtHQUNBOztFQUVBLFNBQUEsYUFBQTtHQUNBLElBQUEsSUFBQSxZQUFBO0lBQ0EsT0FBQSxVQUFBLFlBQUEsTUFBQSxJQUFBLFFBQUE7SUFDQTtHQUNBOztFQUVBLFNBQUEsZ0JBQUE7R0FDQSxJQUFBLElBQUEsWUFBQTtJQUNBLE9BQUEsVUFBQSxZQUFBLE1BQUEsSUFBQSxRQUFBO0lBQ0E7R0FDQTs7RUFFQSxTQUFBLGFBQUE7R0FDQSxJQUFBLElBQUEsWUFBQTtJQUNBLE9BQUEsVUFBQSxZQUFBLE1BQUEsSUFBQSxRQUFBO0lBQ0E7R0FDQTs7RUFFQSxTQUFBLFFBQUE7R0FDQSxJQUFBLElBQUEsWUFBQTtJQUNBLE9BQUEsVUFBQSxZQUFBLE1BQUEsSUFBQSxRQUFBO0lBQ0E7R0FDQTtFQUNBOztLQUVBIiwiZmlsZSI6ImlubmV0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIjsoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJyxbXG5cdFx0J2FwcC5yb3V0ZXInLFxuXHRcdCdhcHAudG9wbmF2Jyxcblx0XHQnYXBwLmNhc2UnLFxuXHRcdCdhcHAuY2FyJyxcblx0XHQnYXBwLmJyYW5jaCcsXG5cdFx0J2FwcC5tYXAnLFxuXHRcdCdhcHAubWVtYmVyJyxcblx0XHQnYXBwLnN0cmlrZVRlYW0nLFxuXHRcdCdhcHAuc29ja2V0Jyxcblx0XHQnYXBwLnVzZXInLFxuXHRcdCdhcHAudGltZXInLFxuXHRcdCdhcHAubm90aWZpY2F0aW9uJ1xuXHRdKVxufSkoKTtcblxuIiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLmJyYW5jaCBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuYnJhbmNoJyxbXSlcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLmNhciBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuY2FyJywgW10pXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5jYXNlIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5jYXNlJywgW1xuXHRcdCd1aS5yb3V0ZXInLFxuXHRcdCd1aS5ib290c3RyYXAnXG5cdF0pXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQvKipcblx0KiBhcHAuZGFzaGJvYXJkIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5kYXNoYm9hcmQnLFtdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLmRpcmVjdG9yIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RvcicsIFtdKVxuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5kaXNwYXRjaCBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlzcGF0Y2gnLCBbXSlcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLmR1dHlsaXN0IE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5kdXR5bGlzdCcsIFtdKVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuZ2VvIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5nZW8nLCBbXSk7XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQvKipcblx0KiBhcHAubWFwIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5tYXAnLCBbXSlcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdC8qKlxuXHQqIGFwcC5tZW1iZXIgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLm1lbWJlcicsIFtdKVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAubm90aWZpY2F0aW9uIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5ub3RpZmljYXRpb24nLCBbXSk7XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5zb2NrZXQgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLnNvY2tldCcsIFtdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLnNhZmV0eSBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuc2FmZXR5JyxbXSlcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLnN0cmlrZVRlYW0gTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLnN0cmlrZVRlYW0nLFtdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLnN1bW1hcnkgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLnN1bW1hcnknLFtdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLnRpbWVyIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC50aW1lcicsIFtdKVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAudXNlciBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAudXNlcicsIFtdKTtcbn0pOyIsIihmdW5jdGlvbigpe1xuXG5cdC8qKlxuXHQqIGFwcC5icmFuY2ggTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLmJyYW5jaCcpXG5cdFx0LmNvbnRyb2xsZXIoJ0JyYW5jaFN2YycsQnJhbmNoU3ZjKTtcblxuXHRCcmFuY2hTdmMuJGluamVjdCA9IFsnJGh0dHAnXTtcblx0ZnVuY3Rpb24gQnJhbmNoU3ZjKCRodHRwKXtcblx0XHR2YXIgc3ZjID0gdGhpcztcblx0XHRzdmMuZmV0Y2hCeUNvcnBzIFx0PSBmZXRjaEJ5Q29ycHM7XG5cdFx0c3ZjLmZldGNoQnlOYW1lIFx0PSBmZXRjaEJ5TmFtZTtcblx0XHRzdmMudG90YWxMaXN0RmluZEJ5TmFtZSA9IHRvdGFsTGlzdEZpbmRCeU5hbWU7XG5cdFx0c3ZjLmdldERldGFpbHMgXHRcdD0gZ2V0RGV0YWlscztcblx0XHRzdmMuZmV0Y2hPbkR1dHlCcmFuY2hlcyA9IGZldGNoT25EdXR5QnJhbmNoZXM7XG5cdFx0c3ZjLnVwZGF0ZSBcdFx0XHQ9IHVwZGF0ZTtcblx0XHRzdmMudXBkYXRlTWlzc2lvbiBcdD0gdXBkYXRlTWlzc2lvbjtcblx0XHRcblx0XHRmdW5jdGlvbiBmZXRjaEJ5Q29ycHMoY29ycHMpe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9icmFuY2hlcz9jb3Jwcz0nICsgY29ycHMpO1xuXHRcdH07XG5cdFx0XG5cdFx0ZnVuY3Rpb24gZmV0Y2hCeU5hbWUoYnJhbmNoKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvYnJhbmNoZXM/YnJhbmNoPScgKyBicmFuY2gpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiB0b3RhbExpc3RGaW5kQnlOYW1lKGJyYW5jaCl7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2JyYW5jaGVzLycgKyBicmFuY2gpXG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gZ2V0RGV0YWlscyhpZCl7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2JyYW5jaGVzLycgKyBpZCk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGZldGNoT25EdXR5QnJhbmNoZXMoYnJhbmNoZXMpe1xuXHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvYnJhbmNoZXMvb25kdXR5JyxicmFuY2hlcyk7XG5cdFx0fTtcblx0XG5cdFx0ZnVuY3Rpb24gdXBkYXRlKGRhdGEpe1xuXHRcdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9icmFuY2hlcy8nICsgZGF0YS5icmFuY2ggLCBkYXRhKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gdXBkYXRlTWlzc2lvbihkYXRhKXtcblx0XHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvYnJhbmNoZXM/YnJhbmNoPScgKyBkYXRhLmJyYW5jaCwgZGF0YSk7XG5cdFx0fTtcblx0fTtcblxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuY2FyIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5jYXInKVxuXHRcdC5jb250cm9sbGVyKCdDYXJFZGl0Q29udHJvbGxlcicsQ2FyRWRpdENvbnRyb2xsZXIpO1xuXG5cdENhckVkaXRDb250cm9sbGVyLiRpbmplY3QgPSBbXTtcblx0ZnVuY3Rpb24gQ2FyRWRpdENvbnRyb2xsZXIoKXtcblxuXHR9O1xuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5jYXIgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLmNhcicpXG5cdFx0LmNvbnRyb2xsZXIoJ0NhckluZGV4Q29udHJvbGxlcicsQ2FySW5kZXhDb250cm9sbGVyKTtcblxuXHRDYXJJbmRleENvbnRyb2xsZXIuJGluamVjdCA9IFtdO1xuXHRmdW5jdGlvbiBDYXJJbmRleENvbnRyb2xsZXIoKXtcblxuXHR9O1xuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cblx0LyoqXG5cdCogYXBwLmNhciBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuY2FyJylcblx0XHQuc2VyaWNlKCdDYXJTdmMnLENhclN2Yyk7XG5cblx0Q2FyU3ZjLiRpbmplY3QgPSBbJyRodHRwJ107XG5cdFxuXHRmdW5jdGlvbiBDYXJTdmMoJGh0dHApe1xuXHRcdHZhciB2bSA9IHRoaXM7IFxuXHRcdHZtLmZldGNoQnlDb3JwcyAgPSBmZXRjaEJ5Q29ycHM7XG5cdFx0dm0uZmV0Y2hCeUJyYW5jaCA9IGZldGNoQnlCcmFuY2g7XG5cdFx0dm0udXBkYXRlIFx0XHQgPSB1cGRhdGU7IFxuXG5cdFx0ZnVuY3Rpb24gZmV0Y2hCeUNvcnBzKGNvcnBzKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2Fycz9jb3Jwcz0nICsgY29ycHMpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBmZXRjaEJ5QnJhbmNoKCBicmFuY2ggKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2Fycz9icmFuY2g9JyArIGJyYW5jaCApO1xuXHRcdH07XG5cdFx0XG5cdFx0ZnVuY3Rpb24gdXBkYXRlKGRhdGEpe1xuXHRcdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9jYXJzLycgKyBkYXRhLmlkICwgZGF0YSk7XG5cdFx0fTtcblx0fTtcbn0pKCk7IiwiOyhmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcCBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAnKVxuXHRcdC5jb250cm9sbGVyKCdMb2dpbkNvbnRyb2xsZXInLExvZ2luQ29udHJvbGxlcik7XG5cblx0XHRMb2dpbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnVXNlclN2YycsICdzdG9yZScsICckc3RhdGUnLCdqd3RIZWxwZXInLCckaHR0cCcsICdTb2NrZXRTdmMnXTtcblxuXHRcdGZ1bmN0aW9uIExvZ2luQ29udHJvbGxlcihVc2VyU3ZjLCBzdG9yZSwgJHN0YXRlLGp3dEhlbHBlciwkaHR0cCwgU29ja2V0U3ZjICl7XG5cdFx0XHR2YXIgdm0gXHQgPSB0aGlzOyBcblx0XHRcdHZtLmxvZ2luID0gbG9naW47XG5cdFx0XHR2bS51c2VyICA9IHt9O1xuXG5cdFx0XHRmdW5jdGlvbiBsb2dpbigpe1xuXHRcdFx0XHRVc2VyU3ZjLmxvZ2luKHZtLnVzZXIpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHRcdFx0aWYgKGRhdGEuc3VjY2Vzcykge1xuXHRcdFx0XHRcdFx0c3RvcmUuc2V0KCdqd3QnLGRhdGEudG9rZW4pO1xuXHRcdFx0XHRcdFx0JGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ3gtYWNjZXNzLXRva2VuJ10gPSBkYXRhLnRva2VuO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGRhdGEudG9rZW47IFxuXHRcdFx0XHRcdH0gZWxzZSB7IFxuXHRcdFx0XHRcdFx0cmV0dXJuIGNvbnNvbGUubG9nKFwicGFzc3dvcmQgaXMgbm90IGV4aXN0ZWRcIik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KS50aGVuKGZ1bmN0aW9uKHRva2VuKXtcblx0XHRcdFx0XHRTb2NrZXRTdmMuaW5pdCh0b2tlbik7XG5cdFx0XHRcdFx0U29ja2V0U3ZjLmVtaXQoJ2xvZ2luJyk7XG5cdFx0XHRcdH0pLnRoZW4oZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRpZiAoand0SGVscGVyLmRlY29kZVRva2VuKHRva2VuKS5yb2xlID09IFwiYWRtaW5cIikge1xuXHRcdFx0XHRcdFx0dmFyIHVzZXJCcmFuY2ggPSBqd3RIZWxwZXIuZGVjb2RlVG9rZW4odG9rZW4pLmJyYW5jaDtcblx0XHRcdFx0XHRcdGlmICh1c2VyQnJhbmNoLnNsaWNlKHVzZXJCcmFuY2gubGVuZ3RoLTIgLHVzZXJCcmFuY2gubGVuZ3RoKSA9PSBcIuWkp+mailwiKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiAkc3RhdGUuZ28oJ2R1dHlEZXNrLmNvcnBzJylcblx0XHRcdFx0XHRcdH0gZWxzZXtcblx0XHRcdFx0XHRcdFx0cmV0dXJuICRzdGF0ZS5nbygnZHV0eURlc2suYnJhbmNoJylcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fWVsc2V7XG5cdFx0XHRcdFx0XHRyZXR1cm4gJHN0YXRlLmdvKCdkaXJlY3Rvci5zYWZldHkuaW5kZXgnKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSlcblx0XHRcdH07XG5cdFx0fTtcbn0pKCk7IiwiOyhmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAucm91dGVyJyxbJ3VpLnJvdXRlciddKVxuXHRcdC5jb25maWcocm91dGVyQ29uZmlnKVxuXG5cdFx0cm91dGVyQ29uZmlnLiRpbmplY3QgPSBbJyRzdGF0ZVByb3ZpZGVyJywnJHVybFJvdXRlclByb3ZpZGVyJywnJGxvY2F0aW9uUHJvdmlkZXInXTtcblx0XHRcblx0XHRmdW5jdGlvbiByb3V0ZXJDb25maWcoJHN0YXRlUHJvdmlkZXIsJHVybFJvdXRlclByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuXHRcdCAgICAkdXJsUm91dGVyUHJvdmlkZXJcbiAgICBcdFx0XHQub3RoZXJ3aXNlKCcvbG9naW4nKTtcblxuXHRcdCAgICAkc3RhdGVQcm92aWRlclxuXHRcdCAgICAgICAgLnN0YXRlKCdhbm9uJyx7XG5cdFx0ICAgICAgICAgICAgdXJsIDogXCJcIixcblx0XHQgICAgICAgICAgICBhYnN0cmFjdCA6IHRydWUsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGUgOiBcIjx1aS12aWV3PlwiLFxuXHRcdCAgICAgICAgfSlcblx0XHQgICAgICAgIC5zdGF0ZSgnYW5vbi5sb2dpbicse1xuXHRcdCAgICAgICAgICAgIHVybCA6IFwiL2xvZ2luXCIsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGVVcmwgOlwibG9naW4uaHRtbFwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIkxvZ2luQ29udHJvbGxlclwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6IFwiTG9naW5DdHJsXCJcblx0XHQgICAgICAgIH0pXG5cdFx0ICAgICAgICAuc3RhdGUoJ2Fub24uNDA0Jyx7XG5cdFx0ICAgICAgICAgICAgdXJsIDogXCIvNDA0XCIsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcIjQwNC5odG1sXCJcblx0XHQgICAgICAgIH0pXG5cbiAgICBcdFx0XHQvLyBkdXR5IGRlc2sgXG5cdFx0XHQkc3RhdGVQcm92aWRlclxuXHRcdFx0XHQuc3RhdGUoJ2R1dHlEZXNrJywge1xuXHRcdCAgICAgICAgICAgIGFic3RyYWN0OiB0cnVlLFxuXHRcdCAgICAgICAgICAgIHVybDogXCIvZHV0eURlc2tcIixcblx0XHQgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJ2aWV3cy9jb21tb24vY29udGVudC5odG1sXCIsXG5cdFx0ICAgICAgICAgICAgZGF0YSA6IHtcblx0XHQgICAgICAgICAgICAgICAgcmVxdWlyZWRMb2dpbiA6IHRydWUsXG5cdFx0ICAgICAgICAgICAgICAgIHJvbGUgOiBbXCJhZG1pblwiXVxuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgIH0pXG5cdFx0ICAgICAgICAuc3RhdGUoJ2R1dHlEZXNrLmNvcnBzJywge1xuXHRcdCAgICAgICAgICAgIHVybDogXCIvY29ycHNcIixcblx0XHQgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJ2aWV3cy9kYXNoYm9hcmQvY29ycHMuZGFzaGJvYXJkLmh0bWxcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyIDogXCJEYXNoYm9hcmRDb250cm9sbGVyXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlckFzIDogXCJEYXNoYm9hcmRDdHJsXCIsXG5cdFx0ICAgICAgICAgICAgZGF0YSA6IHtcblx0XHQgICAgICAgICAgICAgICAgcmVxdWlyZWRMb2dpbiA6IHRydWUsXG5cdFx0ICAgICAgICAgICAgICAgIHJvbGUgOiBbXCJhZG1pblwiXVxuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgIH0pXG5cdFx0ICAgICAgICAuc3RhdGUoJ2R1dHlEZXNrLmJyYW5jaCcse1xuXHRcdCAgICAgICAgICAgIHVybCA6IFwiL2JyYW5jaFwiLFxuXHRcdCAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogXCJ2aWV3cy9kYXNoYm9hcmQvYnJhbmNoLmRhc2hib2FyZC5odG1sXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlciA6IFwiRGFzaGJvYXJkQ29udHJvbGxlclwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6IFwiRGFzaGJvYXJkQ3RybFwiLFxuXHRcdCAgICAgICAgICAgIGRhdGUgOiB7XG5cdFx0ICAgICAgICAgICAgICAgIHJlcXVpcmVkTG9naW4gOiB0cnVlLFxuXHRcdCAgICAgICAgICAgICAgICByb2xlIDogW1wiYWRtaW5cIl1cblx0XHQgICAgICAgICAgICB9XG5cdFx0ICAgICAgICB9KVxuXHRcdCAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5jYXNlJyx7XG5cdFx0ICAgICAgICAgICAgYWJzdHJhY3QgOiB0cnVlLFxuXHRcdCAgICAgICAgICAgIHRlbXBsYXRlIDogXCI8dWktdmlldz5cIlxuXHRcdCAgICAgICAgfSlcblx0XHQgICAgICAgIC5zdGF0ZSgnZHV0eURlc2suY2FzZS5pbmRleCcsIHtcblx0XHQgICAgICAgICAgICB1cmw6IFwiL2Nhc2VcIixcblx0XHQgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJjYXNlL2Nhc2UuaW5kZXguaHRtbFwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIkNhc2VDb250cm9sbGVyXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlckFzIDogXCJDYXNlQ3RybFwiXG5cdFx0ICAgICAgICB9KVxuXHRcdCAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5jYXNlLm5ldycse1xuXHRcdCAgICAgICAgICAgIHVybCA6IFwiL2Nhc2UvbmV3XCIsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcImNhc2UvY2FzZS5uZXcuaHRtbFwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIkNhc2VOZXdDb250cm9sbGVyXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlckFzIDogXCJDYXNlTmV3Q3RybFwiXG5cdFx0ICAgICAgICB9KVxuXHRcdCAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5jYXNlLnNob3cnLHtcblx0XHQgICAgICAgICAgICB1cmwgOiBcIi9jYXNlLzppZC9zaG93XCIsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcImNhc2UvY2FzZS5zaG93Lmh0bWxcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyIDogXCJDYXNlU2hvd0NvbnRyb2xsZXJcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcIkNhc2VTaG93Q3RybFwiXG5cdFx0ICAgICAgICB9KVxuXHRcdCAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5jYXNlLmVkaXQnLHtcblx0XHQgICAgICAgICAgICB1cmwgOiBcIi9jYXNlLzppZC9lZGl0XCIsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcImNhc2UvY2FzZS5lZGl0Lmh0bWxcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyIDogXCJDYXNlRWRpdENvbnRyb2xsZXJcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcIkNhc2VFZGl0Q3RybFwiXG5cdFx0ICAgICAgICB9KVxuXHRcdCAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5zYWZldHknLHtcblx0XHQgICAgICAgICAgICB1cmwgOiBcIi9jYXNlLzppZFwiLFxuXHRcdCAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogXCJzdW1tYXJ5L3N1bW1hcnkuaW5kZXguaHRtbFwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIlN1bW1hcnlDb250cm9sbGVyXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlckFzIDogXCJTdW1tYXJ5Q3RybFwiXG5cdFx0ICAgICAgICB9KVxuXHRcdCAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5kdXR5bGlzdCcse1xuXHRcdCAgICAgICAgICAgIGFic3RyYWN0IDogdHJ1ZSxcblx0XHQgICAgICAgICAgICB0ZW1wbGF0ZSA6IFwiPHVpLXZpZXc+XCJcblx0XHQgICAgICAgIH0pXG5cdFx0ICAgICAgICAuc3RhdGUoJ2R1dHlEZXNrLmR1dHlsaXN0LmluZGV4Jywge1xuXHRcdCAgICAgICAgICAgIHVybDogXCIvZHV0eWxpc3QvOmJyYW5jaFwiLFxuXHRcdCAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInZpZXdzL2R1dHlsaXN0L2R1dHlsaXN0LmluZGV4Lmh0bWxcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyIDogXCJEdXR5TGlzdENvbnRyb2xsZXJcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcIkR1dHlMaXN0Q3RybFwiXG5cdFx0ICAgICAgICB9KVxuXHRcdCAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5kdXR5bGlzdC5zaG93Jyx7XG5cdFx0ICAgICAgICBcdHVybCA6IFwiL2R1dHlsaXN0LzpicmFuY2gvaW5kZXhcIixcblx0XHQgICAgICAgIFx0dGVtcGxhdGUgOiBcIjxoMj4gc2hvdyA8L2gyPlwiXG5cdFx0ICAgICAgICB9KVxuXHRcdCAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5kdXR5bGlzdC5lZGl0Jywge1xuXHRcdCAgICAgICAgICAgIHVybDogXCIvZHV0eWxpc3QvOmJyYW5jaC9lZGl0XCIsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGVVcmwgIDogXCJ2aWV3cy9kdXR5bGlzdC9kdXR5bGlzdC5lZGl0Lmh0bWxcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyICAgOiBcIkR1dHlMaXN0RWRpdENvbnRyb2xsZXJcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcIkR1dHlMaXN0RWRpdEN0cmxcIlxuXHRcdCAgICAgICAgfSlcblx0XHQgICAgICAgIC5zdGF0ZSgnZHV0eURlc2subWVtYmVyJyx7XG5cdFx0ICAgICAgICAgICAgYWJzdHJhY3QgOiB0cnVlLFxuXHRcdCAgICAgICAgICAgIHRlbXBsYXRlIDogXCI8dWktdmlldz5cIlxuXHRcdCAgICAgICAgfSlcblx0XHQgICAgICAgIC5zdGF0ZSgnZHV0eURlc2subWVtYmVyLnNob3cnLCB7XG5cdFx0ICAgICAgICAgICAgdXJsOiBcIi9tZW1iZXIvOmJyYW5jaFwiLFxuXHRcdCAgICAgICAgICAgIHRlbXBsYXRlVXJsICA6IFwidmlld3MvbWVtYmVyL21lbWJlci5pbmRleC5odG1sXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlciAgIDogXCJNZW1iZXJDb250cm9sbGVyXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlckFzIDogXCJNZW1iZXJDdHJsXCJcblx0XHQgICAgICAgIH0pXG5cdFx0ICAgICAgICAuc3RhdGUoJ2R1dHlEZXNrLm1lbWJlci5lZGl0Jywge1xuXHRcdCAgICAgICAgICAgIHVybDogXCIvbWVtYmVyLzpicmFuY2gvZWRpdFwiLFxuXHRcdCAgICAgICAgICAgIHRlbXBsYXRlVXJsICA6IFwidmlld3MvbWVtYmVyL21lbWJlci5lZGl0Lmh0bWxcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyIFx0IDogXCJNZW1iZXJFZGl0Q29udHJvbGxlclwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6IFwiTWVtYmVyRWRpdEN0cmxcIlxuXHRcdCAgICAgICAgfSlcblx0XHQgICAgICAgIC5zdGF0ZSgnZHV0eURlc2suY2FyJywge1xuXHRcdCAgICAgICAgICAgIGFic3RyYWN0IDogdHJ1ZSxcblx0XHQgICAgICAgICAgICB0ZW1wbGF0ZSA6IFwiPHVpLXZpZXc+XCJcblx0XHQgICAgICAgIH0pXG5cdFx0ICAgICAgICAuc3RhdGUoJ2R1dHlEZXNrLmNhci5zaG93Jyx7XG5cdFx0ICAgICAgICAgICAgdXJsOiBcIi9jYXIvOmJyYW5jaFwiLFxuXHRcdCAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogXCJ2aWV3cy9jYXJzL2Nhci5pbmRleC5odG1sXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlciA6IFwiQ2FySW5kZXhDb250cm9sbGVyXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlckFzIDogXCJDYXJJbmRleEN0cmxcIlxuXHRcdCAgICAgICAgfSlcblx0XHQgICAgICAgIC5zdGF0ZSgnZHV0eURlc2suY2FyLmVkaXQnLHtcblx0XHQgICAgICAgICAgICB1cmw6IFwiL2Nhci86YnJhbmNoL2VkaXRcIixcblx0XHQgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6IFwidmlld3MvY2Fycy9jYXIuZWRpdC5odG1sXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlciA6IFwiQ2FyRWRpdENvbnRyb2xsZXJcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcIkNhckVkaXRDdHJsXCJcblx0XHQgICAgICAgIH0pXG5cdFx0fVxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcCBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAudG9wbmF2JywgW10pXG5cdFx0LmNvbnRyb2xsZXIoJ1RvcE5hdkNvbnRyb2xsZXInLFRvcE5hdkNvbnRyb2xsZXIpO1xuXG5cdFRvcE5hdkNvbnRyb2xsZXIuJGluamVjdCA9IFtdO1xuXHRmdW5jdGlvbiBUb3BOYXZDb250cm9sbGVyKCRsb2NhdGlvbiwkc3RhdGUsICRpbnRlcnZhbCwgc3RvcmUsIFNvY2tldFN2YywgVXNlclN2YywgJHdpbmRvdyl7XG5cdFx0dmFyIHZtID0gdGhpczsgXG5cdFx0dm0uY3VycmVudFRpbWUgPSAgbW9tZW50KCkuZm9ybWF0KCdNTU0gRG8sIGg6bW06c3MgYScpO1xuXHRcdHZtLmxvZ291dCA9IGxvZ291dDtcblxuXG5cdFx0JGludGVydmFsKGZ1bmN0aW9uKCl7XG5cdFx0XHRtb21lbnQubG9jYWxlKCd6aC10dycpO1xuXHRcdFx0dm0uY3VycmVudFRpbWUgPSAgbW9tZW50KCkuZm9ybWF0KCdNTU0gRG8sIGg6bW06c3MgYScpO1xuXHRcdH0sIDEwMDApO1xuXHRcdCBcblx0XHRmdW5jdGlvbiBsb2dvdXQoKXtcblx0XHRcdHZhciBhY2NvdW50ID0gVXNlclN2Yy5jdXJyZW50QWNjb3VudCgpO1xuXHRcdFx0U29ja2V0U3ZjLmVtaXQoJ2xvZ291dCcpO1xuXHRcdFx0JHN0YXRlLmdvKCdhbm9uLmxvZ2luJyk7XG5cdFx0fTtcblx0fVxuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5jYXNlIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5jYXNlJylcblx0XHQuY29udHJvbGxlcignQ2FzZUNvbmZpcm1Db250cm9sbGVyJyxDYXNlQ29uZmlybUNvbnRyb2xsZXIpO1xuXG5cdENhc2VDb25maXJtQ29udHJvbGxlci4kaW5qZWN0ID0gWydVc2VyU3ZjJywgJ0Nhc2VTdmMnLCAnJHN0YXRlUGFyYW1zJywnJHN0YXRlJywnJG1vZGFsSW5zdGFuY2UnXTtcblx0ZnVuY3Rpb24gQ2FzZUNvbmZpcm1Db250cm9sbGVyKFVzZXJTdmMsIENhc2VTdmMsICRzdGF0ZVBhcmFtcywkc3RhdGUsJG1vZGFsSW5zdGFuY2Upe1xuXHRcdHZhciB2bSA9IHRoaXM7XG5cdFx0XG5cdFx0dm0udXNlciA9IHt9O1xuXHRcdHZtLnNlbmQgPSBzZW5kOyBcblx0XHR2bS5jYXNlSW5mbyA9IHtcblx0XHRcdGlkIDogJHN0YXRlUGFyYW1zLmlkLFxuXHRcdFx0ZW5kQXQgOiBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU1NLURELCBoOm1tOnNzIGEnKVxuXHRcdH07IFxuXG5cdFx0ZnVuY3Rpb24gc2VuZCgpe1xuXHRcdFx0VXNlclN2Yy5sb2dpbih2bS51c2VyKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xuXHRcdFx0XHRDYXNlU3ZjLmNsb3NlQ2FzZSh2bS5jYXNlSW5mbykuc3VjY2VzcyhmdW5jdGlvbigpe1xuXHRcdFx0XHRcdCRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuXHRcdFx0XHRcdCRzdGF0ZS5nbygnZHV0eURlc2suY2FzZS5pbmRleCcpO1xuXHRcdFx0XHR9KVxuXHRcdFx0fSk7XG5cdFx0fTtcblx0fTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLmNhc2UgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLmNhc2UnKVxuXHRcdC5jb250cm9sbGVyKCdDYXNlRWRpdENvbnRyb2xsZXInLENhc2VFZGl0Q29udHJvbGxlcik7XG5cblx0Q2FzZUVkaXRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzdGF0ZVBhcmFtcycsICdDYXNlU3ZjJywgJ0NhclN2YycsICdVc2VyU3ZjJywgJ0JyYW5jaFN2YycsICckd2luZG93JywgJyRtb2RhbCcsJ050ZlN2YyddO1xuXG5cdGZ1bmN0aW9uIENhc2VFZGl0Q29udHJvbGxlcigkc3RhdGVQYXJhbXMsIENhc2VTdmMsIENhclN2YywgVXNlclN2YywgQnJhbmNoU3ZjLCAkd2luZG93LCAkbW9kYWwsTnRmU3ZjKXtcblx0XHR2YXIgdm0gPSB0aGlzOyBcblx0XHR2YXIgZGlzcGF0Y2hDYXJzICA9IFtdO1xuXHRcdHZtLnRlcm1pbmF0ZUNhc2UgID0gdGVybWluYXRlQ2FzZTtcblx0XHR2bS5kaXNwYXRjaCBcdCAgPSBkaXNwYXRjaDtcblx0XHR2bS5zZWxlY3RCcmFuY2ggICA9IHNlbGVjdEJyYW5jaDtcblx0XHR2bS5jYW5jZWxEaXNwYXRjaCA9IGNhbmNlbERpc3BhdGNoO1xuXHRcdHZtLnNhdmUgXHRcdCAgPSBzYXZlOyBcblxuXHRcdGFuZ3VsYXIuZXh0ZW5kKHZtLCB7XG5cdCAgICAgICAgbm93UG9zOiB7XG5cdCAgICAgICAgICAgIGxhdDogMjQuOTg4LFxuXHQgICAgICAgICAgICBsbmc6IDEyMS41NzUyLFxuXHQgICAgICAgICAgICB6b29tOiAxN1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgY29udHJvbHM6IHtcblx0ICAgICAgICAgICAgZHJhdzoge31cblx0ICAgICAgICB9XG5cdCAgICB9KTtcblxuXHRcdHZhciBjYXNlSWQgPSAkc3RhdGVQYXJhbXMuaWQ7XG5cblx0XHRCcmFuY2hTdmMuZmV0Y2hCeUNvcnBzKFVzZXJTdmMudXNlckNvcnBzKCkpLnN1Y2Nlc3MoZnVuY3Rpb24oYnJhbmNoZXMpe1xuXHRcdCAgICB2bS5icmFuY2hlcyA9IGJyYW5jaGVzO1xuXHRcdCAgICB2bS5jdXJyZW50QnJhbmNoID0gYnJhbmNoZXNbMF0ubmFtZVxuXHRcdH0pO1xuXG5cdFx0ZnVuY3Rpb24gc2VsZWN0QnJhbmNoKGJyYW5jaCl7XG5cdCAgICBcdHZtLmN1cnJlbnRCcmFuY2ggPSBicmFuY2gubmFtZTtcblx0ICAgIH07XG5cblx0XHRCcmFuY2hTdmMuZmV0Y2hCeUNvcnBzKFVzZXJTdmMudXNlckNvcnBzKCkpLnN1Y2Nlc3MoZnVuY3Rpb24oYnJhbmNoZXMpe1xuXHRcdCAgICB2bS5icmFuY2hlcyA9IGJyYW5jaGVzO1xuXHRcdCAgICB2bS5jdXJyZW50QnJhbmNoID0gYnJhbmNoZXNbMF0ubmFtZVxuXHRcdH0pXG5cblx0XHRDYXNlU3ZjLmZldGNoQnlJZChjYXNlSWQpLnN1Y2Nlc3MoZnVuY3Rpb24oX2Nhc2Upe1xuXHRcdFx0dm0uY3VycmVudENhc2UgPSBfY2FzZTtcblx0XHRcdHZtLmRpc3BhdGNoTGlzdCA9IF8ucGx1Y2soX2Nhc2UuY2FycywgJ3JhZGlvQ29kZScpLmpvaW4oJyAnKVxuXHRcdFx0dm0uY3VycmVudENhc2UuY2FySWRzID0gXy5wbHVjayhfY2FzZS5jYXJzLCdfaWQnKTtcblx0XHR9KS50aGVuKGZ1bmN0aW9uKCl7XG5cdFx0XHRDYXJTdmMuZmV0Y2hCeUNvcnBzKFVzZXJTdmMudXNlckNvcnBzKCkpLnN1Y2Nlc3MoZnVuY3Rpb24oY2Fycyl7XG5cdFx0XHRcdHZtLmNhcnMgPSBjYXJzXG5cdFx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdm0uY2Fycy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdGlmICggdm0uY3VycmVudENhc2UuY2FySWRzLmluZGV4T2Yodm0uY2Fyc1tpXS5faWQpID4gLTEgKSB7XG5cdFx0XHRcdFx0XHR2bS5jYXJzW2ldLmlzQ2hlY2tlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRkaXNwYXRjaENhcnMucHVzaCh2bS5jYXJzW2ldKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9O1xuXHRcdFx0fSk7XG5cblx0XHRcdE50ZlN2Yy5mZXRjaCgpLnN1Y2Nlc3MoZnVuY3Rpb24obnRmcyl7XG5cdFx0XHRcdHZtLm50ZnMgPSBudGZzO1xuXHRcdFx0XHR2bS5jdXJyZW50Q2FzZS5udGZzID0gXy5wbHVjayhudGZzLCd0eXBlJylcblx0XHRcdFx0dm0uY3VycmVudENhc2UubnRmICA9IHZtLmN1cnJlbnRDYXNlLm50ZnNbMF07XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdGZ1bmN0aW9uIGdldEJyYW5jaElkKGJyYW5jaGVzTGlzdCl7XG5cdFx0XHR2YXIgYnJhbmNoZXMgPSBfLnVuaXF1ZShicmFuY2hlc0xpc3QpO1xuXHRcdFx0dmFyIGJyYW5jaElkcyA9IFtdO1xuXHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB2bS5icmFuY2hlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZiAoYnJhbmNoZXMuaW5kZXhPZih2bS5icmFuY2hlc1tpXS5uYW1lKSA+IC0xKSB7XG5cdFx0XHRcdFx0YnJhbmNoSWRzLnB1c2godm0uYnJhbmNoZXNbaV0uX2lkKTtcblx0XHRcdFx0fTtcblx0XHRcdH07XG5cdFx0XHRyZXR1cm4gIGJyYW5jaElkcztcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gZGlzcGF0Y2goIGNhciApe1xuXHRcdFx0Y2FyLmlzQ2hlY2tlZCA9IHRydWU7IFxuXHRcdFx0ZGlzcGF0Y2hDYXJzLnB1c2goY2FyKTtcblx0XHRcdHZtLmRpc3BhdGNoTGlzdCA9IF8ucGx1Y2soZGlzcGF0Y2hDYXJzLCAncmFkaW9Db2RlJykuam9pbihcIiBcIilcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gY2FuY2VsRGlzcGF0Y2goY2FyKXtcblx0XHRcdGNhci5pc0NoZWNrZWQgPSBmYWxzZTtcblx0XHRcdGRpc3BhdGNoQ2Fycy5zcGxpY2UoXy5wbHVjayhkaXNwYXRjaENhcnMsICdfaWQnKS5pbmRleE9mKGNhci5faWQpLDEpXG5cdFx0XHR2bS5kaXNwYXRjaExpc3QgPSBfLnBsdWNrKGRpc3BhdGNoQ2FycywgJ3JhZGlvQ29kZScpLmpvaW4oXCIgXCIpXG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHNhdmUoKXtcblx0XHRcdHZhciBjdXJyZW50TnRmO1xuXG5cdFx0XHR2bS5udGZzLmZvckVhY2goZnVuY3Rpb24obnRmLGlkKXtcblx0XHRcdFx0aWYgKG50Zi50eXBlID09IHZtLmN1cnJlbnRDYXNlLm50ZiApIHtcblx0XHRcdFx0XHRjdXJyZW50TnRmICA9IHZtLm50ZnNbaWRdO1xuXHRcdFx0XHR9O1xuXHRcdFx0fSk7XG5cdFx0XHRDYXNlU3ZjLnVwZGF0ZSh7XG5cdFx0XHRcdGNhc2VJZCAgICA6IHZtLmN1cnJlbnRDYXNlLl9pZCxcblx0XHRcdFx0YWRkcmVzcyAgIDogdm0uY3VycmVudENhc2UuYWRkcmVzcyB8fCBcIua4rOipplwiLFxuXHRcdFx0XHRvZmZpY2VyUmVjZWl2ZXIgOiBVc2VyU3ZjLmN1cnJlbnRVc2VyKCkgfHwgIFwi5YqJ5puJ5pu8XCIsXG5cdFx0XHRcdHR5cGUgICAgICA6IHZtLmN1cnJlbnRDYXNlLnR5cGUgfHwgXCLngavoraZcIixcblx0XHRcdFx0dHlwZXMgXHQgIDogdm0uY3VycmVudENhc2UudHlwZXMsXG5cdFx0XHRcdHBob25lICAgICA6IHZtLmN1cnJlbnRDYXNlLnBob25lIHx8IFwi5ris6KmmXCIsXG5cdFx0XHRcdGJyYW5jaGVzICA6IF8udW5pcXVlKF8ucGx1Y2soZGlzcGF0Y2hDYXJzLCAnYnJhbmNoJykpLFxuXHRcdFx0XHRicmFuY2hJZHMgOiBnZXRCcmFuY2hJZCh2bS5jdXJyZW50Q2FzZS5icmFuY2hlcyksXG5cdFx0ICBcdFx0Y2FycyAgICAgIDogXy5wbHVjayhkaXNwYXRjaENhcnMsJ19pZCcpLFxuXHRcdFx0XHRpc09uZ29pbmcgOiB0cnVlLFxuXHRcdFx0XHRjb3JwcyBcdCAgOiBVc2VyU3ZjLnVzZXJDb3JwcygpLFxuXHRcdFx0XHRlbnYgXHQgIDogdm0uY3VycmVudENhc2UuZW52LFxuXHRcdFx0XHRlbnZzIFx0ICA6IHZtLmN1cnJlbnRDYXNlLmVudnMsXG5cdFx0XHRcdGZsb29yIFx0ICA6IHZtLmN1cnJlbnRDYXNlLmZsb29yLFxuXHRcdFx0XHRudGYgICAgICAgOiBjdXJyZW50TnRmLl9pZCxcblx0XHRcdFx0bGFzdFVwZGF0ZSA6IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTU0tREQgaDptbTpzcyBhJylcblx0XHRcdH0pLnN1Y2Nlc3MoZnVuY3Rpb24oKXtcblx0XHRcdFx0JHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcblx0XHRcdH0pXG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHRlcm1pbmF0ZUNhc2UgKCl7XG5cdFx0XHR2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcblx0XHRcdCAgXHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL2Nhc2UvY2FzZS5jb25maXJtLm1vZGFsLmh0bWwnLFxuXHRcdFx0ICAgIGNvbnRyb2xsZXI6ICdDYXNlQ29uZmlybUN0cmwnLFxuXHRcdFx0ICAgIHNpemU6IFwibWRcIlx0ICAgIFxuXHRcdFx0fSk7XG5cdFx0fTtcblx0fVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuY2FzZScpXG5cdFx0LmNvbnRyb2xsZXIoJ0Nhc2VDb250cm9sbGVyJyxDYXNlQ29udHJvbGxlcik7XG5cdFxuXHRDYXNlQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc3RhdGVQYXJhbXMnLCckbW9kYWwnLCdDYXNlU3ZjJywgJyRsb2cnLCAnU29ja2V0U3ZjJywgJ1VzZXJTdmMnLCAnJGxvY2F0aW9uJ107XG5cdGZ1bmN0aW9uIENhc2VDb250cm9sbGVyKCRzdGF0ZVBhcmFtcywkbW9kYWwsQ2FzZVN2YywgJGxvZywgU29ja2V0U3ZjLCBVc2VyU3ZjLCAkbG9jYXRpb24pe1xuXHRcdHZhciB2bSA9IHRoaXM7IFxuXHRcdHZtLm1heFNpemUgXHRcdD0gNTsgXG5cdFx0dm0uaXRlbXNQZXJQYWdlID0gMztcblx0XHR2bS5jdXJyZW50UGFnZSAgPSAxO1xuXHRcdHZtLnBhZ2VDaGFuZ2VkICA9IHBhZ2VDaGFuZ2VkO1xuXHRcdHZtLnF1ZXJ5Q2FzZXMgICA9IHF1ZXJ5Q2FzZXM7XG5cdFx0dm0uY2hvb3NlIFx0XHQ9IGNob29zZTtcblx0XHRcblx0XHR2bS5xdWVyeUNhc2VzKCk7XG5cblx0XHRmdW5jdGlvbiBwYWdlQ2hhbmdlZCgpe1xuXHRcdFx0Q2FzZVN2Yy5mZXRjaChVc2VyU3ZjLnVzZXJDb3JwcygpLCB2bS5jdXJyZW50UGFnZSAsIHZtLml0ZW1zUGVyUGFnZSApLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHRcdHZtLmNhc2VzID0gZGF0YS5jYXNlcztcblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBxdWVyeUNhc2VzKCl7XG5cdFx0XHRDYXNlU3ZjLmZldGNoKFVzZXJTdmMudXNlckNvcnBzKCksIHZtLmN1cnJlbnRQYWdlLCB2bS5pdGVtc1BlclBhZ2UpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHRcdHZtLmNhc2VzID0gZGF0YS5jYXNlcztcblx0XHRcdFx0dm0udG90YWxJdGVtcyA9IGRhdGEudG90YWxDYXNlcztcblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBjaG9vc2UoaWQpe1xuXHRcdFx0Q2FzZVN2Yy5mZXRjaEJ5SWQodm0uY2FzZXNbaWRdLl9pZCkuc3VjY2VzcyhmdW5jdGlvbihfY2FzZSl7XG5cdFx0XHRcdFx0dm0uY2FzZURldGFpbHMgPSBfY2FzZTtcblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRTb2NrZXRTdmMub24oJ25ld0Nhc2UnLGZ1bmN0aW9uKF9jYXNlKXtcblx0XHRcdHZtLmNhc2VzLnVuc2hpZnQoX2Nhc2UpO1xuXHRcdH0pO1xuXG5cdFx0U29ja2V0U3ZjLm9uKCdjYXNlTW9kaWZpZWQnLGZ1bmN0aW9uKF9jYXNlKXtcblx0XHRcdHZtLmNhc2VzW19jYXNlLmNhc2VJZC0xXSA9IF9jYXNlO1xuXHRcdH0pO1xuXHR9O1xuXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5jYXNlIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5jYXNlJylcblx0XHQuY29udHJvbGxlcignQ2FzZU1vZGFsQ29udHJvbGxlcicsQ2FzZU1vZGFsQ29udHJvbGxlcik7XG5cblx0Q2FzZU1vZGFsQ29udHJvbGxlci4kaW5qZWN0ID0gWydDYXJTdmMnLCAnJG1vZGFsSW5zdGFuY2UnLCAnQ2FzZVN2YycsJyRzdGF0ZScsICdjYXNlSWQnLCdjYXNlRGV0YWlscycsICdTdFN2YycsICckd2luZG93JywgJ0JyYW5jaFN2YycsICdVc2VyU3ZjJywgJ050ZlN2YyddO1xuXG5cdGZ1bmN0aW9uIENhc2VNb2RhbENvbnRyb2xsZXIoQ2FyU3ZjLCAkbW9kYWxJbnN0YW5jZSwgQ2FzZVN2Yywkc3RhdGUsIGNhc2VJZCxjYXNlRGV0YWlscywgU3RTdmMsICR3aW5kb3csIEJyYW5jaFN2YywgVXNlclN2YywgTnRmU3ZjKXtcblx0XHR2YXIgdm0gPSB0aGlzOyBcblx0XHR2bS5uZnRPcHRpb24gPSB7fTtcblx0XHR2bS5kaXNwYXRjaExpc3QgPSB2bS5jYXNlT2JqLmRpc3BhdGNoTGlzdC5qb2luKFwiIFwiKTtcblx0XHR2bS5jYXNlT2JqID0ge1xuXHRcdFx0YWRkcmVzcyA6IGNhc2VEZXRhaWxzLmFkZHJlc3MgfHwgbnVsbCxcblx0XHRcdHBob25lIDogY2FzZURldGFpbHMucGhvbmUgfHwgbnVsbCxcblx0XHQgICAgdHlwZSA6IGNhc2VEZXRhaWxzLnR5cGUgfHwgIFwi54Gr6K2mXCIsIFxuXHRcdCAgICB0eXBlcyA6IFsgXCLngavoraZcIiwgXCLmlZHorbdcIiwgXCLngb3lrrNcIiwgXCLmqqLoiIlcIixcIuWFtuS7llwiXSxcblx0XHQgICAgZW52ICAgOiBcIuS9j+WuheeBq+itplwiLFxuXHRcdCAgICBlbnZzICA6IFtcIuS9j+WuheeBq+itplwiLFwi6auY5qiT44CB5Zyw5LiL6IiH5bel5bugXCIsXCLmkLbmlZHlm7Dpm6PljYBcIixcIuWFtuS7llwiXSxcblx0XHQgICAgZmxvb3IgOiAxLCBcblx0XHQgICAgY2FySWRzIDogZ2V0Q2Fyc0RldGFpbChjYXNlRGV0YWlscykuY2FySWRzICB8fCBbXSxcblx0XHQgICAgZGlzcGF0Y2hMaXN0IDogZ2V0Q2Fyc0RldGFpbChjYXNlRGV0YWlscykuZGlzcGF0Y2hMaXN0IHx8ICBbXSxcblx0XHQgICAgYnJhbmNoZXMgOiBnZXRDYXJzRGV0YWlsKGNhc2VEZXRhaWxzKS5icmFuY2hlcyB8fCAgW11cblx0XHR9O1xuXHRcdHZtLnVwZGF0ZSBcdCA9IHVwZGF0ZTtcblx0XHR2bS5nZXRDYXJzIFx0ID0gZ2V0Q2Fycztcblx0XHR2bS5jYW5jZWwgXHQgPSBjYW5jZWw7XG5cdFx0dm0uY2FuY2VsRGlzcGF0Y2ggPSBjYW5jZWxEaXNwYXRjaDtcblx0XHR2bS5kaXNwYXRjaCAgPSBkaXNwYXRjaDtcblx0XHR2bS5jbG9zZUNhc2UgPSBjbG9zZUNhc2U7XG5cdFx0dm0uc2F2ZSBcdCA9IHNhdmU7XG5cblx0XHRpZiAoXy5pc0VtcHR5KGNhc2VEZXRhaWxzKSkge1xuXHRcdFx0dm0uaXNOZXcgPSB0cnVlO1xuXHRcdFx0Y2FyT2JqcyA9IFtdO1xuXHRcdH1lbHNle1xuXHRcdFx0dm0uaXNOZXcgPSBmYWxzZTtcblx0XHRcdHZhciBjYXJPYmpzID0gY2FzZURldGFpbHMuY2Fycztcblx0XHR9O1xuXG5cdFx0TnRmU3ZjLmZldGNoKCkuc3VjY2VzcyhmdW5jdGlvbihuZnRzKXtcblx0XHRcdHZtLm5mdE9wdGlvbi5uZnRzID0gbmZ0cztcblx0XHR9KS50aGVuKGZ1bmN0aW9uKCl7XG5cdFx0XHR2bS5uZnRPcHRpb24ubmZ0ID0gdm0ubmZ0T3B0aW9uLm5mdHNbMF07XG5cdFx0fSlcblxuXHRcdEJyYW5jaFN2Yy5mZXRjaEJ5Q29ycHMoVXNlclN2Yy51c2VyQ29ycHMoKSkuc3VjY2VzcyhmdW5jdGlvbihicmFuY2hlcyl7XG5cdFx0ICAgIHZtLmJyYW5jaGVzID0gYnJhbmNoZXM7XG5cdFx0fSk7XG5cblx0XHRmdW5jdGlvbiBnZXRDYXJzRGV0YWlsKG9iail7XG5cdFx0XHR2YXIgZGlzcGF0Y2hMaXN0ID0gW107XG5cdFx0XHR2YXIgY2FySWRzID0gW107XG5cdFx0XHR2YXIgYnJhbmNoZXMgPSBbXTtcblxuXHRcdFx0aWYgKG9iai5jYXJzKSB7XG5cdFx0XHRcdGZvciAodmFyIGkgPSBvYmouY2Fycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0XHRcdGRpc3BhdGNoTGlzdC5wdXNoKG9iai5jYXJzW2ldLnJhZGlvQ29kZSk7XG5cdFx0XHRcdFx0Y2FySWRzLnB1c2gob2JqLmNhcnNbaV0uX2lkKTtcblx0XHRcdFx0XHRicmFuY2hlcy5wdXNoKG9iai5jYXJzW2ldLmJyYW5jaCk7IFxuXHRcdFx0XHR9O1xuXHRcdFx0XHRyZXR1cm4ge2Rpc3BhdGNoTGlzdCA6IGRpc3BhdGNoTGlzdCAsIGNhcklkcyA6IGNhcklkcyAsIGJyYW5jaGVzIDogIGJyYW5jaGVzfVxuXG5cdFx0XHR9ZWxzZXtcblx0XHRcdFx0cmV0dXJuIHt9O1xuXHRcdFx0fTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gZ2V0QnJhbmNoSWQoYnJhbmNoZXNMaXN0KXtcblx0XHRcdHZhciBicmFuY2hlcyA9IF8udW5pcXVlKGJyYW5jaGVzTGlzdCk7XG5cdFx0XHR2YXIgYnJhbmNoSWRzID0gW107XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHZtLmJyYW5jaGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmIChicmFuY2hlcy5pbmRleE9mKHZtLmJyYW5jaGVzW2ldLm5hbWUpID4gLTEpIHtcblx0XHRcdFx0XHRicmFuY2hJZHMucHVzaCh2bS5icmFuY2hlc1tpXS5faWQpO1xuXHRcdFx0XHR9O1xuXHRcdFx0fTtcblx0XHRcdHJldHVybiAgYnJhbmNoSWRzO1xuXHRcdH07XG5cdFx0XG5cdFx0ZnVuY3Rpb24gZ2V0Q2FycyggYnJhbmNoICl7XG5cdFx0XHQgQ2FyU3ZjLmZldGNoQnlCcmFuY2goYnJhbmNoLm5hbWUpLnN1Y2Nlc3MoZnVuY3Rpb24oY2Fycyl7XG5cdFx0XHQgXHRmb3IgKHZhciBpID0gY2Fycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0IFx0XHRpZiAodm0uY2FzZU9iai5jYXJJZHMuaW5kZXhPZihjYXJzW2ldLl9pZCkgPiAtMSApIHtcblx0XHRcdCBcdFx0XHRjYXJzW2ldLmlzQ2hlY2tlZCA9IHRydWU7IFxuXHRcdFx0IFx0XHR9O1xuXHRcdFx0IFx0fTtcblx0XHRcdCBcdHZtLmNhcnMgPSBjYXJzO1xuXHRcdFx0IH0pO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBjYW5jZWwoKSB7XG5cdFx0XHQkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gY2FuY2VsRGlzcGF0Y2goY2FyKXtcblx0XHRcdGNhci5pc0NoZWNrZWQgPSBmYWxzZTtcblx0XHRcdGNhck9ianMuc3BsaWNlKGNhck9ianMuaW5kZXhPZihjYXIpLDEpXG5cdFx0XHR2bS5jYXNlT2JqLmNhcklkcy5zcGxpY2Uodm0uY2FzZU9iai5kaXNwYXRjaExpc3QuaW5kZXhPZihjYXIuX2lkKSwxKTtcblx0XHRcdHZtLmNhc2VPYmouZGlzcGF0Y2hMaXN0LnNwbGljZSh2bS5jYXNlT2JqLmRpc3BhdGNoTGlzdC5pbmRleE9mKGNhci5yYWRpb0NvZGUpLDEpO1xuXHRcdFx0dm0uY2FzZU9iai5icmFuY2hlcy5zcGxpY2Uodm0uY2FzZU9iai5kaXNwYXRjaExpc3QuaW5kZXhPZihjYXIuYnJhbmNoKSwxKTtcblx0XHRcdHZtLmRpc3BhdGNoTGlzdCA9IHZtLmNhc2VPYmouZGlzcGF0Y2hMaXN0LmpvaW4oXCIgXCIpO1xuXHRcdH07XG5cdFx0XG5cdFx0ZnVuY3Rpb24gZGlzcGF0Y2goIGNhciApe1xuXHRcdFx0Y2FyLmlzQ2hlY2tlZCA9IHRydWU7IFxuXHRcdFx0Y2FyT2Jqcy5wdXNoKGNhcik7XG5cdFx0XHR2bS5jYXNlT2JqLmNhcklkcy5wdXNoKGNhci5faWQpO1xuXHRcdFx0dm0uY2FzZU9iai5kaXNwYXRjaExpc3QucHVzaChjYXIucmFkaW9Db2RlKTtcblx0XHRcdHZtLmNhc2VPYmouYnJhbmNoZXMucHVzaChjYXIuYnJhbmNoKTtcblx0XHRcdHZtLmRpc3BhdGNoTGlzdCA9IHZtLmNhc2VPYmouZGlzcGF0Y2hMaXN0LmpvaW4oXCIgXCIpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBjbG9zZUNhc2UoKXtcblx0XHRcdFN0U3ZjLmNvdW50KGNhc2VEZXRhaWxzLl9pZCkuc3VjY2VzcyhmdW5jdGlvbih0b3RhbCl7XG5cdFx0XHRcdGlmICh0b3RhbCA+IDAgKSB7XG5cdFx0XHRcdFx0JHdpbmRvdy5hbGVydChcIuWwmuaciemaiuWToeWcqOWuieWFqOeuoeWItlwiKVxuXHRcdFx0XHR9ZWxzZXtcblx0XHRcdFx0XHRDYXNlU3ZjLmNsb3NlQ2FzZSh7XG5cdFx0XHRcdFx0XHRpZCA6IGNhc2VEZXRhaWxzLl9pZCxcblx0XHRcdFx0XHRcdGlzT25nb2luZyA6IGZhbHNlXG5cdFx0XHRcdFx0fSkuc3VjY2VzcyhmdW5jdGlvbihtc2cpe1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2cobXNnKVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdCRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuXHRcdFx0XHRcdCRzdGF0ZS5yZWxvYWQoKVxuXHRcdFx0XHR9O1xuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHNhdmUoKXtcblx0XHRcdENhc2VTdmMuY3JlYXRlKHtcblx0XHRcdFx0Y2FzZUlkICAgOiBjYXNlSWQgKyAxLCBcblx0XHRcdFx0YWRkcmVzcyAgIDogdm0uY2FzZU9iai5hZGRyZXNzIHx8IFwi5ris6KmmXCIsXG5cdFx0XHRcdG9mZmljZXJSZWNlaXZlciA6IFVzZXJTdmMuY3VycmVudFVzZXIoKSB8fCAgXCLlionmm4nmm7xcIixcblx0XHRcdFx0dHlwZSAgICAgIDogdm0uY2FzZU9iai50eXBlIHx8IFwi5pWR6K23XCIsXG5cdFx0XHRcdHBob25lICAgICA6IHZtLmNhc2VPYmoucGhvbmUgfHwgXCLmuKzoqaZcIixcblx0XHRcdFx0YnJhbmNoZXMgIDogXy51bmlxdWUodm0uY2FzZU9iai5icmFuY2hlcyksXG5cdFx0XHRcdGJyYW5jaElkcyA6IGdldEJyYW5jaElkKHZtLmNhc2VPYmouYnJhbmNoZXMpLFxuXHRcdCAgXHRcdGNhcnMgICAgICA6IHZtLmNhc2VPYmouY2FySWRzLFxuXHRcdFx0XHRpc09uZ29pbmcgOiB0cnVlLFxuXHRcdFx0XHRjb3JwcyBcdCAgOiBVc2VyU3ZjLnVzZXJDb3JwcygpLFxuXHRcdFx0XHRlbnYgXHQgIDogdm0uY2FzZU9iai5lbnYsXG5cdFx0XHRcdGZsb29yIFx0ICA6IHZtLmNhc2VPYmouZmxvb3Jcblx0XHRcdH0pLnN1Y2Nlc3MoZnVuY3Rpb24obmV3Q2FzZSl7XG5cdFx0XHRcdCRtb2RhbEluc3RhbmNlLmNsb3NlKG5ld0Nhc2UpXG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gdXBkYXRlKCl7XG5cdFx0XHR2YXIgY29udGVudCA9IHtcblx0XHRcdFx0aWQgOiBjYXNlRGV0YWlscy5faWQsXG5cdFx0XHRcdGNhc2VJZCAgIDogY2FzZUlkLCBcblx0XHRcdFx0YWRkcmVzcyAgIDogdm0uY2FzZU9iai5hZGRyZXNzLFxuXHRcdFx0XHRvZmZpY2VyUmVjZWl2ZXIgOiBVc2VyU3ZjLmN1cnJlbnRVc2VyKCkgfHwgXCLlionmm4nmm7xcIixcblx0XHRcdFx0dHlwZSAgICAgIDogdm0uY2FzZU9iai50eXBlLFxuXHRcdFx0XHRwaG9uZSAgICAgOiB2bS5jYXNlT2JqLnBob25lLFxuXHRcdFx0XHRicmFuY2hlcyAgOiBfLnVuaXF1ZSh2bS5jYXNlT2JqLmJyYW5jaGVzKSxcblx0XHRcdFx0YnJhbmNoSWRzIDogZ2V0QnJhbmNoSWQodm0uY2FzZU9iai5icmFuY2hlcyksXG5cdFx0ICBcdFx0Y2FycyAgICAgIDogdm0uY2FzZU9iai5jYXJJZHMsXG5cdFx0XHRcdGlzT25nb2luZyA6IHRydWUsXG5cdFx0XHRcdGVudiBcdCAgOiB2bS5jYXNlT2JqLmVudixcblx0XHRcdFx0Zmxvb3IgXHQgIDogdm0uY2FzZU9iai5mbG9vclxuXHRcdFx0fTtcblx0XHRcdFxuXHRcdFx0Q2FzZVN2Yy51cGRhdGUoY29udGVudCk7XG5cdFx0XHQkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcblx0XHR9O1xuXHR9XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5jYXNlIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5jYXNlJylcblx0XHQuY29udHJvbGxlcignQ2FzZU5ld0NvbnRyb2xsZXInLENhc2VOZXdDb250cm9sbGVyKTtcblxuXHRDYXNlTmV3Q29udHJvbGxlci4kaW5qZWN0ID0gWydDYXJTdmMnLCAnQnJhbmNoU3ZjJywgJ050ZlN2YycsICdVc2VyU3ZjJywnJGxvY2F0aW9uJywnbGVhZmxldERhdGEnLCAnJHN0YXRlUGFyYW1zJywgJ0Nhc2VTdmMnLCAnJHdpbmRvdycsICckc3RhdGUnLCAnR2VvU3ZjJ107XG5cblx0ZnVuY3Rpb24gQ2FzZU5ld0NvbnRyb2xsZXIoQ2FyU3ZjLCBCcmFuY2hTdmMsIE50ZlN2YywgVXNlclN2YywkbG9jYXRpb24sbGVhZmxldERhdGEsICRzdGF0ZVBhcmFtcywgQ2FzZVN2YywgJHdpbmRvdywgJHN0YXRlLCBHZW9TdmMpe1xuXHRcdHZhciB2bSA9IHRoaXM7XG5cdFx0dm0uc2VsZWN0QnJhbmNoID0gc2VsZWN0QnJhbmNoO1xuXHRcdHZtLnNhdmUgPSBzYXZlO1xuXHRcdHZtLmxvY2F0ZUFkZHJlc3MgPSBsb2NhdGVBZGRyZXNzO1xuXHRcdHZtLmNhbmNlbERpc3BhdGNoID0gY2FuY2VsRGlzcGF0Y2g7XG5cdFx0dm0uZGlzcGF0Y2ggPSBkaXNwYXRjaDtcblx0XHR2bS5jdXJyZW50VGltZSA9ICBtb21lbnQoKS5mb3JtYXQoJ2g6bW06c3MgYScpOyBcblx0XHR2YXIgYmF0dGxlUmFkaXVzcyA9IFtdO1xuXHRcdHZhciBkaXNwYXRjaENhcnMgPSBbXTtcblx0XHR2YXIgbm90aWZpY2F0aW9ucztcblx0XHR2bS5kaXNwYXRjaExpc3QgPSB2bS5jdXJyZW50Q2FzZS5kaXNwYXRjaExpc3Quam9pbignICcpO1xuXHRcdFxuXHRcdHZtLmN1cnJlbnRDYXNlID0ge1xuXHRcdFx0cGhvbmUgXHQ6IG51bGwsXG5cdFx0ICAgIHR5cGUgXHQ6ICfngavoraYnLCBcblx0XHQgICAgdHlwZXMgXHQ6IFsgJ+eBq+itpicsICfmlZHorbcnLCAn54G95a6zJywgJ+aqouiIiScsJ+WFtuS7liddLFxuXHRcdCAgICBlbnYgICBcdDogJ+S9j+WuheeBq+itpicsXG5cdFx0ICAgIGVudnMgIFx0OiBbJ+S9j+WuheeBq+itpicsJ+mrmOaok+OAgeWcsOS4i+iIh+W3peW7oCcsJ+aQtuaVkeWbsOmbo+WNgCcsJ+WFtuS7liddLFxuXHRcdCAgICBmbG9vciBcdDogMSwgXG5cdFx0ICAgIGNhcklkcyAgOiBbXSxcblx0XHQgICAgZGlzcGF0Y2hMaXN0IDogW10sXG5cdFx0ICAgIGJyYW5jaGVzIDogIFtdLFxuXHRcdCAgICBsb2NhdGlvbiA6IEdlb1N2Yy5kZWZhdWx0TG9jYXRpb24oKVxuXHRcdH07IFxuXG5cdFx0R2VvU3ZjLmZldGNoQmFzZUxvY2F0aW9uKFVzZXJTdmMudXNlckNvcnBzKCkpLnN1Y2Nlc3MoZnVuY3Rpb24obG9jYXRpb25zKXtcblx0XHRcdHZtLmxvY2F0aW9ucyA9IGxvY2F0aW9ucztcblx0XHR9KTtcblxuXHQgICAgYW5ndWxhci5leHRlbmQodm0sIHtcblx0ICAgICAgICBub3dQb3M6IHtcblx0ICAgICAgICAgICAgbGF0OiBHZW9TdmMuZGVmYXVsdExvY2F0aW9uKCkubGF0LFxuXHQgICAgICAgICAgICBsbmc6IEdlb1N2Yy5kZWZhdWx0TG9jYXRpb24oKS5sbmcsXG5cdCAgICAgICAgICAgIHpvb206IDE3XG5cdCAgICAgICAgfSxcblx0ICAgICAgIG1hcmtlcnM6IHt9LFxuXHQgICAgfSk7XG5cblx0XHRCcmFuY2hTdmMuZmV0Y2hCeUNvcnBzKFVzZXJTdmMudXNlckNvcnBzKCkpLnN1Y2Nlc3MoZnVuY3Rpb24oYnJhbmNoZXMpe1xuXHRcdCAgICB2bS5icmFuY2hlcyA9IGJyYW5jaGVzO1xuXHRcdCAgICB2bS5jdXJyZW50QnJhbmNoID0gYnJhbmNoZXNbMF0ubmFtZVxuXHRcdH0pO1xuXG5cdFx0Q2FyU3ZjLmZldGNoQnlDb3JwcyhVc2VyU3ZjLnVzZXJDb3JwcygpKS5zdWNjZXNzKGZ1bmN0aW9uKGNhcnMpe1xuXHRcdFx0dm0uY2FycyA9IGNhcnM7IFxuXHRcdH0pO1xuXG5cdFx0TnRmU3ZjLmZldGNoKCkuc3VjY2VzcyhmdW5jdGlvbihudGZzKXtcblx0XHRcdG5vdGlmaWNhdGlvbnMgPSBudGZzO1xuXHRcdFx0dm0uY3VycmVudENhc2UubnRmcyA9IF8ucGx1Y2sobnRmcywndHlwZScpXG5cdFx0XHR2bS5jdXJyZW50Q2FzZS5udGYgID0gdm0uY3VycmVudENhc2UubnRmc1swXTtcblx0XHR9KTtcblxuXHRcdGZ1bmN0aW9uIGxvY2F0ZUFkZHJlc3MoKXtcblx0XHRcdGlmICh2bS5jdXJyZW50Q2FzZS5hZGRyZXNzKSB7XG5cdFx0XHRcdEdlb1N2Yy5nZXRHZW9FbmNvZGVkSW5mbyh2bS5jdXJyZW50Q2FzZS5hZGRyZXNzKS50aGVuKGZ1bmN0aW9uKHJlcyl7XG5cdFx0XHQgICAgICAgIHZtLm5vd1Bvcy5sYXQgPSByZXMuSjtcblx0XHRcdCAgICAgICAgdm0ubm93UG9zLmxuZyA9IHJlcy5NO1xuXHRcdCAgICAgICAgICAgIHZtLm1hcmtlcnMubWFpbk1hcmtlciA9IHtcblx0XHQgICAgICAgICAgICBcdGxhdDogcmVzLkosXG5cdFx0ICAgICAgICAgICAgICAgIGxuZzogcmVzLk0sXG5cdFx0ICAgICAgICAgICAgICAgIGZvY3VzOiB0cnVlLFxuXHRcdCAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIuahiOS7tuaomeeahFwiLFxuXHRcdCAgICAgICAgICAgIH07XG5cblx0XHQgICAgICAgICAgICBpZiAocmVzKSB7XG5cdFx0ICAgICAgICAgICAgXHR2bS5sb2NhdGlvbnMuZm9yRWFjaChmdW5jdGlvbihsb2NhdGlvbil7XG5cdFx0XHQgICAgICAgICAgICBcdHZhciByID0gR2VvU3ZjLmdldERpc3RhbmNlKCBsb2NhdGlvbiwgeyBsYXQgOiByZXMuSiAsIGxuZyA6IHJlcy5NIH0gKTtcblx0XHRcdCAgICAgICAgICAgIFx0dmFyIGJhdHRsZVJhZGl1cyA9ICB7IGJhc2UgOiBsb2NhdGlvbi5icmFuY2gsICB0byA6IHsgbGF0IDogcmVzLkosIGxuZyA6ICByZXMuTSB9LCBmcm9tIDogeyBsYXQgOiBsb2NhdGlvbi5sYXQsIGxuZyA6IGxvY2F0aW9uLmxuZyB9LCBkIDogciB9OyBcblx0XHRcdCAgICAgICAgICAgIFx0YmF0dGxlUmFkaXVzcy5wdXNoKCBKU09OLnN0cmluZ2lmeShiYXR0bGVSYWRpdXMpKTtcblx0XHRcdCAgICAgICAgICAgIH0pO1xuXHRcdCAgICAgICAgICAgIH07XG5cdFx0XHRcdH0pO1xuXHRcdFx0fTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gc2VsZWN0QnJhbmNoKGJyYW5jaCl7XG5cdCAgICBcdHZtLmN1cnJlbnRCcmFuY2ggPSBicmFuY2gubmFtZTtcblx0ICAgIH07XG5cblx0XHRmdW5jdGlvbiBkaXNwYXRjaCggY2FyICl7XG5cdFx0XHRjYXIuaXNDaGVja2VkID0gdHJ1ZTsgXG5cdFx0XHRkaXNwYXRjaENhcnMucHVzaChjYXIpO1xuXHRcdFx0dm0uZGlzcGF0Y2hMaXN0ID0gXy5wbHVjayhkaXNwYXRjaENhcnMsICdyYWRpb0NvZGUnKS5qb2luKFwiIFwiKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gY2FuY2VsRGlzcGF0Y2goY2FyKXtcblx0XHRcdGNhci5pc0NoZWNrZWQgPSBmYWxzZTtcblx0XHRcdGRpc3BhdGNoQ2Fycy5zcGxpY2UoXy5wbHVjayhkaXNwYXRjaENhcnMsICdfaWQnKS5pbmRleE9mKGNhci5faWQpLDEpO1xuXHRcdFx0dm0uZGlzcGF0Y2hMaXN0ID0gXy5wbHVjayhkaXNwYXRjaENhcnMsICdyYWRpb0NvZGUnKS5qb2luKFwiIFwiKTtcblx0XHRcdHZtLmRpc3BhdGNoTGlzdCA9IHZtLmN1cnJlbnRDYXNlLmRpc3BhdGNoTGlzdC5qb2luKFwiIFwiKTtcblx0XHR9O1xuXHRcblx0XHRmdW5jdGlvbiBzYXZlKCl7XG5cdFx0XHR2YXIgY3VycmVudE50Zjtcblx0XHRcdHZhciBicmFuY2hlcyAgPSBfLnVuaXF1ZShfLnBsdWNrKGRpc3BhdGNoQ2FycywgJ2JyYW5jaCcpKTtcblx0XHRcdHZhciBkaXNwYXRjaCA9IHZtLmJyYW5jaGVzLmZpbHRlcihmdW5jdGlvbihicmFuY2gpIHsgcmV0dXJuIGJyYW5jaGVzLmluZGV4T2YoYnJhbmNoLm5hbWUpID4gLTEgfSk7XG5cblx0XHRcdG5vdGlmaWNhdGlvbnMuZm9yRWFjaChmdW5jdGlvbihudGYsaWQpe1xuXHRcdFx0XHRpZiAobnRmLnR5cGUgPT0gdm0uY3VycmVudENhc2UubnRmICl7XG5cdFx0XHRcdFx0Y3VycmVudE50ZiAgPSBub3RpZmljYXRpb25zW2lkXVxuXHRcdFx0XHR9O1xuXHRcdFx0fSk7XG5cblx0XHRcdENhc2VTdmMuY3JlYXRlKHtcblx0XHRcdFx0b2ZmaWNlclJlY2VpdmVyIDogVXNlclN2Yy5jdXJyZW50VXNlcigpIHx8ICAn5YqJ5puJ5pu8Jyxcblx0XHRcdFx0dHlwZSAgICAgIFx0XHQ6IHZtLmN1cnJlbnRDYXNlLnR5cGUgfHwgJ+eBq+itpicsXG5cdFx0XHRcdHR5cGVzIFx0ICBcdFx0OiB2bS5jdXJyZW50Q2FzZS50eXBlcyxcblx0XHRcdFx0cGhvbmUgICAgIFx0XHQ6IHZtLmN1cnJlbnRDYXNlLnBob25lIHx8ICfmuKzoqaYnLFxuXHRcdFx0XHRicmFuY2hlcyAgXHRcdDogXy51bmlxdWUoXy5wbHVjayhkaXNwYXRjaENhcnMsICdicmFuY2gnKSksXG5cdFx0XHRcdGJyYW5jaElkcyBcdFx0OiBfLnBsdWNrKGRpc3BhdGNoLCAnX2lkJyksXG5cdFx0ICBcdFx0Y2FycyAgICAgIFx0XHQ6IF8ucGx1Y2soZGlzcGF0Y2hDYXJzLCdfaWQnKSxcblx0XHRcdFx0Y29ycHMgXHQgIFx0XHQ6IFVzZXJTdmMudXNlckNvcnBzKCksXG5cdFx0XHRcdGVudiBcdCAgXHRcdDogdm0uY3VycmVudENhc2UuZW52LFxuXHRcdFx0XHRlbnZzIFx0ICBcdFx0OiB2bS5jdXJyZW50Q2FzZS5lbnZzLFxuXHRcdFx0XHRmbG9vciBcdCAgXHRcdDogdm0uY3VycmVudENhc2UuZmxvb3IsXG5cdFx0XHRcdG50ZiAgICAgICBcdFx0OiBjdXJyZW50TnRmLl9pZCxcblx0XHRcdFx0Y3JlYXRlQXQgIFx0XHQ6IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTU0tREQsIGg6bW06c3MgYScpLFxuXHRcdFx0XHRsYXN0VXBkYXRlIFx0XHQ6IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTU0tREQsIGg6bW06c3MgYScpLFxuXHRcdFx0XHRsb2NhdGlvbiAgXHRcdDogIHtcblx0XHRcdFx0XHRsYXQgXHQ6IHZtLmN1cnJlbnRDYXNlLmxvY2F0aW9uLmxhdCxcblx0XHRcdFx0XHRsbmcgXHQ6IHZtLmN1cnJlbnRDYXNlLmxvY2F0aW9uLmxuZyxcblx0XHRcdFx0XHRhZGRyZXNzIDogdm0uY3VycmVudENhc2UubG9jYXRpb24uYWRkcmVzcyB8fCAn5ris6KmmJ1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRiYXR0bGVSYWRpdXNzIFx0OiBiYXR0bGVSYWRpdXNzXG5cdFx0XHR9KS5zdWNjZXNzKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdCR3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG5cdFx0XHR9KTtcblx0XHR9O1xuXHR9XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5jYXNlIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5jYXNlJylcblx0XHQuc2VydmljZSgnQ2FzZVN2YycsIENhc2VTdmMpO1xuXG5cdENhc2VTdmMuJGluamVjdCA9IFsnJGh0dHAnXTtcblxuXHRmdW5jdGlvbiBDYXNlU3ZjKCAkaHR0cCApIHtcblx0XHR2YXIgc3ZjID0gdGhpcztcblx0XHRzdmMuZmV0Y2ggXHRcdD0gZmV0Y2g7XG5cdFx0c3ZjLmZldGNoQWxsIFx0PSBmZXRjaEFsbDtcblx0XHRzdmMuY2xvc2VDYXNlIFx0PSBjbG9zZUNhc2U7XG5cdFx0c3ZjLmZldGNoUmVsYXRpdmVDYXNlID0gZmV0Y2hSZWxhdGl2ZUNhc2U7IFxuXHRcdHN2Yy5mZXRjaERldGFpbHMgPSBmZXRjaERldGFpbHM7XG5cdFx0c3ZjLmZldGNoQnlJZCBcdD0gZmV0Y2hCeUlkO1xuXHRcdHN2Yy5jcmVhdGUgXHRcdD0gY3JlYXRlO1xuXHRcdHN2Yy5kZWxldGUgXHRcdD0gZGVsZXRlQ2FzZTtcblx0XHRzdmMudXBkYXRlIFx0XHQ9IHVwZGF0ZTtcblx0XHRcblx0XHRmdW5jdGlvbiBmZXRjaChjb3JwcywgcGFnZSwgaXRlbXNQZXJQYWdlKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2FzZXM/Y29ycHM9JyArIGNvcnBzICsgJyZwYWdlPScgKyBwYWdlICsgJyZpcHA9JyArIGl0ZW1zUGVyUGFnZSApO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBmZXRjaEFsbCgpe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9jYXNlcy9kZXRhaWxzJyk7XG5cdFx0fTtcblx0XHRcblx0XHRmdW5jdGlvbiBmZXRjaFJlbGF0aXZlQ2FzZShjb24pe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9jYXNlcy9icmFuY2g/YnJhbmNoPScgKyBjb24uYnJhbmNoICsgJyZhY2Nlc3NMZXZlbD0nICsgY29uLmFjY2Vzc0xldmVsICsgJyZjb3Jwcz0nICsgY29uLmNvcnBzICk7XG5cdFx0fTtcblx0XHRcblx0XHRmdW5jdGlvbiBmZXRjaERldGFpbHMoY2FzZUlkKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2FzZXMvZGV0YWlscy8nICsgY2FzZUlkKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gZmV0Y2hCeUlkKCBjYXNlSWQgKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvY2FzZXMvJyArIGNhc2VJZCApO1xuXHRcdH07XG5cdFx0XG5cdFx0ZnVuY3Rpb24gY3JlYXRlKGNhc2VfaW5mbyl7XG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9jYXNlcycsIGNhc2VfaW5mbyk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGRlbGV0ZUNhc2UoY2FzZUlkKXtcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2Nhc2VzLycgKyBjYXNlSWQpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiB1cGRhdGUodXBkYXRlZF9jYXNlKXtcblx0XHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvY2FzZXMvJyArIHVwZGF0ZWRfY2FzZS5jYXNlSWQgLCB1cGRhdGVkX2Nhc2UpO1xuXHRcdH07XG5cdFx0XG5cdFx0ZnVuY3Rpb24gY2xvc2VDYXNlKGRhdGEpe1xuXHRcdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9jYXNlcy9jbG9zZT9pZD0nICsgZGF0YS5pZCwgZGF0YSApO1xuXHRcdH07XG5cdH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLmNhc2UgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLmNhc2UnKVxuXHRcdC5jb250cm9sbGVyKCdDYXNlU2hvd0NvbnRyb2xsZXInLCBDYXNlU2hvd0NvbnRyb2xsZXIpO1xuXG5cdFx0Q2FzZVNob3dDb250cm9sbGVyLiRpbmplY3QgPSAgWyAnU3RTdmMnLCAnJHN0YXRlUGFyYW1zJywgJyRpbnRlcnZhbCcsICckc3RhdGUnLCAnU29ja2V0U3ZjJywgJ0Nhc2VTdmMnLCAnQnJhbmNoU3ZjJywgJ1N0TWlzc2lvbkZhYyddO1xuXG5cdFx0ZnVuY3Rpb24gQ2FzZVNob3dDb250cm9sbGVyKCl7XG5cdFx0XHR2YXIgdm0gPSB0aGlzOyBcblx0XHRcdHZtLmlzQ29sbGFwc2VkID0gdHJ1ZSA7XG5cdFx0XHR2bS5tZW1iZXJzID0gW107XG5cdFx0XHR2bS5wb3NpdGlvbnMgPSBTdE1pc3Npb25GYWMucG9zaXRpb24oKS5wb3NzO1xuXG5cdFx0XHRTb2NrZXRTdmMub24oJ25ld1N0JywgZnVuY3Rpb24oc3Qpe1xuXHRcdFx0XHRpZiAoIGFuZ3VsYXIuZXF1YWxzKGNhc2VJZCxzdC5jYXNlSWQpKSB7XG5cdFx0XHRcdFx0dmFyIG5ld1N0ID0gYW5ndWxhci5jb3B5KHN0KTtcblx0XHRcdFx0XHR2bS5zdHJpa2VUZWFtcy5wdXNoKG5ld1N0KTtcblx0XHRcdFx0fTtcblx0XHRcdFx0dm0uZGVwbG95cyA9IGluaXRUYWJsZSh2bS5zdHJpa2VUZWFtcyk7XG5cdFx0XHRcdHZtLmRlcGxveURldGFpbHMgPSBpbml0RGVwbG95KHZtLnN0cmlrZVRlYW1zKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRTb2NrZXRTdmMub24oJ3VwZGF0ZVN0JywgZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHRcdFN0U3ZjLmZldGNoQnlDYXNlKGNhc2VJZCkuc3VjY2VzcyhmdW5jdGlvbihzdHJpa2VUZWFtcyl7XG5cdFx0XHRcdFx0dm0uc3RyaWtlVGVhbXMgPSBzdHJpa2VUZWFtcztcblx0XHRcdFx0XHR2bS5zdHJpa2VUZWFtcy5mb3JFYWNoKGZ1bmN0aW9uKHN0KXtcblx0XHRcdFx0XHRcdHN0LmxpbWl0VGltZSA9IG1vbWVudC5kdXJhdGlvbihzdC53b3JraW5nVGltZSwnc2Vjb25kcycpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHZtLmRlcGxveXMgPSBpbml0VGFibGUodm0uc3RyaWtlVGVhbXMpO1xuXHRcdFx0XHRcdHZtLmRlcGxveURldGFpbHMgPSBpbml0RGVwbG95KHZtLnN0cmlrZVRlYW1zKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdH0pXG5cblx0XHRcdFNvY2tldFN2Yy5vbignZGlzbWlzcycsIGZ1bmN0aW9uKGRhdGEpe1xuXHRcdFx0XHRTdFN2Yy5mZXRjaEJ5Q2FzZShjYXNlSWQpLnN1Y2Nlc3MoZnVuY3Rpb24oc3RyaWtlVGVhbXMpe1xuXHRcdFx0XHRcdHZtLnN0cmlrZVRlYW1zIFx0ID0gc3RyaWtlVGVhbXM7XG5cdFx0XHRcdFx0dm0uZGVwbG95cyBcdFx0ID0gaW5pdFRhYmxlKHZtLnN0cmlrZVRlYW1zKTtcblx0XHRcdFx0XHR2bS5kZXBsb3lEZXRhaWxzID0gaW5pdERlcGxveSh2bS5zdHJpa2VUZWFtcyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblxuXHRcdFx0dmFyIGNhc2VJZCA9ICRzdGF0ZVBhcmFtcy5pZDtcblx0XHRcdENhc2VTdmMuZmV0Y2hEZXRhaWxzKGNhc2VJZCkuc3VjY2VzcyhmdW5jdGlvbihfY2FzZSl7XG5cdFx0XHRcdF9jYXNlLmVudiA9PSAn5L2P5a6F54Gr6K2mJyA/IHZtLmFwYXJ0bWVudCA9IHRydWUgOiB2bS5hcGFydG1lbnQgPSBmYWxzZTtcblx0XHRcdFx0dm0uY2FzZURldGFpbCA9IF9jYXNlO1xuXHRcdFx0XHR2bS5wb3NpdGlvbiA9IHtcblx0XHRcdFx0XHRkZWZhdWx0UG9zIFx0OiBcIuesrOS4gOmdolwiLFxuXHRcdFx0XHRcdHBvc2l0aW9ucyBcdDogW1wi56ys5LiA6Z2iXCIsXCLnrKzkuozpnaJcIixcIuesrOS4iemdolwiLFwi56ys5Zub6Z2iXCJdLFxuXHRcdFx0XHRcdGZsb29yIFx0XHQ6IHZtLmNhc2VEZXRhaWwuZmxvb3IsXG5cdFx0XHRcdFx0Zmxvb3JzICBcdDogdm0uY2FzZURldGFpbC5mbG9vciA8IDU/IF8ucmFuZ2UoMSw2LDEpIDogXy5yYW5nZSh2bS5jYXNlRGV0YWlsLmZsb29yLTIsdm0uY2FzZURldGFpbC5mbG9vciszLDEpXG5cdFx0XHRcdH07XG5cdFx0XHR9KTtcblxuXHRcdFx0U3RTdmMuZmV0Y2hCeUNhc2UoY2FzZUlkKS5zdWNjZXNzKGZ1bmN0aW9uKHN0cmlrZVRlYW1zKXtcblx0XHRcdFx0aWYgKHN0cmlrZVRlYW1zKSB7XG5cdFx0XHRcdFx0dm0uc3RyaWtlVGVhbXMgPSBzdHJpa2VUZWFtcztcblx0XHRcdFx0XHR2bS5zdHJpa2VUZWFtcy5mb3JFYWNoKGZ1bmN0aW9uKHN0KXtcblx0XHRcdFx0XHRcdHN0LmxpbWl0VGltZSA9IG1vbWVudC5kdXJhdGlvbihzdC53b3JraW5nVGltZSwnc2Vjb25kcycpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdHZtLmRlcGxveXMgPSBpbml0VGFibGUodm0uc3RyaWtlVGVhbXMpO1xuXHRcdFx0XHRcdHZtLmRlcGxveURldGFpbHMgPWluaXREZXBsb3kodm0uc3RyaWtlVGVhbXMpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiBcblx0XHRcdFx0fTtcblx0XHRcdH0pO1xuXG5cblx0XHRcdHZhciBpbml0RGVwbG95ID0gZnVuY3Rpb24oc3RyaWtlVGVhbXMpe1xuXHRcdFx0XHRyZXR1cm4gIF8uZ3JvdXBCeShzdHJpa2VUZWFtcyxmdW5jdGlvbihzdCl7XG5cdFx0XHRcdFx0XHRyZXR1cm4gc3QucG9zaXRpb247XG5cdFx0XHRcdH0pO1xuXHRcdFx0fTtcblxuXHRcdFx0dmFyIGluaXRUYWJsZSA9ICBmdW5jdGlvbihzdHJpa2VUZWFtcyl7XG5cdFx0XHQgIFx0dmFyIGRlcGxveUFycmF5ID0gXy5yYW5nZSg0KS5tYXAoZnVuY3Rpb24gKCkge1xuXHRcdFx0ICAgICAgICByZXR1cm4gXy5yYW5nZSg1KS5tYXAoZnVuY3Rpb24gKCkge1xuXHRcdFx0ICAgICAgICAgICAgcmV0dXJuIHsgdG90YWxNZW1iZXIgOiAwLCBzdFRvdGFsIDogMCAsIHN0cyA6IFtdIH0gO1xuXHRcdFx0ICAgICAgICB9KTtcblx0XHRcdCAgICB9KTtcblxuXHRcdFx0XHRpZiAoIHN0cmlrZVRlYW1zICl7XG5cdFx0XHRcdFx0Zm9yICh2YXIgaSA9IHN0cmlrZVRlYW1zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRcdFx0XHR2YXIgdG90YWxNZW1iZXIgPSAwO1xuXHRcdFx0XHRcdFx0dmFyIHkgPSBudWxsO1xuXHRcdFx0XHRcdFx0dmFyIHN0ID0gMDtcblx0XHRcdFx0XHRcdHZhciB4ID0gXy5pbmRleE9mKHN0cmlrZVRlYW1zW2ldLnBvc2l0aW9ucywgc3RyaWtlVGVhbXNbaV0ucG9zaXRpb24pO1xuXHRcdFx0XHRcdFx0dm0uYXBhcnRtZW50ID8geSA9IF8uaW5kZXhPZihzdHJpa2VUZWFtc1tpXS5mbG9vcnMsIHN0cmlrZVRlYW1zW2ldLmZsb29yKSA6IHkgPSBfLmluZGV4T2Yoc3RyaWtlVGVhbXNbaV0uYXJlYXMsIHN0cmlrZVRlYW1zW2ldLmFyZWEpXG5cdFx0XHRcdFx0XHRkZXBsb3lBcnJheVt4XVt5XS5zdFRvdGFsICs9IDE7XG5cdFx0XHRcdFx0XHRkZXBsb3lBcnJheVt4XVt5XS50b3RhbE1lbWJlciArPSBzdHJpa2VUZWFtc1tpXS5tZW1iZXJzLmxlbmd0aDtcblx0XHRcdFx0XHRcdHZhciBzdEluRm8gPSB7fTtcblx0XHRcdFx0XHRcdHN0SW5Gby5pZCA9IHN0cmlrZVRlYW1zW2ldLmJyYW5jaCArIHN0cmlrZVRlYW1zW2ldLmlkXG5cdFx0XHRcdFx0XHRzdEluRm8ubnVtYmVyID0gc3RyaWtlVGVhbXNbaV0ubWVtYmVycy5sZW5ndGg7XG5cdFx0XHRcdFx0XHRzdEluRm8uZ3JvdXAgPSBzdHJpa2VUZWFtc1tpXS5ncm91cDtcblx0XHRcdFx0XHRcdGRlcGxveUFycmF5W3hdW3ldLnN0cy5wdXNoKHN0SW5Gbyk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gZGVwbG95QXJyYXlcblx0XHRcdH07XG5cdFx0XHRcblx0XHRcdHZtLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0XHQgICAgICAgIFNvY2tldFN2Yy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblx0XHQgICAgfSk7XG5cdFx0fVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0LyoqXG5cdCogYXBwLmRhc2hib2FyZCBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuZGFzaGJvYXJkJylcblx0XHQuY29udHJvbGxlcignRGFzaGJvYXJkQ29udHJvbGxlcicsRGFzaGJvYXJkQ29udHJvbGxlcik7XG5cblx0RGFzaGJvYXJkQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9jYXRpb24nLCAnU29ja2V0U3ZjJywgJ1VzZXJTdmMnLCAnQnJhbmNoU3ZjJ107XG5cdGZ1bmN0aW9uIERhc2hib2FyZENvbnRyb2xsZXIoJGxvY2F0aW9uLCBTb2NrZXRTdmMsIFVzZXJTdmMsIEJyYW5jaFN2Yyl7XG5cdFx0dmFyIHZtID0gdGhpczsgXG5cblx0XHRCcmFuY2hTdmMuZmV0Y2hCeUNvcnBzKFVzZXJTdmMudXNlckNvcnBzKCkpLnN1Y2Nlc3MoZnVuY3Rpb24oYnJhbmNoZXMpe1xuXHRcdFx0cmV0dXJuIHZtLmJyYW5jaGVzID0gYnJhbmNoZXM7XG5cdFx0fSk7XG5cblx0XHRVc2VyU3ZjLmZldGNoT25saW5lVXNlcigpLnN1Y2Nlc3MoZnVuY3Rpb24odXNlcnMpe1xuXHRcdFx0cmV0dXJuIHZtLnVzZXJzID0gdXNlcnM7XG5cdFx0fSk7XG5cblx0XHRTb2NrZXRTdmMub24oJ3VzZXJMb2dpbicsZnVuY3Rpb24odXNlcil7XG5cdFx0XHRyZXR1cm4gdm0udXNlcnMucHVzaCh1c2VyKTtcblx0XHR9KTtcblxuXHRcdFNvY2tldFN2Yy5vbigndXNlckRpc2Nvbm5lY3QnLGZ1bmN0aW9uKGRpc2Nvbm5lY3RVc2VyKXtcblx0XHRcdHZtLnVzZXJzID0gdm0udXNlcnMuZmlsdGVyKGZ1bmN0aW9uKHVzZXIpIHtcblx0XHRcdFx0cmV0dXJuIHVzZXIudXNlcm5hbWUgIT0gZGlzY29ubmVjdFVzZXIudXNlcm5hbWVcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0U29ja2V0U3ZjLm9uKCd1c2VyTG9nb3V0JyxmdW5jdGlvbihsb2dvdXRVc2VyKXtcblx0XHRcdHZtLnVzZXJzID0gdm0udXNlcnMuZmlsdGVyKGZ1bmN0aW9uKHVzZXIpIHtcblx0XHRcdFx0cmV0dXJuIHVzZXIudXNlcm5hbWUgIT0gbG9nb3V0VXNlci51c2VybmFtZVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHR2bS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgcmV0dXJuIFNvY2tldFN2Yy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblx0ICAgIH0pO1xuXHR9XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5kaXJlY3RvciBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuZGlyZWN0b3InKVxuXHRcdC5jb250cm9sbGVyKCdEaXJEdXR5TGlzdENvbnRyb2xsZXInLERpckR1dHlMaXN0Q29udHJvbGxlcik7XG5cblx0RGlyRHV0eUxpc3RDb250cm9sbGVyLiRpbmplY3QgPSBbJ1VzZXJTdmMnLCAnQnJhbmNoU3ZjJ107XG5cblx0ZnVuY3Rpb24gRGlyRHV0eUxpc3RDb250cm9sbGVyKCBVc2VyU3ZjICwgQnJhbmNoU3ZjICl7XG5cdFx0dmFyIHZtID0gdGhpcztcblx0XHR2YXIgYnJhbmNoID0gVXNlclN2Yy51c2VyQnJhbmNoKCk7XG5cdFx0XG5cdFx0QnJhbmNoU3ZjLmZldGNoQnlOYW1lKGJyYW5jaCkuc3VjY2VzcyhmdW5jdGlvbihicmFuY2gpe1xuXHRcdFx0dm0uYnJhbmNoIFx0XHQ9IGJyYW5jaDtcblx0XHRcdHZtLm9uRHV0eVRvdGFsIFx0PSB2bS5icmFuY2gubWVtYmVycy5maWx0ZXIoZnVuY3Rpb24obWVtYmVyKSB7XG5cdFx0XHRcdHJldHVybiBtZW1iZXIub25EdXR5ID09IHRydWUgXG5cdFx0XHR9KTtcblx0XHR9KTsgXG5cdH07XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5kYXNoYm9hcmQgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLmRpcmVjdG9yJylcblx0XHQuY29udHJvbGxlcignRGlyRHV0eUxpc3RFZGl0Q29udHJvbGxlcicsRGlyRHV0eUxpc3RFZGl0Q29udHJvbGxlcik7XG5cblx0RGlyRHV0eUxpc3RFZGl0Q29udHJvbGxlci4kaW5qZWN0ID0gWydCcmFuY2hTdmMnLCAnJHN0YXRlUGFyYW1zJywnTWVtYmVyU3ZjJywgJyRsb2NhdGlvbicsICckd2luZG93JywgJ1VzZXJTdmMnLCAnQ2FyU3ZjJywgJ1N0TWlzc2lvbkZhYyddO1xuXG5cdGZ1bmN0aW9uIERpckR1dHlMaXN0RWRpdENvbnRyb2xsZXIoQnJhbmNoU3ZjLCAkc3RhdGVQYXJhbXMsTWVtYmVyU3ZjLCAkbG9jYXRpb24sICR3aW5kb3csIFVzZXJTdmMsIENhclN2YywgU3RNaXNzaW9uRmFjKXtcblx0XHR2YXIgdm0gPSB0aGlzO1xuXHRcdHZhciBicmFuY2ggXHQ9IFVzZXJTdmMudXNlckJyYW5jaCgpO1xuXHRcdHZtLmNoZWNrIFx0PSBjaGVjaztcblx0XHR2bS5zYXZlIFx0PSBzYXZlOyAgIFxuXG5cdFx0QnJhbmNoU3ZjLmZldGNoQnlOYW1lKGJyYW5jaCkuc3VjY2VzcyhmdW5jdGlvbihicmFuY2gpe1xuXHRcdFx0dm0uYnJhbmNoID0gYnJhbmNoO1xuXHRcdFx0dm0uaXNDb3JwcyA9ICB0cnVlID8gYnJhbmNoLm5hbWUuc3BsaXQoXCLmlZHngb3mlZHorbdcIilbMV0gOiBmYWxzZSBcblx0XHRcdHZhciBtZW1iZXJzID0gXy5wbHVjayhicmFuY2gubWVtYmVycy5maWx0ZXIoZnVuY3Rpb24obWVtYmVyKSB7IHJldHVybiBtZW1iZXIubGV2ZWwgPCAyLjQgfSksICduYW1lJylcblx0XHRcdHZtLmJyYW5jaC5zYWZldHlNYW5hZ2VyIFx0PSBicmFuY2guc2FmZXR5TWFuYWdlcjtcblx0XHRcdHZtLmJyYW5jaC5zYWZldHlNYW5hZ2VycyBcdD0gbWVtYmVycztcblx0XHRcdHZtLm9uRHV0eVRvdGFsID0gMDtcblx0XHRcdF8ubWFwKHZtLmJyYW5jaC5tZW1iZXJzLGZ1bmN0aW9uKG1lbWJlcil7IFxuXHRcdFx0XHRtZW1iZXIuZ3JvdXBJZHMgPSBfLnJhbmdlKDEsTWF0aC5yb3VuZCh2bS5icmFuY2gubWVtYmVycy5sZW5ndGgvNiksMSk7XG5cdFx0XHRcdG1lbWJlci5ncm91cElEID0gbWVtYmVyLmdyb3VwICsgbWVtYmVyLmdyb3VwSWQgXG5cdFx0XHR9KVxuXHRcdH0pXG5cblx0XHRmdW5jdGlvbiBjaGVjayhtZW1iZXIpe1xuXHRcdFx0bWVtYmVyLm9uRHV0eSBcdCA9ICFtZW1iZXIub25EdXR5O1xuXHRcdFx0bWVtYmVyLmlzQ2hlY2tlZCA9ICFtZW1iZXIuaXNDaGVja2VkO1xuXHRcdFx0bWVtYmVyLmdyb3VwSUQgXHQgPSBtZW1iZXIuZ3JvdXAgKyBtZW1iZXIuZ3JvdXBJZFxuXHRcdH07XG5cblx0XHRcblx0XHRmdW5jdGlvbiBzYXZlKCl7XG5cdFx0XHR2YXIgRGlzcGF0Y2hOdW1iZXIgPSB2bS5icmFuY2gubWVtYmVycy5maWx0ZXIoZnVuY3Rpb24obWVtYmVyKSB7XG5cdFx0XHRcdHJldHVybiBtZW1iZXIub25EdXR5XG5cdFx0XHR9KTtcblxuXHRcdFx0QnJhbmNoU3ZjLnVwZGF0ZU1pc3Npb24oe1xuXHRcdFx0XHRicmFuY2ggICBcdFx0OiB2bS5icmFuY2gubmFtZSxcblx0XHRcdFx0ZGlyZWN0b3IgXHRcdDogdm0uYnJhbmNoLmRpcmVjdG9yLFxuXHRcdFx0XHRkaXNwYXRjaE51bSBcdDogRGlzcGF0Y2hOdW1iZXIubGVuZ3RoLFxuXHRcdFx0XHRzYWZldHlNYW5hZ2VyIFx0OiB2bS5icmFuY2guc2FmZXR5TWFuYWdlcixcblx0XHRcdFx0bWVtYmVycyBcdFx0OiB2bS5icmFuY2gubWVtYmVyc1xuXHRcdFx0fSk7XG5cdFx0XHQkd2luZG93Lmhpc3RvcnkuYmFjaygpO1xuXHRcdH07XG5cdH07XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHQvKipcblx0KiBhcHAuZGlzcGF0Y2ggTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLmRpc3BhdGNoJywgW10pXG5cdFx0LmNvbnRyb2xsZXIoJ0Rpc3BhdGNoQ29udHJvbGxlcicsRGlzcGF0Y2hDb250cm9sbGVyKTtcblxuXHREaXNwYXRjaENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHN0YXRlUGFyYW1zJywnJG1vZGFsJywnQ2FzZVN2YycsJ0JyYW5jaFN2YycsICdDYXJTdmMnLCAnVXNlclN2YyddO1xuXHRmdW5jdGlvbiBEaXNwYXRjaENvbnRyb2xsZXIoJHN0YXRlUGFyYW1zLCRtb2RhbCxDYXNlU3ZjLEJyYW5jaFN2YywgQ2FyU3ZjLCBVc2VyU3ZjKXtcblx0XHR2YXIgdm0gPSB0aGlzOyBcblx0XHRDYXNlU3ZjLmZldGNoKFVzZXJTdmMudXNlckNvcnBzKCkpLnN1Y2Nlc3MoZnVuY3Rpb24oY2FzZXMpe1xuXHRcdFx0dm0uY2FzZXMgPSBjYXNlcztcblx0XHRcdENhc2VTdmMuZmV0Y2hCeUlkKHZtLmNhc2VzWyRzdGF0ZVBhcmFtcy5jYXNlSWRdLl9pZCkuc3VjY2VzcyhmdW5jdGlvbihfY2FzZSl7XG5cdFx0XHRcdFx0cmV0dXJuIHZtLmNhc2VEZXRhaWxzID0gX2Nhc2U7XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdEJyYW5jaFN2Yy5mZXRjaEJ5Q29ycHMoVXNlclN2Yy51c2VyQ29ycHMoKSkuc3VjY2VzcyhmdW5jdGlvbihicmFuY2hlcyl7XG5cdFx0ICAgIHJldHVybiB2bS5icmFuY2hMaXN0ID0gYnJhbmNoZXM7XG5cdFx0IH0pO1xuXG5cdFx0Q2FyU3ZjLmZldGNoKCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcblx0XHQgICAgcmV0dXJuIHZtLmNhcnNEYXRhID0gZGF0YTtcblx0XHR9KTtcblxuXHRcdHZtLmFkZE5ld0Nhc2UgPSBmdW5jdGlvbiAoKSB7XG5cdFx0ICBcdHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuXHRcdFx0ICAgIHRlbXBsYXRlVXJsOiAnL3BhcnRpYWxzL2Nhc2VQYW5lbC9jYXNlQWRkTW9kYWwnLFxuXHRcdFx0ICAgIGNvbnRyb2xsZXI6ICdDYXNlQWRkTW9kYWxDdHJsJyxcblx0XHRcdCAgICBzaXplOiBcImxnXCIsXG5cdFx0XHQgICAgcmVzb2x2ZSA6IHtcblx0XHRcdCAgICBcdGNhc2VJZCA6IGZ1bmN0aW9uKCl7XG5cdFx0XHQgICAgXHRcdHJldHVybiB2bS5pZCA9IFwi5paw5aKe5qGI5Lu2XCJcblx0XHRcdCAgICBcdH0sXG5cdFx0XHQgICAgXHRicmFuY2hMaXN0IDogZnVuY3Rpb24oKXtcblx0XHRcdCAgICBcdFx0cmV0dXJuIHZtLmJyYW5jaExpc3Q7XG5cdFx0XHQgICAgXHR9LFxuXHRcdFx0ICAgIFx0Y2Fyc0RhdGEgOiBmdW5jdGlvbigpe1xuXHRcdFx0ICAgIFx0XHRyZXR1cm4gdm0uY2Fyc0RhdGE7XG5cdFx0XHQgICAgXHR9LFxuXHRcdFx0ICAgIFx0aXNOZXcgOiBmdW5jdGlvbigpe1xuXHRcdFx0ICAgIFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdCAgICBcdH0sXG5cdFx0XHQgICAgXHRjYXNlRGV0YWlscyA6IGZ1bmN0aW9uKCl7XG5cdFx0XHQgICAgXHRcdHJldHVybiB7fVxuXHRcdFx0ICAgIFx0fVxuXHRcdFx0ICAgIH1cblx0XHQgICAgfSk7XG5cdFx0IH07XG5cblx0XHQgdm0uZWRpdENhc2UgPSBmdW5jdGlvbigpe1xuXHRcdCBcdHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuXHRcdFx0ICAgIHRlbXBsYXRlVXJsOiAnL3BhcnRpYWxzL2Nhc2VQYW5lbC9jYXNlQWRkTW9kYWwnLFxuXHRcdFx0ICAgIGNvbnRyb2xsZXI6ICdDYXNlQWRkTW9kYWxDdHJsJyxcblx0XHRcdCAgICBzaXplOiBcImxnXCIsXG5cdFx0XHQgICAgcmVzb2x2ZSA6IHtcblx0XHRcdCAgICBcdGNhc2VJZCA6IGZ1bmN0aW9uKCl7XG5cdFx0XHQgICAgXHRcdHJldHVybiB2bS5pZCA9IHZtLmNhc2VzWyRzdGF0ZVBhcmFtcy5jYXNlSWRdLmNhc2VJZDsgXG5cdFx0XHQgICAgXHR9LFxuXHRcdFx0ICAgIFx0YnJhbmNoTGlzdCA6IGZ1bmN0aW9uKCl7XG5cdFx0XHQgICAgXHRcdHJldHVybiB2bS5icmFuY2hMaXN0O1xuXHRcdFx0ICAgIFx0fSxcblx0XHRcdCAgICBcdGNhcnNEYXRhIDogZnVuY3Rpb24oKXtcblx0XHRcdCAgICBcdFx0Zm9yICh2YXIgaSA9IHZtLmNhcnNEYXRhLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHQgICAgXHRcdFx0Zm9yICh2YXIgaiA9IHZtLmNhc2VEZXRhaWxzLmNhcnMubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcblx0XHRcdCAgICBcdFx0XHRcdGlmICggdm0uY2Fyc0RhdGFbaV0ucmFkaW9Db2RlID09PSB2bS5jYXNlRGV0YWlscy5jYXJzW2pdLnJhZGlvX2NvZGUpIHtcblx0XHRcdCAgICBcdFx0XHRcdFx0cmV0dXJuIHZtLmNhcnNEYXRhW2ldLmlzQ2hlY2tlZCA9IHRydWUgO1xuXHRcdFx0ICAgIFx0XHRcdFx0fTtcblx0XHRcdCAgICBcdFx0XHR9O1x0XHQgICAgXHRcdFx0XG5cdFx0XHQgICAgXHRcdH07XG5cdFx0XHQgICAgXHRcdHJldHVybiB2bS5jYXJzRGF0YTtcblx0XHRcdCAgICBcdH0sXG5cdFx0XHQgICAgXHRpc05ldyA6IGZ1bmN0aW9uKCl7XG5cdFx0XHQgICAgXHRcdHJldHVybiBmYWxzZTsgXG5cdFx0XHQgICAgXHR9LFxuXHRcdFx0ICAgIFx0Y2FzZURldGFpbHMgOiBmdW5jdGlvbigpe1xuXHRcdFx0ICAgIFx0XHRyZXR1cm4gdm0uY2FzZURldGFpbHM7XG5cdFx0XHQgICAgXHR9XG5cdFx0XHQgICAgfVxuXHRcdCAgICB9KTtcblx0XHQgfTtcblx0fVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0LyoqXG5cdCogYXBwLmR1dHlsaXN0IE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5kdXR5bGlzdCcsIFtdKVxuXHRcdC5jb250cm9sbGVyKCdEdXR5TGlzdENvbnRyb2xsZXInLER1dHlMaXN0Q29udHJvbGxlcik7XG5cblx0RHV0eUxpc3RDb250cm9sbGVyLiRpbmplY3QgPSBbJ0JyYW5jaFN2YycsICckc3RhdGVQYXJhbXMnLCAnU29ja2V0U3ZjJywgJ1VzZXJTdmMnLCAnJHEnXTtcblx0ZnVuY3Rpb24gRHV0eUxpc3RDb250cm9sbGVyKEJyYW5jaFN2YywgJHN0YXRlUGFyYW1zLCBTb2NrZXRTdmMsIFVzZXJTdmMsICRxKXtcblx0XHR2YXIgdm0gPSB0aGlzOyBcblx0XHR2YXIgYnJhbmNoSWQgPSAkc3RhdGVQYXJhbXMuYnJhbmNoO1xuXHRcdFxuXHRcdEJyYW5jaFN2Yy50b3RhbExpc3RGaW5kQnlOYW1lKGJyYW5jaElkKS5zdWNjZXNzKGZ1bmN0aW9uKGJyYW5jaCl7XG5cdFx0XHR2bS5icmFuY2ggPSBicmFuY2g7XG5cdFx0XHR2bS5vbkR1dHlUb3RhbCA9IHZtLmJyYW5jaC5tZW1iZXJzLmZpbHRlcihmdW5jdGlvbihtZW1iZXIpIHtcblx0XHRcdFx0cmV0dXJuIG1lbWJlci5vbkR1dHkgPT0gdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuZ2VvIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5nZW8nKVxuXHRcdC5zZXJ2aWNlKCdHZW9TdmMnLEdlb1N2Yyk7XG5cblx0R2VvU3ZjLiRpbmplY3QgPSBbJyRxJywnJGh0dHAnXTtcblxuXHRmdW5jdGlvbiBHZW9TdmMoKXtcblx0XHR2YXIgc3ZjID0gdGhpczsgXG5cdFx0c3ZjLmdldEdlb2xvY2F0aW9uQ29vcmRpbmF0ZXMgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXHQgICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oXG5cdCAgICAgICAgICAgIGZ1bmN0aW9uKHBvc2l0aW9uKSB7IGRlZmVycmVkLnJlc29sdmUocG9zaXRpb24uY29vcmRzKTsgfSxcblx0ICAgICAgICAgICAgZnVuY3Rpb24oZXJyb3IpIHsgZGVmZXJyZWQucmVzb2x2ZShudWxsKTsgfVxuXHQgICAgICAgICk7XG5cdCAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdCAgICB9O1xuXG5cdCAgICBzdmMuZ2V0R2VvRW5jb2RlZEluZm8gPSBmdW5jdGlvbihhZGRyZXNzKXtcblx0ICAgIFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblx0ICAgIFx0Ly8gcmV0dXJuICRodHRwLmdldCgnaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2dlb2NvZGUvanNvbj9hZGRyZXNzPScrIGFkZHJlc3MgKycma2V5PUFJemFTeUF4cS1aa3hScjFaQXJCWEZET284eGdpNENsMlBlaXRBbycpXG5cdCAgICBcdHZhciBnZW9jb2RlciA9IG5ldyBnb29nbGUubWFwcy5HZW9jb2RlcigpO1xuXHQgICAgXHRpZiAoZ2VvY29kZXIpIHtcblx0XHQgICAgICBnZW9jb2Rlci5nZW9jb2RlKHsgJ2FkZHJlc3MnOiBhZGRyZXNzIH0sIGZ1bmN0aW9uIChyZXN1bHRzLCBzdGF0dXMpIHtcblx0XHQgICAgICAgICBpZiAoc3RhdHVzID09IGdvb2dsZS5tYXBzLkdlb2NvZGVyU3RhdHVzLk9LKSB7XG5cdFx0ICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uKSBcblx0XHQgICAgICAgICB9XG5cdFx0ICAgICAgICAgZWxzZSB7XG5cdFx0ICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSggXCJHZW9jb2RpbmcgZmFpbGVkOiBcIiArIHN0YXR1cyApXG5cdFx0ICAgICAgICAgfVxuXHRcdCAgICAgIH0pO1xuXHRcdCAgIH0gXG5cdFx0ICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7ICBcblx0ICAgIH07XG5cblx0ICAgIHN2Yy5mZXRjaEJhc2VMb2NhdGlvbiA9IGZ1bmN0aW9uKGNvcnBzKXtcblx0ICAgIFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9nZW9sb2NhdGlvbnM/Y29ycHM9JyArIGNvcnBzKVxuXHQgICAgfTtcblxuXHQgICAgc3ZjLmdldERpc3RhbmNlID0gZnVuY3Rpb24oIGZyb21fbG9jICwgdG9fbG9jICl7XG5cblx0ICAgIFx0aWYgKHR5cGVvZihOdW1iZXIucHJvdG90eXBlLnRvUmFkKSA9PT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0ICBOdW1iZXIucHJvdG90eXBlLnRvUmFkID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQgICAgcmV0dXJuIHN2YyAqIE1hdGguUEkgLyAxODA7XG5cdFx0XHQgIH1cblx0XHRcdH1cblx0XHRcdHZhciBSID0gNjM3MTsgLy8gUmFkaXVzIG9mIHRoZSBlYXJ0aCBpbiBrbVxuXHRcdFx0dmFyIGRMYXQgPSAodG9fbG9jLmxhdCAtIGZyb21fbG9jLmxhdCApLnRvUmFkKCk7ICAvLyBKYXZhc2NyaXB0IGZ1bmN0aW9ucyBpbiByYWRpYW5zXG5cdFx0XHR2YXIgZExvbiA9ICh0b19sb2MubG5nIC0gZnJvbV9sb2MubG5nICkudG9SYWQoKTsgXG5cdFx0XHR2YXIgYSA9IE1hdGguc2luKGRMYXQvMikgKiBNYXRoLnNpbihkTGF0LzIpICtcblx0XHRcdCAgICAgICAgTWF0aC5jb3MoZnJvbV9sb2MubGF0LnRvUmFkKCkpICogTWF0aC5jb3ModG9fbG9jLmxhdC50b1JhZCgpKSAqIFxuXHRcdFx0ICAgICAgICBNYXRoLnNpbihkTG9uLzIpICogTWF0aC5zaW4oZExvbi8yKTsgXG5cdFx0XHR2YXIgYyA9IDIgKiBNYXRoLmF0YW4yKE1hdGguc3FydChhKSwgTWF0aC5zcXJ0KDEtYSkpOyBcblx0XHRcdHJldHVybiBSICogYztcblx0ICAgIH07XG5cblx0ICAgIHN2Yy5kZWZhdWx0TG9jYXRpb24gPSBmdW5jdGlvbigpe1xuXHQgICAgXHRyZXR1cm4geyBsYXQgOiAyNS4wOTI3Mjk3ICwgbG5nIDogIDEyMS40NjA4NjM5LCBhZGRyZXNzIDogbnVsbH07XG5cdCAgICB9O1xuXHR9O1xufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAubWFwIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5tYXAnLCBbXSlcblx0XHQuY29udHJvbGxlcignTWFwSW5kZXhDb250cm9sbGVyJyxNYXBJbmRleENvbnRyb2xsZXIpO1xuXG5cdE1hcEluZGV4Q29udHJvbGxlci4kaW5qZWN0ID0gWydsZWFmbGV0RGF0YScsICdHZW9TdmMnXTtcblx0ZnVuY3Rpb24gTWFwSW5kZXhDb250cm9sbGVyKGxlYWZsZXREYXRhLCBHZW9TdmMpe1xuXHRcdHZhciB2bSA9IHRoaXM7IFxuXG5cdFx0R2VvU3ZjLmdldEdlb2xvY2F0aW9uQ29vcmRpbmF0ZXMoKS50aGVuKGZ1bmN0aW9uKGNvb3JkKXtcblx0ICAgICAgICB2bS5ub3dQb3MubGF0ID0gY29vcmQubGF0aXR1ZGU7XG5cdCAgICAgICAgdm0ubm93UG9zLmxuZyA9IGNvb3JkLmxvbmdpdHVkZTtcblx0ICAgICAgICB2bS5ub3dQb3Muem9vbSA9IDE3O1xuXHQgICAgfSlcblxuXHQgICAgYW5ndWxhci5leHRlbmQodm0sIHtcblx0ICAgICAgICBub3dQb3M6IHtcblx0ICAgICAgICAgICAgbGF0OiAyNC45ODgsXG5cdCAgICAgICAgICAgIGxuZzogMTIxLjU3NTIsXG5cdCAgICAgICAgICAgIHpvb206IDE3XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBjb250cm9sczoge1xuXHQgICAgICAgICAgICBkcmF3OiB7fVxuXHQgICAgICAgIH1cblx0ICAgIH0pXG5cblx0ICAgIGxlYWZsZXREYXRhLmdldE1hcCgpLnRoZW4oZnVuY3Rpb24obWFwKSB7XG5cdCAgICAgIHZhciBkcmF3bkl0ZW1zID0gdm0uY29udHJvbHMuZWRpdC5mZWF0dXJlR3JvdXA7XG5cdCAgICAgIG1hcC5vbignZHJhdzpjcmVhdGVkJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICB2YXIgbGF5ZXIgPSBlLmxheWVyO1xuXHQgICAgICAgIGRyYXduSXRlbXMuYWRkTGF5ZXIobGF5ZXIpO1xuXHQgICAgICAgIFxuXHQgICAgICAgIEZlYXR1cmVDb2xsZWN0aW9ucy5wdXNoKGxheWVyLnRvR2VvSlNPTigpKVxuXHQgICAgICAgIFxuXHQgICAgICB9KTtcblx0ICAgIH0pXG5cdH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLm1lbWJlciBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAubWVtYmVyJylcblx0XHQuY29udHJvbGxlcignTWVtYmVyQWNjb3VudE1vZGFsQ29udHJvbGxlcicsTWVtYmVyQWNjb3VudE1vZGFsQ29udHJvbGxlcik7XG5cblx0TWVtYmVyQWNjb3VudE1vZGFsQ29udHJvbGxlci4kaW5qZWN0ID0gWydVc2VyU3ZjJywgJ01lbWJlclN2YycsICdtZW1iZXInLCAnJG1vZGFsSW5zdGFuY2UnXTtcblx0ZnVuY3Rpb24gTWVtYmVyQWNjb3VudE1vZGFsQ29udHJvbGxlcihVc2VyU3ZjLCBNZW1iZXJTdmMsIG1lbWJlciwgJG1vZGFsSW5zdGFuY2Upe1xuXHRcdHZhciB2bSA9IHRoaXM7IFxuXHRcdHZtLnVzZXIgPSBtZW1iZXI7XG5cdFx0dm0uc2F2ZSA9IHNhdmU7XG5cdFx0dm0uY2FuY2VsID0gY2FuY2VsOyBcblxuXHRcdGZ1bmN0aW9uIHNhdmUoKXtcblx0XHRcdGlmIChfLmlzRW1wdHkodm0udXNlcikpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJwbGVhc2UgZW50ZXIgeW91ciBhY2NvdW50IGFuZCBwYXNzd29yZCFcIilcblx0XHRcdH0gZWxzZXtcblx0XHRcdFx0aWYgKCF2bS51c2VyLmFjY291bnQpIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcImFjY291bnQgY2FuJ3QgYmUgYmxhbmshXCIpXG5cdFx0XHRcdFx0aWYgKCF2bS51c2VyLnBhc3N3b3JkKSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInBhc3N3b2QgY2FuJ3QgYmUgYmxhbmshXCIpXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fSBlbHNlIGlmICghdm0udXNlci5wYXNzd29yZCkge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKFwicGFzc3dvcmQgY2FuJ3QgYmUgYmxhbmtcIilcblx0XHRcdFx0fWVsc2V7XG5cdFx0XHRcdFx0VXNlclN2Yy5hY3RpdmF0ZSh2bS51c2VyKTtcblx0XHRcdFx0XHRNZW1iZXJTdmMudXBkYXRlVXNlcihtZW1iZXIubmFtZSk7XG5cdFx0XHRcdFx0JG1vZGFsSW5zdGFuY2UuY2xvc2Uodm0udXNlcik7XG5cdFx0XHRcdH07XG5cdFx0XHR9O1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBjYW5jZWwoKXtcblx0XHRcdCRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuXHRcdH07XG5cdH07XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cblx0LyoqXG5cdCogYXBwLm1lbWJlciBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAubWVtYmVyJylcblx0XHQuY29udHJvbGxlcignTWVtYmVyRWRpdENvbnRyb2xsZXInLE1lbWJlckVkaXRDb250cm9sbGVyKTtcblx0XG5cdE1lbWJlckVkaXRDb250cm9sbGVyLiRpbmplY3QgPSBbJ01lbWJlclN2YycsICdCcmFuY2hTdmMnLCAnJHN0YXRlUGFyYW1zJywgJyR3aW5kb3cnLCckbW9kYWwnLCAnJHN0YXRlJywgJ1VzZXJTdmMnXTtcblx0XG5cdGZ1bmN0aW9uIE1lbWJlckVkaXRDb250cm9sbGVyKCBNZW1iZXJTdmMsIEJyYW5jaFN2YywgJHN0YXRlUGFyYW1zLCAkd2luZG93LCRtb2RhbCwgJHN0YXRlLCBVc2VyU3ZjKXtcblx0XHR2YXIgdm0gPSB0aGlzOyBcblxuXHRcdHZtLmFsZXJ0cyA9IFtdO1xuXHRcdHZtLm1lbWJlckRlbGV0ZWQgPSBmYWxzZTtcblx0XHR2YXIgdGVtcERlbE1lbWJlciA9IG51bGw7XG5cdFx0dm0uYWNjZXNzTGV2ZWwgPSBVc2VyU3ZjLmFjY2Vzc0xldmVsKCk7XG5cdFx0dm0uY2xvc2VBbGVydCA9IGNsb3NlQWxlcnQ7XG5cdFx0dm0uc2F2ZSA9IHNhdmU7XG5cdFx0dm0uYWRkTmV3TWVtYmVyID0gYWRkTmV3TWVtYmVyO1xuXHRcdHZtLnVwZGF0ZSA9IHVwZGF0ZTtcblx0XHR2bS5hY3RpdmF0ZUFjY291bnQgPSBhY3RpdmF0ZUFjY291bnQ7XG5cdFx0dm0uZGVsZXRlQWxlcnQgPSBkZWxldGVBbGVydDtcblx0XHR2bS5kZUFjdGl2YXRlQWxlcnQgPSBkZUFjdGl2YXRlQWxlcnQ7XG5cdFx0XG5cdFx0dmFyIG1lbWJlckluaXQgPSBmdW5jdGlvbigpe1xuXHRcdFx0TWVtYmVyU3ZjLmZpbmRCeUJyYW5jaCgkc3RhdGVQYXJhbXMuYnJhbmNoKS5zdWNjZXNzKGZ1bmN0aW9uKG1lbWJlcnMpe1xuXHRcdFx0XHR2bS5tZW1iZXJzID0gbWVtYmVycztcblx0XHRcdFx0dm0ubWVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uKG1lbWJlcil7XG5cdFx0XHRcdFx0bWVtYmVyLndvcmtpbmdUaW1lID0gbW9tZW50LmR1cmF0aW9uKG1lbWJlci53b3JraW5nVGltZSwnc2Vjb25kcycpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRtZW1iZXJJbml0KCk7XG5cblx0XHR2YXIgZGVBY3RpdmF0ZUFjY291bnQgPSBmdW5jdGlvbihpbmRleCl7XG5cdFx0XHRVc2VyU3ZjLnJlbW92ZVVzZXIodGVtcERlbE1lbWJlci5uYW1lKS5zdWNjZXNzKGZ1bmN0aW9uKHVzZXIpe1xuXHRcdFx0XHRNZW1iZXJTdmMucmVtb3ZlVXNlcih1c2VyLnVzZXJuYW1lKTtcblx0XHRcdFx0dm0uY2xvc2VBbGVydChpbmRleCk7XG5cdFx0XHRcdG1lbWJlckluaXQoKTtcblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHR2YXIgZGVsZXRlTWVtYmVyID0gZnVuY3Rpb24oaW5kZXgpe1xuXHRcdFx0dm0ubWVtYmVyRGVsZXRlZCA9IHRydWU7XG5cdFx0XHRNZW1iZXJTdmMuZGVsZXRlTWVtYmVyKHRlbXBEZWxNZW1iZXIpLnN1Y2Nlc3MoZnVuY3Rpb24oKXtcblx0XHRcdFx0dm0ubWVtYmVyRGVsZXRlZCA9IGZhbHNlO1xuXHRcdFx0fSk7XG5cdFx0XHR2bS5jbG9zZUFsZXJ0KGluZGV4KTtcblx0XHRcdG1lbWJlckluaXQoKTtcblx0XHR9O1xuXG5cdFx0dmFyIGNhbmNlbERlbCA9IGZ1bmN0aW9uKGluZGV4KXtcblx0XHRcdHZtLm1lbWJlckRlbGV0ZWQgPSBmYWxzZTtcblx0XHRcdHZtLmNsb3NlQWxlcnQoaW5kZXgpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBzYXZlKCl7XG5cdFx0XHR2YXIgZGlyZWN0b3JzID0gXy5wbHVjayggdm0ubWVtYmVycy5maWx0ZXIoZnVuY3Rpb24obWVtYmVyKSB7IHJldHVybiBtZW1iZXIubGV2ZWwgPiAxLjMgIH0pICwgJ25hbWUnKTtcblx0XHRcdEJyYW5jaFN2Yy51cGRhdGUoe1xuXHRcdFx0XHRicmFuY2ggOiAkc3RhdGVQYXJhbXMuYnJhbmNoLFxuXHRcdFx0XHRtZW1iZXJzIDogXy5wbHVjayggdm0ubWVtYmVycyAsICdfaWQnKSxcblx0XHRcdFx0ZGlyZWN0b3JzIDogZGlyZWN0b3JzLFxuXHRcdFx0XHRkaXJlY3RvciA6IGRpcmVjdG9yc1swXSxcblx0XHRcdFx0c2FmZXR5TWFuYWdlciA6IGRpcmVjdG9yc1swXVxuXHRcdFx0fSkuc3VjY2VzcyhmdW5jdGlvbigpe1xuXHRcdFx0XHQkd2luZG93Lmhpc3RvcnkuYmFjaygpO1xuXHRcdFx0fSk7XHRcdFxuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBhZGROZXdNZW1iZXIoKXtcblx0XHRcdHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuXHRcdFx0ICAgIHRlbXBsYXRlVXJsOiAndmlld3MvbWVtYmVyL21lbWJlci5tb2RhbC5odG1sJyxcblx0XHRcdCAgICBjb250cm9sbGVyOiAnTWVtYmVyTW9kYWxDdHJsJyxcblx0XHRcdCAgICBzaXplOiBcIm1kXCIsXG5cdFx0XHQgICAgcmVzb2x2ZSA6IHtcblx0XHRcdCAgICBcdGJyYW5jaCA6IGZ1bmN0aW9uKCl7XG5cdFx0XHQgICAgXHRcdHJldHVybiAkc3RhdGVQYXJhbXMuYnJhbmNoIFxuXHRcdFx0ICAgIFx0fSxcblx0XHRcdCAgICBcdG1lbWJlciA6IGZ1bmN0aW9uKCl7XG5cdFx0XHQgICAgXHRcdHJldHVybiB7IHdvcmtpbmdUaW1lIDogbnVsbCB9O1xuXHRcdFx0ICAgIFx0fVxuXHRcdFx0ICAgIH1cblx0XHQgICAgfSk7XG5cblx0XHQgICAgbW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihmdW5jdGlvbihtZW1iZXIpe1xuXHRcdCAgICBcdGlmIChtZW1iZXIpIHtcblx0XHQgICAgXHRcdG1lbWJlckluaXQoKTtcblx0XHQgICAgXHR9XG5cdFx0ICAgIFx0dm0uYWxlcnRzLnB1c2goeyB0eXBlIDogXCJzdWNjZXNzXCIgLCAgbXNnOiAn5Lq65ZOh5paw5aKe5oiQ5Yqf77yBICcgKyBtZW1iZXIubmFtZSArICcg5bey5Yqg5YWlICcgKyBtZW1iZXIuYnJhbmNofSk7XG5cdFx0ICAgIH0pXG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHVwZGF0ZShtZW1iZXIpe1xuXHRcdFx0dmFyIG9sZE1lbWJlciA9IG1lbWJlcjtcblx0XHRcdHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuXHRcdFx0ICAgIHRlbXBsYXRlVXJsOiAndmlld3MvbWVtYmVyL21lbWJlci5tb2RhbC5odG1sJyxcblx0XHRcdCAgICBjb250cm9sbGVyOiAnTWVtYmVyTW9kYWxDdHJsJyxcblx0XHRcdCAgICBzaXplOiBcIm1kXCIsXG5cdFx0XHQgICAgcmVzb2x2ZSA6IHtcblx0XHRcdCAgICBcdGJyYW5jaCA6IGZ1bmN0aW9uKCl7XG5cdFx0XHQgICAgXHRcdHJldHVybiAkc3RhdGVQYXJhbXMuYnJhbmNoIFxuXHRcdFx0ICAgIFx0fSxcblx0XHRcdCAgICBcdG1lbWJlciA6IGZ1bmN0aW9uKCl7XG5cdFx0XHQgICAgXHRcdHJldHVybiB7XG5cdFx0XHQgICAgXHRcdFx0bWVtYmVySWQgOiBtZW1iZXIuX2lkLFxuXHRcdFx0ICAgIFx0XHRcdGlkIDogbWVtYmVyLmlkLFxuXHRcdFx0ICAgIFx0XHRcdG5hbWUgOiBtZW1iZXIubmFtZSxcblx0XHRcdCAgICBcdFx0XHR0aXRsZSA6IG1lbWJlci50aXRsZSxcblx0XHRcdCAgICBcdFx0XHRicmFuY2hlcyA6IG1lbWJlci5icmFuY2hlcyxcblx0XHRcdCAgICBcdFx0XHRjb3JwcyA6IG1lbWJlci5jb3Jwcyxcblx0XHRcdCAgICBcdFx0XHRyYWRpb0NvZGUgOiBtZW1iZXIucmFkaW9Db2RlLCBcblx0XHRcdCAgICBcdFx0XHR3b3JraW5nVGltZSA6IG1lbWJlci53b3JraW5nVGltZS5taW51dGVzKCkgKiA2MCArIG1lbWJlci53b3JraW5nVGltZS5zZWNvbmRzKClcblx0XHRcdCAgICBcdFx0fVxuXHRcdFx0ICAgIFx0fVxuXHRcdFx0ICAgIH1cblx0XHQgICAgfSk7XG5cblx0XHQgICAgbW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihmdW5jdGlvbihtZW1iZXIpe1xuXHRcdCAgICBcdG1lbWJlckluaXQoKTtcblx0XHQgICAgXHR2bS5hbGVydHMucHVzaCh7IHR5cGUgOiBcImluZm9cIiAsICBtc2c6ICBvbGRNZW1iZXIubmFtZSArICfkv67mlLnmiJDlip8hJyB9KTtcblx0XHQgICAgfSk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGFjdGl2YXRlQWNjb3VudChtZW1iZXIpe1xuXHRcdFx0dmFyIHVzZXJzID0gdm0ubWVtYmVycy5maWx0ZXIoZnVuY3Rpb24obWVtYmVyKSB7XG5cdFx0XHRcdHJldHVybiBtZW1iZXIuaXNVc2VyO1xuXHRcdFx0fSk7XG5cblx0XHRcdGlmICh1c2Vycy5sZW5ndGggPCAzICkge1xuXHRcdFx0XHR2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcblx0XHRcdFx0ICAgIHRlbXBsYXRlVXJsOiAndmlld3MvbWVtYmVyL21lbWJlci5hY2NvdW50Lmh0bWwnLFxuXHRcdFx0XHQgICAgY29udHJvbGxlcjogJ01lbWJlckFjY291bnRNb2RhbEN0cmwnLFxuXHRcdFx0XHQgICAgc2l6ZTogXCJtZFwiLFxuXHRcdFx0XHQgICAgcmVzb2x2ZSA6IHtcblx0XHRcdFx0ICAgIFx0bWVtYmVyIDogZnVuY3Rpb24oKXtcblx0XHRcdFx0ICAgIFx0XHRyZXR1cm4gbWVtYmVyXG5cdFx0XHRcdCAgICBcdH1cblx0XHRcdFx0ICAgIH1cblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0bW9kYWxJbnN0YW5jZS5yZXN1bHQudGhlbihmdW5jdGlvbihtZW1iZXIpe1xuXHRcdFx0XHRcdG1lbWJlckluaXQoKTtcblx0XHRcdFx0XHR2bS5hbGVydHMucHVzaCh7IHR5cGUgOiBcImluZm9cIiAsIG1zZyA6IG1lbWJlci5uYW1lICsgXCIg5bey6ZaL6YCa54K65L2/55So6ICFXCIgfSlcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2bS5hbGVydHMucHVzaCh7IHR5cGUgOiBcIndhcm5pbmdcIiAsIG1zZyA6IFwi54Sh5rOV6ZaL6YCaXCIgKyBtZW1iZXIubmFtZSArIFwiIOWboOeCuuS9v+eUqOiAheW3sui2hemBjjPkvY3vvIzoq4vop6PpmaTlhbbku5bkurrluLPomZ/lvozlho3plovpgJogXCJ9KTtcblx0XHRcdH07XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGRlbGV0ZUFsZXJ0KG1lbWJlcil7XG5cdFx0XHR2bS5hbGVydHMucHVzaCh7IFx0XG5cdFx0XHRcdHR5cGUgOiBcImRhbmdlclwiICwgIFxuXHRcdFx0XHRtc2c6ICfmmK/lkKbnorrlrpropoHliKrpmaTvvIEnICsgbWVtYmVyLm5hbWUsIFxuXHRcdFx0XHRleGVjdXRlIDogZGVsZXRlTWVtYmVyLFxuXHRcdFx0XHRjYW5jZWwgOiAgY2FuY2VsRGVsXG5cdFx0XHR9KTtcblx0XHRcdHRlbXBEZWxNZW1iZXIgPSBtZW1iZXI7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGRlQWN0aXZhdGVBbGVydChtZW1iZXIpe1xuXHRcdFx0dmFyIHVzZXJzID0gdm0ubWVtYmVycy5maWx0ZXIoZnVuY3Rpb24obWVtYmVyKSB7XG5cdFx0XHRcdHJldHVybiBtZW1iZXIuaXNVc2VyO1xuXHRcdFx0fSk7XG5cdFx0XHRpZiAodXNlcnMubGVuZ3RoID09IDEgKSB7XG5cdFx0XHRcdHZtLmFsZXJ0cy5wdXNoKHsgXG5cdFx0XHRcdFx0dHlwZSA6IFwid2FybmluZ1wiLCAgXG5cdFx0XHRcdFx0bXNnOiAn5q+P5YiG6ZqK6Iez5bCR6KaB5pyJMeWAi+S9v+eUqOiAhe+8jOeEoeazleWPlua2iCcgKyBtZW1iZXIubmFtZSArIFwi55qE55m75YWl5qyK6ZmQXCIsXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNle1xuXHRcdFx0XHR2bS5hbGVydHMucHVzaCh7IFxuXHRcdFx0XHRcdHR5cGUgOiBcImRhbmdlclwiLCAgXG5cdFx0XHRcdFx0bXNnOiAn5piv5ZCm56K65a6a6KaB6Kej6ZmkJyArIG1lbWJlci5uYW1lICsgXCLnmbvlhaXmrIrpmZBcIixcblx0XHRcdFx0XHRleGVjdXRlIDogZGVBY3RpdmF0ZUFjY291bnQsXG5cdFx0XHRcdFx0Y2FuY2VsIDogY2FuY2VsRGVsXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHR0ZW1wRGVsTWVtYmVyID0gbWVtYmVyO1xuXHRcdFx0fTtcblx0XHR9O1xuXHRcblx0XHRmdW5jdGlvbiBjbG9zZUFsZXJ0KGluZGV4KXtcblx0XHRcdHZtLmFsZXJ0cy5zcGxpY2UoaW5kZXgsMSlcblx0XHR9O1xuXHR9XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cblx0LyoqXG5cdCogYXBwLm1lbWJlciBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAubWVtYmVyJywgW10pXG5cdFx0LmNvbnRyb2xsZXIoJ01lbWJlckluZGV4Q29udHJvbGxlcicsTWVtYmVySW5kZXhDb250cm9sbGVyKTtcblxuXHRNZW1iZXJJbmRleENvbnRyb2xsZXIuJGluamVjdCA9IFsgTWVtYmVyU3ZjICwgJHN0YXRlUGFyYW1zIF07XG5cdGZ1bmN0aW9uIE1lbWJlckluZGV4Q29udHJvbGxlciggTWVtYmVyU3ZjICwgJHN0YXRlUGFyYW1zICl7XG5cdFx0dmFyIHZtID0gdGhpczsgXG5cblx0XHR2bS5icmFuY2ggPSAkc3RhdGVQYXJhbXMuYnJhbmNoO1xuXHRcdE1lbWJlclN2Yy5maW5kQnlCcmFuY2goJHN0YXRlUGFyYW1zLmJyYW5jaCkuc3VjY2VzcyhmdW5jdGlvbihtZW1iZXJzKXtcblx0XHRcdHZtLm1lbWJlcnMgPSBtZW1iZXJzO1xuXHRcdFx0dm0ubWVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uKG1lbWJlcil7XG5cdFx0XHRcdHJldHVybiBtZW1iZXIud29ya2luZ1RpbWUgPSBtb21lbnQuZHVyYXRpb24obWVtYmVyLndvcmtpbmdUaW1lLCdzZWNvbmRzJyk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLm1lbWJlciBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAubWVtYmVyJylcblx0XHQuY29udHJvbGxlcignTWVtYmVyTW9kYWxDb250cm9sbGVyJyxNZW1iZXJNb2RhbENvbnRyb2xsZXIpO1xuXG5cdE1lbWJlck1vZGFsQ29udHJvbGxlci4kaW5qZWN0ID0gWydicmFuY2gnLCAnTWVtYmVyU3ZjJywgJyRtb2RhbEluc3RhbmNlJywgJyRzdGF0ZScsICdtZW1iZXInLCdCcmFuY2hTdmMnLCAnVXNlclN2YyddO1xuXHRmdW5jdGlvbiBNZW1iZXJNb2RhbENvbnRyb2xsZXIoYnJhbmNoLCBNZW1iZXJTdmMsICRtb2RhbEluc3RhbmNlLCAkc3RhdGUsIG1lbWJlcixCcmFuY2hTdmMsIFVzZXJTdmMpe1xuXHRcdHZhciB2bSA9IHRoaXM7IFxuXHRcdHZtLmFsZXJ0cyA9IFtdO1xuXHRcdHZtLmlzTmV3ICA9IF8uaXNOdWxsKG1lbWJlci53b3JraW5nVGltZSk7XG5cdFx0dm0uc2F2ZSAgID0gc2F2ZTtcblx0XHR2bS51cGRhdGUgPSB1cGRhdGU7XG5cdFx0dm0uY2FuY2VsID0gY2FuZWw7XG5cblx0XHR2bS5tZW1iZXIgPSB7XG5cdFx0XHRpZCBcdFx0IFx0OiBtZW1iZXIuaWQgfHwgIFwiXCIsIFxuXHRcdFx0bmFtZSBcdCBcdDogbWVtYmVyLm5hbWUgfHwgbnVsbCAsIFxuXHRcdFx0dGl0bGUgICAgXHQ6IFwi5raI6Ziy6ZqK5ZOhXCIsXG5cdFx0XHR0aXRsZXMgICBcdDogW1wi5raI6Ziy6ZqK5ZOhXCIsXCLlsI/pmorplbdcIixcIuWIhumaiumVt1wiLFwi5Lit6ZqK6ZW3XCIsXCLlpKfpmorplbdcIixcIuWJr+Wkp+maiumVt1wiXSxcblx0XHRcdGJyYW5jaCAgIFx0OiBtZW1iZXIuYnJhbmNoIHx8IGJyYW5jaCxcblx0XHRcdHdvcmtpbmdUaW1lIDogbWVtYmVyLndvcmtpbmdUaW1lIHx8ICAxMjAwLFxuXHRcdFx0cmFkaW9Db2RlIFx0OiBtZW1iZXIucmFkaW9Db2RlIHx8ICBudWxsLCBcblx0XHRcdG1pc3Npb24gIFx0OiBcIueehOWtkOaJi1wiLFxuXHRcdFx0bWlzc2lvbnMgXHQ6IFtcIueehOWtkOaJi1wiLFwi5Ymv556E5a2Q5omLXCIsXCLlj7jmqZ9cIixcIuWwj+e1hOmVt1wiLFwi5a6J5YWo566h5Yi25ZOhXCIsXCLoga/ntaHlrphcIixdLFxuXHRcdFx0Y29ycHNcdCBcdDogVXNlclN2Yy51c2VyQ29ycHMoKSxcblx0XHRcdGNvcnBzcyBcdCBcdDogW1wi56ys5LiA5pWR54G95pWR6K235aSn6ZqKXCIsXCLnrKzkuInmlZHngb3mlZHorbflpKfpmopcIl0sXG5cdFx0fTtcblxuXHRcdEJyYW5jaFN2Yy5mZXRjaEJ5Q29ycHMoVXNlclN2Yy51c2VyQ29ycHMoKSkuc3VjY2VzcyhmdW5jdGlvbihicmFuY2hlcyl7XG5cdFx0XHR2bS5icmFuY2hlcyA9IGJyYW5jaGVzOyBcblx0XHRcdGlmICghdm0uaXNOZXcpIHtcblx0XHRcdFx0dmFyIGJyYW5jaEFycnkgPSBbXTtcblx0XHRcdFx0Zm9yICh2YXIgaSA9IGJyYW5jaGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRcdFx0YnJhbmNoQXJyeS5wdXNoKGJyYW5jaGVzW2ldLm5hbWUpO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHR2bS5tZW1iZXIuYnJhbmNoZXMgPSBicmFuY2hBcnJ5O1xuXHRcdFx0fTsgXG5cdFx0fSk7XG5cblx0XHR2YXIgcmFkaW9Db2RlUHJlZml4ID0gZnVuY3Rpb24oYnJhbmNoKXtcblx0XHRcdHZhciBzdWZmaXggPSAgYnJhbmNoLnNwbGl0KCcnKS5zbGljZSgtMikuam9pbignJyk7XG5cdFx0XHRpZiAoc3VmZml4ID09IFwi5aSn6ZqKXCIgfHwgc3VmZml4ID09IFwi5Lit6ZqKXCIpIHtcblx0XHRcdFx0cmV0dXJuIFwi5YyX5rW3XCI7XG5cdFx0XHR9IGVsc2V7XG5cdFx0XHRcdHJldHVybiBicmFuY2guc3BsaXQoJycpLnNsaWNlKDAsMikuam9pbignJyk7XG5cdFx0XHR9O1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBzYXZlKCl7XG5cdFx0XHRpZiAodm0ubWVtYmVyLm5hbWUpIHtcblx0XHRcdFx0dm0ubWVtYmVyLnJhZGlvQ29kZVByZWZpeCA9IHJhZGlvQ29kZVByZWZpeCh2bS5tZW1iZXIuYnJhbmNoKTtcblx0XHRcdFx0TWVtYmVyU3ZjLmNyZWF0ZSh2bS5tZW1iZXIpLnN1Y2Nlc3MoZnVuY3Rpb24oKXtcblx0XHRcdFx0XHR2bS5tZW1iZXIud29ya2luZ1RpbWUgPSBtb21lbnQuZHVyYXRpb24ocGFyc2VJbnQodm0ubWVtYmVyLndvcmtpbmdUaW1lKSwnc2Vjb25kcycpO1xuXHRcdFx0XHR9KS50aGVuKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0JG1vZGFsSW5zdGFuY2UuY2xvc2Uodm0ubWVtYmVyKTtcblx0XHRcdFx0fSlcblx0XHRcdH0gZWxzZXtcblxuXHRcdFx0fTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gdXBkYXRlKCl7XG5cdFx0XHR2YXIgdXBkYXRlTWVtYmVyID0ge1xuXHRcdFx0XHQgIG1lbWJlcklkICA6IG1lbWJlci5tZW1iZXJJZCxcblx0XHRcdFx0ICBpZCBcdFx0OiBcIlwiLFxuXHRcdFx0XHQgIG5hbWUgXHRcdDogdm0ubWVtYmVyLm5hbWUsXG5cdFx0XHRcdCAgY29ycHMgXHQ6IHZtLm1lbWJlci5jb3Jwcyxcblx0XHRcdFx0ICBicmFuY2ggXHQ6IHZtLm1lbWJlci5icmFuY2gsXG5cdFx0XHRcdCAgdGl0bGUgXHQ6IHZtLm1lbWJlci50aXRsZSxcblx0XHRcdFx0ICB3b3JraW5nVGltZSA6IHZtLm1lbWJlci53b3JraW5nVGltZSxcblx0XHRcdFx0ICByYWRpb0NvZGUgIDogdm0ubWVtYmVyLnJhZGlvQ29kZSxcblx0XHRcdFx0ICByYWRpb0NvZGVQcmVmaXggOiByYWRpb0NvZGVQcmVmaXgodm0ubWVtYmVyLmJyYW5jaClcblx0XHRcdH1cblxuXHRcdFx0aWYgKHZtLm1lbWJlci5uYW1lKSB7XG5cdFx0XHRcdE1lbWJlclN2Yy51cGRhdGVCeU1lbWJlcklkKHVwZGF0ZU1lbWJlcik7XG5cdFx0XHRcdCRtb2RhbEluc3RhbmNlLmNsb3NlKHVwZGF0ZU1lbWJlcik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcblx0XHRcdH07XG5cdFx0fTtcblx0XG5cdFx0ZnVuY3Rpb24gY2FuY2VsKCl7XG5cdFx0XHQkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcblx0XHR9O1xuXHR9O1xufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAubWVtYmVyIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5tZW1iZXInKVxuXHRcdC5zZXJ2aWNlKCdNZW1iZXJTdmMnLE1lbWJlclN2Yylcblx0XG5cdE1lbWJlclN2Yy4kaW5qZWN0ID0gWyckaHR0cCddO1xuXHRcblx0ZnVuY3Rpb24gTWVtYmVyU3ZjKCl7XG5cdFx0dmFyIHN2YyA9IHRoaXM7IFxuXHRcdHN2Yy5mZXRjaCA9IGZldGNoO1xuXHRcdHN2Yy5maW5kQnlCcmFuY2ggPSBmaW5kQnlCcmFuY2g7XG5cdFx0c3ZjLmZldGNoT25EdXR5ID0gZmV0Y2hPbkR1dHk7XG5cdFx0c3ZjLmNyZWF0ZSA9IGNyZWF0ZTsgXG5cdFx0c3ZjLnVwZGF0ZSA9IHVwZGF0ZTsgXG5cdFx0c3ZjLnVwZGF0ZU9uRHV0eSA9IHVwZGF0ZU9uRHV0eTtcblx0XHRzdmMudXBkYXRlQnlNZW1iZXJJZCA9IHVwZGF0ZUJ5TWVtYmVySWQ7XG5cdFx0c3ZjLnVwZGF0ZUlzQ2hlY2tlZCA9IHVwZGF0ZUlzQ2hlY2tlZDtcblx0XHRzdmMudXBkYXRlVXNlciA9IHVwZGF0ZVVzZXI7XG5cdFx0c3ZjLnJlbW92ZVVzZXIgPSByZW1vdmVVc2VyO1xuXHRcdHN2Yy5kZWxldGVNZW1iZXIgPSBkZWxldGVNZW1iZXI7XG5cblx0XHRmdW5jdGlvbiBmZXRjaCgpe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9tZW1iZXJzJyk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGZpbmRCeUJyYW5jaCggYnJhbmNoICl7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL21lbWJlcnMvJyArIGJyYW5jaCApO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBmZXRjaE9uRHV0eShicmFuY2gpe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9tZW1iZXJzL29uRHV0eT9icmFuY2g9JyArIGJyYW5jaCk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGNyZWF0ZShtZW1iZXIpe1xuXHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvbWVtYmVycy8nLCBtZW1iZXIpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiB1cGRhdGUobWVtYmVyKXtcblx0XHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvbWVtYmVycy8nLCBtZW1iZXIuaWQpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiB1cGRhdGVPbkR1dHkobWVtYmVyKXtcblx0XHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvbWVtYmVycy9vbkR1dHkvZmluZEJ5SWQ/bWVtYmVySWQ9JyArIG1lbWJlci5tZW1iZXJJZCwgbWVtYmVyKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gdXBkYXRlQnlNZW1iZXJJZCh1cGRhdGVNZW1iZXIpe1xuXHRcdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9tZW1iZXJzL2ZpbmRCeUlkLycgKyB1cGRhdGVNZW1iZXIubWVtYmVySWQgLCB1cGRhdGVNZW1iZXIpO1xuXHRcdH1cblx0XHRcblx0XHRmdW5jdGlvbiB1cGRhdGVJc0NoZWNrZWQobWVtYmVyRGF0YSl7XG5cdFx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL21lbWJlcnM/aWQ9JyArIG1lbWJlckRhdGEubWVtYmVySWQsIG1lbWJlckRhdGEpXG5cdFx0fTtcblx0XHRcblx0XHRmdW5jdGlvbiB1cGRhdGVVc2VyKHVzZXJuYW1lKXtcblx0XHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvbWVtYmVycy91c2VyP3VzZXJuYW1lPScrIHVzZXJuYW1lKTtcblx0XHR9O1xuXHRcdFxuXHRcdGZ1bmN0aW9uIHJlbW92ZVVzZXIodXNlcm5hbWUpe1xuXHRcdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9tZW1iZXJzL3VzZXIvcmVtb3ZlP3VzZXJuYW1lPScgKyB1c2VybmFtZSk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGRlbGV0ZU1lbWJlcihtZW1iZXIpe1xuXHRcdFx0cmV0dXJuICRodHRwLmRlbGV0ZSgnL2FwaS9tZW1iZXJzLycgKyBtZW1iZXIuX2lkKTtcblx0XHR9O1xuXHR9XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5ub3RpZmljYXRpb24gTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLm5vdGlmaWNhdGlvbicpXG5cdFx0LnNlcnZpY2UoJ050ZlN2YycsTnRmU3ZjKTtcblxuXHROdGZTdmMuJGluamVjdCA9IFsnJGh0dHAnXTtcblx0XG5cdGZ1bmN0aW9uIE50ZlN2YygkaHR0cCl7XG5cdFx0dmFyIHN2YyA9IHRoaXM7XG5cdFx0c3ZjLmZldGNoID0gZmV0Y2g7IFxuXHRcdGZ1bmN0aW9uIGZldGNoKCl7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL250ZnMnKTtcblx0XHR9IDtcblx0fTtcblxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuc29ja2V0IE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5zb2NrZXQnKVxuXHRcdC5zZXJ2aWNlKCdTb2NrZXRTdmMnLFNvY2tldFN2Yyk7XG5cblx0U29ja2V0U3ZjLiRpbmplY3QgPSBbJyRyb290U2NvcGUnLCAnc3RvcmUnLCAnJHEnLCAnJHRpbWVvdXQnXTtcblx0XG5cdGZ1bmN0aW9uIFNvY2tldFN2Yygkcm9vdFNjb3BlLCBzdG9yZSwgJHEsICR0aW1lb3V0KXtcblx0XHR2YXIgc3ZjID0gdGhpczsgXG5cdFx0c3ZjLmluaXQgPSAgZnVuY3Rpb24odG9rZW4pe1xuXHQgICAgXHR2YXIgYXV0aFRva2VuID0gbnVsbFxuXHQgICAgXHRpZiAodG9rZW4pIHtcblx0XHQgICAgICBhdXRoVG9rZW4gPSB0b2tlbiBcblx0XHRcdH0gZWxzZSB7XG5cdFx0ICAgICAgYXV0aFRva2VuID0gc3RvcmUuZ2V0KCdqd3QnKVxuXHRcdCAgICB9O1xuXHRcdCAgICByZXR1cm4gaW8uY29ubmVjdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwJyx7IHF1ZXJ5IDogJ3Rva2VuPScgKyBhdXRoVG9rZW4gLCAnZm9yY2VOZXcnOnRydWUgfSk7XG5cdFx0fVxuXG5cdCAgXHR2YXIgc29ja2V0ID0gc3ZjLmluaXQoKTtcblxuXHQgIFx0c3ZjLm9uID0gIGZ1bmN0aW9uIChldmVudE5hbWUsIGNhbGxiYWNrKSB7XG5cdCAgICBcdHN2Yy5pbml0KCkub24oZXZlbnROYW1lLCBmdW5jdGlvbiAoKSB7ICBcblx0XHQgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcblx0XHQgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG5cdFx0ICAgICAgICBjYWxsYmFjay5hcHBseShzb2NrZXQsIGFyZ3MpO1xuXHRcdCAgICAgIH0pO1xuXHRcdCAgICB9KTtcblx0XHR9O1xuXG5cdCAgXHRzdmMuZW1pdCA9ICBmdW5jdGlvbiAoZXZlbnROYW1lLCBkYXRhLCBjYWxsYmFjaykge1xuXHQgICAgXHRzdmMuaW5pdCgpLmVtaXQoZXZlbnROYW1lLCBkYXRhLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIFx0XHR2YXIgYXJncyA9IGFyZ3VtZW50cztcblx0ICAgICAgXHRcdCRyb290U2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBcdFx0aWYgKGNhbGxiYWNrKSB7XG5cdCAgICAgICAgICBcdFx0XHRjYWxsYmFjay5hcHBseShzb2NrZXQsIGFyZ3MpO1xuXHQgICAgICAgIFx0XHR9O1xuXHQgICAgICBcdFx0fSk7XG5cdCAgICBcdH0pXG5cdCAgXHR9O1xuXG5cdFx0c3ZjLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGNhbGxiYWNrKSB7XG5cdFx0ICAgIHN2Yy5pbml0KCkucmVtb3ZlQWxsTGlzdGVuZXJzKGV2ZW50TmFtZSwgZnVuY3Rpb24oKSB7XG5cdFx0ICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcblx0XHQgICAgICAgICRyb290U2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcblx0XHQgICAgICAgIH0pO1xuXHRcdCAgICB9KTsgXG5cdFx0fTtcblx0fTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHQvKipcblx0KiBhcHAuc2FmZXR5IE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5zYWZldHknKVxuXHRcdC5jb250cm9sbGVyKCdTYWZldHlDbWRTaG93Q29udHJvbGxlcicsU2FmZXR5Q21kU2hvd0NvbnRyb2xsZXIpO1xuXG5cdFNhZmV0eUNtZFNob3dDb250cm9sbGVyLiRpbmplY3QgPSBbJ0Nhc2VTdmMnLCAnQnJhbmNoU3ZjJywgJ1VzZXJTdmMnLCAnJHN0YXRlUGFyYW1zJywgJ0dlb1N2YyddO1xuXHRcblx0ZnVuY3Rpb24gU2FmZXR5Q21kU2hvd0NvbnRyb2xsZXIoQ2FzZVN2YywgQnJhbmNoU3ZjLCBVc2VyU3ZjLCAkc3RhdGVQYXJhbXMsIEdlb1N2Yyl7XG5cdFx0XG5cdFx0dmFyIHZtID0gdGhpczsgXG5cdFx0dmFyIGJyYW5jaCA9IFVzZXJTdmMudXNlckJyYW5jaCgpO1xuXHRcblx0XHRCcmFuY2hTdmMudG90YWxMaXN0RmluZEJ5TmFtZShicmFuY2gpLnN1Y2Nlc3MoZnVuY3Rpb24oYnJhbmNoKXtcblx0XHRcdHZtLm1lbWJlcnMgPSBicmFuY2gubWVtYmVycy5maWx0ZXIoZnVuY3Rpb24obWVtYmVyKSB7XG5cdFx0XHRcdG1lbWJlci5saW1pdFRpbWUgPSBtb21lbnQuZHVyYXRpb24obWVtYmVyLndvcmtpbmdUaW1lLCAnc2Vjb25kcycpO1xuXHRcdFx0XHRyZXR1cm4gbWVtYmVyLm9uRHV0eSA9PSB0cnVlIFxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHRDYXNlU3ZjLmZldGNoRGV0YWlscygkc3RhdGVQYXJhbXMuY2FzZUlkKS5zdWNjZXNzKGZ1bmN0aW9uKF9jYXNlKXtcblx0XHRcdHZtLmNhc2VEZXRhaWwgPSBfY2FzZTtcblx0XHRcdHZtLm9uRHV0eUJyYW5jaGVzID0gX2Nhc2UuYnJhbmNoSWRzO1xuXHRcdFx0aWYgKF9jYXNlLmxvY2F0aW9uKSB7XG5cdFx0XHRcdHZhciBsb2NhdGlvbiA9IEpTT04ucGFyc2UoX2Nhc2UubG9jYXRpb24pO1xuXHRcdFx0XHR2bS5tYXJrZXJzLm1haW5NYXJrZXIgPSB7XG5cdFx0XHRcdFx0bGF0IDogTnVtYmVyKGxvY2F0aW9uLmxhdCksXG5cdFx0XHRcdFx0bG5nIDogTnVtYmVyKGxvY2F0aW9uLmxuZyksXG5cdFx0XHRcdFx0bWVzc2FnZSA6IFwi5qGI5Lu25qiZ55qEXCJcblx0XHRcdFx0fTtcblxuXHRcdFx0XHR2bS5iYXR0bGVSYWRpdXNzID0gX2Nhc2UuYmF0dGxlUmFkaXVzcztcblx0XHRcdH07XG5cdFx0fSkudGhlbihmdW5jdGlvbigpe1xuXHRcdFx0dm0ub25EdXR5QnJhbmNoZXMuZm9yRWFjaChmdW5jdGlvbihicmFuY2gpe1xuXHRcdFx0XHRicmFuY2gubWVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uKG1lbWJlcil7XG5cdFx0XHRcdFx0aWYgKGJyYW5jaC5kaXJlY3RvciA9PSBtZW1iZXIubmFtZSApIHtcblx0XHRcdFx0XHRcdGJyYW5jaC5kaXJlY3RvclJhZGlvQ29kZSA9IG1lbWJlci5yYWRpb0NvZGVQcmVmaXggKyAgU3RyaW5nKG1lbWJlci5yYWRpb0NvZGUpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0aWYgKGJyYW5jaC5zYWZldHlNYW5hZ2VyID09IG1lbWJlci5uYW1lKSB7XG5cdFx0XHRcdFx0XHRicmFuY2guc2FmZXR5TWFuYWdlclJhZGlvQ29kZSA9IG1lbWJlci5yYWRpb0NvZGVQcmVmaXggKyBTdHJpbmcobWVtYmVyLnJhZGlvQ29kZSk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0aWYgKHZtLmJhdHRsZVJhZGl1cykge1xuXHRcdFx0XHRcdHZtLmJhdHRsZVJhZGl1c3MuZm9yRWFjaChmdW5jdGlvbihiYXR0bGVSYWRpdXMpe1xuXHRcdFx0XHRcdFx0dmFyIHJhZGl1cyA9IEpTT04ucGFyc2UoYmF0dGxlUmFkaXVzKVxuXHRcdFx0XHRcdFx0aWYgKGJyYW5jaC5uYW1lID09IHJhZGl1cy5iYXNlKSB7XG5cdFx0XHRcdFx0XHRcdGJyYW5jaC5lc3RpbWF0ZWRBcnJpdmluZ1RpbWUgPSAgTWF0aC5yb3VuZCgoIHJhZGl1cy5kIC8gNTAgKSAqIDYwKTtcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fSlcdFx0XG5cdFx0XHRcdH07XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuICAgICAgIEdlb1N2Yy5nZXRHZW9sb2NhdGlvbkNvb3JkaW5hdGVzKCkudGhlbihmdW5jdGlvbihjb29yZCl7XG5cdCAgICAgICAgdm0ubm93UG9zLmxhdCA9IGNvb3JkLmxhdGl0dWRlO1xuXHQgICAgICAgIHZtLm5vd1Bvcy5sbmcgPSBjb29yZC5sb25naXR1ZGU7XG5cdCAgICAgICAgdm0ubm93UG9zLnpvb20gPSAxNztcblx0ICAgICAgICB2bS5tYXJrZXJzLm5vd1BvcyA9IHtcblx0ICAgICAgICBcdGxhdCA6IHZtLm5vd1Bvcy5sYXQsXG5cdCAgICAgICAgXHRsbmcgOiB2bS5ub3dQb3MubG5nLFxuXHQgICAgICAgIFx0bWVzc2FnZSA6IFwi54++5Zyo5L2N572uXCJcblx0ICAgICAgICB9XG5cdCAgICB9KVxuXG5cdCAgICBhbmd1bGFyLmV4dGVuZCh2bSwge1xuXHQgICAgICAgIG5vd1Bvczoge1xuXHQgICAgICAgICAgICBsYXQ6IDI0Ljk4OCxcblx0ICAgICAgICAgICAgbG5nOiAxMjEuNTc1Mixcblx0ICAgICAgICAgICAgem9vbTogMTNcblx0ICAgICAgICB9LFxuXHQgICAgICAgIG1hcmtlcnM6IHt9LFxuXHQgICAgfSk7XHRcdFxuXHR9XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5zYWZldHkgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLnNhZmV0eScpXG5cdFx0LmNvbnRyb2xsZXIoJ1NhZmV0eUluZGV4Q29udHJvbGxlcicsU2FmZXR5SW5kZXhDb250cm9sbGVyKTtcblx0U2FmZXR5SW5kZXhDb250cm9sbGVyLiRpbmplY3QgPSBbJ0Nhc2VTdmMnLCAnVXNlclN2YyddO1xuXHRmdW5jdGlvbiBTYWZldHlJbmRleENvbnRyb2xsZXIoKXtcblx0XHR2YXIgdm0gPSB0aGlzOyBcblx0XHR2YXIgdXNlckNvbmRpdGlvbiA9IHtcblx0XHRcdGJyYW5jaCBcdFx0OiBVc2VyU3ZjLnVzZXJCcmFuY2goKSxcblx0XHRcdGFjY2Vzc0xldmVsIDogVXNlclN2Yy5hY2Nlc3NMZXZlbCgpLFxuXHRcdFx0Y29ycHMgXHRcdDogVXNlclN2Yy51c2VyQ29ycHMoKVxuXHRcdH07XG5cblx0XHRDYXNlU3ZjLmZldGNoUmVsYXRpdmVDYXNlKHVzZXJDb25kaXRpb24pLnN1Y2Nlc3MoZnVuY3Rpb24oY2FzZXMpeyBcblx0XHRcdHZtLmNhc2VzID0gY2FzZXM7XG5cdFx0XHRjYXNlcy5mb3JFYWNoKGZ1bmN0aW9uKF9jYXNlKXtcblx0XHRcdFx0X2Nhc2UuZGlzcGF0Y2hCcmFuY2hlcyA9ICcnXG5cdFx0XHRcdF9jYXNlLmJyYW5jaGVzLmZvckVhY2goZnVuY3Rpb24oYnJhbmNoKXtcblx0XHRcdFx0XHRfY2FzZS5kaXNwYXRjaEJyYW5jaGVzICs9IGJyYW5jaCArICcgJ1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0dm0uaXNCcmFuY2hNZW1iZXIgPSB0cnVlID8gVXNlclN2Yy5hY2Nlc3NMZXZlbCgpIDwgMiAgOiBmYWxzZSA7IFxuXHR9XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5zYWZldHkgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLnNhZmV0eScpXG5cdFx0LmNvbnRyb2xsZXIoJ1NhZmV0eU1hbmFnZUNvbnRyb2xsZXInLFNhZmV0eU1hbmFnZUNvbnRyb2xsZXIpO1xuXHRcblx0U2FmZXR5TWFuYWdlQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc3RhdGVQYXJhbXMnLCAnJG1vZGFsJywgJ1N0U3ZjJywgJyRzdGF0ZScsICdNZW1iZXJTdmMnLCckbG9nJywgJ1VzZXJTdmMnLCAnQnJhbmNoU3ZjJywgJ1NvY2tldFN2YycsICdDYXNlU3ZjJywgJ1N0TWlzc2lvbkZhYyddO1xuXHRcblx0ZnVuY3Rpb24gU2FmZXR5TWFuYWdlQ29udHJvbGxlcigkc3RhdGVQYXJhbXMsICRtb2RhbCwgU3RTdmMsICRzdGF0ZSwgTWVtYmVyU3ZjLCRsb2csIFVzZXJTdmMsIEJyYW5jaFN2YywgU29ja2V0U3ZjLCBDYXNlU3ZjLCBTdE1pc3Npb25GYWMpe1xuXHRcdHZhciB2bSA9IHRoaXM7IFxuXHRcdHZhciBCUkFOQ0ggXHRcdD0gVXNlclN2Yy51c2VyQnJhbmNoKCk7XG5cdFx0dmFyIGNhc2VEZXRhaWwgXHQ9IG51bGw7XG5cdFx0dm0ucXVpY2tTdGFydCBcdD0gZmFsc2U7XG5cdFx0dm0uYXBhcnRtZW50IFx0PSB0cnVlOyBcblx0XHR2bS5BQ0NFU1NMRVZFTCBcdD0gVXNlclN2Yy5hY2Nlc3NMZXZlbCgpO1xuXHRcdHZtLnF1aWNrT3JnYW5pemluZyA9IHF1aWNrT3JnYW5pemluZztcblx0XHR2bS5zdHJpa2VUZWFtID0gc3RyaWtlVGVhbTtcblx0XHR2bS5vcGVuU2V0dGluZ01vZGFsID0gb3BlblNldHRpbmdNb2RhbDtcblx0XHR2bS5kaXNtaXNzID0gZGlzbWlzczsgXG5cblx0XHR2bS5icmFuY2hPcHRpb25zID0ge1xuXHRcdFx0YnJhbmNoIDogQlJBTkNILFxuXHRcdFx0YnJhbmNoZXMgOiBbXVxuXHRcdH07XG5cblx0XHRDYXNlU3ZjLmZldGNoQnlJZCgkc3RhdGVQYXJhbXMuY2FzZUlkKS5zdWNjZXNzKGZ1bmN0aW9uKF9jYXNlKXtcblx0XHRcdGNhc2VEZXRhaWwgPSBfY2FzZTtcblx0XHRcdF9jYXNlLmVudiA9PSAn5L2P5a6F54Gr6K2mJz8gdm0uYXBhcnRtZW50ID0gdHJ1ZSA6IHZtLmFwYXJ0bWVudCA9IGZhbHNlOyBcblx0XHRcdHZtLmJyYW5jaE9wdGlvbnMuYnJhbmNoZXMgPSBfY2FzZS5icmFuY2hlc1xuXHRcdFx0dm0uYnJhbmNoT3B0aW9ucy5icmFuY2hlcy5zcGxpY2UoMCwwLEJSQU5DSCk7XG5cdFx0fSk7XG5cblx0XHRCcmFuY2hTdmMuZmV0Y2hCeU5hbWUoQlJBTkNIKS5zdWNjZXNzKGZ1bmN0aW9uKGRldGFpbHMpe1xuXHRcdFx0dm0uZGV0YWlscyA9IGRldGFpbHM7XG5cdFx0fSkudGhlbihmdW5jdGlvbigpe1xuXHRcdFx0aWYgKHZtLkFDQ0VTU0xFVkVMID4gMSApIHtcblx0XHRcdFx0U3RTdmMuZmV0Y2hCeUNhc2UoJHN0YXRlUGFyYW1zLmNhc2VJZCkuc3VjY2VzcyhmdW5jdGlvbihzdHMpe1xuXHRcdFx0XHRcdHZtLnN0cmlrZVRlYW1zID0gc3RzOyBcblx0XHRcdFx0fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRTdFN2Yy5mZXRjaCgkc3RhdGVQYXJhbXMuY2FzZUlkLEJSQU5DSCkuc3VjY2VzcyhmdW5jdGlvbihzdHMpe1xuXHRcdFx0XHRcdHZtLnN0cmlrZVRlYW1zID0gc3RzO1xuXHRcdFx0XHRcdGlmICh2bS5kZXRhaWxzLmRpc3BhdGNoTnVtIDwgOCAmJiBfLmlzRW1wdHkodm0uc3RyaWtlVGVhbXMpKSB7IHZtLnF1aWNrU3RhcnQgPSB0cnVlICB9OyBcblx0XHRcdFx0fSk7IFxuXHRcdFx0fTtcblx0XHR9KTtcblxuXHRcdFNvY2tldFN2Yy5vbignbmV3U3QnLCBmdW5jdGlvbihzdCl7XG5cdFx0XHRpZiAodm0uQUNDRVNTTEVWRUwgPiAxICYmIGFuZ3VsYXIuZXF1YWxzKCRzdGF0ZVBhcmFtcy5jYXNlSWQsc3QuY2FzZUlkKSApIHtcblx0XHRcdFx0XHR2bS5zdHJpa2VUZWFtcy5wdXNoKHN0KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmIChhbmd1bGFyLmVxdWFscyhCUkFOQ0gsc3QuYnJhbmNoKSAmJiBhbmd1bGFyLmVxdWFscygkc3RhdGVQYXJhbXMuY2FzZUlkLHN0LmNhc2VJZCkgKSB7XG5cdFx0XHRcdFx0dm0uc3RyaWtlVGVhbXMucHVzaChzdCk7XG5cdFx0XHRcdH07XG5cdFx0XHR9O1xuXHRcdH0pO1xuXG5cdFx0U29ja2V0U3ZjLm9uKCd1cGRhdGVTdCcsIGZ1bmN0aW9uKGRhdGEpe1xuXHRcdFx0dmFyIG1lbWJlcnMgPSBhbmd1bGFyLmNvcHkoZGF0YS5tZW1iZXJzKTtcblx0XHRcdGZvciAodmFyIGkgPSB2bS5zdHJpa2VUZWFtcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0XHRpZihhbmd1bGFyLmVxdWFscyh2bS5zdHJpa2VUZWFtc1tpXS5faWQsZGF0YS5pZCkpe1xuXHRcdFx0XHRcdHZtLnN0cmlrZVRlYW1zW2ldLnBvc2l0aW9uIFx0PSBkYXRhLnBvc2l0aW9uO1xuXHRcdFx0XHRcdHZtLnN0cmlrZVRlYW1zW2ldLmFyZWEgXHRcdD0gZGF0YS5hcmVhO1xuXHRcdFx0XHRcdHZtLnN0cmlrZVRlYW1zW2ldLmZsb29yIFx0PSBkYXRhLmZsb29yO1xuXHRcdFx0XHRcdHZtLnN0cmlrZVRlYW1zW2ldLm1pc3Npb24gXHQ9IGRhdGEubWlzc2lvbjtcblx0XHRcdFx0fTtcblx0XHRcdH07XG5cdFx0fSlcblxuXHRcdFNvY2tldFN2Yy5vbignZGlzbWlzcycsIGZ1bmN0aW9uKHN0KXtcblx0XHRcdHZhciBfc3RJZCA9IHN0LnN0SWQ7XG5cdFx0XHR2bS5zdHJpa2VUZWFtcyA9IHZtLnN0cmlrZVRlYW1zLmZpbHRlcihmdW5jdGlvbihzdCkge1x0XHRcdFx0XG5cdFx0XHRcdHJldHVybiBzdC5faWQgIT0gX3N0SWQ7XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0XHRcblx0XHRmdW5jdGlvbiBzdHJpa2VUZWFtKCl7XG5cdFx0XHR2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcblx0XHRcdCAgXHR0ZW1wbGF0ZVVybDogJ3ZpZXdzL3NhZmV0eS9zYWZldHkubW9kYWwuaHRtbCcsXG5cdFx0XHQgICAgY29udHJvbGxlcjogJ1NhZmV0eU1vZGFsQ3RybCcsXG5cdFx0XHQgICAgc2l6ZTogXCJtZFwiLFxuXHRcdFx0ICAgIHJlc29sdmUgOiB7XG5cdFx0XHQgICAgXHRzdElkIDogZnVuY3Rpb24oKXtcblx0XHRcdCAgICBcdFx0aWYgKCBfLmlzRW1wdHkodm0uc3RyaWtlVGVhbXMpKSB7XG5cdFx0XHQgICAgXHRcdFx0cmV0dXJuIDBcblx0XHRcdCAgICBcdFx0fSBlbHNle1xuXHRcdFx0ICAgIFx0XHRcdHJldHVybiB2bS5zdHJpa2VUZWFtc1t2bS5zdHJpa2VUZWFtcy5sZW5ndGgtMV0uaWQ7XG5cdFx0XHQgICAgXHRcdH07XG5cdFx0XHQgICAgXHR9LFxuXHRcdFx0ICAgIFx0YnJhbmNoIDogZnVuY3Rpb24oKXtcblx0XHRcdCAgICBcdFx0cmV0dXJuIHZtLmJyYW5jaE9wdGlvbnMuYnJhbmNoO1xuXHRcdFx0ICAgIFx0fSxcblx0XHRcdCAgICBcdGNhc2VEZXRhaWwgOiBmdW5jdGlvbigpe1xuXHRcdFx0ICAgIFx0XHRyZXR1cm4gY2FzZURldGFpbFxuXHRcdFx0ICAgIFx0fVxuXHRcdFx0ICAgIH1cblx0XHQgICAgfSk7XG5cdFx0fTtcblxuXHRcdFxuXHRcdGZ1bmN0aW9uIG9wZW5TZXR0aW5nTW9kYWwoc3RyaWtlVGVhbSwgaWQpe1xuXHQgICAgICAgIHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuXHQgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3NhZmV0eS9zYWZldHkuc2V0dGluZy5tb2RhbC5odG1sJyxcblx0ICAgICAgICAgICAgY29udHJvbGxlcjogJ1NhZmV0eVNldHRpbmdDdHJsJyxcblx0ICAgICAgICAgICAgc2l6ZTogXCJsZ1wiLFxuXHQgICAgICAgICAgICByZXNvbHZlOiB7XG5cdCAgICAgICAgICAgICAgICBzdHJpa2VUZWFtIDogZnVuY3Rpb24oKXtcblx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyaWtlVGVhbTtcblx0ICAgICAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgICAgICBjYXNlRGV0YWlsIDogZnVuY3Rpb24oKXtcblx0ICAgICAgICAgICAgICAgIFx0cmV0dXJuIGNhc2VEZXRhaWw7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgIH07XG5cblx0XHRcblx0XHRmdW5jdGlvbiBkaXNtaXNzKHN0cmlrZVRlYW0gLCBpZCl7XG5cblx0XHRcdFNvY2tldFN2Yy5lbWl0KFwiZGlzbWlzc1N0cmlrZVRlYW1cIix7XG5cdFx0XHRcdGlkIDogc3RyaWtlVGVhbS5faWQsXG5cdFx0XHRcdG1lbWJlcnMgOiBzdHJpa2VUZWFtLm1lbWJlcnMgXG5cdFx0XHR9KTtcblx0ICAgICAgIFx0dm0uc3RyaWtlVGVhbXMuc3BsaWNlKGlkLDEpO1xuXHRcdH07XG5cblx0XHRcblx0XHRmdW5jdGlvbiBxdWlja09yZ2FuaXppbmcoKXtcblx0XHRcdHZtLnF1aWNrU3RhcnQgPSBmYWxzZTtcblx0XHRcblx0XHRcdHZhciBtZW1iZXJzID0gIHZtLmRldGFpbHMubWVtYmVycy5maWx0ZXIoZnVuY3Rpb24obWVtYmVyKSB7XG5cdFx0XHRcdGlmICggbWVtYmVyLm1pc3Npb24gPT0gJ+WPuOapnycgfHwgbWVtYmVyLm1pc3Npb24gPT0gJ+WuieWFqOeuoeWItuWToScgfHwgbWVtYmVyLm1pc3Npb24gPT0gJ+aVkeitt+S6uuWToScpIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2UgIFxuXHRcdFx0XHR9ZWxzZSB7XG5cdFx0XHRcdFx0bWVtYmVyLmlzQ2hlY2tlZCA9IHRydWU7XG5cdFx0XHRcdFx0cmV0dXJuIG1lbWJlci5vbkR1dHk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHR2YXIgc3RyaWtlVGVhbSA9IHtcblx0XHRcdFx0aWQgXHRcdCAgOiAxLFxuXHRcdFx0XHRjYXNlSWQgXHQgIDogY2FzZURldGFpbC5faWQsXG5cdFx0XHRcdGJyYW5jaCBcdCAgOiBVc2VyU3ZjLnVzZXJCcmFuY2goKSxcblx0XHRcdFx0ZGlyZWN0b3IgIDogXy5wbHVjayhtZW1iZXJzLmZpbHRlcihmdW5jdGlvbihtZW1iZXIpIHsgcmV0dXJuIG1lbWJlci5taXNzaW9uID09ICfluLbpmorlrpgnfSksJ25hbWUnKVswXSxcblx0XHRcdFx0cG9zaXRpb24gIDogU3RNaXNzaW9uRmFjLnBvc2l0aW9uKCkuZGVmYXVsdFBvcyxcblx0XHRcdFx0cG9zaXRpb25zIDogU3RNaXNzaW9uRmFjLnBvc2l0aW9uKCkucG9zcyxcblx0XHRcdFx0Z3JvdXAgICAgIDogU3RNaXNzaW9uRmFjLmdyb3VwcygpLmJyYW5jaFsxXSxcblx0XHRcdFx0Z3JvdXBzICAgIDogU3RNaXNzaW9uRmFjLmdyb3VwcygpLmJyYW5jaCxcblx0XHRcdFx0YXJlYSBcdCAgOiBTdE1pc3Npb25GYWMuYXJlYSgpLmRlZmF1bHRBcmVhLFxuXHRcdFx0XHRhcmVhcyBcdCAgOiBTdE1pc3Npb25GYWMuYXJlYSgpLmFyZWFzLFxuXHRcdFx0XHRmbG9vciBcdCAgOiAxLCBcblx0XHRcdFx0Zmxvb3JzICAgIDogWzEsMiwzLDQsNV0sXG5cdFx0XHRcdG1lbWJlcklkcyA6IF8ucGx1Y2sobWVtYmVycywnX2lkJyksXG5cdFx0XHRcdG1lbWJlcnMgICA6IG1lbWJlcnMsXG5cdFx0XHRcdGNyZWF0b3IgICA6IFVzZXJTdmMuY3VycmVudFVzZXIoKSxcblx0XHRcdH07XG5cdCAgICAgIFx0U29ja2V0U3ZjLmVtaXQoXCJjcmVhdGVTdHJpa2VUZWFtXCIsIHN0cmlrZVRlYW0pO1xuXHRcdH07XG5cblx0XHR2bS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgU29ja2V0U3ZjLnJlbW92ZUFsbExpc3RlbmVycygpO1xuXHQgICAgfSlcblx0fVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuc2FmZXR5IE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5zYWZldHknKVxuXHRcdC5jb250cm9sbGVyKCdNZW1iZXJNb2RhbENvbnRyb2xsZXInLE1lbWJlck1vZGFsQ29udHJvbGxlcik7XG5cblx0TWVtYmVyTW9kYWxDb250cm9sbGVyLiRpbmplY3QgPSBbJ2JyYW5jaCcsICdNZW1iZXJTdmMnLCAnJG1vZGFsSW5zdGFuY2UnLCAnJHN0YXRlJywgJ21lbWJlcicsJ0JyYW5jaFN2YycsICdVc2VyU3ZjJ107XG5cdGZ1bmN0aW9uIE1lbWJlck1vZGFsQ29udHJvbGxlcigpe1xuXHRcdHZhciB2bSA9IHRoaXM7IFxuXHRcdHZtLmFsZXJ0cyA9IFtdO1xuXHRcdHZtLmlzTmV3ID0gXy5pc051bGwobWVtYmVyLndvcmtpbmdUaW1lKTtcblx0XHR2bS5zYXZlID0gc2F2ZTtcblx0XHR2bS51cGRhdGUgPSB1cGRhdGU7IFxuXHRcdHZtLmNhbmNlbCA9IGNhbmNlbDsgIFxuXG5cdFx0dm0ubWVtYmVyID0ge1xuXHRcdFx0aWQgXHRcdCBcdDogbWVtYmVyLmlkIHx8ICBcIlwiLCBcblx0XHRcdG5hbWUgXHQgXHQ6IG1lbWJlci5uYW1lIHx8IG51bGwgLCBcblx0XHRcdHRpdGxlICAgIFx0OiBcIua2iOmYsumaiuWToVwiLFxuXHRcdFx0dGl0bGVzICAgXHQ6IFtcIua2iOmYsumaiuWToVwiLFwi5bCP6ZqK6ZW3XCIsXCLliIbpmorplbdcIixcIuS4remaiumVt1wiLFwi5aSn6ZqK6ZW3XCIsXCLlia/lpKfpmorplbdcIl0sXG5cdFx0XHRicmFuY2ggICBcdDogbWVtYmVyLmJyYW5jaCB8fCBicmFuY2gsXG5cdFx0XHR3b3JraW5nVGltZSA6IG1lbWJlci53b3JraW5nVGltZSB8fCAgMTIwMCxcblx0XHRcdHJhZGlvQ29kZSBcdDogbWVtYmVyLnJhZGlvQ29kZSB8fCAgbnVsbCwgXG5cdFx0XHRtaXNzaW9uICBcdDogXCLnnoTlrZDmiYtcIixcblx0XHRcdG1pc3Npb25zIFx0OiBbXCLnnoTlrZDmiYtcIixcIuWJr+eehOWtkOaJi1wiLFwi5Y+45qmfXCIsXCLlsI/ntYTplbdcIixcIuWuieWFqOeuoeWItuWToVwiLFwi6IGv57Wh5a6YXCIsXSxcblx0XHRcdGNvcnBzXHQgXHQ6IFVzZXJTdmMudXNlckNvcnBzKCksXG5cdFx0XHRjb3Jwc3MgXHQgXHQ6IFtcIuesrOS4gOaVkeeBveaVkeitt+Wkp+mailwiLFwi56ys5LiJ5pWR54G95pWR6K235aSn6ZqKXCJdLFxuXHRcdH07XG5cblx0XHRCcmFuY2hTdmMuZmV0Y2hCeUNvcnBzKFVzZXJTdmMudXNlckNvcnBzKCkpLnN1Y2Nlc3MoZnVuY3Rpb24oYnJhbmNoZXMpe1xuXHRcdFx0dm0uYnJhbmNoZXMgPSBicmFuY2hlczsgXG5cdFx0XHRpZiAoIXZtLmlzTmV3KSB7XG5cdFx0XHRcdHZhciBicmFuY2hBcnJ5ID0gW107XG5cdFx0XHRcdGZvciAodmFyIGkgPSBicmFuY2hlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0XHRcdGJyYW5jaEFycnkucHVzaChicmFuY2hlc1tpXS5uYW1lKTtcblx0XHRcdFx0fTtcblx0XHRcdFx0dm0ubWVtYmVyLmJyYW5jaGVzID0gYnJhbmNoQXJyeTtcblx0XHRcdH07IFxuXHRcdH0pO1xuXG5cdFx0dmFyIHJhZGlvQ29kZVByZWZpeCA9IGZ1bmN0aW9uKGJyYW5jaCl7XG5cdFx0XHR2YXIgc3VmZml4ID0gIGJyYW5jaC5zcGxpdCgnJykuc2xpY2UoLTIpLmpvaW4oJycpO1xuXHRcdFx0aWYgKHN1ZmZpeCA9PSBcIuWkp+mailwiIHx8IHN1ZmZpeCA9PSBcIuS4remailwiKSB7XG5cdFx0XHRcdHJldHVybiBcIuWMl+a1t1wiO1xuXHRcdFx0fSBlbHNle1xuXHRcdFx0XHRyZXR1cm4gYnJhbmNoLnNwbGl0KCcnKS5zbGljZSgwLDIpLmpvaW4oJycpO1xuXHRcdFx0fTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gc2F2ZSgpe1xuXHRcdFx0aWYgKHZtLm1lbWJlci5uYW1lKSB7XG5cdFx0XHRcdHZtLm1lbWJlci5yYWRpb0NvZGVQcmVmaXggPSByYWRpb0NvZGVQcmVmaXgodm0ubWVtYmVyLmJyYW5jaCk7XG5cdFx0XHRcdE1lbWJlclN2Yy5jcmVhdGUodm0ubWVtYmVyKS5zdWNjZXNzKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0dm0ubWVtYmVyLndvcmtpbmdUaW1lID0gbW9tZW50LmR1cmF0aW9uKHBhcnNlSW50KHZtLm1lbWJlci53b3JraW5nVGltZSksJ3NlY29uZHMnKTtcblx0XHRcdFx0fSkudGhlbihmdW5jdGlvbigpe1xuXHRcdFx0XHRcdCRtb2RhbEluc3RhbmNlLmNsb3NlKHZtLm1lbWJlcik7XG5cdFx0XHRcdH0pXG5cdFx0XHR9O1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiB1cGRhdGUoKXtcblx0XHRcdHZhciB1cGRhdGVNZW1iZXIgPSB7XG5cdFx0XHRcdCAgbWVtYmVySWQgIDogbWVtYmVyLm1lbWJlcklkLFxuXHRcdFx0XHQgIGlkIFx0XHQ6IFwiXCIsXG5cdFx0XHRcdCAgbmFtZSBcdFx0OiB2bS5tZW1iZXIubmFtZSxcblx0XHRcdFx0ICBjb3JwcyBcdDogdm0ubWVtYmVyLmNvcnBzLFxuXHRcdFx0XHQgIGJyYW5jaCBcdDogdm0ubWVtYmVyLmJyYW5jaCxcblx0XHRcdFx0ICB0aXRsZSBcdDogdm0ubWVtYmVyLnRpdGxlLFxuXHRcdFx0XHQgIHdvcmtpbmdUaW1lIDogdm0ubWVtYmVyLndvcmtpbmdUaW1lLFxuXHRcdFx0XHQgIHJhZGlvQ29kZSAgOiB2bS5tZW1iZXIucmFkaW9Db2RlLFxuXHRcdFx0XHQgIHJhZGlvQ29kZVByZWZpeCA6IHJhZGlvQ29kZVByZWZpeCh2bS5tZW1iZXIuYnJhbmNoKVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAodm0ubWVtYmVyLm5hbWUpIHtcblx0XHRcdFx0TWVtYmVyU3ZjLnVwZGF0ZUJ5TWVtYmVySWQodXBkYXRlTWVtYmVyKTtcblx0XHRcdFx0JG1vZGFsSW5zdGFuY2UuY2xvc2UodXBkYXRlTWVtYmVyKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFxuXHRcdFx0fTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gY2FuY2VsKCl7XG5cdFx0XHQkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcblx0XHR9O1xuXHR9XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5zYWZldHkgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLnNhZmV0eScpXG5cdFx0LmNvbnRyb2xsZXIoJ1NhZmV0eVNldHRpbmdDb250cm9sbGVyJyxTYWZldHlTZXR0aW5nQ29udHJvbGxlcik7XG5cblx0U2FmZXR5U2V0dGluZ0NvbnRyb2xsZXIuJGluamVjdCA9IFsnc3RyaWtlVGVhbScsICckbW9kYWxJbnN0YW5jZScsICdTdFN2YycsICckc3RhdGUnLCAnTWVtYmVyU3ZjJywgJ0Nhc2VTdmMnLCAnJHN0YXRlUGFyYW1zJywgJ1NvY2tldFN2YycsICdjYXNlRGV0YWlsJ107XG5cdFxuXHRmdW5jdGlvbiBTYWZldHlTZXR0aW5nQ29udHJvbGxlcihzdHJpa2VUZWFtLCAkbW9kYWxJbnN0YW5jZSwgU3RTdmMsICRzdGF0ZSwgTWVtYmVyU3ZjLCBDYXNlU3ZjLCAkc3RhdGVQYXJhbXMsIFNvY2tldFN2YywgY2FzZURldGFpbCl7XG5cdFx0dmFyIHZtID0gdGhpczsgXG5cdFx0dm0uc3RyaWtlVGVhbSA9IHN0cmlrZVRlYW07XG5cdFx0dm0uY2hvb3NlQnJhbmNoID0gY2hvb3NlQnJhbmNoO1xuXHRcdHZtLmNhbmNlbCA9IGNhbmNlbDtcblx0XHR2bS5jaGVjayA9IGNoZWNrO1xuXHRcdHZtLnVuY2hlY2sgPSB1bmNoZWNrO1xuXHRcdHZtLnNhdmUgPSBzYXZlOyAgIFxuXHRcdGNhc2VEZXRhaWwuZW52ID09ICfkvY/lroXngavoraYnPyB2bS5hcGFydG1lbnQgPSAgdHJ1ZSAgOiB2bS5hcGFydG1lbnQgPSBmYWxzZSBcblxuXHRcdHZhciBuZXdNZW1iZXJzID0gW107XG5cblx0XHRDYXNlU3ZjLmZldGNoRGV0YWlscygkc3RhdGVQYXJhbXMuY2FzZUlkKS5zdWNjZXNzKGZ1bmN0aW9uKGRldGFpbHMpe1xuXHRcdFx0dm0uZGlzcGF0Y2ggPSBkZXRhaWxzLmJyYW5jaElkcztcblx0XHRcdHZtLmN1cnJlbnRCcmFuY2ggPSB2bS5kaXNwYXRjaFswXS5uYW1lO1xuXHRcdFx0dmFyIG1lbWJlckxpc3QgPSBfLnBsdWNrKGRldGFpbHMuYnJhbmNoSWRzLCdtZW1iZXJzJyk7XG5cdFx0XHR2bS5tZW1iZXJzID0gW11cblx0XHRcdG1lbWJlckxpc3QuZm9yRWFjaChmdW5jdGlvbihicmFuY2hNZW1iZXJzKXtcblx0XHRcdFx0dm0ubWVtYmVycy5wdXNoLmFwcGx5KHZtLm1lbWJlcnMsIGJyYW5jaE1lbWJlcnMpXG5cdFx0XHR9KTtcblx0XHRcdHZtLm1lbWJlcnMgPSB2bS5tZW1iZXJzLmZpbHRlcihmdW5jdGlvbihtZW1iZXIpIHsgcmV0dXJuICFtZW1iZXIuaXNDaGVja2VkIH0pO1xuXHRcdH0pXG5cblx0XHRmdW5jdGlvbiBjaG9vc2VCcmFuY2goYnJhbmNoKXtcblx0XHRcdHZtLmN1cnJlbnRCcmFuY2ggPSBicmFuY2g7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGNhbmNlbCgpe1xuXHRcdFx0JG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGNoZWNrKG1lbWJlcil7XG5cdFx0XHRtZW1iZXIuaXNDaGVja2VkID0gIW1lbWJlci5pc0NoZWNrZWQ7XG5cdFx0XHRuZXdNZW1iZXJzLnB1c2gobWVtYmVyKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gdW5jaGVjayhtZW1iZXIsIGlkKXtcblx0XHRcdG1lbWJlci5pc0NoZWNrZWQgPSAhbWVtYmVyLmlzQ2hlY2tlZDtcblx0XHRcdG5ld01lbWJlcnMuc3BsaWNlKF8ucGx1Y2sobmV3TWVtYmVycywgJ19pZCcpLmluZGV4T2YobWVtYmVyLl9pZCksMSk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHNhdmUoKXtcblx0XHRcdHZtLnN0cmlrZVRlYW0ubWVtYmVycy5wdXNoLmFwcGx5KHZtLnN0cmlrZVRlYW0ubWVtYmVycywgbmV3TWVtYmVycyk7XG5cdFx0XHRTb2NrZXRTdmMuZW1pdCgndXBkYXRlU3RyaWtlVGVhbScse1xuXHRcdFx0XHRpZCA6IHN0cmlrZVRlYW0uX2lkLCBcblx0XHRcdFx0cG9zaXRpb24gOiBzdHJpa2VUZWFtLnBvc2l0aW9uLFxuXHRcdFx0XHRhcmVhIDogc3RyaWtlVGVhbS5hcmVhLCBcblx0XHRcdFx0Zmxvb3IgOiBzdHJpa2VUZWFtLmZsb29yLFxuXHRcdFx0XHRncm91cCA6IHN0cmlrZVRlYW0uZ3JvdXAsXG5cdFx0XHRcdG1lbWJlcklkcyA6IF8ucGx1Y2sodm0uc3RyaWtlVGVhbS5tZW1iZXJzLCdfaWQnKSwgXG5cdFx0XHRcdG1lbWJlcnMgOiB2bS5zdHJpa2VUZWFtLm1lbWJlcnNcblx0XHRcdH0pO1xuXG5cdFx0XHQkbW9kYWxJbnN0YW5jZS5jbG9zZSgnZGlzbWlzcycpO1x0XHRcdFxuXHRcdH07XG5cdH07XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLnNhZmV0eSBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuc2FmZXR5Jylcblx0XHQuY29udHJvbGxlcignU2FmZXR5U2hvd0NvbnRyb2xsZXInLFNhZmV0eVNob3dDb250cm9sbGVyKTtcblxuXHRTYWZldHlTaG93Q29udHJvbGxlci4kaW5qZWN0ID0gWydDYXNlU3ZjJywgJ1VzZXJTdmMnLCAnU29ja2V0U3ZjJywnR2VvU3ZjJywgJ0JyYW5jaFN2YycsICckc3RhdGVQYXJhbXMnXTtcblxuXHRmdW5jdGlvbiBTYWZldHlTaG93Q29udHJvbGxlcigpe1xuXHRcdHZhciB2bSA9IHRoaXM7IFxuXHRcdHZhciBicmFuY2ggPSBVc2VyU3ZjLnVzZXJCcmFuY2goKTtcblx0XHRcblx0XHRCcmFuY2hTdmMuZmV0Y2hCeU5hbWUoYnJhbmNoKS5zdWNjZXNzKGZ1bmN0aW9uKGJyYW5jaCl7XG5cdFx0XHR2bS5tZW1iZXJzID0gYnJhbmNoLm1lbWJlcnMuZmlsdGVyKGZ1bmN0aW9uKG1lbWJlcikge1xuXHRcdFx0XHRtZW1iZXIubGltaXRUaW1lID0gbW9tZW50LmR1cmF0aW9uKG1lbWJlci53b3JraW5nVGltZSwgJ3NlY29uZHMnKTtcblx0XHRcdFx0cmV0dXJuIG1lbWJlci5vbkR1dHkgPT0gdHJ1ZSBcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Q2FzZVN2Yy5mZXRjaERldGFpbHMoJHN0YXRlUGFyYW1zLmNhc2VJZCkuc3VjY2VzcyhmdW5jdGlvbihfY2FzZSl7XG5cdFx0XHR2bS5jYXNlRGV0YWlsID0gX2Nhc2U7XG5cdFx0XHRpZiAoX2Nhc2UubG9jYXRpb24pIHtcblx0XHRcdFx0dmFyIGxvY2F0aW9uID0gSlNPTi5wYXJzZShfY2FzZS5sb2NhdGlvbik7XG5cdFx0XHRcdHZtLm1hcmtlcnMubWFpbk1hcmtlciA9IHtcblx0XHRcdFx0XHRsYXQgOiBOdW1iZXIobG9jYXRpb24ubGF0KSxcblx0XHRcdFx0XHRsbmcgOiBOdW1iZXIobG9jYXRpb24ubG5nKSxcblx0XHRcdFx0XHRtZXNzYWdlIDogXCLmoYjku7bmqJnnmoRcIlxuXHRcdFx0XHR9O1xuXHRcdFx0fTtcblx0XHR9KTtcblxuICAgICAgIEdlb1N2Yy5nZXRHZW9sb2NhdGlvbkNvb3JkaW5hdGVzKCkudGhlbihmdW5jdGlvbihjb29yZCl7XG5cdCAgICAgICAgdm0ubm93UG9zLmxhdCA9IGNvb3JkLmxhdGl0dWRlO1xuXHQgICAgICAgIHZtLm5vd1Bvcy5sbmcgPSBjb29yZC5sb25naXR1ZGU7XG5cdCAgICAgICAgdm0ubm93UG9zLnpvb20gPSAxNztcblx0ICAgICAgICB2bS5tYXJrZXJzLm5vd1BvcyA9e1xuXHQgICAgICAgIFx0bGF0IDogdm0ubm93UG9zLmxhdCxcblx0ICAgICAgICBcdGxuZyA6IHZtLm5vd1Bvcy5sbmcsXG5cdCAgICAgICAgXHRtZXNzYWdlIDogXCLnj77lnKjkvY3nva5cIlxuXHQgICAgICAgIH1cblx0ICAgIH0pXG5cblx0ICAgIGFuZ3VsYXIuZXh0ZW5kKHZtLCB7XG5cdCAgICAgICAgbm93UG9zOiB7XG5cdCAgICAgICAgICAgIGxhdDogMjQuOTg4LFxuXHQgICAgICAgICAgICBsbmc6IDEyMS41NzUyLFxuXHQgICAgICAgICAgICB6b29tOiAxM1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgbWFya2Vyczoge30sXG5cdCAgICB9KTtcdFx0XG5cdH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLnN0cmlrZVRlYW0gTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLnN0cmlrZVRlYW0nLCBbXSlcblx0XHQuZmFjdG9yeSgnU3RNaXNzaW9uRmFjJyxTdE1pc3Npb25GYWMpO1xuXG5cdFN0TWlzc2lvbkZhYy4kaW5qZWN0ID0gW107XG5cdGZ1bmN0aW9uIFN0TWlzc2lvbkZhYygpe1xuXHRcdHJldHVybiB7XG5cdFx0XHRncm91cHM6IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0Y29ycHMgOiBbIFwi6IGv57Wh57WEXCIgLCBcIuawtOa6kOe1hFwiICwgXCLlvozli6TntYRcIl0sXG5cdFx0XHRcdFx0c3F1YWRyb24gOiBbXCJcIl0sXG5cdFx0XHRcdFx0YnJhbmNoIDogW1wi5bi26ZqK5a6YXCIsXCLmu4XngavlsI/ntYRcIixcIuaQnOaVkeWwj+e1hFwiLFwi5pC25pWR5bCP57WEXCIsXCLlvozli6TlsI/ntYRcIl0sXG5cdFx0XHRcdFx0cHJlU3QgIDogW1wi5pCc5pWR5bCP57WEXCIsXCLmkLbmlZHlsI/ntYRcIixcIua7heeBq+Wwj+e1hFwiXVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0cG9zaXRpb24gOiBmdW5jdGlvbigpe1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdGRlZmF1bHRQb3MgOiBcIuesrOS4gOmdolwiLFxuXHRcdFx0XHRcdHBvc3MgOiBbXCLnrKzkuIDpnaJcIixcIuesrOS6jOmdolwiLFwi56ys5LiJ6Z2iXCIsXCLnrKzlm5vpnaJcIl1cblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGFyZWEgOiBmdW5jdGlvbigpe1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdGRlZmF1bHRBcmVhIDogXCLnrKzkuIDljYBcIixcblx0XHRcdFx0XHRhcmVhcyA6IFtcIuesrOS4gOWNgFwiLFwi56ys5LqM5Y2AXCIsXCLnrKzkuInljYBcIixcIuesrOWbm+WNgFwiLFwi56ys5LqU5Y2AXCJdXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fTtcblx0fTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLnN0cmlrVGVhbSBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuc3RyaWtUZWFtJylcblx0XHQuc2VyaXZjZSgnU3RTdmMnLFN0U3ZjKTtcblx0XHRcblx0U3RTdmMuJGluamVjdCA9IFsnJGh0dHAnXTtcblxuXHRmdW5jdGlvbiBTdFN2Yygpe1xuXHRcdHZhciBzdmMgPSB0aGlzOyBcblx0XHRzdmMuZmV0Y2ggPSBmZXRjaDtcblx0XHRzdmMuZmV0Y2hCeUNhc2UgPSBmZXRjaEJ5Q2FzZTtcblx0XHRzdmMuZmluZEJ5SWQgPSBmaW5kQnlJZDtcblx0XHRzdmMuZGlzbWlzc1N0ID0gZGlzbWlzc1N0O1xuXHRcdHN2Yy51cGRhdGVTdCA9IHVwZGF0ZVN0O1xuXHRcdHN2Yy51cGRhdGVUaW1lUmVjb3JkID0gdXBkYXRlVGltZVJlY29yZDtcblx0XHRzdmMuY3JlYXRlID0gY3JlYXRlO1xuXHRcdHN2Yy5jb3VudCA9IGNvdW50OyBcblxuXHRcdGZ1bmN0aW9uIGZldGNoKGNhc2VJZCwgYnJhbmNoKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvc3RyaWtlVGVhbXM/Y2FzZUlkPScgKyBjYXNlSWQgKyAnJmJyYW5jaD0nICsgYnJhbmNoKTtcblx0XHR9O1xuXHRcblx0XHRmdW5jdGlvbiBmZXRjaEJ5Q2FzZShjYXNlSWQpe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9zdHJpa2VUZWFtcy90b3RhbD9jYXNlSWQ9JyArIGNhc2VJZCk7XG5cdFx0fTtcblx0XHRcblx0XHRmdW5jdGlvbiBmaW5kQnlJZChjYXNlSWQpe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9zdHJpa2VUZWFtcy8nICsgY2FzZUlkKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gZGlzbWlzc1N0KGRhdGEpe1xuXHRcdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9zdHJpa2VUZWFtcy9kaXNtaXNzP2lkPScgKyBkYXRhLmlkKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gdXBkYXRlU3QoZGF0YSl7XG5cdFx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL3N0cmlrZVRlYW1zL3VwZGF0ZT9pZD0nICsgZGF0YS5pZCwgZGF0YSk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHVwZGF0ZVRpbWVSZWNvcmQoZGF0YSl7XG5cdFx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL3N0cmlrZVRlYW1zL3RpbWU/aWQ9JyArIGRhdGEuaWQsIGRhdGEpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBjcmVhdGUoc3RyaWtlVGVhbSl7XG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9zdHJpa2VUZWFtcycsIHN0cmlrZVRlYW0pO1xuXHRcdH07XG5cdFx0XG5cdFx0ZnVuY3Rpb24gY291bnQoY2FzZUlkKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvc3RyaWtlVGVhbXMvY291bnQ/Y2FzZUlkPScgKyBjYXNlSWQpO1xuXHRcdH07XG5cdH1cblxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuc3VtbWFyeSBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuc3VtbWFyeScpXG5cdFx0LmNvbnRyb2xsZXIoJ1N1bW1hcnlDb250cm9sbGVyJyxTdW1tYXJ5Q29udHJvbGxlcik7XG5cblx0U3VtbWFyeUNvbnRyb2xsZXIuJGluamVjdCA9IFsnU3RTdmMnLCAnJHN0YXRlUGFyYW1zJywgJyRpbnRlcnZhbCcsICckc3RhdGUnLCAnU29ja2V0U3ZjJywgJ0Nhc2VTdmMnXTtcblx0ZnVuY3Rpb24gU3VtbWFyeUNvbnRyb2xsZXIoKXtcblx0XHR2YXIgdm0gPSB0aGlzOyBcblx0XHR2bS5pc0NvbGxhcHNlZCA9IHRydWUgO1xuXHRcdHZtLm1lbWJlcnMgPSBbXTtcblxuXHRcdFNvY2tldFN2Yy5vbigndGltZXJSdW5uaW5nJyxmdW5jdGlvbihzdCl7XG5cdFx0XHRmb3IgKHZhciBpID0gdm0uc3RyaWtlVGVhbXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0aWYoIGFuZ3VsYXIuZXF1YWxzKHZtLnN0cmlrZVRlYW1zW2ldLl9pZCwgc3Quc3RJZCkpe1xuXHRcdFx0XHRcdHJldHVybiB2bS5zdHJpa2VUZWFtc1tpXS50aW1lclJ1bm5pbmcgPSBzdC50aW1lclJ1bm5pbmc7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fSlcblxuXHRcdFNvY2tldFN2Yy5vbigncHJvZ3Jlc3NVcGRhdGUnLGZ1bmN0aW9uKGRhdGEpe1xuXHRcdFx0Zm9yICh2YXIgaSA9IHZtLnN0cmlrZVRlYW1zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRcdGlmKCBhbmd1bGFyLmVxdWFscyh2bS5zdHJpa2VUZWFtc1tpXS5faWQsIGRhdGEuaWQpICl7XG5cdFx0XHRcdFx0dm0uc3RyaWtlVGVhbXNbaV0udGltZXJcdD0gbW9tZW50LmR1cmF0aW9uKGRhdGEubWlsbGlzKTsgXG5cdFx0XHRcdFx0dm0uc3RyaWtlVGVhbXNbaV0ucHJvZ3Jlc3MgID0gZGF0YS5wcm9ncmVzcztcblx0XHRcdFx0XHR2bS5zdHJpa2VUZWFtc1tpXS5wcm9ncmVzc1N0YXRlID0gIGRhdGEucHJvZ3Jlc3NTdGF0ZTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9KVxuXG5cdFx0U29ja2V0U3ZjLm9uKCduZXdTdCcsIGZ1bmN0aW9uKHN0KXtcblx0XHRcdGlmICggYW5ndWxhci5lcXVhbHMoY2FzZUlkLHN0LmNhc2VJZCkpIHtcblx0XHRcdFx0dmFyIG5ld1N0ID0gYW5ndWxhci5jb3B5KHN0KTtcblx0XHRcdFx0cmV0dXJuIHZtLnN0cmlrZVRlYW1zLnB1c2gobmV3U3QpO1xuXHRcdFx0fTtcblx0XHRcdHZtLmRlcGxveXMgPSBpbml0VGFibGUodm0uc3RyaWtlVGVhbXMpO1xuXHRcdH0pO1xuXG5cdFx0XG5cblx0XHRTb2NrZXRTdmMub24oJ3VwZGF0ZVN0JywgZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHRTdFN2Yy5mZXRjaEJ5Q2FzZShjYXNlSWQpLnN1Y2Nlc3MoZnVuY3Rpb24oc3RyaWtlVGVhbXMpe1xuXHRcdFx0XHR2bS5zdHJpa2VUZWFtcyA9IHN0cmlrZVRlYW1zO1xuXHRcdFx0XHR2bS5zdHJpa2VUZWFtcy5mb3JFYWNoKGZ1bmN0aW9uKHN0KXtcblx0XHRcdFx0XHRzdC5saW1pdFRpbWUgPSBtb21lbnQuZHVyYXRpb24oc3Qud29ya2luZ1RpbWUsJ3NlY29uZHMnKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHZtLmRlcGxveXMgPSBpbml0VGFibGUodm0uc3RyaWtlVGVhbXMpO1xuXHRcdFx0fSk7XG5cblx0XHR9KVxuXG5cdFx0U29ja2V0U3ZjLm9uKCdkaXNtaXNzJywgZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHRTdFN2Yy5mZXRjaEJ5Q2FzZShjYXNlSWQpLnN1Y2Nlc3MoZnVuY3Rpb24oc3RyaWtlVGVhbXMpe1xuXHRcdFx0XHR2bS5zdHJpa2VUZWFtcyA9IHN0cmlrZVRlYW1zO1xuXHRcdFx0XHR2bS5kZXBsb3lzID0gaW5pdFRhYmxlKHZtLnN0cmlrZVRlYW1zKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cblx0XHR2YXIgY2FzZUlkID0gJHN0YXRlUGFyYW1zLmNhc2VJZDtcblx0XHRDYXNlU3ZjLmZldGNoQnlJZChjYXNlSWQpLnN1Y2Nlc3MoZnVuY3Rpb24oX2Nhc2Upe1xuXHRcdFx0X2Nhc2UuZW52ID09ICfkvY/lroXngavoraYnID8gdm0uYXBhcnRtZW50ID0gdHJ1ZSA6IHZtLmFwYXJ0bWVudCA9IGZhbHNlO1xuXHRcdFx0dm0uY2FzZURldGFpbCA9IF9jYXNlO1xuXHRcdFx0dm0ucG9zaXRpb24gPSB7XG5cdFx0XHRcdGRlZmF1bHRQb3MgXHQ6IFwi56ys5LiA6Z2iXCIsXG5cdFx0XHRcdHBvc2l0aW9ucyBcdDogW1wi56ys5LiA6Z2iXCIsXCLnrKzkuozpnaJcIixcIuesrOS4iemdolwiLFwi56ys5Zub6Z2iXCJdLFxuXHRcdFx0XHRmbG9vciBcdFx0OiB2bS5jYXNlRGV0YWlsLmZsb29yLFxuXHRcdFx0XHRmbG9vcnMgIFx0OiB2bS5jYXNlRGV0YWlsLmZsb29yIDwgNT8gXy5yYW5nZSgxLDYsMSkgOiBfLnJhbmdlKHZtLmNhc2VEZXRhaWwuZmxvb3ItMix2bS5jYXNlRGV0YWlsLmZsb29yKzMsMSlcblx0XHRcdH07XG5cdFx0fSlcblxuXHRcdFN0U3ZjLmZldGNoQnlDYXNlKGNhc2VJZCkuc3VjY2VzcyhmdW5jdGlvbihzdHJpa2VUZWFtcyl7XG5cdFx0XHRpZiAoc3RyaWtlVGVhbXMpIHtcblx0XHRcdFx0dm0uc3RyaWtlVGVhbXMgPSBzdHJpa2VUZWFtcztcblx0XHRcdFx0dm0uc3RyaWtlVGVhbXMuZm9yRWFjaChmdW5jdGlvbihzdCl7XG5cdFx0XHRcdFx0c3QubGltaXRUaW1lID0gbW9tZW50LmR1cmF0aW9uKHN0LndvcmtpbmdUaW1lLCdzZWNvbmRzJyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHR2bS5kZXBsb3lzID0gaW5pdFRhYmxlKHZtLnN0cmlrZVRlYW1zKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBcblx0XHRcdH07XG5cdFx0fSk7XG5cblxuXG5cdFx0dmFyIGluaXRUYWJsZSA9ICBmdW5jdGlvbihzdHJpa2VUZWFtcyl7XG5cdFx0ICBcdHZhciBkZXBsb3lBcnJheSA9IF8ucmFuZ2UoNCkubWFwKGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICAgIHJldHVybiBfLnJhbmdlKDUpLm1hcChmdW5jdGlvbiAoKSB7XG5cdFx0ICAgICAgICAgICAgcmV0dXJuIHsgdG90YWxNZW1iZXIgOiAwLCBzdFRvdGFsIDogMCAsIHN0cyA6IFtdIH0gO1xuXHRcdCAgICAgICAgfSk7XG5cdFx0ICAgIH0pO1xuXG5cdFx0XHRpZiAoIHN0cmlrZVRlYW1zICl7XG5cdFx0XHRcdGZvciAodmFyIGkgPSBzdHJpa2VUZWFtcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0XHRcdHZhciB0b3RhbE1lbWJlciA9IDA7XG5cdFx0XHRcdFx0dmFyIHkgPSBudWxsO1xuXHRcdFx0XHRcdHZhciBzdCA9IDA7XG5cdFx0XHRcdFx0dmFyIHggPSBfLmluZGV4T2Yoc3RyaWtlVGVhbXNbaV0ucG9zaXRpb25zLCBzdHJpa2VUZWFtc1tpXS5wb3NpdGlvbik7XG5cdFx0XHRcdFx0dm0uYXBhcnRtZW50ID8geSA9IF8uaW5kZXhPZihzdHJpa2VUZWFtc1tpXS5mbG9vcnMsIHN0cmlrZVRlYW1zW2ldLmZsb29yKSA6IHkgPSBfLmluZGV4T2Yoc3RyaWtlVGVhbXNbaV0uYXJlYXMsIHN0cmlrZVRlYW1zW2ldLmFyZWEpXG5cdFx0XHRcdFx0ZGVwbG95QXJyYXlbeF1beV0uc3RUb3RhbCArPSAxO1xuXHRcdFx0XHRcdGRlcGxveUFycmF5W3hdW3ldLnRvdGFsTWVtYmVyICs9IHN0cmlrZVRlYW1zW2ldLm1lbWJlcnMubGVuZ3RoO1xuXHRcdFx0XHRcdHZhciBzdEluRm8gPSB7fTtcblx0XHRcdFx0XHRzdEluRm8uaWQgPSBzdHJpa2VUZWFtc1tpXS5icmFuY2ggKyBzdHJpa2VUZWFtc1tpXS5pZFxuXHRcdFx0XHRcdHN0SW5Gby5udW1iZXIgPSBzdHJpa2VUZWFtc1tpXS5tZW1iZXJzLmxlbmd0aDtcblx0XHRcdFx0XHRzdEluRm8uZ3JvdXAgPSBzdHJpa2VUZWFtc1tpXS5ncm91cDtcblx0XHRcdFx0XHRkZXBsb3lBcnJheVt4XVt5XS5zdHMucHVzaChzdEluRm8pO1xuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGRlcGxveUFycmF5XG5cdFx0fTtcblx0XHRcblx0XHR2bS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgU29ja2V0U3ZjLnJlbW92ZUFsbExpc3RlbmVycygpO1xuXHQgICAgfSk7XG5cdH07XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cblx0LyoqXG5cdCogYXBwLnRpbWVyIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC50aW1lcicpXG5cdFx0LmNvbnRyb2xsZXIoJ1RpbWVyQ29udHJvbGxlcicsVGltZXJDb250cm9sbGVyKTtcblxuXHRUaW1lckNvbnRyb2xsZXIuJGluamVjdCA9IFsnU29ja2V0U3ZjJ107XG5cblx0ZnVuY3Rpb24gVGltZXJDb250cm9sbGVyKCl7XG5cdFx0dmFyIHZtID0gdGhpczsgXG5cdFx0dm0udGltZXJSdW5uaW5nID0gZmFsc2U7XG5cdFx0dm0uc3RhcnRUaW1lciA9IHN0YXJ0VGltZXI7XG5cdFx0dm0uc3RvcFRpbWVyID0gc3RvcFRpbWVyO1xuXHQgICAgXG5cdCAgICBmdW5jdGlvbiBzdGFydFRpbWVyKHN0LCBpZCl7XG5cdCAgICBcdHZtLiRicm9hZGNhc3QoJ3RpbWVyLXN0YXJ0Jyk7XG5cdCAgICBcdHZtLnRpbWVyUnVubmluZyA9IHRydWU7XG5cdCAgICAgICAgU29ja2V0U3ZjLmVtaXQoJ3RpbWVyJywgeyBzdElkIDogc3QuX2lkLCB0aW1lclJ1bm5pbmcgOiB0cnVlIH0gKVxuXHQgICAgfTtcblx0ICAgIFxuXHQgICAgZnVuY3Rpb24gc3RvcFRpbWVyKHN0LGlkKXtcblx0ICAgIFx0dm0uJGJyb2FkY2FzdCgndGltZXItc3RvcCcpO1xuXHQgICAgXHR2bS50aW1lclJ1bm5pbmcgPSBmYWxzZTtcblx0ICAgICAgICBTb2NrZXRTdmMuZW1pdCgndGltZXInLCB7IHN0SWQgOiBzdC5faWQsIHRpbWVyUnVubmluZyA6IGZhbHNlIH0gKVxuXHQgICAgfTtcblx0fTtcblxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAudXNlciBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAudXNlcicpXG5cdFx0LnNlcnZpY2UoJ1VzZXJTdmMnLFVzZXJTdmMpO1xuXG5cdFVzZXJTdmMuJGluamVjdCA9IFsnJGh0dHAnLCAnc3RvcmUnLCAnand0SGVscGVyJ107XG5cdGZ1bmN0aW9uIFVzZXJTdmMoKXtcblx0XHR2YXIgc3ZjID0gdGhpczsgXG5cdFx0c3ZjLmZldGNoT25saW5lVXNlciA9IGZldGNoT25saW5lVXNlcjtcblx0XHRzdmMuYWN0aXZhdGUgPSBhY3RpdmF0ZTtcblx0XHRzdmMucmVtb3ZlVXNlciA9IHJlbW92ZVVzZXI7XG5cdFx0c3ZjLmxvZ2luID0gbG9naW47XG5cdFx0c3ZjLmlzTG9nZ2VkSW4gPSBpc0xvZ2dlZEluO1xuXHRcdHN2Yy5pc1ZhbGlkID0gaXNWYWxpZDtcblx0XHRzdmMudXNlckJyYW5jaCA9IHVzZXJCcmFuY2g7XG5cdFx0c3ZjLnVzZXJDb3JwcyA9IHVzZXJDb3Jwcztcblx0XHRzdmMuY3VycmVudFVzZXIgPSBjdXJyZW50VXNlcjtcblx0XHRzdmMuY3VycmVudEFjY291bnQgPSBjdXJyZW50QWNjb3VudDtcblx0XHRzdmMuYWNjZXNzTGV2ZWwgPSBhY2Nlc3NMZXZlbDtcblx0XHRzdmMuY2FzZUlkID0gY2FzZUlkO1xuXG5cblx0XHRmdW5jdGlvbiBmZXRjaE9ubGluZVVzZXIoKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvdXNlcnMvdXNlclN0YXRlJyk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGFjdGl2YXRlKHVzZXIpe1xuXHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvdXNlcnMnLCB1c2VyKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gcmVtb3ZlVXNlcih1c2VybmFtZSl7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZGVsZXRlKCcvYXBpL3VzZXJzL2RlbGV0ZT91c2VybmFtZT0nICsgdXNlcm5hbWUpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBsb2dpbih1c2VyKXtcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3VzZXJzL2F1dGhlbnRpY2F0ZScsIHVzZXIpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBpc0xvZ2dlZEluKCl7XG5cdFx0XHRyZXR1cm4gc3RvcmUuZ2V0KCdqd3QnKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gaXNWYWxpZCggYnJhbmNoICl7XG5cdFx0XHRpZiAoc3ZjLmlzTG9nZ2VkSW4pIHtcblx0XHRcdFx0aWYgKGp3dEhlbHBlci5kZWNvZGVUb2tlbihzdG9yZS5nZXQoJ2p3dCcpKS5hY2Nlc3NMZXZlbCA+IDEgICB8fCBqd3RIZWxwZXIuZGVjb2RlVG9rZW4oc3RvcmUuZ2V0KCdqd3QnKSkuYnJhbmNoID09IGJyYW5jaCkge1xuXHRcdFx0XHRcdHJldHVybiB0cnVlOyBcblx0XHRcdFx0fWVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fTtcblx0XHRcdH07XG5cblx0XHRcdHJldHVybiBmYWxzZSBcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gdXNlckJyYW5jaCgpe1xuXHRcdFx0aWYgKHN2Yy5pc0xvZ2dlZEluKSB7XG5cdFx0XHRcdHJldHVybiBqd3RIZWxwZXIuZGVjb2RlVG9rZW4oc3RvcmUuZ2V0KCdqd3QnKSkuYnJhbmNoO1xuXHRcdFx0fTtcblx0XHR9O1xuXHRcblx0XHRmdW5jdGlvbiB1c2VyQ29ycHMoKXtcblx0XHRcdGlmIChzdmMuaXNMb2dnZWRJbikge1xuXHRcdFx0XHRyZXR1cm4gand0SGVscGVyLmRlY29kZVRva2VuKHN0b3JlLmdldCgnand0JykpLmNvcnBzO1xuXHRcdFx0fTtcblx0XHR9O1xuXHRcblx0XHRmdW5jdGlvbiBjdXJyZW50VXNlcigpe1xuXHRcdFx0aWYgKHN2Yy5pc0xvZ2dlZEluKSB7XG5cdFx0XHRcdHJldHVybiBqd3RIZWxwZXIuZGVjb2RlVG9rZW4oc3RvcmUuZ2V0KCdqd3QnKSkudXNlcm5hbWU7XG5cdFx0XHR9O1xuXHRcdH07XG5cdFxuXHRcdGZ1bmN0aW9uIGN1cnJlbnRBY2NvdW50KCl7XG5cdFx0XHRpZiAoc3ZjLmlzTG9nZ2VkSW4pIHtcblx0XHRcdFx0cmV0dXJuIGp3dEhlbHBlci5kZWNvZGVUb2tlbihzdG9yZS5nZXQoJ2p3dCcpKS5hY2NvdW50O1xuXHRcdFx0fTsgXG5cdFx0fTtcblx0XG5cdFx0ZnVuY3Rpb24gYWNjZXNzTGV2ZWwoKXtcblx0XHRcdGlmIChzdmMuaXNMb2dnZWRJbikge1xuXHRcdFx0XHRyZXR1cm4gand0SGVscGVyLmRlY29kZVRva2VuKHN0b3JlLmdldCgnand0JykpLmFjY2Vzc0xldmVsO1xuXHRcdFx0fTtcblx0XHR9O1xuXHRcblx0XHRmdW5jdGlvbiBjYXNlSWQoKXtcblx0XHRcdGlmIChzdmMuaXNMb2dnZWRJbikge1xuXHRcdFx0XHRyZXR1cm4gand0SGVscGVyLmRlY29kZVRva2VuKHN0b3JlLmdldCgnand0JykpLmNhc2VJZDtcblx0XHRcdH07XG5cdFx0fTtcblx0fTtcblxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
