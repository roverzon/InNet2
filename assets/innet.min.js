;(function(){
	'use strict';
	angular.module('app',[
		'app.branch',
		'app.case',
		'app.car',
		'app.dashboard',	
		'app.director',
		'app.dispatch',
		'app.dutylist',
		'app.geo',
		'app.layout',
		'app.map',
		'app.member',
		'app.notification',
		'app.safety',
		'app.socket',
		'app.summary',
		'app.strikeTeam',
		'app.timer',
		'app.user',
		'angular.filter',
		'angular-jwt',
		'angular-store',
		'ui.router'
	])
})();


(function(){
	'use strict';
	/**
	* app.car Module
	*
	* Description
	*/
	angular.module('app.car', [])
})();
(function(){
	'use strict';
	/**
	* app.branch Module
	*
	* Description
	*/
	angular
		.module('app.branch',[])
})();
(function(){
	'use strict';
	/**
	* app.case Module
	*
	* Description
	*/
	angular.module('app.case', [
		'app.branch',
		'app.car',
		'app.notification',
		'app.user',
		'ui.router',
		'ui.bootstrap'
	])
})();
(function(){
	/**
	* app.dashboard Module
	*
	* Description
	*/
	angular
		.module('app.dashboard',[
			'app.socket',
			'app.user',
			'app.branch'
		]);
})();
(function(){
	'use strict';
	/**
	* app.director Module
	*
	* Description
	*/
	angular.module('app.director', [
		'app.branch',
		'app.car',
		'app.member',
		'app.strikeTeam',
		'app.user',
		'ui.router'
	])

})();
(function(){
	'use strict';
	/**
	* app.dispatch Module
	*
	* Description
	*/
	angular.module('app.dispatch', [
		'app.user',
		'app.car',
		'app.branch',
		'app.case',
		'ui.router',
		'ui.bootstrap'
	])
})();
(function(){
	'use strict';
	/**
	* app.dutylist Module
	*
	* Description
	*/
	angular.module('app.dutylist', [
		'app.branch',
		'app.socket',
		'app.user'
	])
})();
(function(){
	'use strict';
	/**
	* app.geo Module
	*
	* Description
	*/
	angular.module('app.geo', []);
})();
(function(){
	'use strict';
	/**
	* app.layout Module
	*
	* Description
	*/
	angular.module('app.layout', [
		'app.socket',
		'app.user',
		'angular-jwt',
		'angular-storage',
		'ui.router'
	])
})();
(function(){
	/**
	* app.map Module
	*
	* Description
	*/
	angular.module('app.map', [
		'leaflet-directive'
	])
})();
(function(){
	/**
	* app.member Module
	*
	* Description
	*/
	angular.module('app.member', [
		'app.branch',
		'app.member',
		'app.user',
		'ui.bootstrap',
		'ui.router'
	])
})();
(function(){
	'use strict';
	/**
	* app.notification Module
	*
	* Description
	*/
	angular.module('app.notification', []);
})();
(function(){
	'use strict';
	/**
	* app.safety Module
	*
	* Description
	*/
	angular.module('app.safety',[
		'app.branch',
		'app.case',
		'app.geo',
		'app.socket',
		'app.strikeTeam',
		'app.timer',
		'app.user',
		'ui.bootstrap',
		'ui.router'
	])
})();
(function(){
	'use strict';
	/**
	* app.socket Module
	*
	* Description
	*/
	angular.module('app.socket', [
		'angular-storage'
	]);
})();
(function(){
	'use strict';
	/**
	* app.strikeTeam Module
	*
	* Description
	*/
	angular.module('app.strikeTeam',[]);
})();
(function(){
	'use strict';
	/**
	* app.summary Module
	*
	* Description
	*/
	angular.module('app.summary',[
		'app.case',
		'app.socket',
		'app.strikeTeam',
		'ui.router'
	]);
})();
(function(){
	'use strict';
	/**
	* app.timer Module
	*
	* Description
	*/
	angular.module('app.timer', [
		'timer'
	])
})();
(function(){
	'use strict';
	/**
	* app.user Module
	*
	* Description
	*/
	angular.module('app.user', [
		'angular-storage',
		'angular-jwt'
	]);
});
(function(){
    angular
        .module('app')
        .directive('minimalizaSidebar',minimalizaSidebar)
        .directive('sideNavigation',sideNavigation)
        .directive('iboxTools',iboxTools)
        .directive('back',back);

    minimalizaSidebar.$inject   = ['$timeout'];
    sideNavigation.$inject      = ['$timeout'];
    iboxTools.$inject           = ['$timeout'];
    back.$inject                = ['$window'];

    function minimalizaSidebar($timeout){
         return {
            restrict: 'A',
            template: '<a class="navbar-minimalize minimalize-styl-2 btn btn-primary" href="" ng-click="minimalize()"><i class="fa fa-bars"></i></a>',
            controller: ["$scope", "$element", function ($scope, $element) {
                $scope.minimalize = function () {
                    $("body").toggleClass("mini-navbar");
                    if (!$('body').hasClass('mini-navbar') || $('body').hasClass('body-small')) {
                        // Hide menu in order to smoothly turn on when maximize menu
                        $('#side-menu').hide();
                        // For smoothly turn on menu
                        setTimeout(
                            function () {
                                $('#side-menu').fadeIn(500);
                            }, 100);
                    } else if ($('body').hasClass('fixed-sidebar')){
                        $('#side-menu').hide();
                        setTimeout(
                            function () {
                                $('#side-menu').fadeIn(500);
                            }, 300);
                    } else {
                        // Remove all inline style from jquery fadeIn function to reset menu state
                        $('#side-menu').removeAttr('style');
                    }
                }
            }]
        };
    };

    function sideNavigation($timeout){
         return {
            restrict: 'A',
            link: function(scope, element) {
                // Call the metsiMenu plugin and plug it to sidebar navigation
                $timeout(function(){
                    element.metisMenu();
                });
            }
        }
    };

    function iboxTools($timeout){
        return {
            restrict: 'A',
            scope: true,
            templateUrl: 'views/common/ibox_tools.html',
            controller: ["$scope", "$element", function ($scope, $element) {
                // Function for collapse ibox
                $scope.showhide = function () {
                    var ibox = $element.closest('div.ibox');
                    var icon = $element.find('i:first');
                    var content = ibox.find('div.ibox-content');
                    content.slideToggle(200);
                    // Toggle icon from up to down
                    icon.toggleClass('fa-chevron-up').toggleClass('fa-chevron-down');
                    ibox.toggleClass('').toggleClass('border-bottom');
                    $timeout(function () {
                        ibox.resize();
                        ibox.find('[id^=map-]').resize();
                    }, 50);
                },
                    // Function for close ibox
                    $scope.closebox = function () {
                        var ibox = $element.closest('div.ibox');
                        ibox.remove();
                    }
            }]
        };
    };

    function back($window){
        return {
            restrict: 'A',
            link: function (scope, iElement, iAttrs) {
                iElement.bind('click',function(){
                    $window.history.back();
                })
            }
        };
    };

})();
(function(){
	/**
	* app.run Module
	*
	* Description
	*/
	// angular
	// 	.module('app')
	// 	.run(appRun);
	
	// appRun.$inject = ['$rootScope', '$state', '$stateParams', 'store', 'jwtHelper', 'UserSvc'];

	// function appRun( $rootScope, $state, $stateParams, store, jwtHelper, UserSvc){
	// 	$rootScope.$on('$stateChangeStart',function(event, toState, toParams, fromState, fromParams){
	//         if (toState.name == "anon.login") {
	//             store.remove('jwt');
	//         }else{
	//             if (toState.data && toState.data.requiredLogin) {

	//                 if (!UserSvc.isLoggedIn()) {
	//                     event.preventDefault();
	//                     $state.go('anon.login');
	//                 } 
	//                 else if (toState.data.role.indexOf(jwtHelper.decodeToken(store.get('jwt')).role) == -1 ) {
	//                     event.preventDefault();
	//                     $state.go("anon.login")
	//                 };
	//             }; 
	//         }
	//     });

	//     $rootScope.$on('$stateChangeError',function(event){
	//         event.preventDefault();
	//     });
	// }
})();
(function(){
	'use strict';
	/**
	* app.car Module
	*
	* Description
	*/
	angular
		.module('app.car')
		.controller('CarEditController',CarEditController);

	CarEditController.$inject = [];
	function CarEditController(){

	};

})();
(function(){
	'use strict';
	/**
	* app.car Module
	*
	* Description
	*/
	angular
		.module('app.car')
		.controller('CarIndexController',CarIndexController);

	CarIndexController.$inject = [];
	function CarIndexController(){

	};

})();
(function(){
	'use strict';

	/**
	* app.car Module
	*
	* Description
	*/
	angular
		.module('app.car')
		.serice('CarSvc',CarSvc);

	CarSvc.$inject = ['$http'];
	
	function CarSvc($http){
		var vm = this; 
		vm.fetchByCorps  = fetchByCorps;
		vm.fetchByBranch = fetchByBranch;
		vm.update 		 = update; 

		function fetchByCorps(corps){
			return $http.get('/api/cars?corps=' + corps);
		};

		function fetchByBranch( branch ){
			return $http.get('/api/cars?branch=' + branch );
		};
		
		function update(data){
			return $http.put('/api/cars/' + data.id , data);
		};
	};
})();
(function(){

	/**
	* app.branch Module
	*
	* Description
	*/
	angular
		.module('app.branch')
		.controller('BranchSvc',BranchSvc);

	BranchSvc.$inject = ['$http'];
	function BranchSvc($http){
		var svc = this;
		svc.fetchByCorps 	= fetchByCorps;
		svc.fetchByName 	= fetchByName;
		svc.totalListFindByName = totalListFindByName;
		svc.getDetails 		= getDetails;
		svc.fetchOnDutyBranches = fetchOnDutyBranches;
		svc.update 			= update;
		svc.updateMission 	= updateMission;
		
		function fetchByCorps(corps){
			return $http.get('/api/branches?corps=' + corps);
		};
		
		function fetchByName(branch){
			return $http.get('/api/branches?branch=' + branch);
		};

		function totalListFindByName(branch){
			return $http.get('/api/branches/' + branch)
		}

		function getDetails(id){
			return $http.get('/api/branches/' + id);
		};

		function fetchOnDutyBranches(branches){
			return $http.post('/api/branches/onduty',branches);
		};
	
		function update(data){
			return $http.put('/api/branches/' + data.branch , data);
		};

		function updateMission(data){
			return $http.put('/api/branches?branch=' + data.branch, data);
		};
	};

})();
(function(){
	'use strict';
	/**
	* app.case Module
	*
	* Description
	*/
	angular
		.module('app.case')
		.controller('CaseConfirmController',CaseConfirmController);

	CaseConfirmController.$inject = ['UserSvc', 'CaseSvc', '$stateParams','$state','$modalInstance'];
	function CaseConfirmController(UserSvc, CaseSvc, $stateParams,$state,$modalInstance){
		var vm = this;
		
		vm.user = {};
		vm.send = send; 
		vm.caseInfo = {
			id : $stateParams.id,
			endAt : moment().format('YYYY-MMM-DD, h:mm:ss a')
		}; 

		function send(){
			UserSvc.login(vm.user).success(function(data){
				CaseSvc.closeCase(vm.caseInfo).success(function(){
					$modalInstance.dismiss('cancel');
					$state.go('dutyDesk.case.index');
				})
			});
		};
	};
})();
(function(){
	'use strict';
	/**
	* app.case Module
	*
	* Description
	*/
	angular
		.module('app.case')
		.controller('CaseEditController',CaseEditController);

	CaseEditController.$inject = ['$stateParams', 'CaseSvc', 'CarSvc', 'UserSvc', 'BranchSvc', '$window', '$modal','NtfSvc'];

	function CaseEditController($stateParams, CaseSvc, CarSvc, UserSvc, BranchSvc, $window, $modal,NtfSvc){
		var vm = this; 
		var dispatchCars  = [];
		vm.terminateCase  = terminateCase;
		vm.dispatch 	  = dispatch;
		vm.selectBranch   = selectBranch;
		vm.cancelDispatch = cancelDispatch;
		vm.save 		  = save; 

		angular.extend(vm, {
	        nowPos: {
	            lat: 24.988,
	            lng: 121.5752,
	            zoom: 17
	        },
	        controls: {
	            draw: {}
	        }
	    });

		var caseId = $stateParams.id;

		BranchSvc.fetchByCorps(UserSvc.userCorps()).success(function(branches){
		    vm.branches = branches;
		    vm.currentBranch = branches[0].name
		});

		function selectBranch(branch){
	    	vm.currentBranch = branch.name;
	    };

		BranchSvc.fetchByCorps(UserSvc.userCorps()).success(function(branches){
		    vm.branches = branches;
		    vm.currentBranch = branches[0].name
		})

		CaseSvc.fetchById(caseId).success(function(_case){
			vm.currentCase = _case;
			vm.dispatchList = _.pluck(_case.cars, 'radioCode').join(' ')
			vm.currentCase.carIds = _.pluck(_case.cars,'_id');
		}).then(function(){
			CarSvc.fetchByCorps(UserSvc.userCorps()).success(function(cars){
				vm.cars = cars
				for (var i = 0; i < vm.cars.length; i++) {
					if ( vm.currentCase.carIds.indexOf(vm.cars[i]._id) > -1 ) {
						vm.cars[i].isChecked = true;
						dispatchCars.push(vm.cars[i]);
					};
				};
			});

			NtfSvc.fetch().success(function(ntfs){
				vm.ntfs = ntfs;
				vm.currentCase.ntfs = _.pluck(ntfs,'type')
				vm.currentCase.ntf  = vm.currentCase.ntfs[0];
			});
		});

		function getBranchId(branchesList){
			var branches = _.unique(branchesList);
			var branchIds = [];
			for (var i = 0; i < vm.branches.length; i++) {
				if (branches.indexOf(vm.branches[i].name) > -1) {
					branchIds.push(vm.branches[i]._id);
				};
			};
			return  branchIds;
		};

		function dispatch( car ){
			car.isChecked = true; 
			dispatchCars.push(car);
			vm.dispatchList = _.pluck(dispatchCars, 'radioCode').join(" ")
		};

		function cancelDispatch(car){
			car.isChecked = false;
			dispatchCars.splice(_.pluck(dispatchCars, '_id').indexOf(car._id),1)
			vm.dispatchList = _.pluck(dispatchCars, 'radioCode').join(" ")
		};

		function save(){
			var currentNtf;

			vm.ntfs.forEach(function(ntf,id){
				if (ntf.type == vm.currentCase.ntf ) {
					currentNtf  = vm.ntfs[id];
				};
			});
			CaseSvc.update({
				caseId    : vm.currentCase._id,
				address   : vm.currentCase.address || "測試",
				officerReceiver : UserSvc.currentUser() ||  "劉曉曼",
				type      : vm.currentCase.type || "火警",
				types 	  : vm.currentCase.types,
				phone     : vm.currentCase.phone || "測試",
				branches  : _.unique(_.pluck(dispatchCars, 'branch')),
				branchIds : getBranchId(vm.currentCase.branches),
		  		cars      : _.pluck(dispatchCars,'_id'),
				isOngoing : true,
				corps 	  : UserSvc.userCorps(),
				env 	  : vm.currentCase.env,
				envs 	  : vm.currentCase.envs,
				floor 	  : vm.currentCase.floor,
				ntf       : currentNtf._id,
				lastUpdate : moment().format('YYYY-MMM-DD h:mm:ss a')
			}).success(function(){
				$window.history.back();
			})
		};

		function terminateCase (){
			var modalInstance = $modal.open({
			  	templateUrl: 'views/case/case.confirm.modal.html',
			    controller: 'CaseConfirmCtrl',
			    size: "md"	    
			});
		};
	}
})();
(function(){
	'use strict';

	angular
		.module('app.case')
		.controller('CaseController',CaseController);
	
	CaseController.$inject = ['$stateParams','$modal','CaseSvc', '$log', 'SocketSvc', 'UserSvc', '$location'];
	function CaseController($stateParams,$modal,CaseSvc, $log, SocketSvc, UserSvc, $location){
		var vm = this; 
		vm.maxSize 		= 5; 
		vm.itemsPerPage = 3;
		vm.currentPage  = 1;
		vm.pageChanged  = pageChanged;
		vm.queryCases   = queryCases;
		vm.choose 		= choose;
		
		vm.queryCases();

		function pageChanged(){
			CaseSvc.fetch(UserSvc.userCorps(), vm.currentPage , vm.itemsPerPage ).success(function(data){
				vm.cases = data.cases;
			});
		};

		function queryCases(){
			CaseSvc.fetch(UserSvc.userCorps(), vm.currentPage, vm.itemsPerPage).success(function(data){
				vm.cases = data.cases;
				vm.totalItems = data.totalCases;
			});
		};

		function choose(id){
			CaseSvc.fetchById(vm.cases[id]._id).success(function(_case){
					vm.caseDetails = _case;
			});
		};

		SocketSvc.on('newCase',function(_case){
			vm.cases.unshift(_case);
		});

		SocketSvc.on('caseModified',function(_case){
			vm.cases[_case.caseId-1] = _case;
		});
	};

})();
(function(){
	'use strict';
	/**
	* app.case Module
	*
	* Description
	*/
	angular
		.module('app.case')
		.controller('CaseModalController',CaseModalController);

	CaseModalController.$inject = ['CarSvc', '$modalInstance', 'CaseSvc','$state', 'caseId','caseDetails', 'StSvc', '$window', 'BranchSvc', 'UserSvc', 'NtfSvc'];

	function CaseModalController(CarSvc, $modalInstance, CaseSvc,$state, caseId,caseDetails, StSvc, $window, BranchSvc, UserSvc, NtfSvc){
		var vm = this; 
		vm.nftOption = {};
		vm.dispatchList = vm.caseObj.dispatchList.join(" ");
		vm.caseObj = {
			address : caseDetails.address || null,
			phone : caseDetails.phone || null,
		    type : caseDetails.type ||  "火警", 
		    types : [ "火警", "救護", "災害", "檢舉","其他"],
		    env   : "住宅火警",
		    envs  : ["住宅火警","高樓、地下與工廠","搶救困難區","其他"],
		    floor : 1, 
		    carIds : getCarsDetail(caseDetails).carIds  || [],
		    dispatchList : getCarsDetail(caseDetails).dispatchList ||  [],
		    branches : getCarsDetail(caseDetails).branches ||  []
		};
		vm.update 	 = update;
		vm.getCars 	 = getCars;
		vm.cancel 	 = cancel;
		vm.cancelDispatch = cancelDispatch;
		vm.dispatch  = dispatch;
		vm.closeCase = closeCase;
		vm.save 	 = save;

		if (_.isEmpty(caseDetails)) {
			vm.isNew = true;
			carObjs = [];
		}else{
			vm.isNew = false;
			var carObjs = caseDetails.cars;
		};

		NtfSvc.fetch().success(function(nfts){
			vm.nftOption.nfts = nfts;
		}).then(function(){
			vm.nftOption.nft = vm.nftOption.nfts[0];
		})

		BranchSvc.fetchByCorps(UserSvc.userCorps()).success(function(branches){
		    vm.branches = branches;
		});

		function getCarsDetail(obj){
			var dispatchList = [];
			var carIds = [];
			var branches = [];

			if (obj.cars) {
				for (var i = obj.cars.length - 1; i >= 0; i--) {
					dispatchList.push(obj.cars[i].radioCode);
					carIds.push(obj.cars[i]._id);
					branches.push(obj.cars[i].branch); 
				};
				return {dispatchList : dispatchList , carIds : carIds , branches :  branches}

			}else{
				return {};
			};
		};

		function getBranchId(branchesList){
			var branches = _.unique(branchesList);
			var branchIds = [];
			for (var i = 0; i < vm.branches.length; i++) {
				if (branches.indexOf(vm.branches[i].name) > -1) {
					branchIds.push(vm.branches[i]._id);
				};
			};
			return  branchIds;
		};
		
		function getCars( branch ){
			 CarSvc.fetchByBranch(branch.name).success(function(cars){
			 	for (var i = cars.length - 1; i >= 0; i--) {
			 		if (vm.caseObj.carIds.indexOf(cars[i]._id) > -1 ) {
			 			cars[i].isChecked = true; 
			 		};
			 	};
			 	vm.cars = cars;
			 });
		};

		function cancel() {
			$modalInstance.dismiss('cancel');
		};

		function cancelDispatch(car){
			car.isChecked = false;
			carObjs.splice(carObjs.indexOf(car),1)
			vm.caseObj.carIds.splice(vm.caseObj.dispatchList.indexOf(car._id),1);
			vm.caseObj.dispatchList.splice(vm.caseObj.dispatchList.indexOf(car.radioCode),1);
			vm.caseObj.branches.splice(vm.caseObj.dispatchList.indexOf(car.branch),1);
			vm.dispatchList = vm.caseObj.dispatchList.join(" ");
		};
		
		function dispatch( car ){
			car.isChecked = true; 
			carObjs.push(car);
			vm.caseObj.carIds.push(car._id);
			vm.caseObj.dispatchList.push(car.radioCode);
			vm.caseObj.branches.push(car.branch);
			vm.dispatchList = vm.caseObj.dispatchList.join(" ");
		};

		function closeCase(){
			StSvc.count(caseDetails._id).success(function(total){
				if (total > 0 ) {
					$window.alert("尚有隊員在安全管制")
				}else{
					CaseSvc.closeCase({
						id : caseDetails._id,
						isOngoing : false
					}).success(function(msg){
						console.log(msg)
					});
					$modalInstance.dismiss('cancel');
					$state.reload()
				};
			});
		};

		function save(){
			CaseSvc.create({
				caseId   : caseId + 1, 
				address   : vm.caseObj.address || "測試",
				officerReceiver : UserSvc.currentUser() ||  "劉曉曼",
				type      : vm.caseObj.type || "救護",
				phone     : vm.caseObj.phone || "測試",
				branches  : _.unique(vm.caseObj.branches),
				branchIds : getBranchId(vm.caseObj.branches),
		  		cars      : vm.caseObj.carIds,
				isOngoing : true,
				corps 	  : UserSvc.userCorps(),
				env 	  : vm.caseObj.env,
				floor 	  : vm.caseObj.floor
			}).success(function(newCase){
				$modalInstance.close(newCase)
			});
		};

		function update(){
			var content = {
				id : caseDetails._id,
				caseId   : caseId, 
				address   : vm.caseObj.address,
				officerReceiver : UserSvc.currentUser() || "劉曉曼",
				type      : vm.caseObj.type,
				phone     : vm.caseObj.phone,
				branches  : _.unique(vm.caseObj.branches),
				branchIds : getBranchId(vm.caseObj.branches),
		  		cars      : vm.caseObj.carIds,
				isOngoing : true,
				env 	  : vm.caseObj.env,
				floor 	  : vm.caseObj.floor
			};
			
			CaseSvc.update(content);
			$modalInstance.dismiss('cancel');
		};
	}
})();
(function(){
	'use strict';
	/**
	* app.case Module
	*
	* Description
	*/
	angular
		.module('app.case')
		.controller('CaseNewController',CaseNewController);

	CaseNewController.$inject = ['CarSvc', 'BranchSvc', 'NtfSvc', 'UserSvc','$location','leafletData', '$stateParams', 'CaseSvc', '$window', '$state', 'GeoSvc'];

	function CaseNewController(CarSvc, BranchSvc, NtfSvc, UserSvc,$location,leafletData, $stateParams, CaseSvc, $window, $state, GeoSvc){
		var vm = this;
		vm.selectBranch = selectBranch;
		vm.save = save;
		vm.locateAddress = locateAddress;
		vm.cancelDispatch = cancelDispatch;
		vm.dispatch = dispatch;
		vm.currentTime =  moment().format('h:mm:ss a'); 
		var battleRadiuss = [];
		var dispatchCars = [];
		var notifications;
		vm.dispatchList = vm.currentCase.dispatchList.join(' ');
		
		vm.currentCase = {
			phone 	: null,
		    type 	: '火警', 
		    types 	: [ '火警', '救護', '災害', '檢舉','其他'],
		    env   	: '住宅火警',
		    envs  	: ['住宅火警','高樓、地下與工廠','搶救困難區','其他'],
		    floor 	: 1, 
		    carIds  : [],
		    dispatchList : [],
		    branches :  [],
		    location : GeoSvc.defaultLocation()
		}; 

		GeoSvc.fetchBaseLocation(UserSvc.userCorps()).success(function(locations){
			vm.locations = locations;
		});

	    angular.extend(vm, {
	        nowPos: {
	            lat: GeoSvc.defaultLocation().lat,
	            lng: GeoSvc.defaultLocation().lng,
	            zoom: 17
	        },
	       markers: {},
	    });

		BranchSvc.fetchByCorps(UserSvc.userCorps()).success(function(branches){
		    vm.branches = branches;
		    vm.currentBranch = branches[0].name
		});

		CarSvc.fetchByCorps(UserSvc.userCorps()).success(function(cars){
			vm.cars = cars; 
		});

		NtfSvc.fetch().success(function(ntfs){
			notifications = ntfs;
			vm.currentCase.ntfs = _.pluck(ntfs,'type')
			vm.currentCase.ntf  = vm.currentCase.ntfs[0];
		});

		function locateAddress(){
			if (vm.currentCase.address) {
				GeoSvc.getGeoEncodedInfo(vm.currentCase.address).then(function(res){
			        vm.nowPos.lat = res.J;
			        vm.nowPos.lng = res.M;
		            vm.markers.mainMarker = {
		            	lat: res.J,
		                lng: res.M,
		                focus: true,
		                message: "案件標的",
		            };

		            if (res) {
		            	vm.locations.forEach(function(location){
			            	var r = GeoSvc.getDistance( location, { lat : res.J , lng : res.M } );
			            	var battleRadius =  { base : location.branch,  to : { lat : res.J, lng :  res.M }, from : { lat : location.lat, lng : location.lng }, d : r }; 
			            	battleRadiuss.push( JSON.stringify(battleRadius));
			            });
		            };
				});
			};
		};

		function selectBranch(branch){
	    	vm.currentBranch = branch.name;
	    };

		function dispatch( car ){
			car.isChecked = true; 
			dispatchCars.push(car);
			vm.dispatchList = _.pluck(dispatchCars, 'radioCode').join(" ");
		};

		function cancelDispatch(car){
			car.isChecked = false;
			dispatchCars.splice(_.pluck(dispatchCars, '_id').indexOf(car._id),1);
			vm.dispatchList = _.pluck(dispatchCars, 'radioCode').join(" ");
			vm.dispatchList = vm.currentCase.dispatchList.join(" ");
		};
	
		function save(){
			var currentNtf;
			var branches  = _.unique(_.pluck(dispatchCars, 'branch'));
			var dispatch = vm.branches.filter(function(branch) { return branches.indexOf(branch.name) > -1 });

			notifications.forEach(function(ntf,id){
				if (ntf.type == vm.currentCase.ntf ){
					currentNtf  = notifications[id]
				};
			});

			CaseSvc.create({
				officerReceiver : UserSvc.currentUser() ||  '劉曉曼',
				type      		: vm.currentCase.type || '火警',
				types 	  		: vm.currentCase.types,
				phone     		: vm.currentCase.phone || '測試',
				branches  		: _.unique(_.pluck(dispatchCars, 'branch')),
				branchIds 		: _.pluck(dispatch, '_id'),
		  		cars      		: _.pluck(dispatchCars,'_id'),
				corps 	  		: UserSvc.userCorps(),
				env 	  		: vm.currentCase.env,
				envs 	  		: vm.currentCase.envs,
				floor 	  		: vm.currentCase.floor,
				ntf       		: currentNtf._id,
				createAt  		: moment().format('YYYY-MMM-DD, h:mm:ss a'),
				lastUpdate 		: moment().format('YYYY-MMM-DD, h:mm:ss a'),
				location  		:  {
					lat 	: vm.currentCase.location.lat,
					lng 	: vm.currentCase.location.lng,
					address : vm.currentCase.location.address || '測試'
				},
				battleRadiuss 	: battleRadiuss
			}).success(function(){
				$window.history.back();
			});
		};
	}
})();
(function(){
	'use strict';
	/**
	* app.case Module
	*
	* Description
	*/
	angular
		.module('app.case')
		.service('CaseSvc', CaseSvc);

	CaseSvc.$inject = ['$http'];

	function CaseSvc( $http ) {
		var svc = this;
		svc.fetch 		= fetch;
		svc.fetchAll 	= fetchAll;
		svc.closeCase 	= closeCase;
		svc.fetchRelativeCase = fetchRelativeCase; 
		svc.fetchDetails = fetchDetails;
		svc.fetchById 	= fetchById;
		svc.create 		= create;
		svc.delete 		= deleteCase;
		svc.update 		= update;
		
		function fetch(corps, page, itemsPerPage){
			return $http.get('/api/cases?corps=' + corps + '&page=' + page + '&ipp=' + itemsPerPage );
		};

		function fetchAll(){
			return $http.get('/api/cases/details');
		};
		
		function fetchRelativeCase(con){
			return $http.get('/api/cases/branch?branch=' + con.branch + '&accessLevel=' + con.accessLevel + '&corps=' + con.corps );
		};
		
		function fetchDetails(caseId){
			return $http.get('/api/cases/details/' + caseId);
		};

		function fetchById( caseId ){
			return $http.get('/api/cases/' + caseId );
		};
		
		function create(case_info){
			return $http.post('/api/cases', case_info);
		};

		function deleteCase(caseId){
			return $http.post('/api/cases/' + caseId);
		};

		function update(updated_case){
			return $http.put('/api/cases/' + updated_case.caseId , updated_case);
		};
		
		function closeCase(data){
			return $http.put('/api/cases/close?id=' + data.id, data );
		};
	}
})();
(function(){
	'use strict';
	/**
	* app.case Module
	*
	* Description
	*/
	angular
		.module('app.case')
		.controller('CaseShowController', CaseShowController);

		CaseShowController.$inject =  [ 'StSvc', '$stateParams', '$interval', '$state', 'SocketSvc', 'CaseSvc', 'BranchSvc', 'StMissionFac'];

		function CaseShowController(){
			var vm = this; 
			vm.isCollapsed = true ;
			vm.members = [];
			vm.positions = StMissionFac.position().poss;

			SocketSvc.on('newSt', function(st){
				if ( angular.equals(caseId,st.caseId)) {
					var newSt = angular.copy(st);
					vm.strikeTeams.push(newSt);
				};
				vm.deploys = initTable(vm.strikeTeams);
				vm.deployDetails = initDeploy(vm.strikeTeams);
			});

			SocketSvc.on('updateSt', function(data){
				StSvc.fetchByCase(caseId).success(function(strikeTeams){
					vm.strikeTeams = strikeTeams;
					vm.strikeTeams.forEach(function(st){
						st.limitTime = moment.duration(st.workingTime,'seconds');
					});
					vm.deploys = initTable(vm.strikeTeams);
					vm.deployDetails = initDeploy(vm.strikeTeams);
				});

			})

			SocketSvc.on('dismiss', function(data){
				StSvc.fetchByCase(caseId).success(function(strikeTeams){
					vm.strikeTeams 	 = strikeTeams;
					vm.deploys 		 = initTable(vm.strikeTeams);
					vm.deployDetails = initDeploy(vm.strikeTeams);
				});
			});


			var caseId = $stateParams.id;
			CaseSvc.fetchDetails(caseId).success(function(_case){
				_case.env == '住宅火警' ? vm.apartment = true : vm.apartment = false;
				vm.caseDetail = _case;
				vm.position = {
					defaultPos 	: "第一面",
					positions 	: ["第一面","第二面","第三面","第四面"],
					floor 		: vm.caseDetail.floor,
					floors  	: vm.caseDetail.floor < 5? _.range(1,6,1) : _.range(vm.caseDetail.floor-2,vm.caseDetail.floor+3,1)
				};
			});

			StSvc.fetchByCase(caseId).success(function(strikeTeams){
				if (strikeTeams) {
					vm.strikeTeams = strikeTeams;
					vm.strikeTeams.forEach(function(st){
						st.limitTime = moment.duration(st.workingTime,'seconds');
					});
					vm.deploys = initTable(vm.strikeTeams);
					vm.deployDetails =initDeploy(vm.strikeTeams);
					
				} else {
					return 
				};
			});


			var initDeploy = function(strikeTeams){
				return  _.groupBy(strikeTeams,function(st){
						return st.position;
				});
			};

			var initTable =  function(strikeTeams){
			  	var deployArray = _.range(4).map(function () {
			        return _.range(5).map(function () {
			            return { totalMember : 0, stTotal : 0 , sts : [] } ;
			        });
			    });

				if ( strikeTeams ){
					for (var i = strikeTeams.length - 1; i >= 0; i--) {
						var totalMember = 0;
						var y = null;
						var st = 0;
						var x = _.indexOf(strikeTeams[i].positions, strikeTeams[i].position);
						vm.apartment ? y = _.indexOf(strikeTeams[i].floors, strikeTeams[i].floor) : y = _.indexOf(strikeTeams[i].areas, strikeTeams[i].area)
						deployArray[x][y].stTotal += 1;
						deployArray[x][y].totalMember += strikeTeams[i].members.length;
						var stInFo = {};
						stInFo.id = strikeTeams[i].branch + strikeTeams[i].id
						stInFo.number = strikeTeams[i].members.length;
						stInFo.group = strikeTeams[i].group;
						deployArray[x][y].sts.push(stInFo);
					};
				}
				return deployArray
			};
			
			vm.$on('$destroy', function (event) {
		        SocketSvc.removeAllListeners();
		    });
		}
})();
;(function(){
	'use strict';
	angular
		.module('app')
		.config(routerConfig);

		routerConfig.$inject = ['$stateProvider','$urlRouterProvider','$locationProvider'];
		
		function routerConfig($stateProvider,$urlRouterProvider, $locationProvider) {
		    $urlRouterProvider
    			.otherwise('/login');

		    $stateProvider
		        .state('anon',{
		            url : "",
		            abstract : true,
		            template : "<ui-view>",
		        })
		        .state('anon.login',{
		            url : "/login",
		            templateUrl :"login.html",
		            controller : "LoginController",
		            controllerAs : "LoginCtrl"
		        })
		        .state('anon.404',{
		            url : "/404",
		            templateUrl : "404.html"
		        })

    			// duty desk 
			$stateProvider
				.state('dutyDesk', {
		            abstract: true,
		            url: "/dutyDesk",
		            templateUrl: "views/common/content.html",
		            data : {
		                requiredLogin : true,
		                role : ["admin"]
		            }
		        })
		        .state('dutyDesk.corps', {
		            url: "/corps",
		            templateUrl: "views/dashboard/corps.dashboard.html",
		            controller : "DashboardController",
		            controllerAs : "DashboardCtrl",
		            data : {
		                requiredLogin : true,
		                role : ["admin"]
		            }
		        })
		        .state('dutyDesk.branch',{
		            url : "/branch",
		            templateUrl : "views/dashboard/branch.dashboard.html",
		            controller : "DashboardController",
		            controllerAs : "DashboardCtrl",
		            date : {
		                requiredLogin : true,
		                role : ["admin"]
		            }
		        })
		        .state('dutyDesk.case',{
		            abstract : true,
		            template : "<ui-view>"
		        })
		        .state('dutyDesk.case.index', {
		            url: "/case",
		            templateUrl: "case/case.index.html",
		            controller : "CaseController",
		            controllerAs : "CaseCtrl"
		        })
		        .state('dutyDesk.case.new',{
		            url : "/case/new",
		            templateUrl : "case/case.new.html",
		            controller : "CaseNewController",
		            controllerAs : "CaseNewCtrl"
		        })
		        .state('dutyDesk.case.show',{
		            url : "/case/:id/show",
		            templateUrl : "case/case.show.html",
		            controller : "CaseShowController",
		            controllerAs : "CaseShowCtrl"
		        })
		        .state('dutyDesk.case.edit',{
		            url : "/case/:id/edit",
		            templateUrl : "case/case.edit.html",
		            controller : "CaseEditController",
		            controllerAs : "CaseEditCtrl"
		        })
		        .state('dutyDesk.safety',{
		            url : "/case/:id",
		            templateUrl : "summary/summary.index.html",
		            controller : "SummaryController",
		            controllerAs : "SummaryCtrl"
		        })
		        .state('dutyDesk.dutylist',{
		            abstract : true,
		            template : "<ui-view>"
		        })
		        .state('dutyDesk.dutylist.index', {
		            url: "/dutylist/:branch",
		            templateUrl: "views/dutylist/dutylist.index.html",
		            controller : "DutyListController",
		            controllerAs : "DutyListCtrl"
		        })
		        .state('dutyDesk.dutylist.show',{
		        	url : "/dutylist/:branch/index",
		        	template : "<h2> show </h2>"
		        })
		        .state('dutyDesk.dutylist.edit', {
		            url: "/dutylist/:branch/edit",
		            templateUrl  : "views/dutylist/dutylist.edit.html",
		            controller   : "DutyListEditController",
		            controllerAs : "DutyListEditCtrl"
		        })
		        .state('dutyDesk.member',{
		            abstract : true,
		            template : "<ui-view>"
		        })
		        .state('dutyDesk.member.show', {
		            url: "/member/:branch",
		            templateUrl  : "views/member/member.index.html",
		            controller   : "MemberController",
		            controllerAs : "MemberCtrl"
		        })
		        .state('dutyDesk.member.edit', {
		            url: "/member/:branch/edit",
		            templateUrl  : "views/member/member.edit.html",
		            controller 	 : "MemberEditController",
		            controllerAs : "MemberEditCtrl"
		        });
			$stateProvider
		        .state('director',{
		            abstract : true,
		            url : "",
		            templateUrl : "views/director/director.content.html",
		            data : {
		                requiredLogin : true,
		                role : ["user"]
		            }
		        })
		        .state('director.safety',{
		            abstract : true,
		            url : "/safety",
		            template : "<ui-view>" 
		        })
		        .state('director.safety.index',{
		            url : "/index",
		            templateUrl : "views/safety/safety.index.html",
		            controller : "SafetyIndexController",
		            controllerAs : "SafetyIndexCtrl"
		        })
		        .state('director.safety.cmdShow',{
		            url : "/cmd/:caseId/show",
		            templateUrl : "views/safety/safety.cmd.show.html",
		            controller : "SafetyCmdShowController",
		            controllerAs : "SafetyCmdShowCtrl"
		        })
		        .state('director.safety.branchShow',{
		            url : "/:caseId/show",
		            templateUrl : "views/safety/safety.branch.show.html",
		            controller : "SafetyShowController",
		            controllerAs : "SafetyShowCtrl"
		        })
		        .state('director.safety.management',{
		            url : "/:caseId/manage",
		            templateUrl : "views/safety/safety.manage.html",
		            controller : "SafetyManageController",
		            controllerAs : "SafetyManageCtrl"         
		        })
		        .state('director.safety.summary',{
		            url : "/:caseId/summary",
		            templateUrl : "views/summary/summary.index.html",
		            controller : "SummaryController",
		            controllerAs : "SummaryCtrl"
		        })
		        .state('director.dutylist',{
		            abstract : true,
		            url : "/dutylist",
		            template : "<ui-view>" 
		        })
		        .state('director.dutylist.index',{
		            url : "/index",
		            templateUrl: "views/dutylist/director.dutylist.index.html",
		            controller : "DirDutyListController",
		            controllerAs : "DirDutyListCtrl"
		        })
		        .state('director.dutylist.edit',{
		            url : "/edit",
		            templateUrl: "views/dutylist/director.dutylist.edit.html",
		            controller : "DirDutyListEditController",
		            controllerAs : "DirDutyListEditCtrl"
		        })	
		}
})();

(function(){
	/**
	* app.dashboard Module
	*
	* Description
	*/
	angular
		.module('app.dashboard')
		.controller('DashboardController',DashboardController);

	DashboardController.$inject = ['$location', 'SocketSvc', 'UserSvc', 'BranchSvc'];
	function DashboardController($location, SocketSvc, UserSvc, BranchSvc){
		var vm = this; 

		BranchSvc.fetchByCorps(UserSvc.userCorps()).success(function(branches){
			return vm.branches = branches;
		});

		UserSvc.fetchOnlineUser().success(function(users){
			return vm.users = users;
		});

		SocketSvc.on('userLogin',function(user){
			return vm.users.push(user);
		});

		SocketSvc.on('userDisconnect',function(disconnectUser){
			vm.users = vm.users.filter(function(user) {
				return user.username != disconnectUser.username
			});
		});

		SocketSvc.on('userLogout',function(logoutUser){
			vm.users = vm.users.filter(function(user) {
				return user.username != logoutUser.username
			});
		});

		vm.$on('$destroy', function (event) {
	        return SocketSvc.removeAllListeners();
	    });
	}
})();
(function(){
	'use strict';
	/**
	* app.director Module
	*
	* Description
	*/
	angular
		.module('app.director')
		.controller('DirDutyListController',DirDutyListController);

	DirDutyListController.$inject = ['UserSvc', 'BranchSvc'];

	function DirDutyListController( UserSvc , BranchSvc ){
		var vm = this;
		var branch = UserSvc.userBranch();
		
		BranchSvc.fetchByName(branch).success(function(branch){
			vm.branch 		= branch;
			vm.onDutyTotal 	= vm.branch.members.filter(function(member) {
				return member.onDuty == true 
			});
		}); 
	};
})();
(function(){
	'use strict';
	/**
	* app.dashboard Module
	*
	* Description
	*/
	angular
		.module('app.director')
		.controller('DirDutyListEditController',DirDutyListEditController);

	DirDutyListEditController.$inject = ['BranchSvc', '$stateParams','MemberSvc', '$location', '$window', 'UserSvc', 'CarSvc', 'StMissionFac'];

	function DirDutyListEditController(BranchSvc, $stateParams,MemberSvc, $location, $window, UserSvc, CarSvc, StMissionFac){
		var vm = this;
		var branch 	= UserSvc.userBranch();
		vm.check 	= check;
		vm.save 	= save;   

		BranchSvc.fetchByName(branch).success(function(branch){
			vm.branch = branch;
			vm.isCorps =  true ? branch.name.split("救災救護")[1] : false 
			var members = _.pluck(branch.members.filter(function(member) { return member.level < 2.4 }), 'name')
			vm.branch.safetyManager 	= branch.safetyManager;
			vm.branch.safetyManagers 	= members;
			vm.onDutyTotal = 0;
			_.map(vm.branch.members,function(member){ 
				member.groupIds = _.range(1,Math.round(vm.branch.members.length/6),1);
				member.groupID = member.group + member.groupId 
			})
		})

		function check(member){
			member.onDuty 	 = !member.onDuty;
			member.isChecked = !member.isChecked;
			member.groupID 	 = member.group + member.groupId
		};

		
		function save(){
			var DispatchNumber = vm.branch.members.filter(function(member) {
				return member.onDuty
			});

			BranchSvc.updateMission({
				branch   		: vm.branch.name,
				director 		: vm.branch.director,
				dispatchNum 	: DispatchNumber.length,
				safetyManager 	: vm.branch.safetyManager,
				members 		: vm.branch.members
			});
			$window.history.back();
		};
	};

})();
(function(){
	'use strict';

	/**
	* app.dispatch Module
	*
	* Description
	*/
	angular
		.module('app.dispatch', [])
		.controller('DispatchController',DispatchController);

	DispatchController.$inject = ['$stateParams','$modal','CaseSvc','BranchSvc', 'CarSvc', 'UserSvc'];
	function DispatchController($stateParams,$modal,CaseSvc,BranchSvc, CarSvc, UserSvc){
		var vm = this; 
		CaseSvc.fetch(UserSvc.userCorps()).success(function(cases){
			vm.cases = cases;
			CaseSvc.fetchById(vm.cases[$stateParams.caseId]._id).success(function(_case){
					return vm.caseDetails = _case;
			});
		});

		BranchSvc.fetchByCorps(UserSvc.userCorps()).success(function(branches){
		    return vm.branchList = branches;
		 });

		CarSvc.fetch().success(function(data){
		    return vm.carsData = data;
		});

		vm.addNewCase = function () {
		  	var modalInstance = $modal.open({
			    templateUrl: '/partials/casePanel/caseAddModal',
			    controller: 'CaseAddModalCtrl',
			    size: "lg",
			    resolve : {
			    	caseId : function(){
			    		return vm.id = "新增案件"
			    	},
			    	branchList : function(){
			    		return vm.branchList;
			    	},
			    	carsData : function(){
			    		return vm.carsData;
			    	},
			    	isNew : function(){
			    		return true;
			    	},
			    	caseDetails : function(){
			    		return {}
			    	}
			    }
		    });
		 };

		 vm.editCase = function(){
		 	var modalInstance = $modal.open({
			    templateUrl: '/partials/casePanel/caseAddModal',
			    controller: 'CaseAddModalCtrl',
			    size: "lg",
			    resolve : {
			    	caseId : function(){
			    		return vm.id = vm.cases[$stateParams.caseId].caseId; 
			    	},
			    	branchList : function(){
			    		return vm.branchList;
			    	},
			    	carsData : function(){
			    		for (var i = vm.carsData.length - 1; i >= 0; i--) {
			    			for (var j = vm.caseDetails.cars.length - 1; j >= 0; j--) {
			    				if ( vm.carsData[i].radioCode === vm.caseDetails.cars[j].radio_code) {
			    					return vm.carsData[i].isChecked = true ;
			    				};
			    			};		    			
			    		};
			    		return vm.carsData;
			    	},
			    	isNew : function(){
			    		return false; 
			    	},
			    	caseDetails : function(){
			    		return vm.caseDetails;
			    	}
			    }
		    });
		 };
	}
})();
(function(){
	/**
	* app.dutylist Module
	*
	* Description
	*/
	angular
		.module('app.dutylist', [])
		.controller('DutyListController',DutyListController);

	DutyListController.$inject = ['BranchSvc', '$stateParams', 'SocketSvc', 'UserSvc', '$q'];
	function DutyListController(BranchSvc, $stateParams, SocketSvc, UserSvc, $q){
		var vm = this; 
		var branchId = $stateParams.branch;
		
		BranchSvc.totalListFindByName(branchId).success(function(branch){
			vm.branch = branch;
			vm.onDutyTotal = vm.branch.members.filter(function(member) {
				return member.onDuty == true
			});
		});
	}

})();
(function(){
	'use strict';
	/**
	* app.dutylist Module
	*
	* Description
	*/
	angular
		.module('app.dutylist')
		.controller('DutyListEditController', DutyListEditController);

	DutyListEditController.$inject = ['BranchSvc', '$stateParams','MemberSvc', '$location', '$window', 'UserSvc', 'CarSvc', 'StMissionFac'];
	function DutyListEditController(BranchSvc, $stateParams,MemberSvc, $location, $window, UserSvc, CarSvc, StMissionFac){
		var vm 		= this;
		vm.save 	= save;
		vm.check 	= check; 

		var branch = $stateParams.branch

		BranchSvc.totalListFindByName(branch).success(function(branch){
			vm.branch = branch;
			vm.isCorps =  true ? branch.name.split("救災救護")[1] : false 
			var members = _.pluck(branch.members.filter(function(member) { return member.level < 2.4 }), 'name')
			vm.branch.safetyManager 	= branch.safetyManager;
			vm.branch.safetyManagers 	= members;
			vm.onDutyTotal = 0;
			_.map(vm.branch.members,function(member){ 
				member.groupIds = _.range(1,Math.round(vm.branch.members.length/6),1);
				member.groupID = member.group + member.groupId 
			})
		});

		function check(member){
			member.onDuty = !member.onDuty;
			member.isChecked = !member.isChecked;
			member.groupID = member.group + member.groupId
		};

		function save(){
			var branchGroups =  _.groupBy(vm.branch.members,function(member){
				member.groupID = member.group + member.groupId;
				// member.isChecked = true;
				if (member.onDuty) { return member.groupID } else { return 'offDuty' };
			});
			delete branchGroups['offDuty']; 

		    var preStrikeTeams  = [];
		    var strikeTeamMembers = [];
		    var controlList = StMissionFac.groups().preSt; 
		    for (var key in branchGroups) {
		    	var strikeTeam = {
		      		caseId      : 'pending',
		      		branch      : branch,
		      		director    : vm.branch.director,
		      		position    : StMissionFac.position().defaultPos,
		      		positions   : StMissionFac.position().poss,
		      		groups      : StMissionFac.groups().branch, 
		      		area 		: StMissionFac.area().defaultArea,
		      		areas 		: StMissionFac.area().areas,
		      		floor 		: 1,
		      		floors 		: [1],
		      		creator 	: UserSvc.currentUser() 	
			     };
		    	
			    if ( controlList.indexOf(key.slice(0, key.length-1 )) > -1 ) {
			    
					strikeTeam.members = _.pluck(branchGroups[key],'_id');
					strikeTeam.group = key;
					strikeTeam.workingTime = _.min(branchGroups[key], function(member){ return member.workingTime }).workingTime;
					preStrikeTeams.push(strikeTeam)
					strikeTeamMembers.push.apply(strikeTeamMembers,strikeTeam.members)
				};
		    };

			var DispatchNumber = vm.branch.members.filter(function(member) {
				return member.onDuty
			});

			vm.branch.members.forEach(function(member){
				member.isChecked = true ? strikeTeamMembers.indexOf(member._id) > -1 : false
			});
			
			BranchSvc.updateMission({
				branch   		: vm.branch.name,
				director 		: vm.branch.director,
				dispatchNum 	: DispatchNumber.length,
				safetyManager 	: vm.branch.safetyManager,
				members 		: vm.branch.members
			});
			$window.history.back();
		};
	}
})();
(function(){
	'use strict';
	/**
	* app.geo Module
	*
	* Description
	*/
	angular
		.module('app.geo')
		.service('GeoSvc',GeoSvc);

	GeoSvc.$inject = ['$q','$http'];

	function GeoSvc(){
		var svc = this; 
		svc.getGeolocationCoordinates = function() {
	        var deferred = $q.defer();
	        navigator.geolocation.getCurrentPosition(
	            function(position) { deferred.resolve(position.coords); },
	            function(error) { deferred.resolve(null); }
	        );
	        return deferred.promise;
	    };

	    svc.getGeoEncodedInfo = function(address){
	    	var deferred = $q.defer();
	    	// return $http.get('https://maps.googleapis.com/maps/api/geocode/json?address='+ address +'&key=AIzaSyAxq-ZkxRr1ZArBXFDOo8xgi4Cl2PeitAo')
	    	var geocoder = new google.maps.Geocoder();
	    	if (geocoder) {
		      geocoder.geocode({ 'address': address }, function (results, status) {
		         if (status == google.maps.GeocoderStatus.OK) {
		            deferred.resolve(results[0].geometry.location) 
		         }
		         else {
		            deferred.resolve( "Geocoding failed: " + status )
		         }
		      });
		   } 
		   return deferred.promise;  
	    };

	    svc.fetchBaseLocation = function(corps){
	    	return $http.get('/api/geolocations?corps=' + corps)
	    };

	    svc.getDistance = function( from_loc , to_loc ){

	    	if (typeof(Number.prototype.toRad) === "undefined") {
			  Number.prototype.toRad = function() {
			    return svc * Math.PI / 180;
			  }
			}
			var R = 6371; // Radius of the earth in km
			var dLat = (to_loc.lat - from_loc.lat ).toRad();  // Javascript functions in radians
			var dLon = (to_loc.lng - from_loc.lng ).toRad(); 
			var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
			        Math.cos(from_loc.lat.toRad()) * Math.cos(to_loc.lat.toRad()) * 
			        Math.sin(dLon/2) * Math.sin(dLon/2); 
			var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
			return R * c;
	    };

	    svc.defaultLocation = function(){
	    	return { lat : 25.0927297 , lng :  121.4608639, address : null};
	    };
	};
})();
;(function(){
	'use strict';
	/**
	* app Module
	*
	* Description
	*/
	angular
		.module('app.layout')
		.controller('LoginController',LoginController);

		LoginController.$inject = ['UserSvc', 'store', '$state','jwtHelper','$http', 'SocketSvc'];

		function LoginController(UserSvc, store, $state,jwtHelper,$http, SocketSvc ){
			var vm 	 = this; 
			vm.login = login;
			vm.user  = {};

			function login(){
				UserSvc.login(vm.user).success(function(data){
					if (data.success) {
						store.set('jwt',data.token);
						$http.defaults.headers.common['x-access-token'] = data.token;
						return data.token; 
					} else { 
						return console.log("password is not existed");
					}
				}).then(function(token){
					SocketSvc.init(token);
					SocketSvc.emit('login');
				}).then(function(){
					if (jwtHelper.decodeToken(token).role == "admin") {
						var userBranch = jwtHelper.decodeToken(token).branch;
						if (userBranch.slice(userBranch.length-2 ,userBranch.length) == "大隊") {
							return $state.go('dutyDesk.corps')
						} else{
							return $state.go('dutyDesk.branch')
						};
					}else{
						return $state.go('director.safety.index')
					}
				})
			};
		};
})();
(function(){
	'use strict';
	/**
	* app Module
	*
	* Description
	*/
	angular
		.module('app.layout', [])
		.controller('TopNavController',TopNavController);

	TopNavController.$inject = [];
	function TopNavController($location,$state, $interval, store, SocketSvc, UserSvc, $window){
		var vm = this; 
		vm.currentTime =  moment().format('MMM Do, h:mm:ss a');
		vm.logout = logout;


		$interval(function(){
			moment.locale('zh-tw');
			vm.currentTime =  moment().format('MMM Do, h:mm:ss a');
		}, 1000);
		 
		function logout(){
			var account = UserSvc.currentAccount();
			SocketSvc.emit('logout');
			$state.go('anon.login');
		};
	}

})();
(function(){
	'use strict';
	/**
	* app.map Module
	*
	* Description
	*/
	angular
		.module('app.map', [])
		.controller('MapIndexController',MapIndexController);

	MapIndexController.$inject = ['leafletData', 'GeoSvc'];
	function MapIndexController(leafletData, GeoSvc){
		var vm = this; 

		GeoSvc.getGeolocationCoordinates().then(function(coord){
	        vm.nowPos.lat = coord.latitude;
	        vm.nowPos.lng = coord.longitude;
	        vm.nowPos.zoom = 17;
	    })

	    angular.extend(vm, {
	        nowPos: {
	            lat: 24.988,
	            lng: 121.5752,
	            zoom: 17
	        },
	        controls: {
	            draw: {}
	        }
	    })

	    leafletData.getMap().then(function(map) {
	      var drawnItems = vm.controls.edit.featureGroup;
	      map.on('draw:created', function (e) {
	        var layer = e.layer;
	        drawnItems.addLayer(layer);
	        
	        FeatureCollections.push(layer.toGeoJSON())
	        
	      });
	    })
	}
})();
(function(){
	'use strict';
	/**
	* app.member Module
	*
	* Description
	*/
	angular
		.module('app.member')
		.controller('MemberAccountModalController',MemberAccountModalController);

	MemberAccountModalController.$inject = ['UserSvc', 'MemberSvc', 'member', '$modalInstance'];
	function MemberAccountModalController(UserSvc, MemberSvc, member, $modalInstance){
		var vm = this; 
		vm.user = member;
		vm.save = save;
		vm.cancel = cancel; 

		function save(){
			if (_.isEmpty(vm.user)) {
				console.log("please enter your account and password!")
			} else{
				if (!vm.user.account) {
					console.log("account can't be blank!")
					if (!vm.user.password) {
						console.log("passwod can't be blank!")
					};
				} else if (!vm.user.password) {
					console.log("password can't be blank")
				}else{
					UserSvc.activate(vm.user);
					MemberSvc.updateUser(member.name);
					$modalInstance.close(vm.user);
				};
			};
		};

		function cancel(){
			$modalInstance.dismiss('cancel');
		};
	};
})();
(function(){
	'use strict';

	/**
	* app.member Module
	*
	* Description
	*/
	angular
		.module('app.member')
		.controller('MemberEditController',MemberEditController);
	
	MemberEditController.$inject = ['MemberSvc', 'BranchSvc', '$stateParams', '$window','$modal', '$state', 'UserSvc'];
	
	function MemberEditController( MemberSvc, BranchSvc, $stateParams, $window,$modal, $state, UserSvc){
		var vm = this; 

		vm.alerts = [];
		vm.memberDeleted = false;
		var tempDelMember = null;
		vm.accessLevel = UserSvc.accessLevel();
		vm.closeAlert = closeAlert;
		vm.save = save;
		vm.addNewMember = addNewMember;
		vm.update = update;
		vm.activateAccount = activateAccount;
		vm.deleteAlert = deleteAlert;
		vm.deActivateAlert = deActivateAlert;
		
		var memberInit = function(){
			MemberSvc.findByBranch($stateParams.branch).success(function(members){
				vm.members = members;
				vm.members.forEach(function(member){
					member.workingTime = moment.duration(member.workingTime,'seconds');
				});
			});
		};

		memberInit();

		var deActivateAccount = function(index){
			UserSvc.removeUser(tempDelMember.name).success(function(user){
				MemberSvc.removeUser(user.username);
				vm.closeAlert(index);
				memberInit();
			});
		};

		var deleteMember = function(index){
			vm.memberDeleted = true;
			MemberSvc.deleteMember(tempDelMember).success(function(){
				vm.memberDeleted = false;
			});
			vm.closeAlert(index);
			memberInit();
		};

		var cancelDel = function(index){
			vm.memberDeleted = false;
			vm.closeAlert(index);
		};

		function save(){
			var directors = _.pluck( vm.members.filter(function(member) { return member.level > 1.3  }) , 'name');
			BranchSvc.update({
				branch : $stateParams.branch,
				members : _.pluck( vm.members , '_id'),
				directors : directors,
				director : directors[0],
				safetyManager : directors[0]
			}).success(function(){
				$window.history.back();
			});		
		};

		function addNewMember(){
			var modalInstance = $modal.open({
			    templateUrl: 'views/member/member.modal.html',
			    controller: 'MemberModalCtrl',
			    size: "md",
			    resolve : {
			    	branch : function(){
			    		return $stateParams.branch 
			    	},
			    	member : function(){
			    		return { workingTime : null };
			    	}
			    }
		    });

		    modalInstance.result.then(function(member){
		    	if (member) {
		    		memberInit();
		    	}
		    	vm.alerts.push({ type : "success" ,  msg: '人員新增成功！ ' + member.name + ' 已加入 ' + member.branch});
		    })
		};

		function update(member){
			var oldMember = member;
			var modalInstance = $modal.open({
			    templateUrl: 'views/member/member.modal.html',
			    controller: 'MemberModalCtrl',
			    size: "md",
			    resolve : {
			    	branch : function(){
			    		return $stateParams.branch 
			    	},
			    	member : function(){
			    		return {
			    			memberId : member._id,
			    			id : member.id,
			    			name : member.name,
			    			title : member.title,
			    			branches : member.branches,
			    			corps : member.corps,
			    			radioCode : member.radioCode, 
			    			workingTime : member.workingTime.minutes() * 60 + member.workingTime.seconds()
			    		}
			    	}
			    }
		    });

		    modalInstance.result.then(function(member){
		    	memberInit();
		    	vm.alerts.push({ type : "info" ,  msg:  oldMember.name + '修改成功!' });
		    });
		};

		function activateAccount(member){
			var users = vm.members.filter(function(member) {
				return member.isUser;
			});

			if (users.length < 3 ) {
				var modalInstance = $modal.open({
				    templateUrl: 'views/member/member.account.html',
				    controller: 'MemberAccountModalCtrl',
				    size: "md",
				    resolve : {
				    	member : function(){
				    		return member
				    	}
				    }
				});

				modalInstance.result.then(function(member){
					memberInit();
					vm.alerts.push({ type : "info" , msg : member.name + " 已開通為使用者" })
				});
			} else {
				vm.alerts.push({ type : "warning" , msg : "無法開通" + member.name + " 因為使用者已超過3位，請解除其他人帳號後再開通 "});
			};
		};

		function deleteAlert(member){
			vm.alerts.push({ 	
				type : "danger" ,  
				msg: '是否確定要刪除！' + member.name, 
				execute : deleteMember,
				cancel :  cancelDel
			});
			tempDelMember = member;
		};

		function deActivateAlert(member){
			var users = vm.members.filter(function(member) {
				return member.isUser;
			});
			if (users.length == 1 ) {
				vm.alerts.push({ 
					type : "warning",  
					msg: '每分隊至少要有1個使用者，無法取消' + member.name + "的登入權限",
				});
			} else{
				vm.alerts.push({ 
					type : "danger",  
					msg: '是否確定要解除' + member.name + "登入權限",
					execute : deActivateAccount,
					cancel : cancelDel
				});
				tempDelMember = member;
			};
		};
	
		function closeAlert(index){
			vm.alerts.splice(index,1)
		};
	}
})();
(function(){
	'use strict';

	/**
	* app.member Module
	*
	* Description
	*/
	angular
		.module('app.member', [])
		.controller('MemberIndexController',MemberIndexController);

	MemberIndexController.$inject = [ MemberSvc , $stateParams ];
	function MemberIndexController( MemberSvc , $stateParams ){
		var vm = this; 

		vm.branch = $stateParams.branch;
		MemberSvc.findByBranch($stateParams.branch).success(function(members){
			vm.members = members;
			vm.members.forEach(function(member){
				return member.workingTime = moment.duration(member.workingTime,'seconds');
			});
		});
	};
})();
(function(){
	'use strict';
	/**
	* app.member Module
	*
	* Description
	*/
	angular
		.module('app.member')
		.controller('MemberModalController',MemberModalController);

	MemberModalController.$inject = ['branch', 'MemberSvc', '$modalInstance', '$state', 'member','BranchSvc', 'UserSvc'];
	function MemberModalController(branch, MemberSvc, $modalInstance, $state, member,BranchSvc, UserSvc){
		var vm = this; 
		vm.alerts = [];
		vm.isNew  = _.isNull(member.workingTime);
		vm.save   = save;
		vm.update = update;
		vm.cancel = canel;

		vm.member = {
			id 		 	: member.id ||  "", 
			name 	 	: member.name || null , 
			title    	: "消防隊員",
			titles   	: ["消防隊員","小隊長","分隊長","中隊長","大隊長","副大隊長"],
			branch   	: member.branch || branch,
			workingTime : member.workingTime ||  1200,
			radioCode 	: member.radioCode ||  null, 
			mission  	: "瞄子手",
			missions 	: ["瞄子手","副瞄子手","司機","小組長","安全管制員","聯絡官",],
			corps	 	: UserSvc.userCorps(),
			corpss 	 	: ["第一救災救護大隊","第三救災救護大隊"],
		};

		BranchSvc.fetchByCorps(UserSvc.userCorps()).success(function(branches){
			vm.branches = branches; 
			if (!vm.isNew) {
				var branchArry = [];
				for (var i = branches.length - 1; i >= 0; i--) {
					branchArry.push(branches[i].name);
				};
				vm.member.branches = branchArry;
			}; 
		});

		var radioCodePrefix = function(branch){
			var suffix =  branch.split('').slice(-2).join('');
			if (suffix == "大隊" || suffix == "中隊") {
				return "北海";
			} else{
				return branch.split('').slice(0,2).join('');
			};
		};

		function save(){
			if (vm.member.name) {
				vm.member.radioCodePrefix = radioCodePrefix(vm.member.branch);
				MemberSvc.create(vm.member).success(function(){
					vm.member.workingTime = moment.duration(parseInt(vm.member.workingTime),'seconds');
				}).then(function(){
					$modalInstance.close(vm.member);
				})
			} else{

			};
		};

		function update(){
			var updateMember = {
				  memberId  : member.memberId,
				  id 		: "",
				  name 		: vm.member.name,
				  corps 	: vm.member.corps,
				  branch 	: vm.member.branch,
				  title 	: vm.member.title,
				  workingTime : vm.member.workingTime,
				  radioCode  : vm.member.radioCode,
				  radioCodePrefix : radioCodePrefix(vm.member.branch)
			}

			if (vm.member.name) {
				MemberSvc.updateByMemberId(updateMember);
				$modalInstance.close(updateMember);
			} else {
				
			};
		};
	
		function cancel(){
			$modalInstance.dismiss('cancel');
		};
	};
})();
(function(){
	'use strict';
	/**
	* app.member Module
	*
	* Description
	*/
	angular
		.module('app.member')
		.service('MemberSvc',MemberSvc)
	
	MemberSvc.$inject = ['$http'];
	
	function MemberSvc(){
		var svc = this; 
		svc.fetch = fetch;
		svc.findByBranch = findByBranch;
		svc.fetchOnDuty = fetchOnDuty;
		svc.create = create; 
		svc.update = update; 
		svc.updateOnDuty = updateOnDuty;
		svc.updateByMemberId = updateByMemberId;
		svc.updateIsChecked = updateIsChecked;
		svc.updateUser = updateUser;
		svc.removeUser = removeUser;
		svc.deleteMember = deleteMember;

		function fetch(){
			return $http.get('/api/members');
		};

		function findByBranch( branch ){
			return $http.get('/api/members/' + branch );
		};

		function fetchOnDuty(branch){
			return $http.get('/api/members/onDuty?branch=' + branch);
		};

		function create(member){
			return $http.post('/api/members/', member);
		};

		function update(member){
			return $http.put('/api/members/', member.id);
		};

		function updateOnDuty(member){
			return $http.put('/api/members/onDuty/findById?memberId=' + member.memberId, member);
		};

		function updateByMemberId(updateMember){
			return $http.put('/api/members/findById/' + updateMember.memberId , updateMember);
		}
		
		function updateIsChecked(memberData){
			return $http.put('/api/members?id=' + memberData.memberId, memberData)
		};
		
		function updateUser(username){
			return $http.put('/api/members/user?username='+ username);
		};
		
		function removeUser(username){
			return $http.put('/api/members/user/remove?username=' + username);
		};

		function deleteMember(member){
			return $http.delete('/api/members/' + member._id);
		};
	}
})();
(function(){
	'use strict';
	/**
	* app.notification Module
	*
	* Description
	*/
	angular
		.module('app.notification')
		.service('NtfSvc',NtfSvc);

	NtfSvc.$inject = ['$http'];
	
	function NtfSvc($http){
		var svc = this;
		svc.fetch = fetch; 
		function fetch(){
			return $http.get('/api/ntfs');
		} ;
	};

})();
(function(){
	'use strict';

	/**
	* app.safety Module
	*
	* Description
	*/
	angular
		.module('app.safety')
		.controller('SafetyCmdShowController',SafetyCmdShowController);

	SafetyCmdShowController.$inject = ['CaseSvc', 'BranchSvc', 'UserSvc', '$stateParams', 'GeoSvc'];
	
	function SafetyCmdShowController(CaseSvc, BranchSvc, UserSvc, $stateParams, GeoSvc){
		
		var vm = this; 
		var branch = UserSvc.userBranch();
	
		BranchSvc.totalListFindByName(branch).success(function(branch){
			vm.members = branch.members.filter(function(member) {
				member.limitTime = moment.duration(member.workingTime, 'seconds');
				return member.onDuty == true 
			});
		});

		CaseSvc.fetchDetails($stateParams.caseId).success(function(_case){
			vm.caseDetail = _case;
			vm.onDutyBranches = _case.branchIds;
			if (_case.location) {
				var location = JSON.parse(_case.location);
				vm.markers.mainMarker = {
					lat : Number(location.lat),
					lng : Number(location.lng),
					message : "案件標的"
				};

				vm.battleRadiuss = _case.battleRadiuss;
			};
		}).then(function(){
			vm.onDutyBranches.forEach(function(branch){
				branch.members.forEach(function(member){
					if (branch.director == member.name ) {
						branch.directorRadioCode = member.radioCodePrefix +  String(member.radioCode);
					};
					if (branch.safetyManager == member.name) {
						branch.safetyManagerRadioCode = member.radioCodePrefix + String(member.radioCode);
					};
				});

				if (vm.battleRadius) {
					vm.battleRadiuss.forEach(function(battleRadius){
						var radius = JSON.parse(battleRadius)
						if (branch.name == radius.base) {
							branch.estimatedArrivingTime =  Math.round(( radius.d / 50 ) * 60);
						};
					})		
				};
			});
		});

       GeoSvc.getGeolocationCoordinates().then(function(coord){
	        vm.nowPos.lat = coord.latitude;
	        vm.nowPos.lng = coord.longitude;
	        vm.nowPos.zoom = 17;
	        vm.markers.nowPos = {
	        	lat : vm.nowPos.lat,
	        	lng : vm.nowPos.lng,
	        	message : "現在位置"
	        }
	    });

	    angular.extend(vm, {
	        nowPos: {
	            lat: 24.988,
	            lng: 121.5752,
	            zoom: 13
	        },
	        markers: {},
	    });		
	};
})();
(function(){
	'use strict';
	/**
	* app.safety Module
	*
	* Description
	*/
	angular
		.module('app.safety')
		.controller('SafetyIndexController',SafetyIndexController);
	SafetyIndexController.$inject = ['CaseSvc', 'UserSvc'];
	function SafetyIndexController(){
		var vm = this; 
		var userCondition = {
			branch 		: UserSvc.userBranch(),
			accessLevel : UserSvc.accessLevel(),
			corps 		: UserSvc.userCorps()
		};

		CaseSvc.fetchRelativeCase(userCondition).success(function(cases){ 
			vm.cases = cases;
			cases.forEach(function(_case){
				_case.dispatchBranches = ''
				_case.branches.forEach(function(branch){
					_case.dispatchBranches += branch + ' '
				});
			});
		});

		vm.isBranchMember = true ? UserSvc.accessLevel() < 2  : false ; 
	}
})();
(function(){
	'use strict';
	/**
	* app.safety Module
	*
	* Description
	*/
	angular
		.module('app.safety')
		.controller('SafetyManageController',SafetyManageController);
	
	SafetyManageController.$inject = ['$stateParams', '$modal', 'StSvc', '$state', 'MemberSvc','$log', 'UserSvc', 'BranchSvc', 'SocketSvc', 'CaseSvc', 'StMissionFac'];
	
	function SafetyManageController($stateParams, $modal, StSvc, $state, MemberSvc,$log, UserSvc, BranchSvc, SocketSvc, CaseSvc, StMissionFac){
		var vm = this; 
		var BRANCH 		= UserSvc.userBranch();
		var caseDetail 	= null;
		vm.quickStart 	= false;
		vm.apartment 	= true; 
		vm.ACCESSLEVEL 	= UserSvc.accessLevel();
		vm.quickOrganizing = quickOrganizing;
		vm.strikeTeam = strikeTeam;
		vm.openSettingModal = openSettingModal;
		vm.dismiss = dismiss; 

		vm.branchOptions = {
			branch : BRANCH,
			branches : []
		};

		CaseSvc.fetchById($stateParams.caseId).success(function(_case){
			caseDetail = _case;
			_case.env == '住宅火警'? vm.apartment = true : vm.apartment = false; 
			vm.branchOptions.branches = _case.branches
			vm.branchOptions.branches.splice(0,0,BRANCH);
		});

		BranchSvc.fetchByName(BRANCH).success(function(details){
			vm.details = details;
		}).then(function(){
			if (vm.ACCESSLEVEL > 1 ) {
				StSvc.fetchByCase($stateParams.caseId).success(function(sts){
					vm.strikeTeams = sts; 
				});
			} else {
				StSvc.fetch($stateParams.caseId,BRANCH).success(function(sts){
					vm.strikeTeams = sts;
					if (vm.details.dispatchNum < 8 && _.isEmpty(vm.strikeTeams)) { vm.quickStart = true  }; 
				}); 
			};
		});

		SocketSvc.on('newSt', function(st){
			if (vm.ACCESSLEVEL > 1 && angular.equals($stateParams.caseId,st.caseId) ) {
					vm.strikeTeams.push(st);
			} else {
				if (angular.equals(BRANCH,st.branch) && angular.equals($stateParams.caseId,st.caseId) ) {
					vm.strikeTeams.push(st);
				};
			};
		});

		SocketSvc.on('updateSt', function(data){
			var members = angular.copy(data.members);
			for (var i = vm.strikeTeams.length - 1; i >= 0; i--) {
				if(angular.equals(vm.strikeTeams[i]._id,data.id)){
					vm.strikeTeams[i].position 	= data.position;
					vm.strikeTeams[i].area 		= data.area;
					vm.strikeTeams[i].floor 	= data.floor;
					vm.strikeTeams[i].mission 	= data.mission;
				};
			};
		})

		SocketSvc.on('dismiss', function(st){
			var _stId = st.stId;
			vm.strikeTeams = vm.strikeTeams.filter(function(st) {				
				return st._id != _stId;
			});
		});
		
		function strikeTeam(){
			var modalInstance = $modal.open({
			  	templateUrl: 'views/safety/safety.modal.html',
			    controller: 'SafetyModalCtrl',
			    size: "md",
			    resolve : {
			    	stId : function(){
			    		if ( _.isEmpty(vm.strikeTeams)) {
			    			return 0
			    		} else{
			    			return vm.strikeTeams[vm.strikeTeams.length-1].id;
			    		};
			    	},
			    	branch : function(){
			    		return vm.branchOptions.branch;
			    	},
			    	caseDetail : function(){
			    		return caseDetail
			    	}
			    }
		    });
		};

		
		function openSettingModal(strikeTeam, id){
	        var modalInstance = $modal.open({
	            templateUrl: 'views/safety/safety.setting.modal.html',
	            controller: 'SafetySettingCtrl',
	            size: "lg",
	            resolve: {
	                strikeTeam : function(){
	                    return strikeTeam;
	                },
	                caseDetail : function(){
	                	return caseDetail;
	                }
	            }
	        });
	    };

		
		function dismiss(strikeTeam , id){

			SocketSvc.emit("dismissStrikeTeam",{
				id : strikeTeam._id,
				members : strikeTeam.members 
			});
	       	vm.strikeTeams.splice(id,1);
		};

		
		function quickOrganizing(){
			vm.quickStart = false;
		
			var members =  vm.details.members.filter(function(member) {
				if ( member.mission == '司機' || member.mission == '安全管制員' || member.mission == '救護人員') {
					return false  
				}else {
					member.isChecked = true;
					return member.onDuty;
				}
			});

			var strikeTeam = {
				id 		  : 1,
				caseId 	  : caseDetail._id,
				branch 	  : UserSvc.userBranch(),
				director  : _.pluck(members.filter(function(member) { return member.mission == '帶隊官'}),'name')[0],
				position  : StMissionFac.position().defaultPos,
				positions : StMissionFac.position().poss,
				group     : StMissionFac.groups().branch[1],
				groups    : StMissionFac.groups().branch,
				area 	  : StMissionFac.area().defaultArea,
				areas 	  : StMissionFac.area().areas,
				floor 	  : 1, 
				floors    : [1,2,3,4,5],
				memberIds : _.pluck(members,'_id'),
				members   : members,
				creator   : UserSvc.currentUser(),
			};
	      	SocketSvc.emit("createStrikeTeam", strikeTeam);
		};

		vm.$on('$destroy', function (event) {
	        SocketSvc.removeAllListeners();
	    })
	}
})();
(function(){
	'use strict';
	/**
	* app.safety Module
	*
	* Description
	*/
	angular
		.module('app.safety')
		.controller('MemberModalController',MemberModalController);

	MemberModalController.$inject = ['branch', 'MemberSvc', '$modalInstance', '$state', 'member','BranchSvc', 'UserSvc'];
	function MemberModalController(){
		var vm = this; 
		vm.alerts = [];
		vm.isNew = _.isNull(member.workingTime);
		vm.save = save;
		vm.update = update; 
		vm.cancel = cancel;  

		vm.member = {
			id 		 	: member.id ||  "", 
			name 	 	: member.name || null , 
			title    	: "消防隊員",
			titles   	: ["消防隊員","小隊長","分隊長","中隊長","大隊長","副大隊長"],
			branch   	: member.branch || branch,
			workingTime : member.workingTime ||  1200,
			radioCode 	: member.radioCode ||  null, 
			mission  	: "瞄子手",
			missions 	: ["瞄子手","副瞄子手","司機","小組長","安全管制員","聯絡官",],
			corps	 	: UserSvc.userCorps(),
			corpss 	 	: ["第一救災救護大隊","第三救災救護大隊"],
		};

		BranchSvc.fetchByCorps(UserSvc.userCorps()).success(function(branches){
			vm.branches = branches; 
			if (!vm.isNew) {
				var branchArry = [];
				for (var i = branches.length - 1; i >= 0; i--) {
					branchArry.push(branches[i].name);
				};
				vm.member.branches = branchArry;
			}; 
		});

		var radioCodePrefix = function(branch){
			var suffix =  branch.split('').slice(-2).join('');
			if (suffix == "大隊" || suffix == "中隊") {
				return "北海";
			} else{
				return branch.split('').slice(0,2).join('');
			};
		};

		function save(){
			if (vm.member.name) {
				vm.member.radioCodePrefix = radioCodePrefix(vm.member.branch);
				MemberSvc.create(vm.member).success(function(){
					vm.member.workingTime = moment.duration(parseInt(vm.member.workingTime),'seconds');
				}).then(function(){
					$modalInstance.close(vm.member);
				})
			};
		};

		function update(){
			var updateMember = {
				  memberId  : member.memberId,
				  id 		: "",
				  name 		: vm.member.name,
				  corps 	: vm.member.corps,
				  branch 	: vm.member.branch,
				  title 	: vm.member.title,
				  workingTime : vm.member.workingTime,
				  radioCode  : vm.member.radioCode,
				  radioCodePrefix : radioCodePrefix(vm.member.branch)
			}

			if (vm.member.name) {
				MemberSvc.updateByMemberId(updateMember);
				$modalInstance.close(updateMember);
			} else {
				
			};
		};

		function cancel(){
			$modalInstance.dismiss('cancel');
		};
	}
})();
(function(){
	'use strict';
	/**
	* app.safety Module
	*
	* Description
	*/
	angular
		.module('app.safety')
		.controller('SafetySettingController',SafetySettingController);

	SafetySettingController.$inject = ['strikeTeam', '$modalInstance', 'StSvc', '$state', 'MemberSvc', 'CaseSvc', '$stateParams', 'SocketSvc', 'caseDetail'];
	
	function SafetySettingController(strikeTeam, $modalInstance, StSvc, $state, MemberSvc, CaseSvc, $stateParams, SocketSvc, caseDetail){
		var vm = this; 
		vm.strikeTeam = strikeTeam;
		vm.chooseBranch = chooseBranch;
		vm.cancel = cancel;
		vm.check = check;
		vm.uncheck = uncheck;
		vm.save = save;   
		caseDetail.env == '住宅火警'? vm.apartment =  true  : vm.apartment = false 

		var newMembers = [];

		CaseSvc.fetchDetails($stateParams.caseId).success(function(details){
			vm.dispatch = details.branchIds;
			vm.currentBranch = vm.dispatch[0].name;
			var memberList = _.pluck(details.branchIds,'members');
			vm.members = []
			memberList.forEach(function(branchMembers){
				vm.members.push.apply(vm.members, branchMembers)
			});
			vm.members = vm.members.filter(function(member) { return !member.isChecked });
		})

		function chooseBranch(branch){
			vm.currentBranch = branch;
		};

		function cancel(){
			$modalInstance.dismiss('cancel');
		};

		function check(member){
			member.isChecked = !member.isChecked;
			newMembers.push(member);
		};

		function uncheck(member, id){
			member.isChecked = !member.isChecked;
			newMembers.splice(_.pluck(newMembers, '_id').indexOf(member._id),1);
		};

		function save(){
			vm.strikeTeam.members.push.apply(vm.strikeTeam.members, newMembers);
			SocketSvc.emit('updateStrikeTeam',{
				id : strikeTeam._id, 
				position : strikeTeam.position,
				area : strikeTeam.area, 
				floor : strikeTeam.floor,
				group : strikeTeam.group,
				memberIds : _.pluck(vm.strikeTeam.members,'_id'), 
				members : vm.strikeTeam.members
			});

			$modalInstance.close('dismiss');			
		};
	};

})();
(function(){
	'use strict';
	/**
	* app.safety Module
	*
	* Description
	*/
	angular
		.module('app.safety')
		.controller('SafetyShowController',SafetyShowController);

	SafetyShowController.$inject = ['CaseSvc', 'UserSvc', 'SocketSvc','GeoSvc', 'BranchSvc', '$stateParams'];

	function SafetyShowController(){
		var vm = this; 
		var branch = UserSvc.userBranch();
		
		BranchSvc.fetchByName(branch).success(function(branch){
			vm.members = branch.members.filter(function(member) {
				member.limitTime = moment.duration(member.workingTime, 'seconds');
				return member.onDuty == true 
			});
		});

		CaseSvc.fetchDetails($stateParams.caseId).success(function(_case){
			vm.caseDetail = _case;
			if (_case.location) {
				var location = JSON.parse(_case.location);
				vm.markers.mainMarker = {
					lat : Number(location.lat),
					lng : Number(location.lng),
					message : "案件標的"
				};
			};
		});

       GeoSvc.getGeolocationCoordinates().then(function(coord){
	        vm.nowPos.lat = coord.latitude;
	        vm.nowPos.lng = coord.longitude;
	        vm.nowPos.zoom = 17;
	        vm.markers.nowPos ={
	        	lat : vm.nowPos.lat,
	        	lng : vm.nowPos.lng,
	        	message : "現在位置"
	        }
	    })

	    angular.extend(vm, {
	        nowPos: {
	            lat: 24.988,
	            lng: 121.5752,
	            zoom: 13
	        },
	        markers: {},
	    });		
	}
})();
(function(){
	'use strict';
	/**
	* app.socket Module
	*
	* Description
	*/
	angular
		.module('app.socket')
		.service('SocketSvc',SocketSvc);

	SocketSvc.$inject = ['$rootScope', 'store', '$q', '$timeout'];
	
	function SocketSvc($rootScope, store, $q, $timeout){
		var svc = this; 
		svc.init =  function(token){
	    	var authToken = null
	    	if (token) {
		      authToken = token 
			} else {
		      authToken = store.get('jwt')
		    };
		    return io.connect('http://localhost:3000',{ query : 'token=' + authToken , 'forceNew':true });
		}

	  	var socket = svc.init();

	  	svc.on =  function (eventName, callback) {
	    	svc.init().on(eventName, function () {  
		      var args = arguments;
		      $rootScope.$apply(function () {
		        callback.apply(socket, args);
		      });
		    });
		};

	  	svc.emit =  function (eventName, data, callback) {
	    	svc.init().emit(eventName, data, function () {
	      		var args = arguments;
	      		$rootScope.$apply(function () {
	        		if (callback) {
	          			callback.apply(socket, args);
	        		};
	      		});
	    	})
	  	};

		svc.removeAllListeners = function (eventName, callback) {
		    svc.init().removeAllListeners(eventName, function() {
		        var args = arguments;
		        $rootScope.$apply(function () {
		          callback.apply(socket, args);
		        });
		    }); 
		};
	};
})();
(function(){
	'use strict';
	/**
	* app.strikeTeam Module
	*
	* Description
	*/
	angular
		.module('app.strikeTeam', [])
		.factory('StMissionFac',StMissionFac);

	StMissionFac.$inject = [];
	function StMissionFac(){
		return {
			groups: function(){
				return {
					corps : [ "聯絡組" , "水源組" , "後勤組"],
					squadron : [""],
					branch : ["帶隊官","滅火小組","搜救小組","搶救小組","後勤小組"],
					preSt  : ["搜救小組","搶救小組","滅火小組"]
				}
			},
			position : function(){
				return {
					defaultPos : "第一面",
					poss : ["第一面","第二面","第三面","第四面"]
				}
			},
			area : function(){
				return {
					defaultArea : "第一區",
					areas : ["第一區","第二區","第三區","第四區","第五區"]
				};
			}
		};
	};
})();
(function(){
	'use strict';
	/**
	* app.strikTeam Module
	*
	* Description
	*/
	angular
		.module('app.strikTeam')
		.serivce('StSvc',StSvc);
		
	StSvc.$inject = ['$http'];

	function StSvc(){
		var svc = this; 
		svc.fetch = fetch;
		svc.fetchByCase = fetchByCase;
		svc.findById = findById;
		svc.dismissSt = dismissSt;
		svc.updateSt = updateSt;
		svc.updateTimeRecord = updateTimeRecord;
		svc.create = create;
		svc.count = count; 

		function fetch(caseId, branch){
			return $http.get('/api/strikeTeams?caseId=' + caseId + '&branch=' + branch);
		};
	
		function fetchByCase(caseId){
			return $http.get('/api/strikeTeams/total?caseId=' + caseId);
		};
		
		function findById(caseId){
			return $http.get('/api/strikeTeams/' + caseId);
		};

		function dismissSt(data){
			return $http.put('/api/strikeTeams/dismiss?id=' + data.id);
		};

		function updateSt(data){
			return $http.put('/api/strikeTeams/update?id=' + data.id, data);
		};

		function updateTimeRecord(data){
			return $http.put('/api/strikeTeams/time?id=' + data.id, data);
		};

		function create(strikeTeam){
			return $http.post('/api/strikeTeams', strikeTeam);
		};
		
		function count(caseId){
			return $http.get('/api/strikeTeams/count?caseId=' + caseId);
		};
	}

})();
(function(){
	'use strict';
	/**
	* app.summary Module
	*
	* Description
	*/
	angular
		.module('app.summary')
		.controller('SummaryController',SummaryController);

	SummaryController.$inject = ['StSvc', '$stateParams', '$interval', '$state', 'SocketSvc', 'CaseSvc'];
	
	function SummaryController(){
		var vm = this; 
		vm.isCollapsed = true ;
		vm.members = [];

		SocketSvc.on('timerRunning',function(st){
			for (var i = vm.strikeTeams.length - 1; i >= 0; i--) {
				if( angular.equals(vm.strikeTeams[i]._id, st.stId)){
					return vm.strikeTeams[i].timerRunning = st.timerRunning;
				}
			};
		})

		SocketSvc.on('progressUpdate',function(data){
			for (var i = vm.strikeTeams.length - 1; i >= 0; i--) {
				if( angular.equals(vm.strikeTeams[i]._id, data.id) ){
					vm.strikeTeams[i].timer	= moment.duration(data.millis); 
					vm.strikeTeams[i].progress  = data.progress;
					vm.strikeTeams[i].progressState =  data.progressState;
				}
			};
		})

		SocketSvc.on('newSt', function(st){
			if ( angular.equals(caseId,st.caseId)) {
				var newSt = angular.copy(st);
				return vm.strikeTeams.push(newSt);
			};
			vm.deploys = initTable(vm.strikeTeams);
		});

		

		SocketSvc.on('updateSt', function(data){
			StSvc.fetchByCase(caseId).success(function(strikeTeams){
				vm.strikeTeams = strikeTeams;
				vm.strikeTeams.forEach(function(st){
					st.limitTime = moment.duration(st.workingTime,'seconds');
				});
				vm.deploys = initTable(vm.strikeTeams);
			});

		})

		SocketSvc.on('dismiss', function(data){
			StSvc.fetchByCase(caseId).success(function(strikeTeams){
				vm.strikeTeams = strikeTeams;
				vm.deploys = initTable(vm.strikeTeams);
			});
		});


		var caseId = $stateParams.caseId;
		CaseSvc.fetchById(caseId).success(function(_case){
			_case.env == '住宅火警' ? vm.apartment = true : vm.apartment = false;
			vm.caseDetail = _case;
			vm.position = {
				defaultPos 	: "第一面",
				positions 	: ["第一面","第二面","第三面","第四面"],
				floor 		: vm.caseDetail.floor,
				floors  	: vm.caseDetail.floor < 5? _.range(1,6,1) : _.range(vm.caseDetail.floor-2,vm.caseDetail.floor+3,1)
			};
		})

		StSvc.fetchByCase(caseId).success(function(strikeTeams){
			if (strikeTeams) {
				vm.strikeTeams = strikeTeams;
				vm.strikeTeams.forEach(function(st){
					st.limitTime = moment.duration(st.workingTime,'seconds');
				});
				vm.deploys = initTable(vm.strikeTeams);
			} else {
				return 
			};
		});



		var initTable =  function(strikeTeams){
		  	var deployArray = _.range(4).map(function () {
		        return _.range(5).map(function () {
		            return { totalMember : 0, stTotal : 0 , sts : [] } ;
		        });
		    });

			if ( strikeTeams ){
				for (var i = strikeTeams.length - 1; i >= 0; i--) {
					var totalMember = 0;
					var y = null;
					var st = 0;
					var x = _.indexOf(strikeTeams[i].positions, strikeTeams[i].position);
					vm.apartment ? y = _.indexOf(strikeTeams[i].floors, strikeTeams[i].floor) : y = _.indexOf(strikeTeams[i].areas, strikeTeams[i].area)
					deployArray[x][y].stTotal += 1;
					deployArray[x][y].totalMember += strikeTeams[i].members.length;
					var stInFo = {};
					stInFo.id = strikeTeams[i].branch + strikeTeams[i].id
					stInFo.number = strikeTeams[i].members.length;
					stInFo.group = strikeTeams[i].group;
					deployArray[x][y].sts.push(stInFo);
				};
			}
			return deployArray
		};
		
		vm.$on('$destroy', function (event) {
	        SocketSvc.removeAllListeners();
	    });
	};
})();
(function(){
	'use strict';

	/**
	* app.timer Module
	*
	* Description
	*/
	angular
		.module('app.timer')
		.controller('TimerController',TimerController);

	TimerController.$inject = ['SocketSvc'];

	function TimerController(){
		var vm = this; 
		vm.timerRunning = false;
		vm.startTimer = startTimer;
		vm.stopTimer = stopTimer;
	    
	    function startTimer(st, id){
	    	vm.$broadcast('timer-start');
	    	vm.timerRunning = true;
	        SocketSvc.emit('timer', { stId : st._id, timerRunning : true } )
	    };
	    
	    function stopTimer(st,id){
	    	vm.$broadcast('timer-stop');
	    	vm.timerRunning = false;
	        SocketSvc.emit('timer', { stId : st._id, timerRunning : false } )
	    };
	};

})();
(function(){
	'use strict';
	/**
	* app.user Module
	*
	* Description
	*/
	angular
		.module('app.user')
		.service('UserSvc',UserSvc);

	UserSvc.$inject = ['$http', 'store', 'jwtHelper'];
	function UserSvc(){
		var svc = this; 
		svc.fetchOnlineUser = fetchOnlineUser;
		svc.activate = activate;
		svc.removeUser = removeUser;
		svc.login = login;
		svc.isLoggedIn = isLoggedIn;
		svc.isValid = isValid;
		svc.userBranch = userBranch;
		svc.userCorps = userCorps;
		svc.currentUser = currentUser;
		svc.currentAccount = currentAccount;
		svc.accessLevel = accessLevel;
		svc.caseId = caseId;


		function fetchOnlineUser(){
			return $http.get('/api/users/userState');
		};

		function activate(user){
			return $http.post('/api/users', user);
		};

		function removeUser(username){
			return $http.delete('/api/users/delete?username=' + username);
		};

		function login(user){
			return $http.post('/api/users/authenticate', user);
		};

		function isLoggedIn(){
			return store.get('jwt');
		};

		function isValid( branch ){
			if (svc.isLoggedIn) {
				if (jwtHelper.decodeToken(store.get('jwt')).accessLevel > 1   || jwtHelper.decodeToken(store.get('jwt')).branch == branch) {
					return true; 
				}else {
					return false;
				};
			};

			return false 
		};

		function userBranch(){
			if (svc.isLoggedIn) {
				return jwtHelper.decodeToken(store.get('jwt')).branch;
			};
		};
	
		function userCorps(){
			if (svc.isLoggedIn) {
				return jwtHelper.decodeToken(store.get('jwt')).corps;
			};
		};
	
		function currentUser(){
			if (svc.isLoggedIn) {
				return jwtHelper.decodeToken(store.get('jwt')).username;
			};
		};
	
		function currentAccount(){
			if (svc.isLoggedIn) {
				return jwtHelper.decodeToken(store.get('jwt')).account;
			}; 
		};
	
		function accessLevel(){
			if (svc.isLoggedIn) {
				return jwtHelper.decodeToken(store.get('jwt')).accessLevel;
			};
		};
	
		function caseId(){
			if (svc.isLoggedIn) {
				return jwtHelper.decodeToken(store.get('jwt')).caseId;
			};
		};
	};

})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJjYXIvY2FyLm1vZHVsZS5qcyIsImJyYW5jaC9icmFuY2gubW9kdWxlLmpzIiwiY2FzZS9jYXNlLm1vZHVsZS5qcyIsImRhc2hib2FyZC9kYXNoYm9hcmQubW9kdWxlLmpzIiwiZGlyZWN0b3IvZGlyZWN0b3IubW9kdWxlLmpzIiwiZGlzcGF0Y2gvZGlzcGF0Y2gubW9kdWxlLmpzIiwiZHV0eWxpc3QvZHV0eWxpc3QubW9kdWxlLmpzIiwiZ2VvL2dlby5tb2R1bGUuanMiLCJsYXlvdXQvbGF5b3V0Lm1vZHVsZS5qcyIsIm1hcC9tYXAubW9kdWxlLmpzIiwibWVtYmVyL21lbWJlci5tb2R1bGUuanMiLCJub3RpZmljYXRpb24vYXBwLm5vdGlmaWNhdGlvbi5tb2R1bGUuanMiLCJzYWZldHkvc2FmZXR5Lm1vZHVsZS5qcyIsInNvY2tldC9zb2NrZXQubW9kdWxlLmpzIiwic3RyaWtlVGVhbS9zdHJpa2VUZWFtLm1vZHVsZS5qcyIsInN1bW1hcnkvc3VtbWFyeS5tb2R1bGUuanMiLCJ0aW1lci90aW1lci5tb2R1bGUuanMiLCJ1c2VyL3VzZXIubW9kdWxlLmpzIiwiYXBwLmRpcmVjdGl2ZS5qcyIsImFwcC5ydW4uanMiLCJjYXIvY2FyLmVkaXQuY29udHJvbGxlci5qcyIsImNhci9jYXIuaW5kZXguY29udHJvbGxlci5qcyIsImNhci9jYXIuc2VydmljZS5qcyIsImJyYW5jaC9icmFuY2guc2VydmljZS5qcyIsImNhc2UvY2FzZS5jb25maXJtLm1vZGFsLmNvbnRyb2xsZXIuanMiLCJjYXNlL2Nhc2UuZWRpdC5jb250cm9sbGVyLmpzIiwiY2FzZS9jYXNlLmluZGV4LmNvbnRyb2xsZXIuanMiLCJjYXNlL2Nhc2UubW9kYWwuY29udHJvbGxlci5qcyIsImNhc2UvY2FzZS5uZXcuY29udHJvbGxlci5qcyIsImNhc2UvY2FzZS5zZXJ2aWNlLmpzIiwiY2FzZS9jYXNlLnNob3cuY29udHJvbGxlci5qcyIsImNvcmUvcm91dGVyLmpzIiwiZGFzaGJvYXJkL2Rhc2hib2FyZC5jb250cm9sbGVyLmpzIiwiZGlyZWN0b3IvZGlyZWN0b3IuY29udHJvbGxlci5qcyIsImRpcmVjdG9yL2RpcmVjdG9yLmVkaXQuY29udHJvbGxlci5qcyIsImRpc3BhdGNoL2Rpc3BhdGNoLmNvbnRyb2xsZXIuanMiLCJkdXR5bGlzdC9kdXR5bGlzdC5jb250cm9sbGVyLmpzIiwiZHV0eWxpc3QvZHV0eWxpc3QuZWRpdC5jb250cm9sbGVyLmpzIiwiZ2VvL2dlby5zZXJ2aWNlLmpzIiwibGF5b3V0L2xvZ2luLmNvbnRyb2xsZXIuanMiLCJsYXlvdXQvdG9wbmF2YmFyLmNvbnRyb2xsZXIuanMiLCJtYXAvbWFwLmluZGV4LmNvbnRyb2xsZXIuanMiLCJtZW1iZXIvbWVtYmVyLmFjY291bnQuY29udHJvbGxlci5qcyIsIm1lbWJlci9tZW1iZXIuZWRpdC5jb250cm9sbGVyLmpzIiwibWVtYmVyL21lbWJlci5pbmRleC5jb250cm9sbGVyLmpzIiwibWVtYmVyL21lbWJlci5tb2RhbC5jb250cm9sbGVyLmpzIiwibWVtYmVyL21lbWJlci5zZXJ2aWNlLmpzIiwibm90aWZpY2F0aW9uL2FwcC5ub3RpZmljYXRpb24uc2VydmljZS5qcyIsInNhZmV0eS9zYWZldHkuY21kLmNvbnRyb2xsZXIuanMiLCJzYWZldHkvc2FmZXR5LmluZGV4LmNvbnRyb2xsZXIuanMiLCJzYWZldHkvc2FmZXR5Lm1hbmFnZS5jb250cm9sbGVyLmpzIiwic2FmZXR5L3NhZmV0eS5tb2RhbC5jb250cm9sbGVyLmpzIiwic2FmZXR5L3NhZmV0eS5zZXR0aW5nLmNvbnRyb2xsZXIuanMiLCJzYWZldHkvc2FmZXR5LnNob3cuY29udHJvbGxlci5qcyIsInNvY2tldC9zb2NrZXQuc2VydmljZS5qcyIsInN0cmlrZVRlYW0vc3RyaWtlVGVhbS5mYWN0b3J5LmpzIiwic3RyaWtlVGVhbS9zdHJpa2VUZWFtLnNlcnZpY2UuanMiLCJzdW1tYXJ5L3N1bW1hcnkuaW5kZXguY29udHJvbGxlci5qcyIsInRpbWVyL3RpbWVyLmNvbnRyb2xsZXIuanMiLCJ1c2VyL3VzZXIuc2VydmljZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxDQUFBLENBQUEsVUFBQTtDQUNBO0NBQ0EsUUFBQSxPQUFBLE1BQUE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7Ozs7QUN4QkEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BLFFBQUEsT0FBQSxXQUFBOztBQ1BBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUEsYUFBQTs7QUNSQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUEsUUFBQSxPQUFBLFlBQUE7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7OztBQ2JBLENBQUEsVUFBQTs7Ozs7O0NBTUE7R0FDQSxPQUFBLGdCQUFBO0dBQ0E7R0FDQTtHQUNBOzs7QUNWQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUEsUUFBQSxPQUFBLGdCQUFBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOzs7O0FDYkEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BLFFBQUEsT0FBQSxnQkFBQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTs7O0FDYkEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BLFFBQUEsT0FBQSxnQkFBQTtFQUNBO0VBQ0E7RUFDQTs7O0FDVkEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BLFFBQUEsT0FBQSxXQUFBOztBQ1BBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQSxRQUFBLE9BQUEsY0FBQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7OztBQ1pBLENBQUEsVUFBQTs7Ozs7O0NBTUEsUUFBQSxPQUFBLFdBQUE7RUFDQTs7O0FDUEEsQ0FBQSxVQUFBOzs7Ozs7Q0FNQSxRQUFBLE9BQUEsY0FBQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7OztBQ1hBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQSxRQUFBLE9BQUEsb0JBQUE7O0FDUEEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BLFFBQUEsT0FBQSxhQUFBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOzs7QUNoQkEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BLFFBQUEsT0FBQSxjQUFBO0VBQ0E7OztBQ1JBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQSxRQUFBLE9BQUEsaUJBQUE7O0FDUEEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BLFFBQUEsT0FBQSxjQUFBO0VBQ0E7RUFDQTtFQUNBO0VBQ0E7OztBQ1hBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQSxRQUFBLE9BQUEsYUFBQTtFQUNBOzs7QUNSQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUEsUUFBQSxPQUFBLFlBQUE7RUFDQTtFQUNBOzs7QUNUQSxDQUFBLFVBQUE7SUFDQTtTQUNBLE9BQUE7U0FDQSxVQUFBLG9CQUFBO1NBQ0EsVUFBQSxpQkFBQTtTQUNBLFVBQUEsWUFBQTtTQUNBLFVBQUEsT0FBQTs7SUFFQSxrQkFBQSxZQUFBLENBQUE7SUFDQSxlQUFBLGVBQUEsQ0FBQTtJQUNBLFVBQUEsb0JBQUEsQ0FBQTtJQUNBLEtBQUEseUJBQUEsQ0FBQTs7SUFFQSxTQUFBLGtCQUFBLFNBQUE7U0FDQSxPQUFBO1lBQ0EsVUFBQTtZQUNBLFVBQUE7WUFDQSxtQ0FBQSxVQUFBLFFBQUEsVUFBQTtnQkFDQSxPQUFBLGFBQUEsWUFBQTtvQkFDQSxFQUFBLFFBQUEsWUFBQTtvQkFDQSxJQUFBLENBQUEsRUFBQSxRQUFBLFNBQUEsa0JBQUEsRUFBQSxRQUFBLFNBQUEsZUFBQTs7d0JBRUEsRUFBQSxjQUFBOzt3QkFFQTs0QkFDQSxZQUFBO2dDQUNBLEVBQUEsY0FBQSxPQUFBOytCQUNBOzJCQUNBLElBQUEsRUFBQSxRQUFBLFNBQUEsaUJBQUE7d0JBQ0EsRUFBQSxjQUFBO3dCQUNBOzRCQUNBLFlBQUE7Z0NBQ0EsRUFBQSxjQUFBLE9BQUE7K0JBQ0E7MkJBQ0E7O3dCQUVBLEVBQUEsY0FBQSxXQUFBOzs7OztLQUtBOztJQUVBLFNBQUEsZUFBQSxTQUFBO1NBQ0EsT0FBQTtZQUNBLFVBQUE7WUFDQSxNQUFBLFNBQUEsT0FBQSxTQUFBOztnQkFFQSxTQUFBLFVBQUE7b0JBQ0EsUUFBQTs7OztLQUlBOztJQUVBLFNBQUEsVUFBQSxTQUFBO1FBQ0EsT0FBQTtZQUNBLFVBQUE7WUFDQSxPQUFBO1lBQ0EsYUFBQTtZQUNBLG1DQUFBLFVBQUEsUUFBQSxVQUFBOztnQkFFQSxPQUFBLFdBQUEsWUFBQTtvQkFDQSxJQUFBLE9BQUEsU0FBQSxRQUFBO29CQUNBLElBQUEsT0FBQSxTQUFBLEtBQUE7b0JBQ0EsSUFBQSxVQUFBLEtBQUEsS0FBQTtvQkFDQSxRQUFBLFlBQUE7O29CQUVBLEtBQUEsWUFBQSxpQkFBQSxZQUFBO29CQUNBLEtBQUEsWUFBQSxJQUFBLFlBQUE7b0JBQ0EsU0FBQSxZQUFBO3dCQUNBLEtBQUE7d0JBQ0EsS0FBQSxLQUFBLGNBQUE7dUJBQ0E7OztvQkFHQSxPQUFBLFdBQUEsWUFBQTt3QkFDQSxJQUFBLE9BQUEsU0FBQSxRQUFBO3dCQUNBLEtBQUE7Ozs7S0FJQTs7SUFFQSxTQUFBLEtBQUEsUUFBQTtRQUNBLE9BQUE7WUFDQSxVQUFBO1lBQ0EsTUFBQSxVQUFBLE9BQUEsVUFBQSxRQUFBO2dCQUNBLFNBQUEsS0FBQSxRQUFBLFVBQUE7b0JBQ0EsUUFBQSxRQUFBOzs7O0tBSUE7OztBQzdGQSxDQUFBLFVBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0FBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxXQUFBLG9CQUFBOztDQUVBLGtCQUFBLFVBQUE7Q0FDQSxTQUFBLG1CQUFBOztFQUVBOzs7QUNkQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsV0FBQSxxQkFBQTs7Q0FFQSxtQkFBQSxVQUFBO0NBQ0EsU0FBQSxvQkFBQTs7RUFFQTs7O0FDZEEsQ0FBQSxVQUFBO0NBQ0E7Ozs7Ozs7Q0FPQTtHQUNBLE9BQUE7R0FDQSxPQUFBLFNBQUE7O0NBRUEsT0FBQSxVQUFBLENBQUE7O0NBRUEsU0FBQSxPQUFBLE1BQUE7RUFDQSxJQUFBLEtBQUE7RUFDQSxHQUFBLGdCQUFBO0VBQ0EsR0FBQSxnQkFBQTtFQUNBLEdBQUEsWUFBQTs7RUFFQSxTQUFBLGFBQUEsTUFBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLHFCQUFBO0dBQ0E7O0VBRUEsU0FBQSxlQUFBLFFBQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSxzQkFBQTtHQUNBOztFQUVBLFNBQUEsT0FBQSxLQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEsZUFBQSxLQUFBLEtBQUE7R0FDQTtFQUNBOztBQy9CQSxDQUFBLFVBQUE7Ozs7Ozs7Q0FPQTtHQUNBLE9BQUE7R0FDQSxXQUFBLFlBQUE7O0NBRUEsVUFBQSxVQUFBLENBQUE7Q0FDQSxTQUFBLFVBQUEsTUFBQTtFQUNBLElBQUEsTUFBQTtFQUNBLElBQUEsZ0JBQUE7RUFDQSxJQUFBLGVBQUE7RUFDQSxJQUFBLHNCQUFBO0VBQ0EsSUFBQSxlQUFBO0VBQ0EsSUFBQSxzQkFBQTtFQUNBLElBQUEsWUFBQTtFQUNBLElBQUEsaUJBQUE7O0VBRUEsU0FBQSxhQUFBLE1BQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSx5QkFBQTtHQUNBOztFQUVBLFNBQUEsWUFBQSxPQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEsMEJBQUE7R0FDQTs7RUFFQSxTQUFBLG9CQUFBLE9BQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSxtQkFBQTs7O0VBR0EsU0FBQSxXQUFBLEdBQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSxtQkFBQTtHQUNBOztFQUVBLFNBQUEsb0JBQUEsU0FBQTtHQUNBLE9BQUEsTUFBQSxLQUFBLHVCQUFBO0dBQ0E7O0VBRUEsU0FBQSxPQUFBLEtBQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSxtQkFBQSxLQUFBLFNBQUE7R0FDQTs7RUFFQSxTQUFBLGNBQUEsS0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLDBCQUFBLEtBQUEsUUFBQTtHQUNBO0VBQ0E7OztBQ2pEQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsV0FBQSx3QkFBQTs7Q0FFQSxzQkFBQSxVQUFBLENBQUEsV0FBQSxXQUFBLGVBQUEsU0FBQTtDQUNBLFNBQUEsc0JBQUEsU0FBQSxTQUFBLGFBQUEsT0FBQSxlQUFBO0VBQ0EsSUFBQSxLQUFBOztFQUVBLEdBQUEsT0FBQTtFQUNBLEdBQUEsT0FBQTtFQUNBLEdBQUEsV0FBQTtHQUNBLEtBQUEsYUFBQTtHQUNBLFFBQUEsU0FBQSxPQUFBOzs7RUFHQSxTQUFBLE1BQUE7R0FDQSxRQUFBLE1BQUEsR0FBQSxNQUFBLFFBQUEsU0FBQSxLQUFBO0lBQ0EsUUFBQSxVQUFBLEdBQUEsVUFBQSxRQUFBLFVBQUE7S0FDQSxlQUFBLFFBQUE7S0FDQSxPQUFBLEdBQUE7OztHQUdBO0VBQ0E7O0FDOUJBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxXQUFBLHFCQUFBOztDQUVBLG1CQUFBLFVBQUEsQ0FBQSxnQkFBQSxXQUFBLFVBQUEsV0FBQSxhQUFBLFdBQUEsU0FBQTs7Q0FFQSxTQUFBLG1CQUFBLGNBQUEsU0FBQSxRQUFBLFNBQUEsV0FBQSxTQUFBLE9BQUEsT0FBQTtFQUNBLElBQUEsS0FBQTtFQUNBLElBQUEsZ0JBQUE7RUFDQSxHQUFBLGlCQUFBO0VBQ0EsR0FBQSxjQUFBO0VBQ0EsR0FBQSxpQkFBQTtFQUNBLEdBQUEsaUJBQUE7RUFDQSxHQUFBLFdBQUE7O0VBRUEsUUFBQSxPQUFBLElBQUE7U0FDQSxRQUFBO2FBQ0EsS0FBQTthQUNBLEtBQUE7YUFDQSxNQUFBOztTQUVBLFVBQUE7YUFDQSxNQUFBOzs7O0VBSUEsSUFBQSxTQUFBLGFBQUE7O0VBRUEsVUFBQSxhQUFBLFFBQUEsYUFBQSxRQUFBLFNBQUEsU0FBQTtNQUNBLEdBQUEsV0FBQTtNQUNBLEdBQUEsZ0JBQUEsU0FBQSxHQUFBOzs7RUFHQSxTQUFBLGFBQUEsT0FBQTtNQUNBLEdBQUEsZ0JBQUEsT0FBQTtNQUNBOztFQUVBLFVBQUEsYUFBQSxRQUFBLGFBQUEsUUFBQSxTQUFBLFNBQUE7TUFDQSxHQUFBLFdBQUE7TUFDQSxHQUFBLGdCQUFBLFNBQUEsR0FBQTs7O0VBR0EsUUFBQSxVQUFBLFFBQUEsUUFBQSxTQUFBLE1BQUE7R0FDQSxHQUFBLGNBQUE7R0FDQSxHQUFBLGVBQUEsRUFBQSxNQUFBLE1BQUEsTUFBQSxhQUFBLEtBQUE7R0FDQSxHQUFBLFlBQUEsU0FBQSxFQUFBLE1BQUEsTUFBQSxLQUFBO0tBQ0EsS0FBQSxVQUFBO0dBQ0EsT0FBQSxhQUFBLFFBQUEsYUFBQSxRQUFBLFNBQUEsS0FBQTtJQUNBLEdBQUEsT0FBQTtJQUNBLEtBQUEsSUFBQSxJQUFBLEdBQUEsSUFBQSxHQUFBLEtBQUEsUUFBQSxLQUFBO0tBQ0EsS0FBQSxHQUFBLFlBQUEsT0FBQSxRQUFBLEdBQUEsS0FBQSxHQUFBLE9BQUEsQ0FBQSxJQUFBO01BQ0EsR0FBQSxLQUFBLEdBQUEsWUFBQTtNQUNBLGFBQUEsS0FBQSxHQUFBLEtBQUE7TUFDQTtLQUNBOzs7R0FHQSxPQUFBLFFBQUEsUUFBQSxTQUFBLEtBQUE7SUFDQSxHQUFBLE9BQUE7SUFDQSxHQUFBLFlBQUEsT0FBQSxFQUFBLE1BQUEsS0FBQTtJQUNBLEdBQUEsWUFBQSxPQUFBLEdBQUEsWUFBQSxLQUFBOzs7O0VBSUEsU0FBQSxZQUFBLGFBQUE7R0FDQSxJQUFBLFdBQUEsRUFBQSxPQUFBO0dBQ0EsSUFBQSxZQUFBO0dBQ0EsS0FBQSxJQUFBLElBQUEsR0FBQSxJQUFBLEdBQUEsU0FBQSxRQUFBLEtBQUE7SUFDQSxJQUFBLFNBQUEsUUFBQSxHQUFBLFNBQUEsR0FBQSxRQUFBLENBQUEsR0FBQTtLQUNBLFVBQUEsS0FBQSxHQUFBLFNBQUEsR0FBQTtLQUNBO0lBQ0E7R0FDQSxRQUFBO0dBQ0E7O0VBRUEsU0FBQSxVQUFBLEtBQUE7R0FDQSxJQUFBLFlBQUE7R0FDQSxhQUFBLEtBQUE7R0FDQSxHQUFBLGVBQUEsRUFBQSxNQUFBLGNBQUEsYUFBQSxLQUFBO0dBQ0E7O0VBRUEsU0FBQSxlQUFBLElBQUE7R0FDQSxJQUFBLFlBQUE7R0FDQSxhQUFBLE9BQUEsRUFBQSxNQUFBLGNBQUEsT0FBQSxRQUFBLElBQUEsS0FBQTtHQUNBLEdBQUEsZUFBQSxFQUFBLE1BQUEsY0FBQSxhQUFBLEtBQUE7R0FDQTs7RUFFQSxTQUFBLE1BQUE7R0FDQSxJQUFBOztHQUVBLEdBQUEsS0FBQSxRQUFBLFNBQUEsSUFBQSxHQUFBO0lBQ0EsSUFBQSxJQUFBLFFBQUEsR0FBQSxZQUFBLE1BQUE7S0FDQSxjQUFBLEdBQUEsS0FBQTtLQUNBOztHQUVBLFFBQUEsT0FBQTtJQUNBLFlBQUEsR0FBQSxZQUFBO0lBQ0EsWUFBQSxHQUFBLFlBQUEsV0FBQTtJQUNBLGtCQUFBLFFBQUEsa0JBQUE7SUFDQSxZQUFBLEdBQUEsWUFBQSxRQUFBO0lBQ0EsV0FBQSxHQUFBLFlBQUE7SUFDQSxZQUFBLEdBQUEsWUFBQSxTQUFBO0lBQ0EsWUFBQSxFQUFBLE9BQUEsRUFBQSxNQUFBLGNBQUE7SUFDQSxZQUFBLFlBQUEsR0FBQSxZQUFBO01BQ0EsWUFBQSxFQUFBLE1BQUEsYUFBQTtJQUNBLFlBQUE7SUFDQSxXQUFBLFFBQUE7SUFDQSxTQUFBLEdBQUEsWUFBQTtJQUNBLFVBQUEsR0FBQSxZQUFBO0lBQ0EsV0FBQSxHQUFBLFlBQUE7SUFDQSxZQUFBLFdBQUE7SUFDQSxhQUFBLFNBQUEsT0FBQTtNQUNBLFFBQUEsVUFBQTtJQUNBLFFBQUEsUUFBQTs7R0FFQTs7RUFFQSxTQUFBLGdCQUFBO0dBQ0EsSUFBQSxnQkFBQSxPQUFBLEtBQUE7TUFDQSxhQUFBO09BQ0EsWUFBQTtPQUNBLE1BQUE7O0dBRUE7OztBQ2xJQSxDQUFBLFVBQUE7Q0FDQTs7Q0FFQTtHQUNBLE9BQUE7R0FDQSxXQUFBLGlCQUFBOztDQUVBLGVBQUEsVUFBQSxDQUFBLGVBQUEsU0FBQSxXQUFBLFFBQUEsYUFBQSxXQUFBO0NBQ0EsU0FBQSxlQUFBLGFBQUEsT0FBQSxTQUFBLE1BQUEsV0FBQSxTQUFBLFVBQUE7RUFDQSxJQUFBLEtBQUE7RUFDQSxHQUFBLFlBQUE7RUFDQSxHQUFBLGVBQUE7RUFDQSxHQUFBLGVBQUE7RUFDQSxHQUFBLGVBQUE7RUFDQSxHQUFBLGVBQUE7RUFDQSxHQUFBLFdBQUE7O0VBRUEsR0FBQTs7RUFFQSxTQUFBLGFBQUE7R0FDQSxRQUFBLE1BQUEsUUFBQSxhQUFBLEdBQUEsY0FBQSxHQUFBLGVBQUEsUUFBQSxTQUFBLEtBQUE7SUFDQSxHQUFBLFFBQUEsS0FBQTs7R0FFQTs7RUFFQSxTQUFBLFlBQUE7R0FDQSxRQUFBLE1BQUEsUUFBQSxhQUFBLEdBQUEsYUFBQSxHQUFBLGNBQUEsUUFBQSxTQUFBLEtBQUE7SUFDQSxHQUFBLFFBQUEsS0FBQTtJQUNBLEdBQUEsYUFBQSxLQUFBOztHQUVBOztFQUVBLFNBQUEsT0FBQSxHQUFBO0dBQ0EsUUFBQSxVQUFBLEdBQUEsTUFBQSxJQUFBLEtBQUEsUUFBQSxTQUFBLE1BQUE7S0FDQSxHQUFBLGNBQUE7O0dBRUE7O0VBRUEsVUFBQSxHQUFBLFVBQUEsU0FBQSxNQUFBO0dBQ0EsR0FBQSxNQUFBLFFBQUE7OztFQUdBLFVBQUEsR0FBQSxlQUFBLFNBQUEsTUFBQTtHQUNBLEdBQUEsTUFBQSxNQUFBLE9BQUEsS0FBQTs7RUFFQTs7O0FDN0NBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxXQUFBLHNCQUFBOztDQUVBLG9CQUFBLFVBQUEsQ0FBQSxVQUFBLGtCQUFBLFVBQUEsVUFBQSxTQUFBLGVBQUEsU0FBQSxXQUFBLGFBQUEsV0FBQTs7Q0FFQSxTQUFBLG9CQUFBLFFBQUEsZ0JBQUEsUUFBQSxRQUFBLE9BQUEsYUFBQSxPQUFBLFNBQUEsV0FBQSxTQUFBLE9BQUE7RUFDQSxJQUFBLEtBQUE7RUFDQSxHQUFBLFlBQUE7RUFDQSxHQUFBLGVBQUEsR0FBQSxRQUFBLGFBQUEsS0FBQTtFQUNBLEdBQUEsVUFBQTtHQUNBLFVBQUEsWUFBQSxXQUFBO0dBQ0EsUUFBQSxZQUFBLFNBQUE7TUFDQSxPQUFBLFlBQUEsU0FBQTtNQUNBLFFBQUEsRUFBQSxNQUFBLE1BQUEsTUFBQSxLQUFBO01BQ0EsUUFBQTtNQUNBLFFBQUEsQ0FBQSxPQUFBLFdBQUEsUUFBQTtNQUNBLFFBQUE7TUFDQSxTQUFBLGNBQUEsYUFBQSxXQUFBO01BQ0EsZUFBQSxjQUFBLGFBQUEsaUJBQUE7TUFDQSxXQUFBLGNBQUEsYUFBQSxhQUFBOztFQUVBLEdBQUEsV0FBQTtFQUNBLEdBQUEsWUFBQTtFQUNBLEdBQUEsV0FBQTtFQUNBLEdBQUEsaUJBQUE7RUFDQSxHQUFBLFlBQUE7RUFDQSxHQUFBLFlBQUE7RUFDQSxHQUFBLFNBQUE7O0VBRUEsSUFBQSxFQUFBLFFBQUEsY0FBQTtHQUNBLEdBQUEsUUFBQTtHQUNBLFVBQUE7T0FDQTtHQUNBLEdBQUEsUUFBQTtHQUNBLElBQUEsVUFBQSxZQUFBO0dBQ0E7O0VBRUEsT0FBQSxRQUFBLFFBQUEsU0FBQSxLQUFBO0dBQ0EsR0FBQSxVQUFBLE9BQUE7S0FDQSxLQUFBLFVBQUE7R0FDQSxHQUFBLFVBQUEsTUFBQSxHQUFBLFVBQUEsS0FBQTs7O0VBR0EsVUFBQSxhQUFBLFFBQUEsYUFBQSxRQUFBLFNBQUEsU0FBQTtNQUNBLEdBQUEsV0FBQTs7O0VBR0EsU0FBQSxjQUFBLElBQUE7R0FDQSxJQUFBLGVBQUE7R0FDQSxJQUFBLFNBQUE7R0FDQSxJQUFBLFdBQUE7O0dBRUEsSUFBQSxJQUFBLE1BQUE7SUFDQSxLQUFBLElBQUEsSUFBQSxJQUFBLEtBQUEsU0FBQSxHQUFBLEtBQUEsR0FBQSxLQUFBO0tBQ0EsYUFBQSxLQUFBLElBQUEsS0FBQSxHQUFBO0tBQ0EsT0FBQSxLQUFBLElBQUEsS0FBQSxHQUFBO0tBQ0EsU0FBQSxLQUFBLElBQUEsS0FBQSxHQUFBO0tBQ0E7SUFDQSxPQUFBLENBQUEsZUFBQSxlQUFBLFNBQUEsU0FBQSxZQUFBOztRQUVBO0lBQ0EsT0FBQTtJQUNBO0dBQ0E7O0VBRUEsU0FBQSxZQUFBLGFBQUE7R0FDQSxJQUFBLFdBQUEsRUFBQSxPQUFBO0dBQ0EsSUFBQSxZQUFBO0dBQ0EsS0FBQSxJQUFBLElBQUEsR0FBQSxJQUFBLEdBQUEsU0FBQSxRQUFBLEtBQUE7SUFDQSxJQUFBLFNBQUEsUUFBQSxHQUFBLFNBQUEsR0FBQSxRQUFBLENBQUEsR0FBQTtLQUNBLFVBQUEsS0FBQSxHQUFBLFNBQUEsR0FBQTtLQUNBO0lBQ0E7R0FDQSxRQUFBO0dBQ0E7O0VBRUEsU0FBQSxTQUFBLFFBQUE7SUFDQSxPQUFBLGNBQUEsT0FBQSxNQUFBLFFBQUEsU0FBQSxLQUFBO0tBQ0EsS0FBQSxJQUFBLElBQUEsS0FBQSxTQUFBLEdBQUEsS0FBQSxHQUFBLEtBQUE7TUFDQSxJQUFBLEdBQUEsUUFBQSxPQUFBLFFBQUEsS0FBQSxHQUFBLE9BQUEsQ0FBQSxJQUFBO09BQ0EsS0FBQSxHQUFBLFlBQUE7T0FDQTtNQUNBO0tBQ0EsR0FBQSxPQUFBOztHQUVBOztFQUVBLFNBQUEsU0FBQTtHQUNBLGVBQUEsUUFBQTtHQUNBOztFQUVBLFNBQUEsZUFBQSxJQUFBO0dBQ0EsSUFBQSxZQUFBO0dBQ0EsUUFBQSxPQUFBLFFBQUEsUUFBQSxLQUFBO0dBQ0EsR0FBQSxRQUFBLE9BQUEsT0FBQSxHQUFBLFFBQUEsYUFBQSxRQUFBLElBQUEsS0FBQTtHQUNBLEdBQUEsUUFBQSxhQUFBLE9BQUEsR0FBQSxRQUFBLGFBQUEsUUFBQSxJQUFBLFdBQUE7R0FDQSxHQUFBLFFBQUEsU0FBQSxPQUFBLEdBQUEsUUFBQSxhQUFBLFFBQUEsSUFBQSxRQUFBO0dBQ0EsR0FBQSxlQUFBLEdBQUEsUUFBQSxhQUFBLEtBQUE7R0FDQTs7RUFFQSxTQUFBLFVBQUEsS0FBQTtHQUNBLElBQUEsWUFBQTtHQUNBLFFBQUEsS0FBQTtHQUNBLEdBQUEsUUFBQSxPQUFBLEtBQUEsSUFBQTtHQUNBLEdBQUEsUUFBQSxhQUFBLEtBQUEsSUFBQTtHQUNBLEdBQUEsUUFBQSxTQUFBLEtBQUEsSUFBQTtHQUNBLEdBQUEsZUFBQSxHQUFBLFFBQUEsYUFBQSxLQUFBO0dBQ0E7O0VBRUEsU0FBQSxXQUFBO0dBQ0EsTUFBQSxNQUFBLFlBQUEsS0FBQSxRQUFBLFNBQUEsTUFBQTtJQUNBLElBQUEsUUFBQSxJQUFBO0tBQ0EsUUFBQSxNQUFBO1NBQ0E7S0FDQSxRQUFBLFVBQUE7TUFDQSxLQUFBLFlBQUE7TUFDQSxZQUFBO1FBQ0EsUUFBQSxTQUFBLElBQUE7TUFDQSxRQUFBLElBQUE7O0tBRUEsZUFBQSxRQUFBO0tBQ0EsT0FBQTtLQUNBOztHQUVBOztFQUVBLFNBQUEsTUFBQTtHQUNBLFFBQUEsT0FBQTtJQUNBLFdBQUEsU0FBQTtJQUNBLFlBQUEsR0FBQSxRQUFBLFdBQUE7SUFDQSxrQkFBQSxRQUFBLGtCQUFBO0lBQ0EsWUFBQSxHQUFBLFFBQUEsUUFBQTtJQUNBLFlBQUEsR0FBQSxRQUFBLFNBQUE7SUFDQSxZQUFBLEVBQUEsT0FBQSxHQUFBLFFBQUE7SUFDQSxZQUFBLFlBQUEsR0FBQSxRQUFBO01BQ0EsWUFBQSxHQUFBLFFBQUE7SUFDQSxZQUFBO0lBQ0EsV0FBQSxRQUFBO0lBQ0EsU0FBQSxHQUFBLFFBQUE7SUFDQSxXQUFBLEdBQUEsUUFBQTtNQUNBLFFBQUEsU0FBQSxRQUFBO0lBQ0EsZUFBQSxNQUFBOztHQUVBOztFQUVBLFNBQUEsUUFBQTtHQUNBLElBQUEsVUFBQTtJQUNBLEtBQUEsWUFBQTtJQUNBLFdBQUE7SUFDQSxZQUFBLEdBQUEsUUFBQTtJQUNBLGtCQUFBLFFBQUEsaUJBQUE7SUFDQSxZQUFBLEdBQUEsUUFBQTtJQUNBLFlBQUEsR0FBQSxRQUFBO0lBQ0EsWUFBQSxFQUFBLE9BQUEsR0FBQSxRQUFBO0lBQ0EsWUFBQSxZQUFBLEdBQUEsUUFBQTtNQUNBLFlBQUEsR0FBQSxRQUFBO0lBQ0EsWUFBQTtJQUNBLFNBQUEsR0FBQSxRQUFBO0lBQ0EsV0FBQSxHQUFBLFFBQUE7OztHQUdBLFFBQUEsT0FBQTtHQUNBLGVBQUEsUUFBQTtHQUNBOzs7QUMzS0EsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFdBQUEsb0JBQUE7O0NBRUEsa0JBQUEsVUFBQSxDQUFBLFVBQUEsYUFBQSxVQUFBLFVBQUEsWUFBQSxlQUFBLGdCQUFBLFdBQUEsV0FBQSxVQUFBOztDQUVBLFNBQUEsa0JBQUEsUUFBQSxXQUFBLFFBQUEsUUFBQSxVQUFBLGFBQUEsY0FBQSxTQUFBLFNBQUEsUUFBQSxPQUFBO0VBQ0EsSUFBQSxLQUFBO0VBQ0EsR0FBQSxlQUFBO0VBQ0EsR0FBQSxPQUFBO0VBQ0EsR0FBQSxnQkFBQTtFQUNBLEdBQUEsaUJBQUE7RUFDQSxHQUFBLFdBQUE7RUFDQSxHQUFBLGVBQUEsU0FBQSxPQUFBO0VBQ0EsSUFBQSxnQkFBQTtFQUNBLElBQUEsZUFBQTtFQUNBLElBQUE7RUFDQSxHQUFBLGVBQUEsR0FBQSxZQUFBLGFBQUEsS0FBQTs7RUFFQSxHQUFBLGNBQUE7R0FDQSxTQUFBO01BQ0EsUUFBQTtNQUNBLFNBQUEsRUFBQSxNQUFBLE1BQUEsTUFBQSxLQUFBO01BQ0EsU0FBQTtNQUNBLFNBQUEsQ0FBQSxPQUFBLFdBQUEsUUFBQTtNQUNBLFNBQUE7TUFDQSxVQUFBO01BQ0EsZUFBQTtNQUNBLFlBQUE7TUFDQSxXQUFBLE9BQUE7OztFQUdBLE9BQUEsa0JBQUEsUUFBQSxhQUFBLFFBQUEsU0FBQSxVQUFBO0dBQ0EsR0FBQSxZQUFBOzs7S0FHQSxRQUFBLE9BQUEsSUFBQTtTQUNBLFFBQUE7YUFDQSxLQUFBLE9BQUEsa0JBQUE7YUFDQSxLQUFBLE9BQUEsa0JBQUE7YUFDQSxNQUFBOztRQUVBLFNBQUE7OztFQUdBLFVBQUEsYUFBQSxRQUFBLGFBQUEsUUFBQSxTQUFBLFNBQUE7TUFDQSxHQUFBLFdBQUE7TUFDQSxHQUFBLGdCQUFBLFNBQUEsR0FBQTs7O0VBR0EsT0FBQSxhQUFBLFFBQUEsYUFBQSxRQUFBLFNBQUEsS0FBQTtHQUNBLEdBQUEsT0FBQTs7O0VBR0EsT0FBQSxRQUFBLFFBQUEsU0FBQSxLQUFBO0dBQ0EsZ0JBQUE7R0FDQSxHQUFBLFlBQUEsT0FBQSxFQUFBLE1BQUEsS0FBQTtHQUNBLEdBQUEsWUFBQSxPQUFBLEdBQUEsWUFBQSxLQUFBOzs7RUFHQSxTQUFBLGVBQUE7R0FDQSxJQUFBLEdBQUEsWUFBQSxTQUFBO0lBQ0EsT0FBQSxrQkFBQSxHQUFBLFlBQUEsU0FBQSxLQUFBLFNBQUEsSUFBQTtXQUNBLEdBQUEsT0FBQSxNQUFBLElBQUE7V0FDQSxHQUFBLE9BQUEsTUFBQSxJQUFBO2NBQ0EsR0FBQSxRQUFBLGFBQUE7ZUFDQSxLQUFBLElBQUE7a0JBQ0EsS0FBQSxJQUFBO2tCQUNBLE9BQUE7a0JBQ0EsU0FBQTs7O2NBR0EsSUFBQSxLQUFBO2VBQ0EsR0FBQSxVQUFBLFFBQUEsU0FBQSxTQUFBO2dCQUNBLElBQUEsSUFBQSxPQUFBLGFBQUEsVUFBQSxFQUFBLE1BQUEsSUFBQSxJQUFBLE1BQUEsSUFBQTtnQkFDQSxJQUFBLGdCQUFBLEVBQUEsT0FBQSxTQUFBLFNBQUEsS0FBQSxFQUFBLE1BQUEsSUFBQSxHQUFBLE9BQUEsSUFBQSxLQUFBLE9BQUEsRUFBQSxNQUFBLFNBQUEsS0FBQSxNQUFBLFNBQUEsT0FBQSxJQUFBO2dCQUNBLGNBQUEsTUFBQSxLQUFBLFVBQUE7O2VBRUE7O0lBRUE7R0FDQTs7RUFFQSxTQUFBLGFBQUEsT0FBQTtNQUNBLEdBQUEsZ0JBQUEsT0FBQTtNQUNBOztFQUVBLFNBQUEsVUFBQSxLQUFBO0dBQ0EsSUFBQSxZQUFBO0dBQ0EsYUFBQSxLQUFBO0dBQ0EsR0FBQSxlQUFBLEVBQUEsTUFBQSxjQUFBLGFBQUEsS0FBQTtHQUNBOztFQUVBLFNBQUEsZUFBQSxJQUFBO0dBQ0EsSUFBQSxZQUFBO0dBQ0EsYUFBQSxPQUFBLEVBQUEsTUFBQSxjQUFBLE9BQUEsUUFBQSxJQUFBLEtBQUE7R0FDQSxHQUFBLGVBQUEsRUFBQSxNQUFBLGNBQUEsYUFBQSxLQUFBO0dBQ0EsR0FBQSxlQUFBLEdBQUEsWUFBQSxhQUFBLEtBQUE7R0FDQTs7RUFFQSxTQUFBLE1BQUE7R0FDQSxJQUFBO0dBQ0EsSUFBQSxZQUFBLEVBQUEsT0FBQSxFQUFBLE1BQUEsY0FBQTtHQUNBLElBQUEsV0FBQSxHQUFBLFNBQUEsT0FBQSxTQUFBLFFBQUEsRUFBQSxPQUFBLFNBQUEsUUFBQSxPQUFBLFFBQUEsQ0FBQTs7R0FFQSxjQUFBLFFBQUEsU0FBQSxJQUFBLEdBQUE7SUFDQSxJQUFBLElBQUEsUUFBQSxHQUFBLFlBQUEsS0FBQTtLQUNBLGNBQUEsY0FBQTtLQUNBOzs7R0FHQSxRQUFBLE9BQUE7SUFDQSxrQkFBQSxRQUFBLGtCQUFBO0lBQ0EsY0FBQSxHQUFBLFlBQUEsUUFBQTtJQUNBLGFBQUEsR0FBQSxZQUFBO0lBQ0EsY0FBQSxHQUFBLFlBQUEsU0FBQTtJQUNBLGNBQUEsRUFBQSxPQUFBLEVBQUEsTUFBQSxjQUFBO0lBQ0EsY0FBQSxFQUFBLE1BQUEsVUFBQTtNQUNBLGNBQUEsRUFBQSxNQUFBLGFBQUE7SUFDQSxhQUFBLFFBQUE7SUFDQSxXQUFBLEdBQUEsWUFBQTtJQUNBLFlBQUEsR0FBQSxZQUFBO0lBQ0EsYUFBQSxHQUFBLFlBQUE7SUFDQSxjQUFBLFdBQUE7SUFDQSxjQUFBLFNBQUEsT0FBQTtJQUNBLGVBQUEsU0FBQSxPQUFBO0lBQ0EsZUFBQTtLQUNBLE9BQUEsR0FBQSxZQUFBLFNBQUE7S0FDQSxPQUFBLEdBQUEsWUFBQSxTQUFBO0tBQ0EsVUFBQSxHQUFBLFlBQUEsU0FBQSxXQUFBOztJQUVBLGlCQUFBO01BQ0EsUUFBQSxVQUFBO0lBQ0EsUUFBQSxRQUFBOztHQUVBOzs7QUM5SUEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFFBQUEsV0FBQTs7Q0FFQSxRQUFBLFVBQUEsQ0FBQTs7Q0FFQSxTQUFBLFNBQUEsUUFBQTtFQUNBLElBQUEsTUFBQTtFQUNBLElBQUEsVUFBQTtFQUNBLElBQUEsWUFBQTtFQUNBLElBQUEsYUFBQTtFQUNBLElBQUEsb0JBQUE7RUFDQSxJQUFBLGVBQUE7RUFDQSxJQUFBLGFBQUE7RUFDQSxJQUFBLFdBQUE7RUFDQSxJQUFBLFdBQUE7RUFDQSxJQUFBLFdBQUE7O0VBRUEsU0FBQSxNQUFBLE9BQUEsTUFBQSxhQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEsc0JBQUEsUUFBQSxXQUFBLE9BQUEsVUFBQTtHQUNBOztFQUVBLFNBQUEsVUFBQTtHQUNBLE9BQUEsTUFBQSxJQUFBO0dBQ0E7O0VBRUEsU0FBQSxrQkFBQSxJQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEsOEJBQUEsSUFBQSxTQUFBLGtCQUFBLElBQUEsY0FBQSxZQUFBLElBQUE7R0FDQTs7RUFFQSxTQUFBLGFBQUEsT0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLHdCQUFBO0dBQ0E7O0VBRUEsU0FBQSxXQUFBLFFBQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSxnQkFBQTtHQUNBOztFQUVBLFNBQUEsT0FBQSxVQUFBO0dBQ0EsT0FBQSxNQUFBLEtBQUEsY0FBQTtHQUNBOztFQUVBLFNBQUEsV0FBQSxPQUFBO0dBQ0EsT0FBQSxNQUFBLEtBQUEsZ0JBQUE7R0FDQTs7RUFFQSxTQUFBLE9BQUEsYUFBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLGdCQUFBLGFBQUEsU0FBQTtHQUNBOztFQUVBLFNBQUEsVUFBQSxLQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEseUJBQUEsS0FBQSxJQUFBO0dBQ0E7OztBQzNEQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsV0FBQSxzQkFBQTs7RUFFQSxtQkFBQSxXQUFBLEVBQUEsU0FBQSxnQkFBQSxhQUFBLFVBQUEsYUFBQSxXQUFBLGFBQUE7O0VBRUEsU0FBQSxvQkFBQTtHQUNBLElBQUEsS0FBQTtHQUNBLEdBQUEsY0FBQTtHQUNBLEdBQUEsVUFBQTtHQUNBLEdBQUEsWUFBQSxhQUFBLFdBQUE7O0dBRUEsVUFBQSxHQUFBLFNBQUEsU0FBQSxHQUFBO0lBQ0EsS0FBQSxRQUFBLE9BQUEsT0FBQSxHQUFBLFNBQUE7S0FDQSxJQUFBLFFBQUEsUUFBQSxLQUFBO0tBQ0EsR0FBQSxZQUFBLEtBQUE7S0FDQTtJQUNBLEdBQUEsVUFBQSxVQUFBLEdBQUE7SUFDQSxHQUFBLGdCQUFBLFdBQUEsR0FBQTs7O0dBR0EsVUFBQSxHQUFBLFlBQUEsU0FBQSxLQUFBO0lBQ0EsTUFBQSxZQUFBLFFBQUEsUUFBQSxTQUFBLFlBQUE7S0FDQSxHQUFBLGNBQUE7S0FDQSxHQUFBLFlBQUEsUUFBQSxTQUFBLEdBQUE7TUFDQSxHQUFBLFlBQUEsT0FBQSxTQUFBLEdBQUEsWUFBQTs7S0FFQSxHQUFBLFVBQUEsVUFBQSxHQUFBO0tBQ0EsR0FBQSxnQkFBQSxXQUFBLEdBQUE7Ozs7O0dBS0EsVUFBQSxHQUFBLFdBQUEsU0FBQSxLQUFBO0lBQ0EsTUFBQSxZQUFBLFFBQUEsUUFBQSxTQUFBLFlBQUE7S0FDQSxHQUFBLGdCQUFBO0tBQ0EsR0FBQSxhQUFBLFVBQUEsR0FBQTtLQUNBLEdBQUEsZ0JBQUEsV0FBQSxHQUFBOzs7OztHQUtBLElBQUEsU0FBQSxhQUFBO0dBQ0EsUUFBQSxhQUFBLFFBQUEsUUFBQSxTQUFBLE1BQUE7SUFDQSxNQUFBLE9BQUEsU0FBQSxHQUFBLFlBQUEsT0FBQSxHQUFBLFlBQUE7SUFDQSxHQUFBLGFBQUE7SUFDQSxHQUFBLFdBQUE7S0FDQSxjQUFBO0tBQ0EsYUFBQSxDQUFBLE1BQUEsTUFBQSxNQUFBO0tBQ0EsVUFBQSxHQUFBLFdBQUE7S0FDQSxXQUFBLEdBQUEsV0FBQSxRQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsRUFBQSxLQUFBLEVBQUEsTUFBQSxHQUFBLFdBQUEsTUFBQSxFQUFBLEdBQUEsV0FBQSxNQUFBLEVBQUE7Ozs7R0FJQSxNQUFBLFlBQUEsUUFBQSxRQUFBLFNBQUEsWUFBQTtJQUNBLElBQUEsYUFBQTtLQUNBLEdBQUEsY0FBQTtLQUNBLEdBQUEsWUFBQSxRQUFBLFNBQUEsR0FBQTtNQUNBLEdBQUEsWUFBQSxPQUFBLFNBQUEsR0FBQSxZQUFBOztLQUVBLEdBQUEsVUFBQSxVQUFBLEdBQUE7S0FDQSxHQUFBLGVBQUEsV0FBQSxHQUFBOztXQUVBO0tBQ0E7S0FDQTs7OztHQUlBLElBQUEsYUFBQSxTQUFBLFlBQUE7SUFDQSxRQUFBLEVBQUEsUUFBQSxZQUFBLFNBQUEsR0FBQTtNQUNBLE9BQUEsR0FBQTs7OztHQUlBLElBQUEsYUFBQSxTQUFBLFlBQUE7TUFDQSxJQUFBLGNBQUEsRUFBQSxNQUFBLEdBQUEsSUFBQSxZQUFBO1dBQ0EsT0FBQSxFQUFBLE1BQUEsR0FBQSxJQUFBLFlBQUE7ZUFDQSxPQUFBLEVBQUEsY0FBQSxHQUFBLFVBQUEsSUFBQSxNQUFBOzs7O0lBSUEsS0FBQSxhQUFBO0tBQ0EsS0FBQSxJQUFBLElBQUEsWUFBQSxTQUFBLEdBQUEsS0FBQSxHQUFBLEtBQUE7TUFDQSxJQUFBLGNBQUE7TUFDQSxJQUFBLElBQUE7TUFDQSxJQUFBLEtBQUE7TUFDQSxJQUFBLElBQUEsRUFBQSxRQUFBLFlBQUEsR0FBQSxXQUFBLFlBQUEsR0FBQTtNQUNBLEdBQUEsWUFBQSxJQUFBLEVBQUEsUUFBQSxZQUFBLEdBQUEsUUFBQSxZQUFBLEdBQUEsU0FBQSxJQUFBLEVBQUEsUUFBQSxZQUFBLEdBQUEsT0FBQSxZQUFBLEdBQUE7TUFDQSxZQUFBLEdBQUEsR0FBQSxXQUFBO01BQ0EsWUFBQSxHQUFBLEdBQUEsZUFBQSxZQUFBLEdBQUEsUUFBQTtNQUNBLElBQUEsU0FBQTtNQUNBLE9BQUEsS0FBQSxZQUFBLEdBQUEsU0FBQSxZQUFBLEdBQUE7TUFDQSxPQUFBLFNBQUEsWUFBQSxHQUFBLFFBQUE7TUFDQSxPQUFBLFFBQUEsWUFBQSxHQUFBO01BQ0EsWUFBQSxHQUFBLEdBQUEsSUFBQSxLQUFBO01BQ0E7O0lBRUEsT0FBQTs7O0dBR0EsR0FBQSxJQUFBLFlBQUEsVUFBQSxPQUFBO1VBQ0EsVUFBQTs7OztBQzdHQSxDQUFBLENBQUEsVUFBQTtDQUNBO0NBQ0E7R0FDQSxPQUFBO0dBQ0EsT0FBQTs7RUFFQSxhQUFBLFVBQUEsQ0FBQSxpQkFBQSxxQkFBQTs7RUFFQSxTQUFBLGFBQUEsZUFBQSxvQkFBQSxtQkFBQTtNQUNBO1FBQ0EsVUFBQTs7TUFFQTtXQUNBLE1BQUEsT0FBQTtjQUNBLE1BQUE7Y0FDQSxXQUFBO2NBQ0EsV0FBQTs7V0FFQSxNQUFBLGFBQUE7Y0FDQSxNQUFBO2NBQ0EsYUFBQTtjQUNBLGFBQUE7Y0FDQSxlQUFBOztXQUVBLE1BQUEsV0FBQTtjQUNBLE1BQUE7Y0FDQSxjQUFBOzs7O0dBSUE7S0FDQSxNQUFBLFlBQUE7Y0FDQSxVQUFBO2NBQ0EsS0FBQTtjQUNBLGFBQUE7Y0FDQSxPQUFBO2tCQUNBLGdCQUFBO2tCQUNBLE9BQUEsQ0FBQTs7O1dBR0EsTUFBQSxrQkFBQTtjQUNBLEtBQUE7Y0FDQSxhQUFBO2NBQ0EsYUFBQTtjQUNBLGVBQUE7Y0FDQSxPQUFBO2tCQUNBLGdCQUFBO2tCQUNBLE9BQUEsQ0FBQTs7O1dBR0EsTUFBQSxrQkFBQTtjQUNBLE1BQUE7Y0FDQSxjQUFBO2NBQ0EsYUFBQTtjQUNBLGVBQUE7Y0FDQSxPQUFBO2tCQUNBLGdCQUFBO2tCQUNBLE9BQUEsQ0FBQTs7O1dBR0EsTUFBQSxnQkFBQTtjQUNBLFdBQUE7Y0FDQSxXQUFBOztXQUVBLE1BQUEsdUJBQUE7Y0FDQSxLQUFBO2NBQ0EsYUFBQTtjQUNBLGFBQUE7Y0FDQSxlQUFBOztXQUVBLE1BQUEsb0JBQUE7Y0FDQSxNQUFBO2NBQ0EsY0FBQTtjQUNBLGFBQUE7Y0FDQSxlQUFBOztXQUVBLE1BQUEscUJBQUE7Y0FDQSxNQUFBO2NBQ0EsY0FBQTtjQUNBLGFBQUE7Y0FDQSxlQUFBOztXQUVBLE1BQUEscUJBQUE7Y0FDQSxNQUFBO2NBQ0EsY0FBQTtjQUNBLGFBQUE7Y0FDQSxlQUFBOztXQUVBLE1BQUEsa0JBQUE7Y0FDQSxNQUFBO2NBQ0EsY0FBQTtjQUNBLGFBQUE7Y0FDQSxlQUFBOztXQUVBLE1BQUEsb0JBQUE7Y0FDQSxXQUFBO2NBQ0EsV0FBQTs7V0FFQSxNQUFBLDJCQUFBO2NBQ0EsS0FBQTtjQUNBLGFBQUE7Y0FDQSxhQUFBO2NBQ0EsZUFBQTs7V0FFQSxNQUFBLHlCQUFBO1dBQ0EsTUFBQTtXQUNBLFdBQUE7O1dBRUEsTUFBQSwwQkFBQTtjQUNBLEtBQUE7Y0FDQSxlQUFBO2NBQ0EsZUFBQTtjQUNBLGVBQUE7O1dBRUEsTUFBQSxrQkFBQTtjQUNBLFdBQUE7Y0FDQSxXQUFBOztXQUVBLE1BQUEsd0JBQUE7Y0FDQSxLQUFBO2NBQ0EsZUFBQTtjQUNBLGVBQUE7Y0FDQSxlQUFBOztXQUVBLE1BQUEsd0JBQUE7Y0FDQSxLQUFBO2NBQ0EsZUFBQTtjQUNBLGVBQUE7Y0FDQSxlQUFBOztHQUVBO1dBQ0EsTUFBQSxXQUFBO2NBQ0EsV0FBQTtjQUNBLE1BQUE7Y0FDQSxjQUFBO2NBQ0EsT0FBQTtrQkFDQSxnQkFBQTtrQkFDQSxPQUFBLENBQUE7OztXQUdBLE1BQUEsa0JBQUE7Y0FDQSxXQUFBO2NBQ0EsTUFBQTtjQUNBLFdBQUE7O1dBRUEsTUFBQSx3QkFBQTtjQUNBLE1BQUE7Y0FDQSxjQUFBO2NBQ0EsYUFBQTtjQUNBLGVBQUE7O1dBRUEsTUFBQSwwQkFBQTtjQUNBLE1BQUE7Y0FDQSxjQUFBO2NBQ0EsYUFBQTtjQUNBLGVBQUE7O1dBRUEsTUFBQSw2QkFBQTtjQUNBLE1BQUE7Y0FDQSxjQUFBO2NBQ0EsYUFBQTtjQUNBLGVBQUE7O1dBRUEsTUFBQSw2QkFBQTtjQUNBLE1BQUE7Y0FDQSxjQUFBO2NBQ0EsYUFBQTtjQUNBLGVBQUE7O1dBRUEsTUFBQSwwQkFBQTtjQUNBLE1BQUE7Y0FDQSxjQUFBO2NBQ0EsYUFBQTtjQUNBLGVBQUE7O1dBRUEsTUFBQSxvQkFBQTtjQUNBLFdBQUE7Y0FDQSxNQUFBO2NBQ0EsV0FBQTs7V0FFQSxNQUFBLDBCQUFBO2NBQ0EsTUFBQTtjQUNBLGFBQUE7Y0FDQSxhQUFBO2NBQ0EsZUFBQTs7V0FFQSxNQUFBLHlCQUFBO2NBQ0EsTUFBQTtjQUNBLGFBQUE7Y0FDQSxhQUFBO2NBQ0EsZUFBQTs7Ozs7QUM5TEEsQ0FBQSxVQUFBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxXQUFBLHNCQUFBOztDQUVBLG9CQUFBLFVBQUEsQ0FBQSxhQUFBLGFBQUEsV0FBQTtDQUNBLFNBQUEsb0JBQUEsV0FBQSxXQUFBLFNBQUEsVUFBQTtFQUNBLElBQUEsS0FBQTs7RUFFQSxVQUFBLGFBQUEsUUFBQSxhQUFBLFFBQUEsU0FBQSxTQUFBO0dBQ0EsT0FBQSxHQUFBLFdBQUE7OztFQUdBLFFBQUEsa0JBQUEsUUFBQSxTQUFBLE1BQUE7R0FDQSxPQUFBLEdBQUEsUUFBQTs7O0VBR0EsVUFBQSxHQUFBLFlBQUEsU0FBQSxLQUFBO0dBQ0EsT0FBQSxHQUFBLE1BQUEsS0FBQTs7O0VBR0EsVUFBQSxHQUFBLGlCQUFBLFNBQUEsZUFBQTtHQUNBLEdBQUEsUUFBQSxHQUFBLE1BQUEsT0FBQSxTQUFBLE1BQUE7SUFDQSxPQUFBLEtBQUEsWUFBQSxlQUFBOzs7O0VBSUEsVUFBQSxHQUFBLGFBQUEsU0FBQSxXQUFBO0dBQ0EsR0FBQSxRQUFBLEdBQUEsTUFBQSxPQUFBLFNBQUEsTUFBQTtJQUNBLE9BQUEsS0FBQSxZQUFBLFdBQUE7Ozs7RUFJQSxHQUFBLElBQUEsWUFBQSxVQUFBLE9BQUE7U0FDQSxPQUFBLFVBQUE7Ozs7QUN2Q0EsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFdBQUEsd0JBQUE7O0NBRUEsc0JBQUEsVUFBQSxDQUFBLFdBQUE7O0NBRUEsU0FBQSx1QkFBQSxVQUFBLFdBQUE7RUFDQSxJQUFBLEtBQUE7RUFDQSxJQUFBLFNBQUEsUUFBQTs7RUFFQSxVQUFBLFlBQUEsUUFBQSxRQUFBLFNBQUEsT0FBQTtHQUNBLEdBQUEsV0FBQTtHQUNBLEdBQUEsZUFBQSxHQUFBLE9BQUEsUUFBQSxPQUFBLFNBQUEsUUFBQTtJQUNBLE9BQUEsT0FBQSxVQUFBOzs7RUFHQTs7QUN2QkEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFdBQUEsNEJBQUE7O0NBRUEsMEJBQUEsVUFBQSxDQUFBLGFBQUEsZUFBQSxhQUFBLGFBQUEsV0FBQSxXQUFBLFVBQUE7O0NBRUEsU0FBQSwwQkFBQSxXQUFBLGFBQUEsV0FBQSxXQUFBLFNBQUEsU0FBQSxRQUFBLGFBQUE7RUFDQSxJQUFBLEtBQUE7RUFDQSxJQUFBLFVBQUEsUUFBQTtFQUNBLEdBQUEsU0FBQTtFQUNBLEdBQUEsUUFBQTs7RUFFQSxVQUFBLFlBQUEsUUFBQSxRQUFBLFNBQUEsT0FBQTtHQUNBLEdBQUEsU0FBQTtHQUNBLEdBQUEsV0FBQSxPQUFBLE9BQUEsS0FBQSxNQUFBLFFBQUEsS0FBQTtHQUNBLElBQUEsVUFBQSxFQUFBLE1BQUEsT0FBQSxRQUFBLE9BQUEsU0FBQSxRQUFBLEVBQUEsT0FBQSxPQUFBLFFBQUEsUUFBQTtHQUNBLEdBQUEsT0FBQSxpQkFBQSxPQUFBO0dBQ0EsR0FBQSxPQUFBLGtCQUFBO0dBQ0EsR0FBQSxjQUFBO0dBQ0EsRUFBQSxJQUFBLEdBQUEsT0FBQSxRQUFBLFNBQUEsT0FBQTtJQUNBLE9BQUEsV0FBQSxFQUFBLE1BQUEsRUFBQSxLQUFBLE1BQUEsR0FBQSxPQUFBLFFBQUEsT0FBQSxHQUFBO0lBQ0EsT0FBQSxVQUFBLE9BQUEsUUFBQSxPQUFBOzs7O0VBSUEsU0FBQSxNQUFBLE9BQUE7R0FDQSxPQUFBLFdBQUEsQ0FBQSxPQUFBO0dBQ0EsT0FBQSxZQUFBLENBQUEsT0FBQTtHQUNBLE9BQUEsWUFBQSxPQUFBLFFBQUEsT0FBQTtHQUNBOzs7RUFHQSxTQUFBLE1BQUE7R0FDQSxJQUFBLGlCQUFBLEdBQUEsT0FBQSxRQUFBLE9BQUEsU0FBQSxRQUFBO0lBQ0EsT0FBQSxPQUFBOzs7R0FHQSxVQUFBLGNBQUE7SUFDQSxhQUFBLEdBQUEsT0FBQTtJQUNBLGFBQUEsR0FBQSxPQUFBO0lBQ0EsZUFBQSxlQUFBO0lBQ0EsaUJBQUEsR0FBQSxPQUFBO0lBQ0EsWUFBQSxHQUFBLE9BQUE7O0dBRUEsUUFBQSxRQUFBO0dBQ0E7RUFDQTs7O0FDckRBLENBQUEsVUFBQTtDQUNBOzs7Ozs7O0NBT0E7R0FDQSxPQUFBLGdCQUFBO0dBQ0EsV0FBQSxxQkFBQTs7Q0FFQSxtQkFBQSxVQUFBLENBQUEsZUFBQSxTQUFBLFVBQUEsYUFBQSxVQUFBO0NBQ0EsU0FBQSxtQkFBQSxhQUFBLE9BQUEsUUFBQSxXQUFBLFFBQUEsUUFBQTtFQUNBLElBQUEsS0FBQTtFQUNBLFFBQUEsTUFBQSxRQUFBLGFBQUEsUUFBQSxTQUFBLE1BQUE7R0FDQSxHQUFBLFFBQUE7R0FDQSxRQUFBLFVBQUEsR0FBQSxNQUFBLGFBQUEsUUFBQSxLQUFBLFFBQUEsU0FBQSxNQUFBO0tBQ0EsT0FBQSxHQUFBLGNBQUE7Ozs7RUFJQSxVQUFBLGFBQUEsUUFBQSxhQUFBLFFBQUEsU0FBQSxTQUFBO01BQ0EsT0FBQSxHQUFBLGFBQUE7OztFQUdBLE9BQUEsUUFBQSxRQUFBLFNBQUEsS0FBQTtNQUNBLE9BQUEsR0FBQSxXQUFBOzs7RUFHQSxHQUFBLGFBQUEsWUFBQTtLQUNBLElBQUEsZ0JBQUEsT0FBQSxLQUFBO09BQ0EsYUFBQTtPQUNBLFlBQUE7T0FDQSxNQUFBO09BQ0EsVUFBQTtRQUNBLFNBQUEsVUFBQTtTQUNBLE9BQUEsR0FBQSxLQUFBOztRQUVBLGFBQUEsVUFBQTtTQUNBLE9BQUEsR0FBQTs7UUFFQSxXQUFBLFVBQUE7U0FDQSxPQUFBLEdBQUE7O1FBRUEsUUFBQSxVQUFBO1NBQ0EsT0FBQTs7UUFFQSxjQUFBLFVBQUE7U0FDQSxPQUFBOzs7Ozs7R0FNQSxHQUFBLFdBQUEsVUFBQTtJQUNBLElBQUEsZ0JBQUEsT0FBQSxLQUFBO09BQ0EsYUFBQTtPQUNBLFlBQUE7T0FDQSxNQUFBO09BQ0EsVUFBQTtRQUNBLFNBQUEsVUFBQTtTQUNBLE9BQUEsR0FBQSxLQUFBLEdBQUEsTUFBQSxhQUFBLFFBQUE7O1FBRUEsYUFBQSxVQUFBO1NBQ0EsT0FBQSxHQUFBOztRQUVBLFdBQUEsVUFBQTtTQUNBLEtBQUEsSUFBQSxJQUFBLEdBQUEsU0FBQSxTQUFBLEdBQUEsS0FBQSxHQUFBLEtBQUE7VUFDQSxLQUFBLElBQUEsSUFBQSxHQUFBLFlBQUEsS0FBQSxTQUFBLEdBQUEsS0FBQSxHQUFBLEtBQUE7V0FDQSxLQUFBLEdBQUEsU0FBQSxHQUFBLGNBQUEsR0FBQSxZQUFBLEtBQUEsR0FBQSxZQUFBO1lBQ0EsT0FBQSxHQUFBLFNBQUEsR0FBQSxZQUFBO1lBQ0E7V0FDQTtVQUNBO1NBQ0EsT0FBQSxHQUFBOztRQUVBLFFBQUEsVUFBQTtTQUNBLE9BQUE7O1FBRUEsY0FBQSxVQUFBO1NBQ0EsT0FBQSxHQUFBOzs7Ozs7O0FDakZBLENBQUEsVUFBQTs7Ozs7O0NBTUE7R0FDQSxPQUFBLGdCQUFBO0dBQ0EsV0FBQSxxQkFBQTs7Q0FFQSxtQkFBQSxVQUFBLENBQUEsYUFBQSxnQkFBQSxhQUFBLFdBQUE7Q0FDQSxTQUFBLG1CQUFBLFdBQUEsY0FBQSxXQUFBLFNBQUEsR0FBQTtFQUNBLElBQUEsS0FBQTtFQUNBLElBQUEsV0FBQSxhQUFBOztFQUVBLFVBQUEsb0JBQUEsVUFBQSxRQUFBLFNBQUEsT0FBQTtHQUNBLEdBQUEsU0FBQTtHQUNBLEdBQUEsY0FBQSxHQUFBLE9BQUEsUUFBQSxPQUFBLFNBQUEsUUFBQTtJQUNBLE9BQUEsT0FBQSxVQUFBOzs7Ozs7QUNsQkEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFdBQUEsMEJBQUE7O0NBRUEsdUJBQUEsVUFBQSxDQUFBLGFBQUEsZUFBQSxhQUFBLGFBQUEsV0FBQSxXQUFBLFVBQUE7Q0FDQSxTQUFBLHVCQUFBLFdBQUEsYUFBQSxXQUFBLFdBQUEsU0FBQSxTQUFBLFFBQUEsYUFBQTtFQUNBLElBQUEsT0FBQTtFQUNBLEdBQUEsUUFBQTtFQUNBLEdBQUEsU0FBQTs7RUFFQSxJQUFBLFNBQUEsYUFBQTs7RUFFQSxVQUFBLG9CQUFBLFFBQUEsUUFBQSxTQUFBLE9BQUE7R0FDQSxHQUFBLFNBQUE7R0FDQSxHQUFBLFdBQUEsT0FBQSxPQUFBLEtBQUEsTUFBQSxRQUFBLEtBQUE7R0FDQSxJQUFBLFVBQUEsRUFBQSxNQUFBLE9BQUEsUUFBQSxPQUFBLFNBQUEsUUFBQSxFQUFBLE9BQUEsT0FBQSxRQUFBLFFBQUE7R0FDQSxHQUFBLE9BQUEsaUJBQUEsT0FBQTtHQUNBLEdBQUEsT0FBQSxrQkFBQTtHQUNBLEdBQUEsY0FBQTtHQUNBLEVBQUEsSUFBQSxHQUFBLE9BQUEsUUFBQSxTQUFBLE9BQUE7SUFDQSxPQUFBLFdBQUEsRUFBQSxNQUFBLEVBQUEsS0FBQSxNQUFBLEdBQUEsT0FBQSxRQUFBLE9BQUEsR0FBQTtJQUNBLE9BQUEsVUFBQSxPQUFBLFFBQUEsT0FBQTs7OztFQUlBLFNBQUEsTUFBQSxPQUFBO0dBQ0EsT0FBQSxTQUFBLENBQUEsT0FBQTtHQUNBLE9BQUEsWUFBQSxDQUFBLE9BQUE7R0FDQSxPQUFBLFVBQUEsT0FBQSxRQUFBLE9BQUE7R0FDQTs7RUFFQSxTQUFBLE1BQUE7R0FDQSxJQUFBLGdCQUFBLEVBQUEsUUFBQSxHQUFBLE9BQUEsUUFBQSxTQUFBLE9BQUE7SUFDQSxPQUFBLFVBQUEsT0FBQSxRQUFBLE9BQUE7O0lBRUEsSUFBQSxPQUFBLFFBQUEsRUFBQSxPQUFBLE9BQUEsZUFBQSxFQUFBLE9BQUEsV0FBQTs7R0FFQSxPQUFBLGFBQUE7O01BRUEsSUFBQSxrQkFBQTtNQUNBLElBQUEsb0JBQUE7TUFDQSxJQUFBLGNBQUEsYUFBQSxTQUFBO01BQ0EsS0FBQSxJQUFBLE9BQUEsY0FBQTtPQUNBLElBQUEsYUFBQTtVQUNBLGNBQUE7VUFDQSxjQUFBO1VBQ0EsY0FBQSxHQUFBLE9BQUE7VUFDQSxjQUFBLGFBQUEsV0FBQTtVQUNBLGNBQUEsYUFBQSxXQUFBO1VBQ0EsY0FBQSxhQUFBLFNBQUE7VUFDQSxTQUFBLGFBQUEsT0FBQTtVQUNBLFVBQUEsYUFBQSxPQUFBO1VBQ0EsVUFBQTtVQUNBLFdBQUEsQ0FBQTtVQUNBLFdBQUEsUUFBQTs7O09BR0EsS0FBQSxZQUFBLFFBQUEsSUFBQSxNQUFBLEdBQUEsSUFBQSxPQUFBLE9BQUEsQ0FBQSxJQUFBOztLQUVBLFdBQUEsVUFBQSxFQUFBLE1BQUEsYUFBQSxLQUFBO0tBQ0EsV0FBQSxRQUFBO0tBQ0EsV0FBQSxjQUFBLEVBQUEsSUFBQSxhQUFBLE1BQUEsU0FBQSxPQUFBLEVBQUEsT0FBQSxPQUFBLGVBQUE7S0FDQSxlQUFBLEtBQUE7S0FDQSxrQkFBQSxLQUFBLE1BQUEsa0JBQUEsV0FBQTtLQUNBO09BQ0E7O0dBRUEsSUFBQSxpQkFBQSxHQUFBLE9BQUEsUUFBQSxPQUFBLFNBQUEsUUFBQTtJQUNBLE9BQUEsT0FBQTs7O0dBR0EsR0FBQSxPQUFBLFFBQUEsUUFBQSxTQUFBLE9BQUE7SUFDQSxPQUFBLFlBQUEsT0FBQSxrQkFBQSxRQUFBLE9BQUEsT0FBQSxDQUFBLElBQUE7OztHQUdBLFVBQUEsY0FBQTtJQUNBLGFBQUEsR0FBQSxPQUFBO0lBQ0EsYUFBQSxHQUFBLE9BQUE7SUFDQSxlQUFBLGVBQUE7SUFDQSxpQkFBQSxHQUFBLE9BQUE7SUFDQSxZQUFBLEdBQUEsT0FBQTs7R0FFQSxRQUFBLFFBQUE7R0FDQTs7O0FDMUZBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxRQUFBLFNBQUE7O0NBRUEsT0FBQSxVQUFBLENBQUEsS0FBQTs7Q0FFQSxTQUFBLFFBQUE7RUFDQSxJQUFBLE1BQUE7RUFDQSxJQUFBLDRCQUFBLFdBQUE7U0FDQSxJQUFBLFdBQUEsR0FBQTtTQUNBLFVBQUEsWUFBQTthQUNBLFNBQUEsVUFBQSxFQUFBLFNBQUEsUUFBQSxTQUFBO2FBQ0EsU0FBQSxPQUFBLEVBQUEsU0FBQSxRQUFBOztTQUVBLE9BQUEsU0FBQTs7O0tBR0EsSUFBQSxvQkFBQSxTQUFBLFFBQUE7TUFDQSxJQUFBLFdBQUEsR0FBQTs7TUFFQSxJQUFBLFdBQUEsSUFBQSxPQUFBLEtBQUE7TUFDQSxJQUFBLFVBQUE7UUFDQSxTQUFBLFFBQUEsRUFBQSxXQUFBLFdBQUEsVUFBQSxTQUFBLFFBQUE7V0FDQSxJQUFBLFVBQUEsT0FBQSxLQUFBLGVBQUEsSUFBQTtjQUNBLFNBQUEsUUFBQSxRQUFBLEdBQUEsU0FBQTs7Z0JBRUE7Y0FDQSxTQUFBLFNBQUEsdUJBQUE7Ozs7S0FJQSxPQUFBLFNBQUE7OztLQUdBLElBQUEsb0JBQUEsU0FBQSxNQUFBO01BQ0EsT0FBQSxNQUFBLElBQUEsNkJBQUE7OztLQUdBLElBQUEsY0FBQSxVQUFBLFdBQUEsUUFBQTs7TUFFQSxJQUFBLE9BQUEsT0FBQSxVQUFBLFdBQUEsYUFBQTtLQUNBLE9BQUEsVUFBQSxRQUFBLFdBQUE7T0FDQSxPQUFBLE1BQUEsS0FBQSxLQUFBOzs7R0FHQSxJQUFBLElBQUE7R0FDQSxJQUFBLE9BQUEsQ0FBQSxPQUFBLE1BQUEsU0FBQSxNQUFBO0dBQ0EsSUFBQSxPQUFBLENBQUEsT0FBQSxNQUFBLFNBQUEsTUFBQTtHQUNBLElBQUEsSUFBQSxLQUFBLElBQUEsS0FBQSxLQUFBLEtBQUEsSUFBQSxLQUFBO1dBQ0EsS0FBQSxJQUFBLFNBQUEsSUFBQSxXQUFBLEtBQUEsSUFBQSxPQUFBLElBQUE7V0FDQSxLQUFBLElBQUEsS0FBQSxLQUFBLEtBQUEsSUFBQSxLQUFBO0dBQ0EsSUFBQSxJQUFBLElBQUEsS0FBQSxNQUFBLEtBQUEsS0FBQSxJQUFBLEtBQUEsS0FBQSxFQUFBO0dBQ0EsT0FBQSxJQUFBOzs7S0FHQSxJQUFBLGtCQUFBLFVBQUE7TUFDQSxPQUFBLEVBQUEsTUFBQSxhQUFBLE9BQUEsYUFBQSxVQUFBOztFQUVBOztBQ2pFQSxDQUFBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxXQUFBLGtCQUFBOztFQUVBLGdCQUFBLFVBQUEsQ0FBQSxXQUFBLFNBQUEsU0FBQSxZQUFBLFNBQUE7O0VBRUEsU0FBQSxnQkFBQSxTQUFBLE9BQUEsT0FBQSxVQUFBLE9BQUEsV0FBQTtHQUNBLElBQUEsT0FBQTtHQUNBLEdBQUEsUUFBQTtHQUNBLEdBQUEsUUFBQTs7R0FFQSxTQUFBLE9BQUE7SUFDQSxRQUFBLE1BQUEsR0FBQSxNQUFBLFFBQUEsU0FBQSxLQUFBO0tBQ0EsSUFBQSxLQUFBLFNBQUE7TUFDQSxNQUFBLElBQUEsTUFBQSxLQUFBO01BQ0EsTUFBQSxTQUFBLFFBQUEsT0FBQSxvQkFBQSxLQUFBO01BQ0EsT0FBQSxLQUFBO1lBQ0E7TUFDQSxPQUFBLFFBQUEsSUFBQTs7T0FFQSxLQUFBLFNBQUEsTUFBQTtLQUNBLFVBQUEsS0FBQTtLQUNBLFVBQUEsS0FBQTtPQUNBLEtBQUEsVUFBQTtLQUNBLElBQUEsVUFBQSxZQUFBLE9BQUEsUUFBQSxTQUFBO01BQ0EsSUFBQSxhQUFBLFVBQUEsWUFBQSxPQUFBO01BQ0EsSUFBQSxXQUFBLE1BQUEsV0FBQSxPQUFBLEdBQUEsV0FBQSxXQUFBLE1BQUE7T0FDQSxPQUFBLE9BQUEsR0FBQTtZQUNBO09BQ0EsT0FBQSxPQUFBLEdBQUE7T0FDQTtVQUNBO01BQ0EsT0FBQSxPQUFBLEdBQUE7OztJQUdBO0dBQ0E7O0FDM0NBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUEsY0FBQTtHQUNBLFdBQUEsbUJBQUE7O0NBRUEsaUJBQUEsVUFBQTtDQUNBLFNBQUEsaUJBQUEsVUFBQSxRQUFBLFdBQUEsT0FBQSxXQUFBLFNBQUEsUUFBQTtFQUNBLElBQUEsS0FBQTtFQUNBLEdBQUEsZUFBQSxTQUFBLE9BQUE7RUFDQSxHQUFBLFNBQUE7OztFQUdBLFVBQUEsVUFBQTtHQUNBLE9BQUEsT0FBQTtHQUNBLEdBQUEsZUFBQSxTQUFBLE9BQUE7S0FDQTs7RUFFQSxTQUFBLFFBQUE7R0FDQSxJQUFBLFVBQUEsUUFBQTtHQUNBLFVBQUEsS0FBQTtHQUNBLE9BQUEsR0FBQTtHQUNBOzs7O0FDM0JBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUEsV0FBQTtHQUNBLFdBQUEscUJBQUE7O0NBRUEsbUJBQUEsVUFBQSxDQUFBLGVBQUE7Q0FDQSxTQUFBLG1CQUFBLGFBQUEsT0FBQTtFQUNBLElBQUEsS0FBQTs7RUFFQSxPQUFBLDRCQUFBLEtBQUEsU0FBQSxNQUFBO1NBQ0EsR0FBQSxPQUFBLE1BQUEsTUFBQTtTQUNBLEdBQUEsT0FBQSxNQUFBLE1BQUE7U0FDQSxHQUFBLE9BQUEsT0FBQTs7O0tBR0EsUUFBQSxPQUFBLElBQUE7U0FDQSxRQUFBO2FBQ0EsS0FBQTthQUNBLEtBQUE7YUFDQSxNQUFBOztTQUVBLFVBQUE7YUFDQSxNQUFBOzs7O0tBSUEsWUFBQSxTQUFBLEtBQUEsU0FBQSxLQUFBO09BQ0EsSUFBQSxhQUFBLEdBQUEsU0FBQSxLQUFBO09BQ0EsSUFBQSxHQUFBLGdCQUFBLFVBQUEsR0FBQTtTQUNBLElBQUEsUUFBQSxFQUFBO1NBQ0EsV0FBQSxTQUFBOztTQUVBLG1CQUFBLEtBQUEsTUFBQTs7Ozs7O0FDdENBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxXQUFBLCtCQUFBOztDQUVBLDZCQUFBLFVBQUEsQ0FBQSxXQUFBLGFBQUEsVUFBQTtDQUNBLFNBQUEsNkJBQUEsU0FBQSxXQUFBLFFBQUEsZUFBQTtFQUNBLElBQUEsS0FBQTtFQUNBLEdBQUEsT0FBQTtFQUNBLEdBQUEsT0FBQTtFQUNBLEdBQUEsU0FBQTs7RUFFQSxTQUFBLE1BQUE7R0FDQSxJQUFBLEVBQUEsUUFBQSxHQUFBLE9BQUE7SUFDQSxRQUFBLElBQUE7U0FDQTtJQUNBLElBQUEsQ0FBQSxHQUFBLEtBQUEsU0FBQTtLQUNBLFFBQUEsSUFBQTtLQUNBLElBQUEsQ0FBQSxHQUFBLEtBQUEsVUFBQTtNQUNBLFFBQUEsSUFBQTtNQUNBO1dBQ0EsSUFBQSxDQUFBLEdBQUEsS0FBQSxVQUFBO0tBQ0EsUUFBQSxJQUFBO1NBQ0E7S0FDQSxRQUFBLFNBQUEsR0FBQTtLQUNBLFVBQUEsV0FBQSxPQUFBO0tBQ0EsZUFBQSxNQUFBLEdBQUE7S0FDQTtJQUNBO0dBQ0E7O0VBRUEsU0FBQSxRQUFBO0dBQ0EsZUFBQSxRQUFBO0dBQ0E7RUFDQTs7QUN4Q0EsQ0FBQSxVQUFBO0NBQ0E7Ozs7Ozs7Q0FPQTtHQUNBLE9BQUE7R0FDQSxXQUFBLHVCQUFBOztDQUVBLHFCQUFBLFVBQUEsQ0FBQSxhQUFBLGFBQUEsZ0JBQUEsVUFBQSxVQUFBLFVBQUE7O0NBRUEsU0FBQSxzQkFBQSxXQUFBLFdBQUEsY0FBQSxRQUFBLFFBQUEsUUFBQSxRQUFBO0VBQ0EsSUFBQSxLQUFBOztFQUVBLEdBQUEsU0FBQTtFQUNBLEdBQUEsZ0JBQUE7RUFDQSxJQUFBLGdCQUFBO0VBQ0EsR0FBQSxjQUFBLFFBQUE7RUFDQSxHQUFBLGFBQUE7RUFDQSxHQUFBLE9BQUE7RUFDQSxHQUFBLGVBQUE7RUFDQSxHQUFBLFNBQUE7RUFDQSxHQUFBLGtCQUFBO0VBQ0EsR0FBQSxjQUFBO0VBQ0EsR0FBQSxrQkFBQTs7RUFFQSxJQUFBLGFBQUEsVUFBQTtHQUNBLFVBQUEsYUFBQSxhQUFBLFFBQUEsUUFBQSxTQUFBLFFBQUE7SUFDQSxHQUFBLFVBQUE7SUFDQSxHQUFBLFFBQUEsUUFBQSxTQUFBLE9BQUE7S0FDQSxPQUFBLGNBQUEsT0FBQSxTQUFBLE9BQUEsWUFBQTs7Ozs7RUFLQTs7RUFFQSxJQUFBLG9CQUFBLFNBQUEsTUFBQTtHQUNBLFFBQUEsV0FBQSxjQUFBLE1BQUEsUUFBQSxTQUFBLEtBQUE7SUFDQSxVQUFBLFdBQUEsS0FBQTtJQUNBLEdBQUEsV0FBQTtJQUNBOzs7O0VBSUEsSUFBQSxlQUFBLFNBQUEsTUFBQTtHQUNBLEdBQUEsZ0JBQUE7R0FDQSxVQUFBLGFBQUEsZUFBQSxRQUFBLFVBQUE7SUFDQSxHQUFBLGdCQUFBOztHQUVBLEdBQUEsV0FBQTtHQUNBOzs7RUFHQSxJQUFBLFlBQUEsU0FBQSxNQUFBO0dBQ0EsR0FBQSxnQkFBQTtHQUNBLEdBQUEsV0FBQTs7O0VBR0EsU0FBQSxNQUFBO0dBQ0EsSUFBQSxZQUFBLEVBQUEsT0FBQSxHQUFBLFFBQUEsT0FBQSxTQUFBLFFBQUEsRUFBQSxPQUFBLE9BQUEsUUFBQSxVQUFBO0dBQ0EsVUFBQSxPQUFBO0lBQ0EsU0FBQSxhQUFBO0lBQ0EsVUFBQSxFQUFBLE9BQUEsR0FBQSxVQUFBO0lBQ0EsWUFBQTtJQUNBLFdBQUEsVUFBQTtJQUNBLGdCQUFBLFVBQUE7TUFDQSxRQUFBLFVBQUE7SUFDQSxRQUFBLFFBQUE7O0dBRUE7O0VBRUEsU0FBQSxjQUFBO0dBQ0EsSUFBQSxnQkFBQSxPQUFBLEtBQUE7T0FDQSxhQUFBO09BQ0EsWUFBQTtPQUNBLE1BQUE7T0FDQSxVQUFBO1FBQ0EsU0FBQSxVQUFBO1NBQ0EsT0FBQSxhQUFBOztRQUVBLFNBQUEsVUFBQTtTQUNBLE9BQUEsRUFBQSxjQUFBOzs7OztNQUtBLGNBQUEsT0FBQSxLQUFBLFNBQUEsT0FBQTtPQUNBLElBQUEsUUFBQTtRQUNBOztPQUVBLEdBQUEsT0FBQSxLQUFBLEVBQUEsT0FBQSxhQUFBLEtBQUEsYUFBQSxPQUFBLE9BQUEsVUFBQSxPQUFBOztHQUVBOztFQUVBLFNBQUEsT0FBQSxPQUFBO0dBQ0EsSUFBQSxZQUFBO0dBQ0EsSUFBQSxnQkFBQSxPQUFBLEtBQUE7T0FDQSxhQUFBO09BQ0EsWUFBQTtPQUNBLE1BQUE7T0FDQSxVQUFBO1FBQ0EsU0FBQSxVQUFBO1NBQ0EsT0FBQSxhQUFBOztRQUVBLFNBQUEsVUFBQTtTQUNBLE9BQUE7VUFDQSxXQUFBLE9BQUE7VUFDQSxLQUFBLE9BQUE7VUFDQSxPQUFBLE9BQUE7VUFDQSxRQUFBLE9BQUE7VUFDQSxXQUFBLE9BQUE7VUFDQSxRQUFBLE9BQUE7VUFDQSxZQUFBLE9BQUE7VUFDQSxjQUFBLE9BQUEsWUFBQSxZQUFBLEtBQUEsT0FBQSxZQUFBOzs7Ozs7TUFNQSxjQUFBLE9BQUEsS0FBQSxTQUFBLE9BQUE7T0FDQTtPQUNBLEdBQUEsT0FBQSxLQUFBLEVBQUEsT0FBQSxVQUFBLE1BQUEsVUFBQSxPQUFBOztHQUVBOztFQUVBLFNBQUEsZ0JBQUEsT0FBQTtHQUNBLElBQUEsUUFBQSxHQUFBLFFBQUEsT0FBQSxTQUFBLFFBQUE7SUFDQSxPQUFBLE9BQUE7OztHQUdBLElBQUEsTUFBQSxTQUFBLElBQUE7SUFDQSxJQUFBLGdCQUFBLE9BQUEsS0FBQTtRQUNBLGFBQUE7UUFDQSxZQUFBO1FBQ0EsTUFBQTtRQUNBLFVBQUE7U0FDQSxTQUFBLFVBQUE7VUFDQSxPQUFBOzs7OztJQUtBLGNBQUEsT0FBQSxLQUFBLFNBQUEsT0FBQTtLQUNBO0tBQ0EsR0FBQSxPQUFBLEtBQUEsRUFBQSxPQUFBLFNBQUEsTUFBQSxPQUFBLE9BQUE7O1VBRUE7SUFDQSxHQUFBLE9BQUEsS0FBQSxFQUFBLE9BQUEsWUFBQSxNQUFBLFNBQUEsT0FBQSxPQUFBO0lBQ0E7R0FDQTs7RUFFQSxTQUFBLFlBQUEsT0FBQTtHQUNBLEdBQUEsT0FBQSxLQUFBO0lBQ0EsT0FBQTtJQUNBLEtBQUEsYUFBQSxPQUFBO0lBQ0EsVUFBQTtJQUNBLFVBQUE7O0dBRUEsZ0JBQUE7R0FDQTs7RUFFQSxTQUFBLGdCQUFBLE9BQUE7R0FDQSxJQUFBLFFBQUEsR0FBQSxRQUFBLE9BQUEsU0FBQSxRQUFBO0lBQ0EsT0FBQSxPQUFBOztHQUVBLElBQUEsTUFBQSxVQUFBLElBQUE7SUFDQSxHQUFBLE9BQUEsS0FBQTtLQUNBLE9BQUE7S0FDQSxLQUFBLHNCQUFBLE9BQUEsT0FBQTs7U0FFQTtJQUNBLEdBQUEsT0FBQSxLQUFBO0tBQ0EsT0FBQTtLQUNBLEtBQUEsWUFBQSxPQUFBLE9BQUE7S0FDQSxVQUFBO0tBQ0EsU0FBQTs7SUFFQSxnQkFBQTtJQUNBO0dBQ0E7O0VBRUEsU0FBQSxXQUFBLE1BQUE7R0FDQSxHQUFBLE9BQUEsT0FBQSxNQUFBO0dBQ0E7OztBQzNMQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7OztDQU9BO0dBQ0EsT0FBQSxjQUFBO0dBQ0EsV0FBQSx3QkFBQTs7Q0FFQSxzQkFBQSxVQUFBLEVBQUEsWUFBQTtDQUNBLFNBQUEsdUJBQUEsWUFBQSxjQUFBO0VBQ0EsSUFBQSxLQUFBOztFQUVBLEdBQUEsU0FBQSxhQUFBO0VBQ0EsVUFBQSxhQUFBLGFBQUEsUUFBQSxRQUFBLFNBQUEsUUFBQTtHQUNBLEdBQUEsVUFBQTtHQUNBLEdBQUEsUUFBQSxRQUFBLFNBQUEsT0FBQTtJQUNBLE9BQUEsT0FBQSxjQUFBLE9BQUEsU0FBQSxPQUFBLFlBQUE7OztFQUdBOztBQ3ZCQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsV0FBQSx3QkFBQTs7Q0FFQSxzQkFBQSxVQUFBLENBQUEsVUFBQSxhQUFBLGtCQUFBLFVBQUEsU0FBQSxhQUFBO0NBQ0EsU0FBQSxzQkFBQSxRQUFBLFdBQUEsZ0JBQUEsUUFBQSxPQUFBLFdBQUEsUUFBQTtFQUNBLElBQUEsS0FBQTtFQUNBLEdBQUEsU0FBQTtFQUNBLEdBQUEsU0FBQSxFQUFBLE9BQUEsT0FBQTtFQUNBLEdBQUEsU0FBQTtFQUNBLEdBQUEsU0FBQTtFQUNBLEdBQUEsU0FBQTs7RUFFQSxHQUFBLFNBQUE7R0FDQSxTQUFBLE9BQUEsT0FBQTtHQUNBLFVBQUEsT0FBQSxRQUFBO0dBQ0EsWUFBQTtHQUNBLFlBQUEsQ0FBQSxPQUFBLE1BQUEsTUFBQSxNQUFBLE1BQUE7R0FDQSxZQUFBLE9BQUEsVUFBQTtHQUNBLGNBQUEsT0FBQSxnQkFBQTtHQUNBLGFBQUEsT0FBQSxjQUFBO0dBQ0EsWUFBQTtHQUNBLFlBQUEsQ0FBQSxNQUFBLE9BQUEsS0FBQSxNQUFBLFFBQUE7R0FDQSxVQUFBLFFBQUE7R0FDQSxZQUFBLENBQUEsV0FBQTs7O0VBR0EsVUFBQSxhQUFBLFFBQUEsYUFBQSxRQUFBLFNBQUEsU0FBQTtHQUNBLEdBQUEsV0FBQTtHQUNBLElBQUEsQ0FBQSxHQUFBLE9BQUE7SUFDQSxJQUFBLGFBQUE7SUFDQSxLQUFBLElBQUEsSUFBQSxTQUFBLFNBQUEsR0FBQSxLQUFBLEdBQUEsS0FBQTtLQUNBLFdBQUEsS0FBQSxTQUFBLEdBQUE7S0FDQTtJQUNBLEdBQUEsT0FBQSxXQUFBO0lBQ0E7OztFQUdBLElBQUEsa0JBQUEsU0FBQSxPQUFBO0dBQ0EsSUFBQSxVQUFBLE9BQUEsTUFBQSxJQUFBLE1BQUEsQ0FBQSxHQUFBLEtBQUE7R0FDQSxJQUFBLFVBQUEsUUFBQSxVQUFBLE1BQUE7SUFDQSxPQUFBO1NBQ0E7SUFDQSxPQUFBLE9BQUEsTUFBQSxJQUFBLE1BQUEsRUFBQSxHQUFBLEtBQUE7SUFDQTs7O0VBR0EsU0FBQSxNQUFBO0dBQ0EsSUFBQSxHQUFBLE9BQUEsTUFBQTtJQUNBLEdBQUEsT0FBQSxrQkFBQSxnQkFBQSxHQUFBLE9BQUE7SUFDQSxVQUFBLE9BQUEsR0FBQSxRQUFBLFFBQUEsVUFBQTtLQUNBLEdBQUEsT0FBQSxjQUFBLE9BQUEsU0FBQSxTQUFBLEdBQUEsT0FBQSxhQUFBO09BQ0EsS0FBQSxVQUFBO0tBQ0EsZUFBQSxNQUFBLEdBQUE7O1NBRUE7O0lBRUE7R0FDQTs7RUFFQSxTQUFBLFFBQUE7R0FDQSxJQUFBLGVBQUE7TUFDQSxZQUFBLE9BQUE7TUFDQSxPQUFBO01BQ0EsU0FBQSxHQUFBLE9BQUE7TUFDQSxTQUFBLEdBQUEsT0FBQTtNQUNBLFVBQUEsR0FBQSxPQUFBO01BQ0EsU0FBQSxHQUFBLE9BQUE7TUFDQSxjQUFBLEdBQUEsT0FBQTtNQUNBLGFBQUEsR0FBQSxPQUFBO01BQ0Esa0JBQUEsZ0JBQUEsR0FBQSxPQUFBOzs7R0FHQSxJQUFBLEdBQUEsT0FBQSxNQUFBO0lBQ0EsVUFBQSxpQkFBQTtJQUNBLGVBQUEsTUFBQTtVQUNBOztJQUVBO0dBQ0E7O0VBRUEsU0FBQSxRQUFBO0dBQ0EsZUFBQSxRQUFBO0dBQ0E7RUFDQTs7QUMzRkEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFFBQUEsWUFBQTs7Q0FFQSxVQUFBLFVBQUEsQ0FBQTs7Q0FFQSxTQUFBLFdBQUE7RUFDQSxJQUFBLE1BQUE7RUFDQSxJQUFBLFFBQUE7RUFDQSxJQUFBLGVBQUE7RUFDQSxJQUFBLGNBQUE7RUFDQSxJQUFBLFNBQUE7RUFDQSxJQUFBLFNBQUE7RUFDQSxJQUFBLGVBQUE7RUFDQSxJQUFBLG1CQUFBO0VBQ0EsSUFBQSxrQkFBQTtFQUNBLElBQUEsYUFBQTtFQUNBLElBQUEsYUFBQTtFQUNBLElBQUEsZUFBQTs7RUFFQSxTQUFBLE9BQUE7R0FDQSxPQUFBLE1BQUEsSUFBQTtHQUNBOztFQUVBLFNBQUEsY0FBQSxRQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEsa0JBQUE7R0FDQTs7RUFFQSxTQUFBLFlBQUEsT0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLGdDQUFBO0dBQ0E7O0VBRUEsU0FBQSxPQUFBLE9BQUE7R0FDQSxPQUFBLE1BQUEsS0FBQSxpQkFBQTtHQUNBOztFQUVBLFNBQUEsT0FBQSxPQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEsaUJBQUEsT0FBQTtHQUNBOztFQUVBLFNBQUEsYUFBQSxPQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEsMkNBQUEsT0FBQSxVQUFBO0dBQ0E7O0VBRUEsU0FBQSxpQkFBQSxhQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEsMkJBQUEsYUFBQSxXQUFBOzs7RUFHQSxTQUFBLGdCQUFBLFdBQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSxxQkFBQSxXQUFBLFVBQUE7R0FDQTs7RUFFQSxTQUFBLFdBQUEsU0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLCtCQUFBO0dBQ0E7O0VBRUEsU0FBQSxXQUFBLFNBQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSx1Q0FBQTtHQUNBOztFQUVBLFNBQUEsYUFBQSxPQUFBO0dBQ0EsT0FBQSxNQUFBLE9BQUEsa0JBQUEsT0FBQTtHQUNBOzs7QUNyRUEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFFBQUEsU0FBQTs7Q0FFQSxPQUFBLFVBQUEsQ0FBQTs7Q0FFQSxTQUFBLE9BQUEsTUFBQTtFQUNBLElBQUEsTUFBQTtFQUNBLElBQUEsUUFBQTtFQUNBLFNBQUEsT0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBO0lBQ0E7RUFDQTs7O0FDbkJBLENBQUEsVUFBQTtDQUNBOzs7Ozs7O0NBT0E7R0FDQSxPQUFBO0dBQ0EsV0FBQSwwQkFBQTs7Q0FFQSx3QkFBQSxVQUFBLENBQUEsV0FBQSxhQUFBLFdBQUEsZ0JBQUE7O0NBRUEsU0FBQSx3QkFBQSxTQUFBLFdBQUEsU0FBQSxjQUFBLE9BQUE7O0VBRUEsSUFBQSxLQUFBO0VBQ0EsSUFBQSxTQUFBLFFBQUE7O0VBRUEsVUFBQSxvQkFBQSxRQUFBLFFBQUEsU0FBQSxPQUFBO0dBQ0EsR0FBQSxVQUFBLE9BQUEsUUFBQSxPQUFBLFNBQUEsUUFBQTtJQUNBLE9BQUEsWUFBQSxPQUFBLFNBQUEsT0FBQSxhQUFBO0lBQ0EsT0FBQSxPQUFBLFVBQUE7Ozs7RUFJQSxRQUFBLGFBQUEsYUFBQSxRQUFBLFFBQUEsU0FBQSxNQUFBO0dBQ0EsR0FBQSxhQUFBO0dBQ0EsR0FBQSxpQkFBQSxNQUFBO0dBQ0EsSUFBQSxNQUFBLFVBQUE7SUFDQSxJQUFBLFdBQUEsS0FBQSxNQUFBLE1BQUE7SUFDQSxHQUFBLFFBQUEsYUFBQTtLQUNBLE1BQUEsT0FBQSxTQUFBO0tBQ0EsTUFBQSxPQUFBLFNBQUE7S0FDQSxVQUFBOzs7SUFHQSxHQUFBLGdCQUFBLE1BQUE7SUFDQTtLQUNBLEtBQUEsVUFBQTtHQUNBLEdBQUEsZUFBQSxRQUFBLFNBQUEsT0FBQTtJQUNBLE9BQUEsUUFBQSxRQUFBLFNBQUEsT0FBQTtLQUNBLElBQUEsT0FBQSxZQUFBLE9BQUEsT0FBQTtNQUNBLE9BQUEsb0JBQUEsT0FBQSxtQkFBQSxPQUFBLE9BQUE7TUFDQTtLQUNBLElBQUEsT0FBQSxpQkFBQSxPQUFBLE1BQUE7TUFDQSxPQUFBLHlCQUFBLE9BQUEsa0JBQUEsT0FBQSxPQUFBO01BQ0E7OztJQUdBLElBQUEsR0FBQSxjQUFBO0tBQ0EsR0FBQSxjQUFBLFFBQUEsU0FBQSxhQUFBO01BQ0EsSUFBQSxTQUFBLEtBQUEsTUFBQTtNQUNBLElBQUEsT0FBQSxRQUFBLE9BQUEsTUFBQTtPQUNBLE9BQUEseUJBQUEsS0FBQSxNQUFBLEVBQUEsT0FBQSxJQUFBLE9BQUE7T0FDQTs7S0FFQTs7OztPQUlBLE9BQUEsNEJBQUEsS0FBQSxTQUFBLE1BQUE7U0FDQSxHQUFBLE9BQUEsTUFBQSxNQUFBO1NBQ0EsR0FBQSxPQUFBLE1BQUEsTUFBQTtTQUNBLEdBQUEsT0FBQSxPQUFBO1NBQ0EsR0FBQSxRQUFBLFNBQUE7VUFDQSxNQUFBLEdBQUEsT0FBQTtVQUNBLE1BQUEsR0FBQSxPQUFBO1VBQ0EsVUFBQTs7OztLQUlBLFFBQUEsT0FBQSxJQUFBO1NBQ0EsUUFBQTthQUNBLEtBQUE7YUFDQSxLQUFBO2FBQ0EsTUFBQTs7U0FFQSxTQUFBOztFQUVBOztBQ2hGQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsV0FBQSx3QkFBQTtDQUNBLHNCQUFBLFVBQUEsQ0FBQSxXQUFBO0NBQ0EsU0FBQSx1QkFBQTtFQUNBLElBQUEsS0FBQTtFQUNBLElBQUEsZ0JBQUE7R0FDQSxXQUFBLFFBQUE7R0FDQSxjQUFBLFFBQUE7R0FDQSxVQUFBLFFBQUE7OztFQUdBLFFBQUEsa0JBQUEsZUFBQSxRQUFBLFNBQUEsTUFBQTtHQUNBLEdBQUEsUUFBQTtHQUNBLE1BQUEsUUFBQSxTQUFBLE1BQUE7SUFDQSxNQUFBLG1CQUFBO0lBQ0EsTUFBQSxTQUFBLFFBQUEsU0FBQSxPQUFBO0tBQ0EsTUFBQSxvQkFBQSxTQUFBOzs7OztFQUtBLEdBQUEsaUJBQUEsT0FBQSxRQUFBLGdCQUFBLEtBQUE7OztBQzdCQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsV0FBQSx5QkFBQTs7Q0FFQSx1QkFBQSxVQUFBLENBQUEsZ0JBQUEsVUFBQSxTQUFBLFVBQUEsWUFBQSxRQUFBLFdBQUEsYUFBQSxhQUFBLFdBQUE7O0NBRUEsU0FBQSx1QkFBQSxjQUFBLFFBQUEsT0FBQSxRQUFBLFVBQUEsTUFBQSxTQUFBLFdBQUEsV0FBQSxTQUFBLGFBQUE7RUFDQSxJQUFBLEtBQUE7RUFDQSxJQUFBLFdBQUEsUUFBQTtFQUNBLElBQUEsY0FBQTtFQUNBLEdBQUEsY0FBQTtFQUNBLEdBQUEsYUFBQTtFQUNBLEdBQUEsZUFBQSxRQUFBO0VBQ0EsR0FBQSxrQkFBQTtFQUNBLEdBQUEsYUFBQTtFQUNBLEdBQUEsbUJBQUE7RUFDQSxHQUFBLFVBQUE7O0VBRUEsR0FBQSxnQkFBQTtHQUNBLFNBQUE7R0FDQSxXQUFBOzs7RUFHQSxRQUFBLFVBQUEsYUFBQSxRQUFBLFFBQUEsU0FBQSxNQUFBO0dBQ0EsYUFBQTtHQUNBLE1BQUEsT0FBQSxRQUFBLEdBQUEsWUFBQSxPQUFBLEdBQUEsWUFBQTtHQUNBLEdBQUEsY0FBQSxXQUFBLE1BQUE7R0FDQSxHQUFBLGNBQUEsU0FBQSxPQUFBLEVBQUEsRUFBQTs7O0VBR0EsVUFBQSxZQUFBLFFBQUEsUUFBQSxTQUFBLFFBQUE7R0FDQSxHQUFBLFVBQUE7S0FDQSxLQUFBLFVBQUE7R0FDQSxJQUFBLEdBQUEsY0FBQSxJQUFBO0lBQ0EsTUFBQSxZQUFBLGFBQUEsUUFBQSxRQUFBLFNBQUEsSUFBQTtLQUNBLEdBQUEsY0FBQTs7VUFFQTtJQUNBLE1BQUEsTUFBQSxhQUFBLE9BQUEsUUFBQSxRQUFBLFNBQUEsSUFBQTtLQUNBLEdBQUEsY0FBQTtLQUNBLElBQUEsR0FBQSxRQUFBLGNBQUEsS0FBQSxFQUFBLFFBQUEsR0FBQSxjQUFBLEVBQUEsR0FBQSxhQUFBLE9BQUE7O0lBRUE7OztFQUdBLFVBQUEsR0FBQSxTQUFBLFNBQUEsR0FBQTtHQUNBLElBQUEsR0FBQSxjQUFBLEtBQUEsUUFBQSxPQUFBLGFBQUEsT0FBQSxHQUFBLFVBQUE7S0FDQSxHQUFBLFlBQUEsS0FBQTtVQUNBO0lBQ0EsSUFBQSxRQUFBLE9BQUEsT0FBQSxHQUFBLFdBQUEsUUFBQSxPQUFBLGFBQUEsT0FBQSxHQUFBLFVBQUE7S0FDQSxHQUFBLFlBQUEsS0FBQTtLQUNBO0lBQ0E7OztFQUdBLFVBQUEsR0FBQSxZQUFBLFNBQUEsS0FBQTtHQUNBLElBQUEsVUFBQSxRQUFBLEtBQUEsS0FBQTtHQUNBLEtBQUEsSUFBQSxJQUFBLEdBQUEsWUFBQSxTQUFBLEdBQUEsS0FBQSxHQUFBLEtBQUE7SUFDQSxHQUFBLFFBQUEsT0FBQSxHQUFBLFlBQUEsR0FBQSxJQUFBLEtBQUEsSUFBQTtLQUNBLEdBQUEsWUFBQSxHQUFBLFlBQUEsS0FBQTtLQUNBLEdBQUEsWUFBQSxHQUFBLFNBQUEsS0FBQTtLQUNBLEdBQUEsWUFBQSxHQUFBLFNBQUEsS0FBQTtLQUNBLEdBQUEsWUFBQSxHQUFBLFdBQUEsS0FBQTtLQUNBO0lBQ0E7OztFQUdBLFVBQUEsR0FBQSxXQUFBLFNBQUEsR0FBQTtHQUNBLElBQUEsUUFBQSxHQUFBO0dBQ0EsR0FBQSxjQUFBLEdBQUEsWUFBQSxPQUFBLFNBQUEsSUFBQTtJQUNBLE9BQUEsR0FBQSxPQUFBOzs7O0VBSUEsU0FBQSxZQUFBO0dBQ0EsSUFBQSxnQkFBQSxPQUFBLEtBQUE7TUFDQSxhQUFBO09BQ0EsWUFBQTtPQUNBLE1BQUE7T0FDQSxVQUFBO1FBQ0EsT0FBQSxVQUFBO1NBQ0EsS0FBQSxFQUFBLFFBQUEsR0FBQSxjQUFBO1VBQ0EsT0FBQTtlQUNBO1VBQ0EsT0FBQSxHQUFBLFlBQUEsR0FBQSxZQUFBLE9BQUEsR0FBQTtVQUNBOztRQUVBLFNBQUEsVUFBQTtTQUNBLE9BQUEsR0FBQSxjQUFBOztRQUVBLGFBQUEsVUFBQTtTQUNBLE9BQUE7Ozs7R0FJQTs7O0VBR0EsU0FBQSxpQkFBQSxZQUFBLEdBQUE7U0FDQSxJQUFBLGdCQUFBLE9BQUEsS0FBQTthQUNBLGFBQUE7YUFDQSxZQUFBO2FBQ0EsTUFBQTthQUNBLFNBQUE7aUJBQ0EsYUFBQSxVQUFBO3FCQUNBLE9BQUE7O2lCQUVBLGFBQUEsVUFBQTtrQkFDQSxPQUFBOzs7O01BSUE7OztFQUdBLFNBQUEsUUFBQSxhQUFBLEdBQUE7O0dBRUEsVUFBQSxLQUFBLG9CQUFBO0lBQ0EsS0FBQSxXQUFBO0lBQ0EsVUFBQSxXQUFBOztTQUVBLEdBQUEsWUFBQSxPQUFBLEdBQUE7R0FDQTs7O0VBR0EsU0FBQSxpQkFBQTtHQUNBLEdBQUEsYUFBQTs7R0FFQSxJQUFBLFdBQUEsR0FBQSxRQUFBLFFBQUEsT0FBQSxTQUFBLFFBQUE7SUFDQSxLQUFBLE9BQUEsV0FBQSxRQUFBLE9BQUEsV0FBQSxXQUFBLE9BQUEsV0FBQSxRQUFBO0tBQ0EsT0FBQTtVQUNBO0tBQ0EsT0FBQSxZQUFBO0tBQ0EsT0FBQSxPQUFBOzs7O0dBSUEsSUFBQSxhQUFBO0lBQ0EsU0FBQTtJQUNBLFlBQUEsV0FBQTtJQUNBLFlBQUEsUUFBQTtJQUNBLFlBQUEsRUFBQSxNQUFBLFFBQUEsT0FBQSxTQUFBLFFBQUEsRUFBQSxPQUFBLE9BQUEsV0FBQSxRQUFBLFFBQUE7SUFDQSxZQUFBLGFBQUEsV0FBQTtJQUNBLFlBQUEsYUFBQSxXQUFBO0lBQ0EsWUFBQSxhQUFBLFNBQUEsT0FBQTtJQUNBLFlBQUEsYUFBQSxTQUFBO0lBQ0EsVUFBQSxhQUFBLE9BQUE7SUFDQSxXQUFBLGFBQUEsT0FBQTtJQUNBLFdBQUE7SUFDQSxZQUFBLENBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQTtJQUNBLFlBQUEsRUFBQSxNQUFBLFFBQUE7SUFDQSxZQUFBO0lBQ0EsWUFBQSxRQUFBOztRQUVBLFVBQUEsS0FBQSxvQkFBQTtHQUNBOztFQUVBLEdBQUEsSUFBQSxZQUFBLFVBQUEsT0FBQTtTQUNBLFVBQUE7Ozs7QUNyS0EsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFdBQUEsd0JBQUE7O0NBRUEsc0JBQUEsVUFBQSxDQUFBLFVBQUEsYUFBQSxrQkFBQSxVQUFBLFNBQUEsYUFBQTtDQUNBLFNBQUEsdUJBQUE7RUFDQSxJQUFBLEtBQUE7RUFDQSxHQUFBLFNBQUE7RUFDQSxHQUFBLFFBQUEsRUFBQSxPQUFBLE9BQUE7RUFDQSxHQUFBLE9BQUE7RUFDQSxHQUFBLFNBQUE7RUFDQSxHQUFBLFNBQUE7O0VBRUEsR0FBQSxTQUFBO0dBQ0EsU0FBQSxPQUFBLE9BQUE7R0FDQSxVQUFBLE9BQUEsUUFBQTtHQUNBLFlBQUE7R0FDQSxZQUFBLENBQUEsT0FBQSxNQUFBLE1BQUEsTUFBQSxNQUFBO0dBQ0EsWUFBQSxPQUFBLFVBQUE7R0FDQSxjQUFBLE9BQUEsZ0JBQUE7R0FDQSxhQUFBLE9BQUEsY0FBQTtHQUNBLFlBQUE7R0FDQSxZQUFBLENBQUEsTUFBQSxPQUFBLEtBQUEsTUFBQSxRQUFBO0dBQ0EsVUFBQSxRQUFBO0dBQ0EsWUFBQSxDQUFBLFdBQUE7OztFQUdBLFVBQUEsYUFBQSxRQUFBLGFBQUEsUUFBQSxTQUFBLFNBQUE7R0FDQSxHQUFBLFdBQUE7R0FDQSxJQUFBLENBQUEsR0FBQSxPQUFBO0lBQ0EsSUFBQSxhQUFBO0lBQ0EsS0FBQSxJQUFBLElBQUEsU0FBQSxTQUFBLEdBQUEsS0FBQSxHQUFBLEtBQUE7S0FDQSxXQUFBLEtBQUEsU0FBQSxHQUFBO0tBQ0E7SUFDQSxHQUFBLE9BQUEsV0FBQTtJQUNBOzs7RUFHQSxJQUFBLGtCQUFBLFNBQUEsT0FBQTtHQUNBLElBQUEsVUFBQSxPQUFBLE1BQUEsSUFBQSxNQUFBLENBQUEsR0FBQSxLQUFBO0dBQ0EsSUFBQSxVQUFBLFFBQUEsVUFBQSxNQUFBO0lBQ0EsT0FBQTtTQUNBO0lBQ0EsT0FBQSxPQUFBLE1BQUEsSUFBQSxNQUFBLEVBQUEsR0FBQSxLQUFBO0lBQ0E7OztFQUdBLFNBQUEsTUFBQTtHQUNBLElBQUEsR0FBQSxPQUFBLE1BQUE7SUFDQSxHQUFBLE9BQUEsa0JBQUEsZ0JBQUEsR0FBQSxPQUFBO0lBQ0EsVUFBQSxPQUFBLEdBQUEsUUFBQSxRQUFBLFVBQUE7S0FDQSxHQUFBLE9BQUEsY0FBQSxPQUFBLFNBQUEsU0FBQSxHQUFBLE9BQUEsYUFBQTtPQUNBLEtBQUEsVUFBQTtLQUNBLGVBQUEsTUFBQSxHQUFBOztJQUVBO0dBQ0E7O0VBRUEsU0FBQSxRQUFBO0dBQ0EsSUFBQSxlQUFBO01BQ0EsWUFBQSxPQUFBO01BQ0EsT0FBQTtNQUNBLFNBQUEsR0FBQSxPQUFBO01BQ0EsU0FBQSxHQUFBLE9BQUE7TUFDQSxVQUFBLEdBQUEsT0FBQTtNQUNBLFNBQUEsR0FBQSxPQUFBO01BQ0EsY0FBQSxHQUFBLE9BQUE7TUFDQSxhQUFBLEdBQUEsT0FBQTtNQUNBLGtCQUFBLGdCQUFBLEdBQUEsT0FBQTs7O0dBR0EsSUFBQSxHQUFBLE9BQUEsTUFBQTtJQUNBLFVBQUEsaUJBQUE7SUFDQSxlQUFBLE1BQUE7VUFDQTs7SUFFQTtHQUNBOztFQUVBLFNBQUEsUUFBQTtHQUNBLGVBQUEsUUFBQTtHQUNBOzs7QUN4RkEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFdBQUEsMEJBQUE7O0NBRUEsd0JBQUEsVUFBQSxDQUFBLGNBQUEsa0JBQUEsU0FBQSxVQUFBLGFBQUEsV0FBQSxnQkFBQSxhQUFBOztDQUVBLFNBQUEsd0JBQUEsWUFBQSxnQkFBQSxPQUFBLFFBQUEsV0FBQSxTQUFBLGNBQUEsV0FBQSxXQUFBO0VBQ0EsSUFBQSxLQUFBO0VBQ0EsR0FBQSxhQUFBO0VBQ0EsR0FBQSxlQUFBO0VBQ0EsR0FBQSxTQUFBO0VBQ0EsR0FBQSxRQUFBO0VBQ0EsR0FBQSxVQUFBO0VBQ0EsR0FBQSxPQUFBO0VBQ0EsV0FBQSxPQUFBLFFBQUEsR0FBQSxhQUFBLFFBQUEsR0FBQSxZQUFBOztFQUVBLElBQUEsYUFBQTs7RUFFQSxRQUFBLGFBQUEsYUFBQSxRQUFBLFFBQUEsU0FBQSxRQUFBO0dBQ0EsR0FBQSxXQUFBLFFBQUE7R0FDQSxHQUFBLGdCQUFBLEdBQUEsU0FBQSxHQUFBO0dBQ0EsSUFBQSxhQUFBLEVBQUEsTUFBQSxRQUFBLFVBQUE7R0FDQSxHQUFBLFVBQUE7R0FDQSxXQUFBLFFBQUEsU0FBQSxjQUFBO0lBQ0EsR0FBQSxRQUFBLEtBQUEsTUFBQSxHQUFBLFNBQUE7O0dBRUEsR0FBQSxVQUFBLEdBQUEsUUFBQSxPQUFBLFNBQUEsUUFBQSxFQUFBLE9BQUEsQ0FBQSxPQUFBOzs7RUFHQSxTQUFBLGFBQUEsT0FBQTtHQUNBLEdBQUEsZ0JBQUE7R0FDQTs7RUFFQSxTQUFBLFFBQUE7R0FDQSxlQUFBLFFBQUE7R0FDQTs7RUFFQSxTQUFBLE1BQUEsT0FBQTtHQUNBLE9BQUEsWUFBQSxDQUFBLE9BQUE7R0FDQSxXQUFBLEtBQUE7R0FDQTs7RUFFQSxTQUFBLFFBQUEsUUFBQSxHQUFBO0dBQ0EsT0FBQSxZQUFBLENBQUEsT0FBQTtHQUNBLFdBQUEsT0FBQSxFQUFBLE1BQUEsWUFBQSxPQUFBLFFBQUEsT0FBQSxLQUFBO0dBQ0E7O0VBRUEsU0FBQSxNQUFBO0dBQ0EsR0FBQSxXQUFBLFFBQUEsS0FBQSxNQUFBLEdBQUEsV0FBQSxTQUFBO0dBQ0EsVUFBQSxLQUFBLG1CQUFBO0lBQ0EsS0FBQSxXQUFBO0lBQ0EsV0FBQSxXQUFBO0lBQ0EsT0FBQSxXQUFBO0lBQ0EsUUFBQSxXQUFBO0lBQ0EsUUFBQSxXQUFBO0lBQ0EsWUFBQSxFQUFBLE1BQUEsR0FBQSxXQUFBLFFBQUE7SUFDQSxVQUFBLEdBQUEsV0FBQTs7O0dBR0EsZUFBQSxNQUFBO0dBQ0E7RUFDQTs7O0FDcEVBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxXQUFBLHVCQUFBOztDQUVBLHFCQUFBLFVBQUEsQ0FBQSxXQUFBLFdBQUEsWUFBQSxVQUFBLGFBQUE7O0NBRUEsU0FBQSxzQkFBQTtFQUNBLElBQUEsS0FBQTtFQUNBLElBQUEsU0FBQSxRQUFBOztFQUVBLFVBQUEsWUFBQSxRQUFBLFFBQUEsU0FBQSxPQUFBO0dBQ0EsR0FBQSxVQUFBLE9BQUEsUUFBQSxPQUFBLFNBQUEsUUFBQTtJQUNBLE9BQUEsWUFBQSxPQUFBLFNBQUEsT0FBQSxhQUFBO0lBQ0EsT0FBQSxPQUFBLFVBQUE7Ozs7RUFJQSxRQUFBLGFBQUEsYUFBQSxRQUFBLFFBQUEsU0FBQSxNQUFBO0dBQ0EsR0FBQSxhQUFBO0dBQ0EsSUFBQSxNQUFBLFVBQUE7SUFDQSxJQUFBLFdBQUEsS0FBQSxNQUFBLE1BQUE7SUFDQSxHQUFBLFFBQUEsYUFBQTtLQUNBLE1BQUEsT0FBQSxTQUFBO0tBQ0EsTUFBQSxPQUFBLFNBQUE7S0FDQSxVQUFBOztJQUVBOzs7T0FHQSxPQUFBLDRCQUFBLEtBQUEsU0FBQSxNQUFBO1NBQ0EsR0FBQSxPQUFBLE1BQUEsTUFBQTtTQUNBLEdBQUEsT0FBQSxNQUFBLE1BQUE7U0FDQSxHQUFBLE9BQUEsT0FBQTtTQUNBLEdBQUEsUUFBQSxRQUFBO1VBQ0EsTUFBQSxHQUFBLE9BQUE7VUFDQSxNQUFBLEdBQUEsT0FBQTtVQUNBLFVBQUE7Ozs7S0FJQSxRQUFBLE9BQUEsSUFBQTtTQUNBLFFBQUE7YUFDQSxLQUFBO2FBQ0EsS0FBQTthQUNBLE1BQUE7O1NBRUEsU0FBQTs7OztBQ3JEQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsUUFBQSxZQUFBOztDQUVBLFVBQUEsVUFBQSxDQUFBLGNBQUEsU0FBQSxNQUFBOztDQUVBLFNBQUEsVUFBQSxZQUFBLE9BQUEsSUFBQSxTQUFBO0VBQ0EsSUFBQSxNQUFBO0VBQ0EsSUFBQSxRQUFBLFNBQUEsTUFBQTtNQUNBLElBQUEsWUFBQTtNQUNBLElBQUEsT0FBQTtRQUNBLFlBQUE7VUFDQTtRQUNBLFlBQUEsTUFBQSxJQUFBO09BQ0E7TUFDQSxPQUFBLEdBQUEsUUFBQSx3QkFBQSxFQUFBLFFBQUEsV0FBQSxZQUFBLFdBQUE7OztJQUdBLElBQUEsU0FBQSxJQUFBOztJQUVBLElBQUEsTUFBQSxVQUFBLFdBQUEsVUFBQTtNQUNBLElBQUEsT0FBQSxHQUFBLFdBQUEsWUFBQTtRQUNBLElBQUEsT0FBQTtRQUNBLFdBQUEsT0FBQSxZQUFBO1VBQ0EsU0FBQSxNQUFBLFFBQUE7Ozs7O0lBS0EsSUFBQSxRQUFBLFVBQUEsV0FBQSxNQUFBLFVBQUE7TUFDQSxJQUFBLE9BQUEsS0FBQSxXQUFBLE1BQUEsWUFBQTtTQUNBLElBQUEsT0FBQTtTQUNBLFdBQUEsT0FBQSxZQUFBO1dBQ0EsSUFBQSxVQUFBO2NBQ0EsU0FBQSxNQUFBLFFBQUE7WUFDQTs7Ozs7RUFLQSxJQUFBLHFCQUFBLFVBQUEsV0FBQSxVQUFBO01BQ0EsSUFBQSxPQUFBLG1CQUFBLFdBQUEsV0FBQTtVQUNBLElBQUEsT0FBQTtVQUNBLFdBQUEsT0FBQSxZQUFBO1lBQ0EsU0FBQSxNQUFBLFFBQUE7Ozs7RUFJQTs7QUN2REEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQSxrQkFBQTtHQUNBLFFBQUEsZUFBQTs7Q0FFQSxhQUFBLFVBQUE7Q0FDQSxTQUFBLGNBQUE7RUFDQSxPQUFBO0dBQ0EsUUFBQSxVQUFBO0lBQ0EsT0FBQTtLQUNBLFFBQUEsRUFBQSxRQUFBLFFBQUE7S0FDQSxXQUFBLENBQUE7S0FDQSxTQUFBLENBQUEsTUFBQSxPQUFBLE9BQUEsT0FBQTtLQUNBLFNBQUEsQ0FBQSxPQUFBLE9BQUE7OztHQUdBLFdBQUEsVUFBQTtJQUNBLE9BQUE7S0FDQSxhQUFBO0tBQ0EsT0FBQSxDQUFBLE1BQUEsTUFBQSxNQUFBOzs7R0FHQSxPQUFBLFVBQUE7SUFDQSxPQUFBO0tBQ0EsY0FBQTtLQUNBLFFBQUEsQ0FBQSxNQUFBLE1BQUEsTUFBQSxNQUFBOzs7O0VBSUE7O0FDbkNBLENBQUEsVUFBQTtDQUNBOzs7Ozs7Q0FNQTtHQUNBLE9BQUE7R0FDQSxRQUFBLFFBQUE7O0NBRUEsTUFBQSxVQUFBLENBQUE7O0NBRUEsU0FBQSxPQUFBO0VBQ0EsSUFBQSxNQUFBO0VBQ0EsSUFBQSxRQUFBO0VBQ0EsSUFBQSxjQUFBO0VBQ0EsSUFBQSxXQUFBO0VBQ0EsSUFBQSxZQUFBO0VBQ0EsSUFBQSxXQUFBO0VBQ0EsSUFBQSxtQkFBQTtFQUNBLElBQUEsU0FBQTtFQUNBLElBQUEsUUFBQTs7RUFFQSxTQUFBLE1BQUEsUUFBQSxPQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEsNkJBQUEsU0FBQSxhQUFBO0dBQ0E7O0VBRUEsU0FBQSxZQUFBLE9BQUE7R0FDQSxPQUFBLE1BQUEsSUFBQSxtQ0FBQTtHQUNBOztFQUVBLFNBQUEsU0FBQSxPQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUEsc0JBQUE7R0FDQTs7RUFFQSxTQUFBLFVBQUEsS0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLGlDQUFBLEtBQUE7R0FDQTs7RUFFQSxTQUFBLFNBQUEsS0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLGdDQUFBLEtBQUEsSUFBQTtHQUNBOztFQUVBLFNBQUEsaUJBQUEsS0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLDhCQUFBLEtBQUEsSUFBQTtHQUNBOztFQUVBLFNBQUEsT0FBQSxXQUFBO0dBQ0EsT0FBQSxNQUFBLEtBQUEsb0JBQUE7R0FDQTs7RUFFQSxTQUFBLE1BQUEsT0FBQTtHQUNBLE9BQUEsTUFBQSxJQUFBLG1DQUFBO0dBQ0E7Ozs7QUN0REEsQ0FBQSxVQUFBO0NBQ0E7Ozs7OztDQU1BO0dBQ0EsT0FBQTtHQUNBLFdBQUEsb0JBQUE7O0NBRUEsa0JBQUEsVUFBQSxDQUFBLFNBQUEsZ0JBQUEsYUFBQSxVQUFBLGFBQUE7O0NBRUEsU0FBQSxtQkFBQTtFQUNBLElBQUEsS0FBQTtFQUNBLEdBQUEsY0FBQTtFQUNBLEdBQUEsVUFBQTs7RUFFQSxVQUFBLEdBQUEsZUFBQSxTQUFBLEdBQUE7R0FDQSxLQUFBLElBQUEsSUFBQSxHQUFBLFlBQUEsU0FBQSxHQUFBLEtBQUEsR0FBQSxLQUFBO0lBQ0EsSUFBQSxRQUFBLE9BQUEsR0FBQSxZQUFBLEdBQUEsS0FBQSxHQUFBLE1BQUE7S0FDQSxPQUFBLEdBQUEsWUFBQSxHQUFBLGVBQUEsR0FBQTs7SUFFQTs7O0VBR0EsVUFBQSxHQUFBLGlCQUFBLFNBQUEsS0FBQTtHQUNBLEtBQUEsSUFBQSxJQUFBLEdBQUEsWUFBQSxTQUFBLEdBQUEsS0FBQSxHQUFBLEtBQUE7SUFDQSxJQUFBLFFBQUEsT0FBQSxHQUFBLFlBQUEsR0FBQSxLQUFBLEtBQUEsS0FBQTtLQUNBLEdBQUEsWUFBQSxHQUFBLFFBQUEsT0FBQSxTQUFBLEtBQUE7S0FDQSxHQUFBLFlBQUEsR0FBQSxZQUFBLEtBQUE7S0FDQSxHQUFBLFlBQUEsR0FBQSxpQkFBQSxLQUFBOztJQUVBOzs7RUFHQSxVQUFBLEdBQUEsU0FBQSxTQUFBLEdBQUE7R0FDQSxLQUFBLFFBQUEsT0FBQSxPQUFBLEdBQUEsU0FBQTtJQUNBLElBQUEsUUFBQSxRQUFBLEtBQUE7SUFDQSxPQUFBLEdBQUEsWUFBQSxLQUFBO0lBQ0E7R0FDQSxHQUFBLFVBQUEsVUFBQSxHQUFBOzs7OztFQUtBLFVBQUEsR0FBQSxZQUFBLFNBQUEsS0FBQTtHQUNBLE1BQUEsWUFBQSxRQUFBLFFBQUEsU0FBQSxZQUFBO0lBQ0EsR0FBQSxjQUFBO0lBQ0EsR0FBQSxZQUFBLFFBQUEsU0FBQSxHQUFBO0tBQ0EsR0FBQSxZQUFBLE9BQUEsU0FBQSxHQUFBLFlBQUE7O0lBRUEsR0FBQSxVQUFBLFVBQUEsR0FBQTs7Ozs7RUFLQSxVQUFBLEdBQUEsV0FBQSxTQUFBLEtBQUE7R0FDQSxNQUFBLFlBQUEsUUFBQSxRQUFBLFNBQUEsWUFBQTtJQUNBLEdBQUEsY0FBQTtJQUNBLEdBQUEsVUFBQSxVQUFBLEdBQUE7Ozs7O0VBS0EsSUFBQSxTQUFBLGFBQUE7RUFDQSxRQUFBLFVBQUEsUUFBQSxRQUFBLFNBQUEsTUFBQTtHQUNBLE1BQUEsT0FBQSxTQUFBLEdBQUEsWUFBQSxPQUFBLEdBQUEsWUFBQTtHQUNBLEdBQUEsYUFBQTtHQUNBLEdBQUEsV0FBQTtJQUNBLGNBQUE7SUFDQSxhQUFBLENBQUEsTUFBQSxNQUFBLE1BQUE7SUFDQSxVQUFBLEdBQUEsV0FBQTtJQUNBLFdBQUEsR0FBQSxXQUFBLFFBQUEsR0FBQSxFQUFBLE1BQUEsRUFBQSxFQUFBLEtBQUEsRUFBQSxNQUFBLEdBQUEsV0FBQSxNQUFBLEVBQUEsR0FBQSxXQUFBLE1BQUEsRUFBQTs7OztFQUlBLE1BQUEsWUFBQSxRQUFBLFFBQUEsU0FBQSxZQUFBO0dBQ0EsSUFBQSxhQUFBO0lBQ0EsR0FBQSxjQUFBO0lBQ0EsR0FBQSxZQUFBLFFBQUEsU0FBQSxHQUFBO0tBQ0EsR0FBQSxZQUFBLE9BQUEsU0FBQSxHQUFBLFlBQUE7O0lBRUEsR0FBQSxVQUFBLFVBQUEsR0FBQTtVQUNBO0lBQ0E7SUFDQTs7Ozs7RUFLQSxJQUFBLGFBQUEsU0FBQSxZQUFBO0tBQ0EsSUFBQSxjQUFBLEVBQUEsTUFBQSxHQUFBLElBQUEsWUFBQTtVQUNBLE9BQUEsRUFBQSxNQUFBLEdBQUEsSUFBQSxZQUFBO2NBQ0EsT0FBQSxFQUFBLGNBQUEsR0FBQSxVQUFBLElBQUEsTUFBQTs7OztHQUlBLEtBQUEsYUFBQTtJQUNBLEtBQUEsSUFBQSxJQUFBLFlBQUEsU0FBQSxHQUFBLEtBQUEsR0FBQSxLQUFBO0tBQ0EsSUFBQSxjQUFBO0tBQ0EsSUFBQSxJQUFBO0tBQ0EsSUFBQSxLQUFBO0tBQ0EsSUFBQSxJQUFBLEVBQUEsUUFBQSxZQUFBLEdBQUEsV0FBQSxZQUFBLEdBQUE7S0FDQSxHQUFBLFlBQUEsSUFBQSxFQUFBLFFBQUEsWUFBQSxHQUFBLFFBQUEsWUFBQSxHQUFBLFNBQUEsSUFBQSxFQUFBLFFBQUEsWUFBQSxHQUFBLE9BQUEsWUFBQSxHQUFBO0tBQ0EsWUFBQSxHQUFBLEdBQUEsV0FBQTtLQUNBLFlBQUEsR0FBQSxHQUFBLGVBQUEsWUFBQSxHQUFBLFFBQUE7S0FDQSxJQUFBLFNBQUE7S0FDQSxPQUFBLEtBQUEsWUFBQSxHQUFBLFNBQUEsWUFBQSxHQUFBO0tBQ0EsT0FBQSxTQUFBLFlBQUEsR0FBQSxRQUFBO0tBQ0EsT0FBQSxRQUFBLFlBQUEsR0FBQTtLQUNBLFlBQUEsR0FBQSxHQUFBLElBQUEsS0FBQTtLQUNBOztHQUVBLE9BQUE7OztFQUdBLEdBQUEsSUFBQSxZQUFBLFVBQUEsT0FBQTtTQUNBLFVBQUE7O0VBRUE7O0FDeEhBLENBQUEsVUFBQTtDQUNBOzs7Ozs7O0NBT0E7R0FDQSxPQUFBO0dBQ0EsV0FBQSxrQkFBQTs7Q0FFQSxnQkFBQSxVQUFBLENBQUE7O0NBRUEsU0FBQSxpQkFBQTtFQUNBLElBQUEsS0FBQTtFQUNBLEdBQUEsZUFBQTtFQUNBLEdBQUEsYUFBQTtFQUNBLEdBQUEsWUFBQTs7S0FFQSxTQUFBLFdBQUEsSUFBQSxHQUFBO01BQ0EsR0FBQSxXQUFBO01BQ0EsR0FBQSxlQUFBO1NBQ0EsVUFBQSxLQUFBLFNBQUEsRUFBQSxPQUFBLEdBQUEsS0FBQSxlQUFBO01BQ0E7O0tBRUEsU0FBQSxVQUFBLEdBQUEsR0FBQTtNQUNBLEdBQUEsV0FBQTtNQUNBLEdBQUEsZUFBQTtTQUNBLFVBQUEsS0FBQSxTQUFBLEVBQUEsT0FBQSxHQUFBLEtBQUEsZUFBQTtNQUNBO0VBQ0E7OztBQy9CQSxDQUFBLFVBQUE7Q0FDQTs7Ozs7O0NBTUE7R0FDQSxPQUFBO0dBQ0EsUUFBQSxVQUFBOztDQUVBLFFBQUEsVUFBQSxDQUFBLFNBQUEsU0FBQTtDQUNBLFNBQUEsU0FBQTtFQUNBLElBQUEsTUFBQTtFQUNBLElBQUEsa0JBQUE7RUFDQSxJQUFBLFdBQUE7RUFDQSxJQUFBLGFBQUE7RUFDQSxJQUFBLFFBQUE7RUFDQSxJQUFBLGFBQUE7RUFDQSxJQUFBLFVBQUE7RUFDQSxJQUFBLGFBQUE7RUFDQSxJQUFBLFlBQUE7RUFDQSxJQUFBLGNBQUE7RUFDQSxJQUFBLGlCQUFBO0VBQ0EsSUFBQSxjQUFBO0VBQ0EsSUFBQSxTQUFBOzs7RUFHQSxTQUFBLGlCQUFBO0dBQ0EsT0FBQSxNQUFBLElBQUE7R0FDQTs7RUFFQSxTQUFBLFNBQUEsS0FBQTtHQUNBLE9BQUEsTUFBQSxLQUFBLGNBQUE7R0FDQTs7RUFFQSxTQUFBLFdBQUEsU0FBQTtHQUNBLE9BQUEsTUFBQSxPQUFBLGdDQUFBO0dBQ0E7O0VBRUEsU0FBQSxNQUFBLEtBQUE7R0FDQSxPQUFBLE1BQUEsS0FBQSwyQkFBQTtHQUNBOztFQUVBLFNBQUEsWUFBQTtHQUNBLE9BQUEsTUFBQSxJQUFBO0dBQ0E7O0VBRUEsU0FBQSxTQUFBLFFBQUE7R0FDQSxJQUFBLElBQUEsWUFBQTtJQUNBLElBQUEsVUFBQSxZQUFBLE1BQUEsSUFBQSxRQUFBLGNBQUEsT0FBQSxVQUFBLFlBQUEsTUFBQSxJQUFBLFFBQUEsVUFBQSxRQUFBO0tBQ0EsT0FBQTtVQUNBO0tBQ0EsT0FBQTtLQUNBO0lBQ0E7O0dBRUEsT0FBQTtHQUNBOztFQUVBLFNBQUEsWUFBQTtHQUNBLElBQUEsSUFBQSxZQUFBO0lBQ0EsT0FBQSxVQUFBLFlBQUEsTUFBQSxJQUFBLFFBQUE7SUFDQTtHQUNBOztFQUVBLFNBQUEsV0FBQTtHQUNBLElBQUEsSUFBQSxZQUFBO0lBQ0EsT0FBQSxVQUFBLFlBQUEsTUFBQSxJQUFBLFFBQUE7SUFDQTtHQUNBOztFQUVBLFNBQUEsYUFBQTtHQUNBLElBQUEsSUFBQSxZQUFBO0lBQ0EsT0FBQSxVQUFBLFlBQUEsTUFBQSxJQUFBLFFBQUE7SUFDQTtHQUNBOztFQUVBLFNBQUEsZ0JBQUE7R0FDQSxJQUFBLElBQUEsWUFBQTtJQUNBLE9BQUEsVUFBQSxZQUFBLE1BQUEsSUFBQSxRQUFBO0lBQ0E7R0FDQTs7RUFFQSxTQUFBLGFBQUE7R0FDQSxJQUFBLElBQUEsWUFBQTtJQUNBLE9BQUEsVUFBQSxZQUFBLE1BQUEsSUFBQSxRQUFBO0lBQ0E7R0FDQTs7RUFFQSxTQUFBLFFBQUE7R0FDQSxJQUFBLElBQUEsWUFBQTtJQUNBLE9BQUEsVUFBQSxZQUFBLE1BQUEsSUFBQSxRQUFBO0lBQ0E7R0FDQTtFQUNBOztLQUVBIiwiZmlsZSI6ImlubmV0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIjsoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwJyxbXG5cdFx0J2FwcC5icmFuY2gnLFxuXHRcdCdhcHAuY2FzZScsXG5cdFx0J2FwcC5jYXInLFxuXHRcdCdhcHAuZGFzaGJvYXJkJyxcdFxuXHRcdCdhcHAuZGlyZWN0b3InLFxuXHRcdCdhcHAuZGlzcGF0Y2gnLFxuXHRcdCdhcHAuZHV0eWxpc3QnLFxuXHRcdCdhcHAuZ2VvJyxcblx0XHQnYXBwLmxheW91dCcsXG5cdFx0J2FwcC5tYXAnLFxuXHRcdCdhcHAubWVtYmVyJyxcblx0XHQnYXBwLm5vdGlmaWNhdGlvbicsXG5cdFx0J2FwcC5zYWZldHknLFxuXHRcdCdhcHAuc29ja2V0Jyxcblx0XHQnYXBwLnN1bW1hcnknLFxuXHRcdCdhcHAuc3RyaWtlVGVhbScsXG5cdFx0J2FwcC50aW1lcicsXG5cdFx0J2FwcC51c2VyJyxcblx0XHQnYW5ndWxhci5maWx0ZXInLFxuXHRcdCdhbmd1bGFyLWp3dCcsXG5cdFx0J2FuZ3VsYXItc3RvcmUnLFxuXHRcdCd1aS5yb3V0ZXInXG5cdF0pXG59KSgpO1xuXG4iLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuY2FyIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5jYXInLCBbXSlcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLmJyYW5jaCBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuYnJhbmNoJyxbXSlcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLmNhc2UgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmNhc2UnLCBbXG5cdFx0J2FwcC5icmFuY2gnLFxuXHRcdCdhcHAuY2FyJyxcblx0XHQnYXBwLm5vdGlmaWNhdGlvbicsXG5cdFx0J2FwcC51c2VyJyxcblx0XHQndWkucm91dGVyJyxcblx0XHQndWkuYm9vdHN0cmFwJ1xuXHRdKVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0LyoqXG5cdCogYXBwLmRhc2hib2FyZCBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuZGFzaGJvYXJkJyxbXG5cdFx0XHQnYXBwLnNvY2tldCcsXG5cdFx0XHQnYXBwLnVzZXInLFxuXHRcdFx0J2FwcC5icmFuY2gnXG5cdFx0XSk7XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5kaXJlY3RvciBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0b3InLCBbXG5cdFx0J2FwcC5icmFuY2gnLFxuXHRcdCdhcHAuY2FyJyxcblx0XHQnYXBwLm1lbWJlcicsXG5cdFx0J2FwcC5zdHJpa2VUZWFtJyxcblx0XHQnYXBwLnVzZXInLFxuXHRcdCd1aS5yb3V0ZXInXG5cdF0pXG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLmRpc3BhdGNoIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5kaXNwYXRjaCcsIFtcblx0XHQnYXBwLnVzZXInLFxuXHRcdCdhcHAuY2FyJyxcblx0XHQnYXBwLmJyYW5jaCcsXG5cdFx0J2FwcC5jYXNlJyxcblx0XHQndWkucm91dGVyJyxcblx0XHQndWkuYm9vdHN0cmFwJ1xuXHRdKVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuZHV0eWxpc3QgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmR1dHlsaXN0JywgW1xuXHRcdCdhcHAuYnJhbmNoJyxcblx0XHQnYXBwLnNvY2tldCcsXG5cdFx0J2FwcC51c2VyJ1xuXHRdKVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuZ2VvIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5nZW8nLCBbXSk7XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5sYXlvdXQgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLmxheW91dCcsIFtcblx0XHQnYXBwLnNvY2tldCcsXG5cdFx0J2FwcC51c2VyJyxcblx0XHQnYW5ndWxhci1qd3QnLFxuXHRcdCdhbmd1bGFyLXN0b3JhZ2UnLFxuXHRcdCd1aS5yb3V0ZXInXG5cdF0pXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQvKipcblx0KiBhcHAubWFwIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5tYXAnLCBbXG5cdFx0J2xlYWZsZXQtZGlyZWN0aXZlJ1xuXHRdKVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0LyoqXG5cdCogYXBwLm1lbWJlciBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXIubW9kdWxlKCdhcHAubWVtYmVyJywgW1xuXHRcdCdhcHAuYnJhbmNoJyxcblx0XHQnYXBwLm1lbWJlcicsXG5cdFx0J2FwcC51c2VyJyxcblx0XHQndWkuYm9vdHN0cmFwJyxcblx0XHQndWkucm91dGVyJ1xuXHRdKVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAubm90aWZpY2F0aW9uIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhci5tb2R1bGUoJ2FwcC5ub3RpZmljYXRpb24nLCBbXSk7XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5zYWZldHkgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLnNhZmV0eScsW1xuXHRcdCdhcHAuYnJhbmNoJyxcblx0XHQnYXBwLmNhc2UnLFxuXHRcdCdhcHAuZ2VvJyxcblx0XHQnYXBwLnNvY2tldCcsXG5cdFx0J2FwcC5zdHJpa2VUZWFtJyxcblx0XHQnYXBwLnRpbWVyJyxcblx0XHQnYXBwLnVzZXInLFxuXHRcdCd1aS5ib290c3RyYXAnLFxuXHRcdCd1aS5yb3V0ZXInXG5cdF0pXG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5zb2NrZXQgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLnNvY2tldCcsIFtcblx0XHQnYW5ndWxhci1zdG9yYWdlJ1xuXHRdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLnN0cmlrZVRlYW0gTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLnN0cmlrZVRlYW0nLFtdKTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLnN1bW1hcnkgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLnN1bW1hcnknLFtcblx0XHQnYXBwLmNhc2UnLFxuXHRcdCdhcHAuc29ja2V0Jyxcblx0XHQnYXBwLnN0cmlrZVRlYW0nLFxuXHRcdCd1aS5yb3V0ZXInXG5cdF0pO1xufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAudGltZXIgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLnRpbWVyJywgW1xuXHRcdCd0aW1lcidcblx0XSlcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLnVzZXIgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyLm1vZHVsZSgnYXBwLnVzZXInLCBbXG5cdFx0J2FuZ3VsYXItc3RvcmFnZScsXG5cdFx0J2FuZ3VsYXItand0J1xuXHRdKTtcbn0pOyIsIihmdW5jdGlvbigpe1xuICAgIGFuZ3VsYXJcbiAgICAgICAgLm1vZHVsZSgnYXBwJylcbiAgICAgICAgLmRpcmVjdGl2ZSgnbWluaW1hbGl6YVNpZGViYXInLG1pbmltYWxpemFTaWRlYmFyKVxuICAgICAgICAuZGlyZWN0aXZlKCdzaWRlTmF2aWdhdGlvbicsc2lkZU5hdmlnYXRpb24pXG4gICAgICAgIC5kaXJlY3RpdmUoJ2lib3hUb29scycsaWJveFRvb2xzKVxuICAgICAgICAuZGlyZWN0aXZlKCdiYWNrJyxiYWNrKTtcblxuICAgIG1pbmltYWxpemFTaWRlYmFyLiRpbmplY3QgICA9IFsnJHRpbWVvdXQnXTtcbiAgICBzaWRlTmF2aWdhdGlvbi4kaW5qZWN0ICAgICAgPSBbJyR0aW1lb3V0J107XG4gICAgaWJveFRvb2xzLiRpbmplY3QgICAgICAgICAgID0gWyckdGltZW91dCddO1xuICAgIGJhY2suJGluamVjdCAgICAgICAgICAgICAgICA9IFsnJHdpbmRvdyddO1xuXG4gICAgZnVuY3Rpb24gbWluaW1hbGl6YVNpZGViYXIoJHRpbWVvdXQpe1xuICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzxhIGNsYXNzPVwibmF2YmFyLW1pbmltYWxpemUgbWluaW1hbGl6ZS1zdHlsLTIgYnRuIGJ0bi1wcmltYXJ5XCIgaHJlZj1cIlwiIG5nLWNsaWNrPVwibWluaW1hbGl6ZSgpXCI+PGkgY2xhc3M9XCJmYSBmYS1iYXJzXCI+PC9pPjwvYT4nLFxuICAgICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24gKCRzY29wZSwgJGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUubWluaW1hbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJChcImJvZHlcIikudG9nZ2xlQ2xhc3MoXCJtaW5pLW5hdmJhclwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkKCdib2R5JykuaGFzQ2xhc3MoJ21pbmktbmF2YmFyJykgfHwgJCgnYm9keScpLmhhc0NsYXNzKCdib2R5LXNtYWxsJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhpZGUgbWVudSBpbiBvcmRlciB0byBzbW9vdGhseSB0dXJuIG9uIHdoZW4gbWF4aW1pemUgbWVudVxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NpZGUtbWVudScpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciBzbW9vdGhseSB0dXJuIG9uIG1lbnVcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjc2lkZS1tZW51JykuZmFkZUluKDUwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkKCdib2R5JykuaGFzQ2xhc3MoJ2ZpeGVkLXNpZGViYXInKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjc2lkZS1tZW51JykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzaWRlLW1lbnUnKS5mYWRlSW4oNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGFsbCBpbmxpbmUgc3R5bGUgZnJvbSBqcXVlcnkgZmFkZUluIGZ1bmN0aW9uIHRvIHJlc2V0IG1lbnUgc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzaWRlLW1lbnUnKS5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBzaWRlTmF2aWdhdGlvbigkdGltZW91dCl7XG4gICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gQ2FsbCB0aGUgbWV0c2lNZW51IHBsdWdpbiBhbmQgcGx1ZyBpdCB0byBzaWRlYmFyIG5hdmlnYXRpb25cbiAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50Lm1ldGlzTWVudSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGlib3hUb29scygkdGltZW91dCl7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICAgICAgc2NvcGU6IHRydWUsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL2NvbW1vbi9pYm94X3Rvb2xzLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24gKCRzY29wZSwgJGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBGdW5jdGlvbiBmb3IgY29sbGFwc2UgaWJveFxuICAgICAgICAgICAgICAgICRzY29wZS5zaG93aGlkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlib3ggPSAkZWxlbWVudC5jbG9zZXN0KCdkaXYuaWJveCcpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWNvbiA9ICRlbGVtZW50LmZpbmQoJ2k6Zmlyc3QnKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBpYm94LmZpbmQoJ2Rpdi5pYm94LWNvbnRlbnQnKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudC5zbGlkZVRvZ2dsZSgyMDApO1xuICAgICAgICAgICAgICAgICAgICAvLyBUb2dnbGUgaWNvbiBmcm9tIHVwIHRvIGRvd25cbiAgICAgICAgICAgICAgICAgICAgaWNvbi50b2dnbGVDbGFzcygnZmEtY2hldnJvbi11cCcpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLWRvd24nKTtcbiAgICAgICAgICAgICAgICAgICAgaWJveC50b2dnbGVDbGFzcygnJykudG9nZ2xlQ2xhc3MoJ2JvcmRlci1ib3R0b20nKTtcbiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWJveC5yZXNpemUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlib3guZmluZCgnW2lkXj1tYXAtXScpLnJlc2l6ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9LCA1MCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLy8gRnVuY3Rpb24gZm9yIGNsb3NlIGlib3hcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNsb3NlYm94ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlib3ggPSAkZWxlbWVudC5jbG9zZXN0KCdkaXYuaWJveCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWJveC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBiYWNrKCR3aW5kb3cpe1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgaUVsZW1lbnQsIGlBdHRycykge1xuICAgICAgICAgICAgICAgIGlFbGVtZW50LmJpbmQoJ2NsaWNrJyxmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAkd2luZG93Lmhpc3RvcnkuYmFjaygpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfTtcblxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0LyoqXG5cdCogYXBwLnJ1biBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdC8vIGFuZ3VsYXJcblx0Ly8gXHQubW9kdWxlKCdhcHAnKVxuXHQvLyBcdC5ydW4oYXBwUnVuKTtcblx0XG5cdC8vIGFwcFJ1bi4kaW5qZWN0ID0gWyckcm9vdFNjb3BlJywgJyRzdGF0ZScsICckc3RhdGVQYXJhbXMnLCAnc3RvcmUnLCAnand0SGVscGVyJywgJ1VzZXJTdmMnXTtcblxuXHQvLyBmdW5jdGlvbiBhcHBSdW4oICRyb290U2NvcGUsICRzdGF0ZSwgJHN0YXRlUGFyYW1zLCBzdG9yZSwgand0SGVscGVyLCBVc2VyU3ZjKXtcblx0Ly8gXHQkcm9vdFNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3RhcnQnLGZ1bmN0aW9uKGV2ZW50LCB0b1N0YXRlLCB0b1BhcmFtcywgZnJvbVN0YXRlLCBmcm9tUGFyYW1zKXtcblx0Ly8gICAgICAgICBpZiAodG9TdGF0ZS5uYW1lID09IFwiYW5vbi5sb2dpblwiKSB7XG5cdC8vICAgICAgICAgICAgIHN0b3JlLnJlbW92ZSgnand0Jyk7XG5cdC8vICAgICAgICAgfWVsc2V7XG5cdC8vICAgICAgICAgICAgIGlmICh0b1N0YXRlLmRhdGEgJiYgdG9TdGF0ZS5kYXRhLnJlcXVpcmVkTG9naW4pIHtcblxuXHQvLyAgICAgICAgICAgICAgICAgaWYgKCFVc2VyU3ZjLmlzTG9nZ2VkSW4oKSkge1xuXHQvLyAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdC8vICAgICAgICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdhbm9uLmxvZ2luJyk7XG5cdC8vICAgICAgICAgICAgICAgICB9IFxuXHQvLyAgICAgICAgICAgICAgICAgZWxzZSBpZiAodG9TdGF0ZS5kYXRhLnJvbGUuaW5kZXhPZihqd3RIZWxwZXIuZGVjb2RlVG9rZW4oc3RvcmUuZ2V0KCdqd3QnKSkucm9sZSkgPT0gLTEgKSB7XG5cdC8vICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0Ly8gICAgICAgICAgICAgICAgICAgICAkc3RhdGUuZ28oXCJhbm9uLmxvZ2luXCIpXG5cdC8vICAgICAgICAgICAgICAgICB9O1xuXHQvLyAgICAgICAgICAgICB9OyBcblx0Ly8gICAgICAgICB9XG5cdC8vICAgICB9KTtcblxuXHQvLyAgICAgJHJvb3RTY29wZS4kb24oJyRzdGF0ZUNoYW5nZUVycm9yJyxmdW5jdGlvbihldmVudCl7XG5cdC8vICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0Ly8gICAgIH0pO1xuXHQvLyB9XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5jYXIgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLmNhcicpXG5cdFx0LmNvbnRyb2xsZXIoJ0NhckVkaXRDb250cm9sbGVyJyxDYXJFZGl0Q29udHJvbGxlcik7XG5cblx0Q2FyRWRpdENvbnRyb2xsZXIuJGluamVjdCA9IFtdO1xuXHRmdW5jdGlvbiBDYXJFZGl0Q29udHJvbGxlcigpe1xuXG5cdH07XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLmNhciBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuY2FyJylcblx0XHQuY29udHJvbGxlcignQ2FySW5kZXhDb250cm9sbGVyJyxDYXJJbmRleENvbnRyb2xsZXIpO1xuXG5cdENhckluZGV4Q29udHJvbGxlci4kaW5qZWN0ID0gW107XG5cdGZ1bmN0aW9uIENhckluZGV4Q29udHJvbGxlcigpe1xuXG5cdH07XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHQvKipcblx0KiBhcHAuY2FyIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5jYXInKVxuXHRcdC5zZXJpY2UoJ0NhclN2YycsQ2FyU3ZjKTtcblxuXHRDYXJTdmMuJGluamVjdCA9IFsnJGh0dHAnXTtcblx0XG5cdGZ1bmN0aW9uIENhclN2YygkaHR0cCl7XG5cdFx0dmFyIHZtID0gdGhpczsgXG5cdFx0dm0uZmV0Y2hCeUNvcnBzICA9IGZldGNoQnlDb3Jwcztcblx0XHR2bS5mZXRjaEJ5QnJhbmNoID0gZmV0Y2hCeUJyYW5jaDtcblx0XHR2bS51cGRhdGUgXHRcdCA9IHVwZGF0ZTsgXG5cblx0XHRmdW5jdGlvbiBmZXRjaEJ5Q29ycHMoY29ycHMpe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9jYXJzP2NvcnBzPScgKyBjb3Jwcyk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGZldGNoQnlCcmFuY2goIGJyYW5jaCApe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9jYXJzP2JyYW5jaD0nICsgYnJhbmNoICk7XG5cdFx0fTtcblx0XHRcblx0XHRmdW5jdGlvbiB1cGRhdGUoZGF0YSl7XG5cdFx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL2NhcnMvJyArIGRhdGEuaWQgLCBkYXRhKTtcblx0XHR9O1xuXHR9O1xufSkoKTsiLCIoZnVuY3Rpb24oKXtcblxuXHQvKipcblx0KiBhcHAuYnJhbmNoIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5icmFuY2gnKVxuXHRcdC5jb250cm9sbGVyKCdCcmFuY2hTdmMnLEJyYW5jaFN2Yyk7XG5cblx0QnJhbmNoU3ZjLiRpbmplY3QgPSBbJyRodHRwJ107XG5cdGZ1bmN0aW9uIEJyYW5jaFN2YygkaHR0cCl7XG5cdFx0dmFyIHN2YyA9IHRoaXM7XG5cdFx0c3ZjLmZldGNoQnlDb3JwcyBcdD0gZmV0Y2hCeUNvcnBzO1xuXHRcdHN2Yy5mZXRjaEJ5TmFtZSBcdD0gZmV0Y2hCeU5hbWU7XG5cdFx0c3ZjLnRvdGFsTGlzdEZpbmRCeU5hbWUgPSB0b3RhbExpc3RGaW5kQnlOYW1lO1xuXHRcdHN2Yy5nZXREZXRhaWxzIFx0XHQ9IGdldERldGFpbHM7XG5cdFx0c3ZjLmZldGNoT25EdXR5QnJhbmNoZXMgPSBmZXRjaE9uRHV0eUJyYW5jaGVzO1xuXHRcdHN2Yy51cGRhdGUgXHRcdFx0PSB1cGRhdGU7XG5cdFx0c3ZjLnVwZGF0ZU1pc3Npb24gXHQ9IHVwZGF0ZU1pc3Npb247XG5cdFx0XG5cdFx0ZnVuY3Rpb24gZmV0Y2hCeUNvcnBzKGNvcnBzKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvYnJhbmNoZXM/Y29ycHM9JyArIGNvcnBzKTtcblx0XHR9O1xuXHRcdFxuXHRcdGZ1bmN0aW9uIGZldGNoQnlOYW1lKGJyYW5jaCl7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2JyYW5jaGVzP2JyYW5jaD0nICsgYnJhbmNoKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gdG90YWxMaXN0RmluZEJ5TmFtZShicmFuY2gpe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9icmFuY2hlcy8nICsgYnJhbmNoKVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIGdldERldGFpbHMoaWQpe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9icmFuY2hlcy8nICsgaWQpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBmZXRjaE9uRHV0eUJyYW5jaGVzKGJyYW5jaGVzKXtcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2JyYW5jaGVzL29uZHV0eScsYnJhbmNoZXMpO1xuXHRcdH07XG5cdFxuXHRcdGZ1bmN0aW9uIHVwZGF0ZShkYXRhKXtcblx0XHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvYnJhbmNoZXMvJyArIGRhdGEuYnJhbmNoICwgZGF0YSk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHVwZGF0ZU1pc3Npb24oZGF0YSl7XG5cdFx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL2JyYW5jaGVzP2JyYW5jaD0nICsgZGF0YS5icmFuY2gsIGRhdGEpO1xuXHRcdH07XG5cdH07XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLmNhc2UgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLmNhc2UnKVxuXHRcdC5jb250cm9sbGVyKCdDYXNlQ29uZmlybUNvbnRyb2xsZXInLENhc2VDb25maXJtQ29udHJvbGxlcik7XG5cblx0Q2FzZUNvbmZpcm1Db250cm9sbGVyLiRpbmplY3QgPSBbJ1VzZXJTdmMnLCAnQ2FzZVN2YycsICckc3RhdGVQYXJhbXMnLCckc3RhdGUnLCckbW9kYWxJbnN0YW5jZSddO1xuXHRmdW5jdGlvbiBDYXNlQ29uZmlybUNvbnRyb2xsZXIoVXNlclN2YywgQ2FzZVN2YywgJHN0YXRlUGFyYW1zLCRzdGF0ZSwkbW9kYWxJbnN0YW5jZSl7XG5cdFx0dmFyIHZtID0gdGhpcztcblx0XHRcblx0XHR2bS51c2VyID0ge307XG5cdFx0dm0uc2VuZCA9IHNlbmQ7IFxuXHRcdHZtLmNhc2VJbmZvID0ge1xuXHRcdFx0aWQgOiAkc3RhdGVQYXJhbXMuaWQsXG5cdFx0XHRlbmRBdCA6IG1vbWVudCgpLmZvcm1hdCgnWVlZWS1NTU0tREQsIGg6bW06c3MgYScpXG5cdFx0fTsgXG5cblx0XHRmdW5jdGlvbiBzZW5kKCl7XG5cdFx0XHRVc2VyU3ZjLmxvZ2luKHZtLnVzZXIpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHRcdENhc2VTdmMuY2xvc2VDYXNlKHZtLmNhc2VJbmZvKS5zdWNjZXNzKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0JG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XG5cdFx0XHRcdFx0JHN0YXRlLmdvKCdkdXR5RGVzay5jYXNlLmluZGV4Jyk7XG5cdFx0XHRcdH0pXG5cdFx0XHR9KTtcblx0XHR9O1xuXHR9O1xufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuY2FzZSBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuY2FzZScpXG5cdFx0LmNvbnRyb2xsZXIoJ0Nhc2VFZGl0Q29udHJvbGxlcicsQ2FzZUVkaXRDb250cm9sbGVyKTtcblxuXHRDYXNlRWRpdENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHN0YXRlUGFyYW1zJywgJ0Nhc2VTdmMnLCAnQ2FyU3ZjJywgJ1VzZXJTdmMnLCAnQnJhbmNoU3ZjJywgJyR3aW5kb3cnLCAnJG1vZGFsJywnTnRmU3ZjJ107XG5cblx0ZnVuY3Rpb24gQ2FzZUVkaXRDb250cm9sbGVyKCRzdGF0ZVBhcmFtcywgQ2FzZVN2YywgQ2FyU3ZjLCBVc2VyU3ZjLCBCcmFuY2hTdmMsICR3aW5kb3csICRtb2RhbCxOdGZTdmMpe1xuXHRcdHZhciB2bSA9IHRoaXM7IFxuXHRcdHZhciBkaXNwYXRjaENhcnMgID0gW107XG5cdFx0dm0udGVybWluYXRlQ2FzZSAgPSB0ZXJtaW5hdGVDYXNlO1xuXHRcdHZtLmRpc3BhdGNoIFx0ICA9IGRpc3BhdGNoO1xuXHRcdHZtLnNlbGVjdEJyYW5jaCAgID0gc2VsZWN0QnJhbmNoO1xuXHRcdHZtLmNhbmNlbERpc3BhdGNoID0gY2FuY2VsRGlzcGF0Y2g7XG5cdFx0dm0uc2F2ZSBcdFx0ICA9IHNhdmU7IFxuXG5cdFx0YW5ndWxhci5leHRlbmQodm0sIHtcblx0ICAgICAgICBub3dQb3M6IHtcblx0ICAgICAgICAgICAgbGF0OiAyNC45ODgsXG5cdCAgICAgICAgICAgIGxuZzogMTIxLjU3NTIsXG5cdCAgICAgICAgICAgIHpvb206IDE3XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBjb250cm9sczoge1xuXHQgICAgICAgICAgICBkcmF3OiB7fVxuXHQgICAgICAgIH1cblx0ICAgIH0pO1xuXG5cdFx0dmFyIGNhc2VJZCA9ICRzdGF0ZVBhcmFtcy5pZDtcblxuXHRcdEJyYW5jaFN2Yy5mZXRjaEJ5Q29ycHMoVXNlclN2Yy51c2VyQ29ycHMoKSkuc3VjY2VzcyhmdW5jdGlvbihicmFuY2hlcyl7XG5cdFx0ICAgIHZtLmJyYW5jaGVzID0gYnJhbmNoZXM7XG5cdFx0ICAgIHZtLmN1cnJlbnRCcmFuY2ggPSBicmFuY2hlc1swXS5uYW1lXG5cdFx0fSk7XG5cblx0XHRmdW5jdGlvbiBzZWxlY3RCcmFuY2goYnJhbmNoKXtcblx0ICAgIFx0dm0uY3VycmVudEJyYW5jaCA9IGJyYW5jaC5uYW1lO1xuXHQgICAgfTtcblxuXHRcdEJyYW5jaFN2Yy5mZXRjaEJ5Q29ycHMoVXNlclN2Yy51c2VyQ29ycHMoKSkuc3VjY2VzcyhmdW5jdGlvbihicmFuY2hlcyl7XG5cdFx0ICAgIHZtLmJyYW5jaGVzID0gYnJhbmNoZXM7XG5cdFx0ICAgIHZtLmN1cnJlbnRCcmFuY2ggPSBicmFuY2hlc1swXS5uYW1lXG5cdFx0fSlcblxuXHRcdENhc2VTdmMuZmV0Y2hCeUlkKGNhc2VJZCkuc3VjY2VzcyhmdW5jdGlvbihfY2FzZSl7XG5cdFx0XHR2bS5jdXJyZW50Q2FzZSA9IF9jYXNlO1xuXHRcdFx0dm0uZGlzcGF0Y2hMaXN0ID0gXy5wbHVjayhfY2FzZS5jYXJzLCAncmFkaW9Db2RlJykuam9pbignICcpXG5cdFx0XHR2bS5jdXJyZW50Q2FzZS5jYXJJZHMgPSBfLnBsdWNrKF9jYXNlLmNhcnMsJ19pZCcpO1xuXHRcdH0pLnRoZW4oZnVuY3Rpb24oKXtcblx0XHRcdENhclN2Yy5mZXRjaEJ5Q29ycHMoVXNlclN2Yy51c2VyQ29ycHMoKSkuc3VjY2VzcyhmdW5jdGlvbihjYXJzKXtcblx0XHRcdFx0dm0uY2FycyA9IGNhcnNcblx0XHRcdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCB2bS5jYXJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0aWYgKCB2bS5jdXJyZW50Q2FzZS5jYXJJZHMuaW5kZXhPZih2bS5jYXJzW2ldLl9pZCkgPiAtMSApIHtcblx0XHRcdFx0XHRcdHZtLmNhcnNbaV0uaXNDaGVja2VkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGRpc3BhdGNoQ2Fycy5wdXNoKHZtLmNhcnNbaV0pO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH07XG5cdFx0XHR9KTtcblxuXHRcdFx0TnRmU3ZjLmZldGNoKCkuc3VjY2VzcyhmdW5jdGlvbihudGZzKXtcblx0XHRcdFx0dm0ubnRmcyA9IG50ZnM7XG5cdFx0XHRcdHZtLmN1cnJlbnRDYXNlLm50ZnMgPSBfLnBsdWNrKG50ZnMsJ3R5cGUnKVxuXHRcdFx0XHR2bS5jdXJyZW50Q2FzZS5udGYgID0gdm0uY3VycmVudENhc2UubnRmc1swXTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0ZnVuY3Rpb24gZ2V0QnJhbmNoSWQoYnJhbmNoZXNMaXN0KXtcblx0XHRcdHZhciBicmFuY2hlcyA9IF8udW5pcXVlKGJyYW5jaGVzTGlzdCk7XG5cdFx0XHR2YXIgYnJhbmNoSWRzID0gW107XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IHZtLmJyYW5jaGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGlmIChicmFuY2hlcy5pbmRleE9mKHZtLmJyYW5jaGVzW2ldLm5hbWUpID4gLTEpIHtcblx0XHRcdFx0XHRicmFuY2hJZHMucHVzaCh2bS5icmFuY2hlc1tpXS5faWQpO1xuXHRcdFx0XHR9O1xuXHRcdFx0fTtcblx0XHRcdHJldHVybiAgYnJhbmNoSWRzO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBkaXNwYXRjaCggY2FyICl7XG5cdFx0XHRjYXIuaXNDaGVja2VkID0gdHJ1ZTsgXG5cdFx0XHRkaXNwYXRjaENhcnMucHVzaChjYXIpO1xuXHRcdFx0dm0uZGlzcGF0Y2hMaXN0ID0gXy5wbHVjayhkaXNwYXRjaENhcnMsICdyYWRpb0NvZGUnKS5qb2luKFwiIFwiKVxuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBjYW5jZWxEaXNwYXRjaChjYXIpe1xuXHRcdFx0Y2FyLmlzQ2hlY2tlZCA9IGZhbHNlO1xuXHRcdFx0ZGlzcGF0Y2hDYXJzLnNwbGljZShfLnBsdWNrKGRpc3BhdGNoQ2FycywgJ19pZCcpLmluZGV4T2YoY2FyLl9pZCksMSlcblx0XHRcdHZtLmRpc3BhdGNoTGlzdCA9IF8ucGx1Y2soZGlzcGF0Y2hDYXJzLCAncmFkaW9Db2RlJykuam9pbihcIiBcIilcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gc2F2ZSgpe1xuXHRcdFx0dmFyIGN1cnJlbnROdGY7XG5cblx0XHRcdHZtLm50ZnMuZm9yRWFjaChmdW5jdGlvbihudGYsaWQpe1xuXHRcdFx0XHRpZiAobnRmLnR5cGUgPT0gdm0uY3VycmVudENhc2UubnRmICkge1xuXHRcdFx0XHRcdGN1cnJlbnROdGYgID0gdm0ubnRmc1tpZF07XG5cdFx0XHRcdH07XG5cdFx0XHR9KTtcblx0XHRcdENhc2VTdmMudXBkYXRlKHtcblx0XHRcdFx0Y2FzZUlkICAgIDogdm0uY3VycmVudENhc2UuX2lkLFxuXHRcdFx0XHRhZGRyZXNzICAgOiB2bS5jdXJyZW50Q2FzZS5hZGRyZXNzIHx8IFwi5ris6KmmXCIsXG5cdFx0XHRcdG9mZmljZXJSZWNlaXZlciA6IFVzZXJTdmMuY3VycmVudFVzZXIoKSB8fCAgXCLlionmm4nmm7xcIixcblx0XHRcdFx0dHlwZSAgICAgIDogdm0uY3VycmVudENhc2UudHlwZSB8fCBcIueBq+itplwiLFxuXHRcdFx0XHR0eXBlcyBcdCAgOiB2bS5jdXJyZW50Q2FzZS50eXBlcyxcblx0XHRcdFx0cGhvbmUgICAgIDogdm0uY3VycmVudENhc2UucGhvbmUgfHwgXCLmuKzoqaZcIixcblx0XHRcdFx0YnJhbmNoZXMgIDogXy51bmlxdWUoXy5wbHVjayhkaXNwYXRjaENhcnMsICdicmFuY2gnKSksXG5cdFx0XHRcdGJyYW5jaElkcyA6IGdldEJyYW5jaElkKHZtLmN1cnJlbnRDYXNlLmJyYW5jaGVzKSxcblx0XHQgIFx0XHRjYXJzICAgICAgOiBfLnBsdWNrKGRpc3BhdGNoQ2FycywnX2lkJyksXG5cdFx0XHRcdGlzT25nb2luZyA6IHRydWUsXG5cdFx0XHRcdGNvcnBzIFx0ICA6IFVzZXJTdmMudXNlckNvcnBzKCksXG5cdFx0XHRcdGVudiBcdCAgOiB2bS5jdXJyZW50Q2FzZS5lbnYsXG5cdFx0XHRcdGVudnMgXHQgIDogdm0uY3VycmVudENhc2UuZW52cyxcblx0XHRcdFx0Zmxvb3IgXHQgIDogdm0uY3VycmVudENhc2UuZmxvb3IsXG5cdFx0XHRcdG50ZiAgICAgICA6IGN1cnJlbnROdGYuX2lkLFxuXHRcdFx0XHRsYXN0VXBkYXRlIDogbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NTS1ERCBoOm1tOnNzIGEnKVxuXHRcdFx0fSkuc3VjY2VzcyhmdW5jdGlvbigpe1xuXHRcdFx0XHQkd2luZG93Lmhpc3RvcnkuYmFjaygpO1xuXHRcdFx0fSlcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gdGVybWluYXRlQ2FzZSAoKXtcblx0XHRcdHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuXHRcdFx0ICBcdHRlbXBsYXRlVXJsOiAndmlld3MvY2FzZS9jYXNlLmNvbmZpcm0ubW9kYWwuaHRtbCcsXG5cdFx0XHQgICAgY29udHJvbGxlcjogJ0Nhc2VDb25maXJtQ3RybCcsXG5cdFx0XHQgICAgc2l6ZTogXCJtZFwiXHQgICAgXG5cdFx0XHR9KTtcblx0XHR9O1xuXHR9XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5jYXNlJylcblx0XHQuY29udHJvbGxlcignQ2FzZUNvbnRyb2xsZXInLENhc2VDb250cm9sbGVyKTtcblx0XG5cdENhc2VDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzdGF0ZVBhcmFtcycsJyRtb2RhbCcsJ0Nhc2VTdmMnLCAnJGxvZycsICdTb2NrZXRTdmMnLCAnVXNlclN2YycsICckbG9jYXRpb24nXTtcblx0ZnVuY3Rpb24gQ2FzZUNvbnRyb2xsZXIoJHN0YXRlUGFyYW1zLCRtb2RhbCxDYXNlU3ZjLCAkbG9nLCBTb2NrZXRTdmMsIFVzZXJTdmMsICRsb2NhdGlvbil7XG5cdFx0dmFyIHZtID0gdGhpczsgXG5cdFx0dm0ubWF4U2l6ZSBcdFx0PSA1OyBcblx0XHR2bS5pdGVtc1BlclBhZ2UgPSAzO1xuXHRcdHZtLmN1cnJlbnRQYWdlICA9IDE7XG5cdFx0dm0ucGFnZUNoYW5nZWQgID0gcGFnZUNoYW5nZWQ7XG5cdFx0dm0ucXVlcnlDYXNlcyAgID0gcXVlcnlDYXNlcztcblx0XHR2bS5jaG9vc2UgXHRcdD0gY2hvb3NlO1xuXHRcdFxuXHRcdHZtLnF1ZXJ5Q2FzZXMoKTtcblxuXHRcdGZ1bmN0aW9uIHBhZ2VDaGFuZ2VkKCl7XG5cdFx0XHRDYXNlU3ZjLmZldGNoKFVzZXJTdmMudXNlckNvcnBzKCksIHZtLmN1cnJlbnRQYWdlICwgdm0uaXRlbXNQZXJQYWdlICkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcblx0XHRcdFx0dm0uY2FzZXMgPSBkYXRhLmNhc2VzO1xuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHF1ZXJ5Q2FzZXMoKXtcblx0XHRcdENhc2VTdmMuZmV0Y2goVXNlclN2Yy51c2VyQ29ycHMoKSwgdm0uY3VycmVudFBhZ2UsIHZtLml0ZW1zUGVyUGFnZSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcblx0XHRcdFx0dm0uY2FzZXMgPSBkYXRhLmNhc2VzO1xuXHRcdFx0XHR2bS50b3RhbEl0ZW1zID0gZGF0YS50b3RhbENhc2VzO1xuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGNob29zZShpZCl7XG5cdFx0XHRDYXNlU3ZjLmZldGNoQnlJZCh2bS5jYXNlc1tpZF0uX2lkKS5zdWNjZXNzKGZ1bmN0aW9uKF9jYXNlKXtcblx0XHRcdFx0XHR2bS5jYXNlRGV0YWlscyA9IF9jYXNlO1xuXHRcdFx0fSk7XG5cdFx0fTtcblxuXHRcdFNvY2tldFN2Yy5vbignbmV3Q2FzZScsZnVuY3Rpb24oX2Nhc2Upe1xuXHRcdFx0dm0uY2FzZXMudW5zaGlmdChfY2FzZSk7XG5cdFx0fSk7XG5cblx0XHRTb2NrZXRTdmMub24oJ2Nhc2VNb2RpZmllZCcsZnVuY3Rpb24oX2Nhc2Upe1xuXHRcdFx0dm0uY2FzZXNbX2Nhc2UuY2FzZUlkLTFdID0gX2Nhc2U7XG5cdFx0fSk7XG5cdH07XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLmNhc2UgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLmNhc2UnKVxuXHRcdC5jb250cm9sbGVyKCdDYXNlTW9kYWxDb250cm9sbGVyJyxDYXNlTW9kYWxDb250cm9sbGVyKTtcblxuXHRDYXNlTW9kYWxDb250cm9sbGVyLiRpbmplY3QgPSBbJ0NhclN2YycsICckbW9kYWxJbnN0YW5jZScsICdDYXNlU3ZjJywnJHN0YXRlJywgJ2Nhc2VJZCcsJ2Nhc2VEZXRhaWxzJywgJ1N0U3ZjJywgJyR3aW5kb3cnLCAnQnJhbmNoU3ZjJywgJ1VzZXJTdmMnLCAnTnRmU3ZjJ107XG5cblx0ZnVuY3Rpb24gQ2FzZU1vZGFsQ29udHJvbGxlcihDYXJTdmMsICRtb2RhbEluc3RhbmNlLCBDYXNlU3ZjLCRzdGF0ZSwgY2FzZUlkLGNhc2VEZXRhaWxzLCBTdFN2YywgJHdpbmRvdywgQnJhbmNoU3ZjLCBVc2VyU3ZjLCBOdGZTdmMpe1xuXHRcdHZhciB2bSA9IHRoaXM7IFxuXHRcdHZtLm5mdE9wdGlvbiA9IHt9O1xuXHRcdHZtLmRpc3BhdGNoTGlzdCA9IHZtLmNhc2VPYmouZGlzcGF0Y2hMaXN0LmpvaW4oXCIgXCIpO1xuXHRcdHZtLmNhc2VPYmogPSB7XG5cdFx0XHRhZGRyZXNzIDogY2FzZURldGFpbHMuYWRkcmVzcyB8fCBudWxsLFxuXHRcdFx0cGhvbmUgOiBjYXNlRGV0YWlscy5waG9uZSB8fCBudWxsLFxuXHRcdCAgICB0eXBlIDogY2FzZURldGFpbHMudHlwZSB8fCAgXCLngavoraZcIiwgXG5cdFx0ICAgIHR5cGVzIDogWyBcIueBq+itplwiLCBcIuaVkeitt1wiLCBcIueBveWus1wiLCBcIuaqouiIiVwiLFwi5YW25LuWXCJdLFxuXHRcdCAgICBlbnYgICA6IFwi5L2P5a6F54Gr6K2mXCIsXG5cdFx0ICAgIGVudnMgIDogW1wi5L2P5a6F54Gr6K2mXCIsXCLpq5jmqJPjgIHlnLDkuIvoiIflt6Xlu6BcIixcIuaQtuaVkeWbsOmbo+WNgFwiLFwi5YW25LuWXCJdLFxuXHRcdCAgICBmbG9vciA6IDEsIFxuXHRcdCAgICBjYXJJZHMgOiBnZXRDYXJzRGV0YWlsKGNhc2VEZXRhaWxzKS5jYXJJZHMgIHx8IFtdLFxuXHRcdCAgICBkaXNwYXRjaExpc3QgOiBnZXRDYXJzRGV0YWlsKGNhc2VEZXRhaWxzKS5kaXNwYXRjaExpc3QgfHwgIFtdLFxuXHRcdCAgICBicmFuY2hlcyA6IGdldENhcnNEZXRhaWwoY2FzZURldGFpbHMpLmJyYW5jaGVzIHx8ICBbXVxuXHRcdH07XG5cdFx0dm0udXBkYXRlIFx0ID0gdXBkYXRlO1xuXHRcdHZtLmdldENhcnMgXHQgPSBnZXRDYXJzO1xuXHRcdHZtLmNhbmNlbCBcdCA9IGNhbmNlbDtcblx0XHR2bS5jYW5jZWxEaXNwYXRjaCA9IGNhbmNlbERpc3BhdGNoO1xuXHRcdHZtLmRpc3BhdGNoICA9IGRpc3BhdGNoO1xuXHRcdHZtLmNsb3NlQ2FzZSA9IGNsb3NlQ2FzZTtcblx0XHR2bS5zYXZlIFx0ID0gc2F2ZTtcblxuXHRcdGlmIChfLmlzRW1wdHkoY2FzZURldGFpbHMpKSB7XG5cdFx0XHR2bS5pc05ldyA9IHRydWU7XG5cdFx0XHRjYXJPYmpzID0gW107XG5cdFx0fWVsc2V7XG5cdFx0XHR2bS5pc05ldyA9IGZhbHNlO1xuXHRcdFx0dmFyIGNhck9ianMgPSBjYXNlRGV0YWlscy5jYXJzO1xuXHRcdH07XG5cblx0XHROdGZTdmMuZmV0Y2goKS5zdWNjZXNzKGZ1bmN0aW9uKG5mdHMpe1xuXHRcdFx0dm0ubmZ0T3B0aW9uLm5mdHMgPSBuZnRzO1xuXHRcdH0pLnRoZW4oZnVuY3Rpb24oKXtcblx0XHRcdHZtLm5mdE9wdGlvbi5uZnQgPSB2bS5uZnRPcHRpb24ubmZ0c1swXTtcblx0XHR9KVxuXG5cdFx0QnJhbmNoU3ZjLmZldGNoQnlDb3JwcyhVc2VyU3ZjLnVzZXJDb3JwcygpKS5zdWNjZXNzKGZ1bmN0aW9uKGJyYW5jaGVzKXtcblx0XHQgICAgdm0uYnJhbmNoZXMgPSBicmFuY2hlcztcblx0XHR9KTtcblxuXHRcdGZ1bmN0aW9uIGdldENhcnNEZXRhaWwob2JqKXtcblx0XHRcdHZhciBkaXNwYXRjaExpc3QgPSBbXTtcblx0XHRcdHZhciBjYXJJZHMgPSBbXTtcblx0XHRcdHZhciBicmFuY2hlcyA9IFtdO1xuXG5cdFx0XHRpZiAob2JqLmNhcnMpIHtcblx0XHRcdFx0Zm9yICh2YXIgaSA9IG9iai5jYXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRcdFx0ZGlzcGF0Y2hMaXN0LnB1c2gob2JqLmNhcnNbaV0ucmFkaW9Db2RlKTtcblx0XHRcdFx0XHRjYXJJZHMucHVzaChvYmouY2Fyc1tpXS5faWQpO1xuXHRcdFx0XHRcdGJyYW5jaGVzLnB1c2gob2JqLmNhcnNbaV0uYnJhbmNoKTsgXG5cdFx0XHRcdH07XG5cdFx0XHRcdHJldHVybiB7ZGlzcGF0Y2hMaXN0IDogZGlzcGF0Y2hMaXN0ICwgY2FySWRzIDogY2FySWRzICwgYnJhbmNoZXMgOiAgYnJhbmNoZXN9XG5cblx0XHRcdH1lbHNle1xuXHRcdFx0XHRyZXR1cm4ge307XG5cdFx0XHR9O1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBnZXRCcmFuY2hJZChicmFuY2hlc0xpc3Qpe1xuXHRcdFx0dmFyIGJyYW5jaGVzID0gXy51bmlxdWUoYnJhbmNoZXNMaXN0KTtcblx0XHRcdHZhciBicmFuY2hJZHMgPSBbXTtcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdm0uYnJhbmNoZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0aWYgKGJyYW5jaGVzLmluZGV4T2Yodm0uYnJhbmNoZXNbaV0ubmFtZSkgPiAtMSkge1xuXHRcdFx0XHRcdGJyYW5jaElkcy5wdXNoKHZtLmJyYW5jaGVzW2ldLl9pZCk7XG5cdFx0XHRcdH07XG5cdFx0XHR9O1xuXHRcdFx0cmV0dXJuICBicmFuY2hJZHM7XG5cdFx0fTtcblx0XHRcblx0XHRmdW5jdGlvbiBnZXRDYXJzKCBicmFuY2ggKXtcblx0XHRcdCBDYXJTdmMuZmV0Y2hCeUJyYW5jaChicmFuY2gubmFtZSkuc3VjY2VzcyhmdW5jdGlvbihjYXJzKXtcblx0XHRcdCBcdGZvciAodmFyIGkgPSBjYXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHQgXHRcdGlmICh2bS5jYXNlT2JqLmNhcklkcy5pbmRleE9mKGNhcnNbaV0uX2lkKSA+IC0xICkge1xuXHRcdFx0IFx0XHRcdGNhcnNbaV0uaXNDaGVja2VkID0gdHJ1ZTsgXG5cdFx0XHQgXHRcdH07XG5cdFx0XHQgXHR9O1xuXHRcdFx0IFx0dm0uY2FycyA9IGNhcnM7XG5cdFx0XHQgfSk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGNhbmNlbCgpIHtcblx0XHRcdCRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBjYW5jZWxEaXNwYXRjaChjYXIpe1xuXHRcdFx0Y2FyLmlzQ2hlY2tlZCA9IGZhbHNlO1xuXHRcdFx0Y2FyT2Jqcy5zcGxpY2UoY2FyT2Jqcy5pbmRleE9mKGNhciksMSlcblx0XHRcdHZtLmNhc2VPYmouY2FySWRzLnNwbGljZSh2bS5jYXNlT2JqLmRpc3BhdGNoTGlzdC5pbmRleE9mKGNhci5faWQpLDEpO1xuXHRcdFx0dm0uY2FzZU9iai5kaXNwYXRjaExpc3Quc3BsaWNlKHZtLmNhc2VPYmouZGlzcGF0Y2hMaXN0LmluZGV4T2YoY2FyLnJhZGlvQ29kZSksMSk7XG5cdFx0XHR2bS5jYXNlT2JqLmJyYW5jaGVzLnNwbGljZSh2bS5jYXNlT2JqLmRpc3BhdGNoTGlzdC5pbmRleE9mKGNhci5icmFuY2gpLDEpO1xuXHRcdFx0dm0uZGlzcGF0Y2hMaXN0ID0gdm0uY2FzZU9iai5kaXNwYXRjaExpc3Quam9pbihcIiBcIik7XG5cdFx0fTtcblx0XHRcblx0XHRmdW5jdGlvbiBkaXNwYXRjaCggY2FyICl7XG5cdFx0XHRjYXIuaXNDaGVja2VkID0gdHJ1ZTsgXG5cdFx0XHRjYXJPYmpzLnB1c2goY2FyKTtcblx0XHRcdHZtLmNhc2VPYmouY2FySWRzLnB1c2goY2FyLl9pZCk7XG5cdFx0XHR2bS5jYXNlT2JqLmRpc3BhdGNoTGlzdC5wdXNoKGNhci5yYWRpb0NvZGUpO1xuXHRcdFx0dm0uY2FzZU9iai5icmFuY2hlcy5wdXNoKGNhci5icmFuY2gpO1xuXHRcdFx0dm0uZGlzcGF0Y2hMaXN0ID0gdm0uY2FzZU9iai5kaXNwYXRjaExpc3Quam9pbihcIiBcIik7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGNsb3NlQ2FzZSgpe1xuXHRcdFx0U3RTdmMuY291bnQoY2FzZURldGFpbHMuX2lkKS5zdWNjZXNzKGZ1bmN0aW9uKHRvdGFsKXtcblx0XHRcdFx0aWYgKHRvdGFsID4gMCApIHtcblx0XHRcdFx0XHQkd2luZG93LmFsZXJ0KFwi5bCa5pyJ6ZqK5ZOh5Zyo5a6J5YWo566h5Yi2XCIpXG5cdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRcdENhc2VTdmMuY2xvc2VDYXNlKHtcblx0XHRcdFx0XHRcdGlkIDogY2FzZURldGFpbHMuX2lkLFxuXHRcdFx0XHRcdFx0aXNPbmdvaW5nIDogZmFsc2Vcblx0XHRcdFx0XHR9KS5zdWNjZXNzKGZ1bmN0aW9uKG1zZyl7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhtc2cpXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0JG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XG5cdFx0XHRcdFx0JHN0YXRlLnJlbG9hZCgpXG5cdFx0XHRcdH07XG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gc2F2ZSgpe1xuXHRcdFx0Q2FzZVN2Yy5jcmVhdGUoe1xuXHRcdFx0XHRjYXNlSWQgICA6IGNhc2VJZCArIDEsIFxuXHRcdFx0XHRhZGRyZXNzICAgOiB2bS5jYXNlT2JqLmFkZHJlc3MgfHwgXCLmuKzoqaZcIixcblx0XHRcdFx0b2ZmaWNlclJlY2VpdmVyIDogVXNlclN2Yy5jdXJyZW50VXNlcigpIHx8ICBcIuWKieabieabvFwiLFxuXHRcdFx0XHR0eXBlICAgICAgOiB2bS5jYXNlT2JqLnR5cGUgfHwgXCLmlZHorbdcIixcblx0XHRcdFx0cGhvbmUgICAgIDogdm0uY2FzZU9iai5waG9uZSB8fCBcIua4rOipplwiLFxuXHRcdFx0XHRicmFuY2hlcyAgOiBfLnVuaXF1ZSh2bS5jYXNlT2JqLmJyYW5jaGVzKSxcblx0XHRcdFx0YnJhbmNoSWRzIDogZ2V0QnJhbmNoSWQodm0uY2FzZU9iai5icmFuY2hlcyksXG5cdFx0ICBcdFx0Y2FycyAgICAgIDogdm0uY2FzZU9iai5jYXJJZHMsXG5cdFx0XHRcdGlzT25nb2luZyA6IHRydWUsXG5cdFx0XHRcdGNvcnBzIFx0ICA6IFVzZXJTdmMudXNlckNvcnBzKCksXG5cdFx0XHRcdGVudiBcdCAgOiB2bS5jYXNlT2JqLmVudixcblx0XHRcdFx0Zmxvb3IgXHQgIDogdm0uY2FzZU9iai5mbG9vclxuXHRcdFx0fSkuc3VjY2VzcyhmdW5jdGlvbihuZXdDYXNlKXtcblx0XHRcdFx0JG1vZGFsSW5zdGFuY2UuY2xvc2UobmV3Q2FzZSlcblx0XHRcdH0pO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiB1cGRhdGUoKXtcblx0XHRcdHZhciBjb250ZW50ID0ge1xuXHRcdFx0XHRpZCA6IGNhc2VEZXRhaWxzLl9pZCxcblx0XHRcdFx0Y2FzZUlkICAgOiBjYXNlSWQsIFxuXHRcdFx0XHRhZGRyZXNzICAgOiB2bS5jYXNlT2JqLmFkZHJlc3MsXG5cdFx0XHRcdG9mZmljZXJSZWNlaXZlciA6IFVzZXJTdmMuY3VycmVudFVzZXIoKSB8fCBcIuWKieabieabvFwiLFxuXHRcdFx0XHR0eXBlICAgICAgOiB2bS5jYXNlT2JqLnR5cGUsXG5cdFx0XHRcdHBob25lICAgICA6IHZtLmNhc2VPYmoucGhvbmUsXG5cdFx0XHRcdGJyYW5jaGVzICA6IF8udW5pcXVlKHZtLmNhc2VPYmouYnJhbmNoZXMpLFxuXHRcdFx0XHRicmFuY2hJZHMgOiBnZXRCcmFuY2hJZCh2bS5jYXNlT2JqLmJyYW5jaGVzKSxcblx0XHQgIFx0XHRjYXJzICAgICAgOiB2bS5jYXNlT2JqLmNhcklkcyxcblx0XHRcdFx0aXNPbmdvaW5nIDogdHJ1ZSxcblx0XHRcdFx0ZW52IFx0ICA6IHZtLmNhc2VPYmouZW52LFxuXHRcdFx0XHRmbG9vciBcdCAgOiB2bS5jYXNlT2JqLmZsb29yXG5cdFx0XHR9O1xuXHRcdFx0XG5cdFx0XHRDYXNlU3ZjLnVwZGF0ZShjb250ZW50KTtcblx0XHRcdCRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuXHRcdH07XG5cdH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLmNhc2UgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLmNhc2UnKVxuXHRcdC5jb250cm9sbGVyKCdDYXNlTmV3Q29udHJvbGxlcicsQ2FzZU5ld0NvbnRyb2xsZXIpO1xuXG5cdENhc2VOZXdDb250cm9sbGVyLiRpbmplY3QgPSBbJ0NhclN2YycsICdCcmFuY2hTdmMnLCAnTnRmU3ZjJywgJ1VzZXJTdmMnLCckbG9jYXRpb24nLCdsZWFmbGV0RGF0YScsICckc3RhdGVQYXJhbXMnLCAnQ2FzZVN2YycsICckd2luZG93JywgJyRzdGF0ZScsICdHZW9TdmMnXTtcblxuXHRmdW5jdGlvbiBDYXNlTmV3Q29udHJvbGxlcihDYXJTdmMsIEJyYW5jaFN2YywgTnRmU3ZjLCBVc2VyU3ZjLCRsb2NhdGlvbixsZWFmbGV0RGF0YSwgJHN0YXRlUGFyYW1zLCBDYXNlU3ZjLCAkd2luZG93LCAkc3RhdGUsIEdlb1N2Yyl7XG5cdFx0dmFyIHZtID0gdGhpcztcblx0XHR2bS5zZWxlY3RCcmFuY2ggPSBzZWxlY3RCcmFuY2g7XG5cdFx0dm0uc2F2ZSA9IHNhdmU7XG5cdFx0dm0ubG9jYXRlQWRkcmVzcyA9IGxvY2F0ZUFkZHJlc3M7XG5cdFx0dm0uY2FuY2VsRGlzcGF0Y2ggPSBjYW5jZWxEaXNwYXRjaDtcblx0XHR2bS5kaXNwYXRjaCA9IGRpc3BhdGNoO1xuXHRcdHZtLmN1cnJlbnRUaW1lID0gIG1vbWVudCgpLmZvcm1hdCgnaDptbTpzcyBhJyk7IFxuXHRcdHZhciBiYXR0bGVSYWRpdXNzID0gW107XG5cdFx0dmFyIGRpc3BhdGNoQ2FycyA9IFtdO1xuXHRcdHZhciBub3RpZmljYXRpb25zO1xuXHRcdHZtLmRpc3BhdGNoTGlzdCA9IHZtLmN1cnJlbnRDYXNlLmRpc3BhdGNoTGlzdC5qb2luKCcgJyk7XG5cdFx0XG5cdFx0dm0uY3VycmVudENhc2UgPSB7XG5cdFx0XHRwaG9uZSBcdDogbnVsbCxcblx0XHQgICAgdHlwZSBcdDogJ+eBq+itpicsIFxuXHRcdCAgICB0eXBlcyBcdDogWyAn54Gr6K2mJywgJ+aVkeittycsICfngb3lrrMnLCAn5qqi6IiJJywn5YW25LuWJ10sXG5cdFx0ICAgIGVudiAgIFx0OiAn5L2P5a6F54Gr6K2mJyxcblx0XHQgICAgZW52cyAgXHQ6IFsn5L2P5a6F54Gr6K2mJywn6auY5qiT44CB5Zyw5LiL6IiH5bel5bugJywn5pC25pWR5Zuw6Zuj5Y2AJywn5YW25LuWJ10sXG5cdFx0ICAgIGZsb29yIFx0OiAxLCBcblx0XHQgICAgY2FySWRzICA6IFtdLFxuXHRcdCAgICBkaXNwYXRjaExpc3QgOiBbXSxcblx0XHQgICAgYnJhbmNoZXMgOiAgW10sXG5cdFx0ICAgIGxvY2F0aW9uIDogR2VvU3ZjLmRlZmF1bHRMb2NhdGlvbigpXG5cdFx0fTsgXG5cblx0XHRHZW9TdmMuZmV0Y2hCYXNlTG9jYXRpb24oVXNlclN2Yy51c2VyQ29ycHMoKSkuc3VjY2VzcyhmdW5jdGlvbihsb2NhdGlvbnMpe1xuXHRcdFx0dm0ubG9jYXRpb25zID0gbG9jYXRpb25zO1xuXHRcdH0pO1xuXG5cdCAgICBhbmd1bGFyLmV4dGVuZCh2bSwge1xuXHQgICAgICAgIG5vd1Bvczoge1xuXHQgICAgICAgICAgICBsYXQ6IEdlb1N2Yy5kZWZhdWx0TG9jYXRpb24oKS5sYXQsXG5cdCAgICAgICAgICAgIGxuZzogR2VvU3ZjLmRlZmF1bHRMb2NhdGlvbigpLmxuZyxcblx0ICAgICAgICAgICAgem9vbTogMTdcblx0ICAgICAgICB9LFxuXHQgICAgICAgbWFya2Vyczoge30sXG5cdCAgICB9KTtcblxuXHRcdEJyYW5jaFN2Yy5mZXRjaEJ5Q29ycHMoVXNlclN2Yy51c2VyQ29ycHMoKSkuc3VjY2VzcyhmdW5jdGlvbihicmFuY2hlcyl7XG5cdFx0ICAgIHZtLmJyYW5jaGVzID0gYnJhbmNoZXM7XG5cdFx0ICAgIHZtLmN1cnJlbnRCcmFuY2ggPSBicmFuY2hlc1swXS5uYW1lXG5cdFx0fSk7XG5cblx0XHRDYXJTdmMuZmV0Y2hCeUNvcnBzKFVzZXJTdmMudXNlckNvcnBzKCkpLnN1Y2Nlc3MoZnVuY3Rpb24oY2Fycyl7XG5cdFx0XHR2bS5jYXJzID0gY2FyczsgXG5cdFx0fSk7XG5cblx0XHROdGZTdmMuZmV0Y2goKS5zdWNjZXNzKGZ1bmN0aW9uKG50ZnMpe1xuXHRcdFx0bm90aWZpY2F0aW9ucyA9IG50ZnM7XG5cdFx0XHR2bS5jdXJyZW50Q2FzZS5udGZzID0gXy5wbHVjayhudGZzLCd0eXBlJylcblx0XHRcdHZtLmN1cnJlbnRDYXNlLm50ZiAgPSB2bS5jdXJyZW50Q2FzZS5udGZzWzBdO1xuXHRcdH0pO1xuXG5cdFx0ZnVuY3Rpb24gbG9jYXRlQWRkcmVzcygpe1xuXHRcdFx0aWYgKHZtLmN1cnJlbnRDYXNlLmFkZHJlc3MpIHtcblx0XHRcdFx0R2VvU3ZjLmdldEdlb0VuY29kZWRJbmZvKHZtLmN1cnJlbnRDYXNlLmFkZHJlc3MpLnRoZW4oZnVuY3Rpb24ocmVzKXtcblx0XHRcdCAgICAgICAgdm0ubm93UG9zLmxhdCA9IHJlcy5KO1xuXHRcdFx0ICAgICAgICB2bS5ub3dQb3MubG5nID0gcmVzLk07XG5cdFx0ICAgICAgICAgICAgdm0ubWFya2Vycy5tYWluTWFya2VyID0ge1xuXHRcdCAgICAgICAgICAgIFx0bGF0OiByZXMuSixcblx0XHQgICAgICAgICAgICAgICAgbG5nOiByZXMuTSxcblx0XHQgICAgICAgICAgICAgICAgZm9jdXM6IHRydWUsXG5cdFx0ICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwi5qGI5Lu25qiZ55qEXCIsXG5cdFx0ICAgICAgICAgICAgfTtcblxuXHRcdCAgICAgICAgICAgIGlmIChyZXMpIHtcblx0XHQgICAgICAgICAgICBcdHZtLmxvY2F0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGxvY2F0aW9uKXtcblx0XHRcdCAgICAgICAgICAgIFx0dmFyIHIgPSBHZW9TdmMuZ2V0RGlzdGFuY2UoIGxvY2F0aW9uLCB7IGxhdCA6IHJlcy5KICwgbG5nIDogcmVzLk0gfSApO1xuXHRcdFx0ICAgICAgICAgICAgXHR2YXIgYmF0dGxlUmFkaXVzID0gIHsgYmFzZSA6IGxvY2F0aW9uLmJyYW5jaCwgIHRvIDogeyBsYXQgOiByZXMuSiwgbG5nIDogIHJlcy5NIH0sIGZyb20gOiB7IGxhdCA6IGxvY2F0aW9uLmxhdCwgbG5nIDogbG9jYXRpb24ubG5nIH0sIGQgOiByIH07IFxuXHRcdFx0ICAgICAgICAgICAgXHRiYXR0bGVSYWRpdXNzLnB1c2goIEpTT04uc3RyaW5naWZ5KGJhdHRsZVJhZGl1cykpO1xuXHRcdFx0ICAgICAgICAgICAgfSk7XG5cdFx0ICAgICAgICAgICAgfTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9O1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBzZWxlY3RCcmFuY2goYnJhbmNoKXtcblx0ICAgIFx0dm0uY3VycmVudEJyYW5jaCA9IGJyYW5jaC5uYW1lO1xuXHQgICAgfTtcblxuXHRcdGZ1bmN0aW9uIGRpc3BhdGNoKCBjYXIgKXtcblx0XHRcdGNhci5pc0NoZWNrZWQgPSB0cnVlOyBcblx0XHRcdGRpc3BhdGNoQ2Fycy5wdXNoKGNhcik7XG5cdFx0XHR2bS5kaXNwYXRjaExpc3QgPSBfLnBsdWNrKGRpc3BhdGNoQ2FycywgJ3JhZGlvQ29kZScpLmpvaW4oXCIgXCIpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBjYW5jZWxEaXNwYXRjaChjYXIpe1xuXHRcdFx0Y2FyLmlzQ2hlY2tlZCA9IGZhbHNlO1xuXHRcdFx0ZGlzcGF0Y2hDYXJzLnNwbGljZShfLnBsdWNrKGRpc3BhdGNoQ2FycywgJ19pZCcpLmluZGV4T2YoY2FyLl9pZCksMSk7XG5cdFx0XHR2bS5kaXNwYXRjaExpc3QgPSBfLnBsdWNrKGRpc3BhdGNoQ2FycywgJ3JhZGlvQ29kZScpLmpvaW4oXCIgXCIpO1xuXHRcdFx0dm0uZGlzcGF0Y2hMaXN0ID0gdm0uY3VycmVudENhc2UuZGlzcGF0Y2hMaXN0LmpvaW4oXCIgXCIpO1xuXHRcdH07XG5cdFxuXHRcdGZ1bmN0aW9uIHNhdmUoKXtcblx0XHRcdHZhciBjdXJyZW50TnRmO1xuXHRcdFx0dmFyIGJyYW5jaGVzICA9IF8udW5pcXVlKF8ucGx1Y2soZGlzcGF0Y2hDYXJzLCAnYnJhbmNoJykpO1xuXHRcdFx0dmFyIGRpc3BhdGNoID0gdm0uYnJhbmNoZXMuZmlsdGVyKGZ1bmN0aW9uKGJyYW5jaCkgeyByZXR1cm4gYnJhbmNoZXMuaW5kZXhPZihicmFuY2gubmFtZSkgPiAtMSB9KTtcblxuXHRcdFx0bm90aWZpY2F0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKG50ZixpZCl7XG5cdFx0XHRcdGlmIChudGYudHlwZSA9PSB2bS5jdXJyZW50Q2FzZS5udGYgKXtcblx0XHRcdFx0XHRjdXJyZW50TnRmICA9IG5vdGlmaWNhdGlvbnNbaWRdXG5cdFx0XHRcdH07XG5cdFx0XHR9KTtcblxuXHRcdFx0Q2FzZVN2Yy5jcmVhdGUoe1xuXHRcdFx0XHRvZmZpY2VyUmVjZWl2ZXIgOiBVc2VyU3ZjLmN1cnJlbnRVc2VyKCkgfHwgICflionmm4nmm7wnLFxuXHRcdFx0XHR0eXBlICAgICAgXHRcdDogdm0uY3VycmVudENhc2UudHlwZSB8fCAn54Gr6K2mJyxcblx0XHRcdFx0dHlwZXMgXHQgIFx0XHQ6IHZtLmN1cnJlbnRDYXNlLnR5cGVzLFxuXHRcdFx0XHRwaG9uZSAgICAgXHRcdDogdm0uY3VycmVudENhc2UucGhvbmUgfHwgJ+a4rOippicsXG5cdFx0XHRcdGJyYW5jaGVzICBcdFx0OiBfLnVuaXF1ZShfLnBsdWNrKGRpc3BhdGNoQ2FycywgJ2JyYW5jaCcpKSxcblx0XHRcdFx0YnJhbmNoSWRzIFx0XHQ6IF8ucGx1Y2soZGlzcGF0Y2gsICdfaWQnKSxcblx0XHQgIFx0XHRjYXJzICAgICAgXHRcdDogXy5wbHVjayhkaXNwYXRjaENhcnMsJ19pZCcpLFxuXHRcdFx0XHRjb3JwcyBcdCAgXHRcdDogVXNlclN2Yy51c2VyQ29ycHMoKSxcblx0XHRcdFx0ZW52IFx0ICBcdFx0OiB2bS5jdXJyZW50Q2FzZS5lbnYsXG5cdFx0XHRcdGVudnMgXHQgIFx0XHQ6IHZtLmN1cnJlbnRDYXNlLmVudnMsXG5cdFx0XHRcdGZsb29yIFx0ICBcdFx0OiB2bS5jdXJyZW50Q2FzZS5mbG9vcixcblx0XHRcdFx0bnRmICAgICAgIFx0XHQ6IGN1cnJlbnROdGYuX2lkLFxuXHRcdFx0XHRjcmVhdGVBdCAgXHRcdDogbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NTS1ERCwgaDptbTpzcyBhJyksXG5cdFx0XHRcdGxhc3RVcGRhdGUgXHRcdDogbW9tZW50KCkuZm9ybWF0KCdZWVlZLU1NTS1ERCwgaDptbTpzcyBhJyksXG5cdFx0XHRcdGxvY2F0aW9uICBcdFx0OiAge1xuXHRcdFx0XHRcdGxhdCBcdDogdm0uY3VycmVudENhc2UubG9jYXRpb24ubGF0LFxuXHRcdFx0XHRcdGxuZyBcdDogdm0uY3VycmVudENhc2UubG9jYXRpb24ubG5nLFxuXHRcdFx0XHRcdGFkZHJlc3MgOiB2bS5jdXJyZW50Q2FzZS5sb2NhdGlvbi5hZGRyZXNzIHx8ICfmuKzoqaYnXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGJhdHRsZVJhZGl1c3MgXHQ6IGJhdHRsZVJhZGl1c3Ncblx0XHRcdH0pLnN1Y2Nlc3MoZnVuY3Rpb24oKXtcblx0XHRcdFx0JHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcblx0XHRcdH0pO1xuXHRcdH07XG5cdH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLmNhc2UgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLmNhc2UnKVxuXHRcdC5zZXJ2aWNlKCdDYXNlU3ZjJywgQ2FzZVN2Yyk7XG5cblx0Q2FzZVN2Yy4kaW5qZWN0ID0gWyckaHR0cCddO1xuXG5cdGZ1bmN0aW9uIENhc2VTdmMoICRodHRwICkge1xuXHRcdHZhciBzdmMgPSB0aGlzO1xuXHRcdHN2Yy5mZXRjaCBcdFx0PSBmZXRjaDtcblx0XHRzdmMuZmV0Y2hBbGwgXHQ9IGZldGNoQWxsO1xuXHRcdHN2Yy5jbG9zZUNhc2UgXHQ9IGNsb3NlQ2FzZTtcblx0XHRzdmMuZmV0Y2hSZWxhdGl2ZUNhc2UgPSBmZXRjaFJlbGF0aXZlQ2FzZTsgXG5cdFx0c3ZjLmZldGNoRGV0YWlscyA9IGZldGNoRGV0YWlscztcblx0XHRzdmMuZmV0Y2hCeUlkIFx0PSBmZXRjaEJ5SWQ7XG5cdFx0c3ZjLmNyZWF0ZSBcdFx0PSBjcmVhdGU7XG5cdFx0c3ZjLmRlbGV0ZSBcdFx0PSBkZWxldGVDYXNlO1xuXHRcdHN2Yy51cGRhdGUgXHRcdD0gdXBkYXRlO1xuXHRcdFxuXHRcdGZ1bmN0aW9uIGZldGNoKGNvcnBzLCBwYWdlLCBpdGVtc1BlclBhZ2Upe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9jYXNlcz9jb3Jwcz0nICsgY29ycHMgKyAnJnBhZ2U9JyArIHBhZ2UgKyAnJmlwcD0nICsgaXRlbXNQZXJQYWdlICk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGZldGNoQWxsKCl7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2Nhc2VzL2RldGFpbHMnKTtcblx0XHR9O1xuXHRcdFxuXHRcdGZ1bmN0aW9uIGZldGNoUmVsYXRpdmVDYXNlKGNvbil7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL2Nhc2VzL2JyYW5jaD9icmFuY2g9JyArIGNvbi5icmFuY2ggKyAnJmFjY2Vzc0xldmVsPScgKyBjb24uYWNjZXNzTGV2ZWwgKyAnJmNvcnBzPScgKyBjb24uY29ycHMgKTtcblx0XHR9O1xuXHRcdFxuXHRcdGZ1bmN0aW9uIGZldGNoRGV0YWlscyhjYXNlSWQpe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9jYXNlcy9kZXRhaWxzLycgKyBjYXNlSWQpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBmZXRjaEJ5SWQoIGNhc2VJZCApe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9jYXNlcy8nICsgY2FzZUlkICk7XG5cdFx0fTtcblx0XHRcblx0XHRmdW5jdGlvbiBjcmVhdGUoY2FzZV9pbmZvKXtcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL2Nhc2VzJywgY2FzZV9pbmZvKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gZGVsZXRlQ2FzZShjYXNlSWQpe1xuXHRcdFx0cmV0dXJuICRodHRwLnBvc3QoJy9hcGkvY2FzZXMvJyArIGNhc2VJZCk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHVwZGF0ZSh1cGRhdGVkX2Nhc2Upe1xuXHRcdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9jYXNlcy8nICsgdXBkYXRlZF9jYXNlLmNhc2VJZCAsIHVwZGF0ZWRfY2FzZSk7XG5cdFx0fTtcblx0XHRcblx0XHRmdW5jdGlvbiBjbG9zZUNhc2UoZGF0YSl7XG5cdFx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL2Nhc2VzL2Nsb3NlP2lkPScgKyBkYXRhLmlkLCBkYXRhICk7XG5cdFx0fTtcblx0fVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuY2FzZSBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuY2FzZScpXG5cdFx0LmNvbnRyb2xsZXIoJ0Nhc2VTaG93Q29udHJvbGxlcicsIENhc2VTaG93Q29udHJvbGxlcik7XG5cblx0XHRDYXNlU2hvd0NvbnRyb2xsZXIuJGluamVjdCA9ICBbICdTdFN2YycsICckc3RhdGVQYXJhbXMnLCAnJGludGVydmFsJywgJyRzdGF0ZScsICdTb2NrZXRTdmMnLCAnQ2FzZVN2YycsICdCcmFuY2hTdmMnLCAnU3RNaXNzaW9uRmFjJ107XG5cblx0XHRmdW5jdGlvbiBDYXNlU2hvd0NvbnRyb2xsZXIoKXtcblx0XHRcdHZhciB2bSA9IHRoaXM7IFxuXHRcdFx0dm0uaXNDb2xsYXBzZWQgPSB0cnVlIDtcblx0XHRcdHZtLm1lbWJlcnMgPSBbXTtcblx0XHRcdHZtLnBvc2l0aW9ucyA9IFN0TWlzc2lvbkZhYy5wb3NpdGlvbigpLnBvc3M7XG5cblx0XHRcdFNvY2tldFN2Yy5vbignbmV3U3QnLCBmdW5jdGlvbihzdCl7XG5cdFx0XHRcdGlmICggYW5ndWxhci5lcXVhbHMoY2FzZUlkLHN0LmNhc2VJZCkpIHtcblx0XHRcdFx0XHR2YXIgbmV3U3QgPSBhbmd1bGFyLmNvcHkoc3QpO1xuXHRcdFx0XHRcdHZtLnN0cmlrZVRlYW1zLnB1c2gobmV3U3QpO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHR2bS5kZXBsb3lzID0gaW5pdFRhYmxlKHZtLnN0cmlrZVRlYW1zKTtcblx0XHRcdFx0dm0uZGVwbG95RGV0YWlscyA9IGluaXREZXBsb3kodm0uc3RyaWtlVGVhbXMpO1xuXHRcdFx0fSk7XG5cblx0XHRcdFNvY2tldFN2Yy5vbigndXBkYXRlU3QnLCBmdW5jdGlvbihkYXRhKXtcblx0XHRcdFx0U3RTdmMuZmV0Y2hCeUNhc2UoY2FzZUlkKS5zdWNjZXNzKGZ1bmN0aW9uKHN0cmlrZVRlYW1zKXtcblx0XHRcdFx0XHR2bS5zdHJpa2VUZWFtcyA9IHN0cmlrZVRlYW1zO1xuXHRcdFx0XHRcdHZtLnN0cmlrZVRlYW1zLmZvckVhY2goZnVuY3Rpb24oc3Qpe1xuXHRcdFx0XHRcdFx0c3QubGltaXRUaW1lID0gbW9tZW50LmR1cmF0aW9uKHN0LndvcmtpbmdUaW1lLCdzZWNvbmRzJyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0dm0uZGVwbG95cyA9IGluaXRUYWJsZSh2bS5zdHJpa2VUZWFtcyk7XG5cdFx0XHRcdFx0dm0uZGVwbG95RGV0YWlscyA9IGluaXREZXBsb3kodm0uc3RyaWtlVGVhbXMpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0fSlcblxuXHRcdFx0U29ja2V0U3ZjLm9uKCdkaXNtaXNzJywgZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHRcdFN0U3ZjLmZldGNoQnlDYXNlKGNhc2VJZCkuc3VjY2VzcyhmdW5jdGlvbihzdHJpa2VUZWFtcyl7XG5cdFx0XHRcdFx0dm0uc3RyaWtlVGVhbXMgXHQgPSBzdHJpa2VUZWFtcztcblx0XHRcdFx0XHR2bS5kZXBsb3lzIFx0XHQgPSBpbml0VGFibGUodm0uc3RyaWtlVGVhbXMpO1xuXHRcdFx0XHRcdHZtLmRlcGxveURldGFpbHMgPSBpbml0RGVwbG95KHZtLnN0cmlrZVRlYW1zKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXG5cdFx0XHR2YXIgY2FzZUlkID0gJHN0YXRlUGFyYW1zLmlkO1xuXHRcdFx0Q2FzZVN2Yy5mZXRjaERldGFpbHMoY2FzZUlkKS5zdWNjZXNzKGZ1bmN0aW9uKF9jYXNlKXtcblx0XHRcdFx0X2Nhc2UuZW52ID09ICfkvY/lroXngavoraYnID8gdm0uYXBhcnRtZW50ID0gdHJ1ZSA6IHZtLmFwYXJ0bWVudCA9IGZhbHNlO1xuXHRcdFx0XHR2bS5jYXNlRGV0YWlsID0gX2Nhc2U7XG5cdFx0XHRcdHZtLnBvc2l0aW9uID0ge1xuXHRcdFx0XHRcdGRlZmF1bHRQb3MgXHQ6IFwi56ys5LiA6Z2iXCIsXG5cdFx0XHRcdFx0cG9zaXRpb25zIFx0OiBbXCLnrKzkuIDpnaJcIixcIuesrOS6jOmdolwiLFwi56ys5LiJ6Z2iXCIsXCLnrKzlm5vpnaJcIl0sXG5cdFx0XHRcdFx0Zmxvb3IgXHRcdDogdm0uY2FzZURldGFpbC5mbG9vcixcblx0XHRcdFx0XHRmbG9vcnMgIFx0OiB2bS5jYXNlRGV0YWlsLmZsb29yIDwgNT8gXy5yYW5nZSgxLDYsMSkgOiBfLnJhbmdlKHZtLmNhc2VEZXRhaWwuZmxvb3ItMix2bS5jYXNlRGV0YWlsLmZsb29yKzMsMSlcblx0XHRcdFx0fTtcblx0XHRcdH0pO1xuXG5cdFx0XHRTdFN2Yy5mZXRjaEJ5Q2FzZShjYXNlSWQpLnN1Y2Nlc3MoZnVuY3Rpb24oc3RyaWtlVGVhbXMpe1xuXHRcdFx0XHRpZiAoc3RyaWtlVGVhbXMpIHtcblx0XHRcdFx0XHR2bS5zdHJpa2VUZWFtcyA9IHN0cmlrZVRlYW1zO1xuXHRcdFx0XHRcdHZtLnN0cmlrZVRlYW1zLmZvckVhY2goZnVuY3Rpb24oc3Qpe1xuXHRcdFx0XHRcdFx0c3QubGltaXRUaW1lID0gbW9tZW50LmR1cmF0aW9uKHN0LndvcmtpbmdUaW1lLCdzZWNvbmRzJyk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0dm0uZGVwbG95cyA9IGluaXRUYWJsZSh2bS5zdHJpa2VUZWFtcyk7XG5cdFx0XHRcdFx0dm0uZGVwbG95RGV0YWlscyA9aW5pdERlcGxveSh2bS5zdHJpa2VUZWFtcyk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmV0dXJuIFxuXHRcdFx0XHR9O1xuXHRcdFx0fSk7XG5cblxuXHRcdFx0dmFyIGluaXREZXBsb3kgPSBmdW5jdGlvbihzdHJpa2VUZWFtcyl7XG5cdFx0XHRcdHJldHVybiAgXy5ncm91cEJ5KHN0cmlrZVRlYW1zLGZ1bmN0aW9uKHN0KXtcblx0XHRcdFx0XHRcdHJldHVybiBzdC5wb3NpdGlvbjtcblx0XHRcdFx0fSk7XG5cdFx0XHR9O1xuXG5cdFx0XHR2YXIgaW5pdFRhYmxlID0gIGZ1bmN0aW9uKHN0cmlrZVRlYW1zKXtcblx0XHRcdCAgXHR2YXIgZGVwbG95QXJyYXkgPSBfLnJhbmdlKDQpLm1hcChmdW5jdGlvbiAoKSB7XG5cdFx0XHQgICAgICAgIHJldHVybiBfLnJhbmdlKDUpLm1hcChmdW5jdGlvbiAoKSB7XG5cdFx0XHQgICAgICAgICAgICByZXR1cm4geyB0b3RhbE1lbWJlciA6IDAsIHN0VG90YWwgOiAwICwgc3RzIDogW10gfSA7XG5cdFx0XHQgICAgICAgIH0pO1xuXHRcdFx0ICAgIH0pO1xuXG5cdFx0XHRcdGlmICggc3RyaWtlVGVhbXMgKXtcblx0XHRcdFx0XHRmb3IgKHZhciBpID0gc3RyaWtlVGVhbXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0XHRcdHZhciB0b3RhbE1lbWJlciA9IDA7XG5cdFx0XHRcdFx0XHR2YXIgeSA9IG51bGw7XG5cdFx0XHRcdFx0XHR2YXIgc3QgPSAwO1xuXHRcdFx0XHRcdFx0dmFyIHggPSBfLmluZGV4T2Yoc3RyaWtlVGVhbXNbaV0ucG9zaXRpb25zLCBzdHJpa2VUZWFtc1tpXS5wb3NpdGlvbik7XG5cdFx0XHRcdFx0XHR2bS5hcGFydG1lbnQgPyB5ID0gXy5pbmRleE9mKHN0cmlrZVRlYW1zW2ldLmZsb29ycywgc3RyaWtlVGVhbXNbaV0uZmxvb3IpIDogeSA9IF8uaW5kZXhPZihzdHJpa2VUZWFtc1tpXS5hcmVhcywgc3RyaWtlVGVhbXNbaV0uYXJlYSlcblx0XHRcdFx0XHRcdGRlcGxveUFycmF5W3hdW3ldLnN0VG90YWwgKz0gMTtcblx0XHRcdFx0XHRcdGRlcGxveUFycmF5W3hdW3ldLnRvdGFsTWVtYmVyICs9IHN0cmlrZVRlYW1zW2ldLm1lbWJlcnMubGVuZ3RoO1xuXHRcdFx0XHRcdFx0dmFyIHN0SW5GbyA9IHt9O1xuXHRcdFx0XHRcdFx0c3RJbkZvLmlkID0gc3RyaWtlVGVhbXNbaV0uYnJhbmNoICsgc3RyaWtlVGVhbXNbaV0uaWRcblx0XHRcdFx0XHRcdHN0SW5Gby5udW1iZXIgPSBzdHJpa2VUZWFtc1tpXS5tZW1iZXJzLmxlbmd0aDtcblx0XHRcdFx0XHRcdHN0SW5Gby5ncm91cCA9IHN0cmlrZVRlYW1zW2ldLmdyb3VwO1xuXHRcdFx0XHRcdFx0ZGVwbG95QXJyYXlbeF1beV0uc3RzLnB1c2goc3RJbkZvKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBkZXBsb3lBcnJheVxuXHRcdFx0fTtcblx0XHRcdFxuXHRcdFx0dm0uJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uIChldmVudCkge1xuXHRcdCAgICAgICAgU29ja2V0U3ZjLnJlbW92ZUFsbExpc3RlbmVycygpO1xuXHRcdCAgICB9KTtcblx0XHR9XG59KSgpOyIsIjsoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwJylcblx0XHQuY29uZmlnKHJvdXRlckNvbmZpZyk7XG5cblx0XHRyb3V0ZXJDb25maWcuJGluamVjdCA9IFsnJHN0YXRlUHJvdmlkZXInLCckdXJsUm91dGVyUHJvdmlkZXInLCckbG9jYXRpb25Qcm92aWRlciddO1xuXHRcdFxuXHRcdGZ1bmN0aW9uIHJvdXRlckNvbmZpZygkc3RhdGVQcm92aWRlciwkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG5cdFx0ICAgICR1cmxSb3V0ZXJQcm92aWRlclxuICAgIFx0XHRcdC5vdGhlcndpc2UoJy9sb2dpbicpO1xuXG5cdFx0ICAgICRzdGF0ZVByb3ZpZGVyXG5cdFx0ICAgICAgICAuc3RhdGUoJ2Fub24nLHtcblx0XHQgICAgICAgICAgICB1cmwgOiBcIlwiLFxuXHRcdCAgICAgICAgICAgIGFic3RyYWN0IDogdHJ1ZSxcblx0XHQgICAgICAgICAgICB0ZW1wbGF0ZSA6IFwiPHVpLXZpZXc+XCIsXG5cdFx0ICAgICAgICB9KVxuXHRcdCAgICAgICAgLnN0YXRlKCdhbm9uLmxvZ2luJyx7XG5cdFx0ICAgICAgICAgICAgdXJsIDogXCIvbG9naW5cIixcblx0XHQgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6XCJsb2dpbi5odG1sXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlciA6IFwiTG9naW5Db250cm9sbGVyXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlckFzIDogXCJMb2dpbkN0cmxcIlxuXHRcdCAgICAgICAgfSlcblx0XHQgICAgICAgIC5zdGF0ZSgnYW5vbi40MDQnLHtcblx0XHQgICAgICAgICAgICB1cmwgOiBcIi80MDRcIixcblx0XHQgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6IFwiNDA0Lmh0bWxcIlxuXHRcdCAgICAgICAgfSlcblxuICAgIFx0XHRcdC8vIGR1dHkgZGVzayBcblx0XHRcdCRzdGF0ZVByb3ZpZGVyXG5cdFx0XHRcdC5zdGF0ZSgnZHV0eURlc2snLCB7XG5cdFx0ICAgICAgICAgICAgYWJzdHJhY3Q6IHRydWUsXG5cdFx0ICAgICAgICAgICAgdXJsOiBcIi9kdXR5RGVza1wiLFxuXHRcdCAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInZpZXdzL2NvbW1vbi9jb250ZW50Lmh0bWxcIixcblx0XHQgICAgICAgICAgICBkYXRhIDoge1xuXHRcdCAgICAgICAgICAgICAgICByZXF1aXJlZExvZ2luIDogdHJ1ZSxcblx0XHQgICAgICAgICAgICAgICAgcm9sZSA6IFtcImFkbWluXCJdXG5cdFx0ICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgfSlcblx0XHQgICAgICAgIC5zdGF0ZSgnZHV0eURlc2suY29ycHMnLCB7XG5cdFx0ICAgICAgICAgICAgdXJsOiBcIi9jb3Jwc1wiLFxuXHRcdCAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInZpZXdzL2Rhc2hib2FyZC9jb3Jwcy5kYXNoYm9hcmQuaHRtbFwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIkRhc2hib2FyZENvbnRyb2xsZXJcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcIkRhc2hib2FyZEN0cmxcIixcblx0XHQgICAgICAgICAgICBkYXRhIDoge1xuXHRcdCAgICAgICAgICAgICAgICByZXF1aXJlZExvZ2luIDogdHJ1ZSxcblx0XHQgICAgICAgICAgICAgICAgcm9sZSA6IFtcImFkbWluXCJdXG5cdFx0ICAgICAgICAgICAgfVxuXHRcdCAgICAgICAgfSlcblx0XHQgICAgICAgIC5zdGF0ZSgnZHV0eURlc2suYnJhbmNoJyx7XG5cdFx0ICAgICAgICAgICAgdXJsIDogXCIvYnJhbmNoXCIsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcInZpZXdzL2Rhc2hib2FyZC9icmFuY2guZGFzaGJvYXJkLmh0bWxcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyIDogXCJEYXNoYm9hcmRDb250cm9sbGVyXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlckFzIDogXCJEYXNoYm9hcmRDdHJsXCIsXG5cdFx0ICAgICAgICAgICAgZGF0ZSA6IHtcblx0XHQgICAgICAgICAgICAgICAgcmVxdWlyZWRMb2dpbiA6IHRydWUsXG5cdFx0ICAgICAgICAgICAgICAgIHJvbGUgOiBbXCJhZG1pblwiXVxuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgIH0pXG5cdFx0ICAgICAgICAuc3RhdGUoJ2R1dHlEZXNrLmNhc2UnLHtcblx0XHQgICAgICAgICAgICBhYnN0cmFjdCA6IHRydWUsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGUgOiBcIjx1aS12aWV3PlwiXG5cdFx0ICAgICAgICB9KVxuXHRcdCAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5jYXNlLmluZGV4Jywge1xuXHRcdCAgICAgICAgICAgIHVybDogXCIvY2FzZVwiLFxuXHRcdCAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcImNhc2UvY2FzZS5pbmRleC5odG1sXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlciA6IFwiQ2FzZUNvbnRyb2xsZXJcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcIkNhc2VDdHJsXCJcblx0XHQgICAgICAgIH0pXG5cdFx0ICAgICAgICAuc3RhdGUoJ2R1dHlEZXNrLmNhc2UubmV3Jyx7XG5cdFx0ICAgICAgICAgICAgdXJsIDogXCIvY2FzZS9uZXdcIixcblx0XHQgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6IFwiY2FzZS9jYXNlLm5ldy5odG1sXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlciA6IFwiQ2FzZU5ld0NvbnRyb2xsZXJcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcIkNhc2VOZXdDdHJsXCJcblx0XHQgICAgICAgIH0pXG5cdFx0ICAgICAgICAuc3RhdGUoJ2R1dHlEZXNrLmNhc2Uuc2hvdycse1xuXHRcdCAgICAgICAgICAgIHVybCA6IFwiL2Nhc2UvOmlkL3Nob3dcIixcblx0XHQgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6IFwiY2FzZS9jYXNlLnNob3cuaHRtbFwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIkNhc2VTaG93Q29udHJvbGxlclwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6IFwiQ2FzZVNob3dDdHJsXCJcblx0XHQgICAgICAgIH0pXG5cdFx0ICAgICAgICAuc3RhdGUoJ2R1dHlEZXNrLmNhc2UuZWRpdCcse1xuXHRcdCAgICAgICAgICAgIHVybCA6IFwiL2Nhc2UvOmlkL2VkaXRcIixcblx0XHQgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6IFwiY2FzZS9jYXNlLmVkaXQuaHRtbFwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIkNhc2VFZGl0Q29udHJvbGxlclwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6IFwiQ2FzZUVkaXRDdHJsXCJcblx0XHQgICAgICAgIH0pXG5cdFx0ICAgICAgICAuc3RhdGUoJ2R1dHlEZXNrLnNhZmV0eScse1xuXHRcdCAgICAgICAgICAgIHVybCA6IFwiL2Nhc2UvOmlkXCIsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcInN1bW1hcnkvc3VtbWFyeS5pbmRleC5odG1sXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlciA6IFwiU3VtbWFyeUNvbnRyb2xsZXJcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcIlN1bW1hcnlDdHJsXCJcblx0XHQgICAgICAgIH0pXG5cdFx0ICAgICAgICAuc3RhdGUoJ2R1dHlEZXNrLmR1dHlsaXN0Jyx7XG5cdFx0ICAgICAgICAgICAgYWJzdHJhY3QgOiB0cnVlLFxuXHRcdCAgICAgICAgICAgIHRlbXBsYXRlIDogXCI8dWktdmlldz5cIlxuXHRcdCAgICAgICAgfSlcblx0XHQgICAgICAgIC5zdGF0ZSgnZHV0eURlc2suZHV0eWxpc3QuaW5kZXgnLCB7XG5cdFx0ICAgICAgICAgICAgdXJsOiBcIi9kdXR5bGlzdC86YnJhbmNoXCIsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwidmlld3MvZHV0eWxpc3QvZHV0eWxpc3QuaW5kZXguaHRtbFwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIkR1dHlMaXN0Q29udHJvbGxlclwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6IFwiRHV0eUxpc3RDdHJsXCJcblx0XHQgICAgICAgIH0pXG5cdFx0ICAgICAgICAuc3RhdGUoJ2R1dHlEZXNrLmR1dHlsaXN0LnNob3cnLHtcblx0XHQgICAgICAgIFx0dXJsIDogXCIvZHV0eWxpc3QvOmJyYW5jaC9pbmRleFwiLFxuXHRcdCAgICAgICAgXHR0ZW1wbGF0ZSA6IFwiPGgyPiBzaG93IDwvaDI+XCJcblx0XHQgICAgICAgIH0pXG5cdFx0ICAgICAgICAuc3RhdGUoJ2R1dHlEZXNrLmR1dHlsaXN0LmVkaXQnLCB7XG5cdFx0ICAgICAgICAgICAgdXJsOiBcIi9kdXR5bGlzdC86YnJhbmNoL2VkaXRcIixcblx0XHQgICAgICAgICAgICB0ZW1wbGF0ZVVybCAgOiBcInZpZXdzL2R1dHlsaXN0L2R1dHlsaXN0LmVkaXQuaHRtbFwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXIgICA6IFwiRHV0eUxpc3RFZGl0Q29udHJvbGxlclwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6IFwiRHV0eUxpc3RFZGl0Q3RybFwiXG5cdFx0ICAgICAgICB9KVxuXHRcdCAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5tZW1iZXInLHtcblx0XHQgICAgICAgICAgICBhYnN0cmFjdCA6IHRydWUsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGUgOiBcIjx1aS12aWV3PlwiXG5cdFx0ICAgICAgICB9KVxuXHRcdCAgICAgICAgLnN0YXRlKCdkdXR5RGVzay5tZW1iZXIuc2hvdycsIHtcblx0XHQgICAgICAgICAgICB1cmw6IFwiL21lbWJlci86YnJhbmNoXCIsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGVVcmwgIDogXCJ2aWV3cy9tZW1iZXIvbWVtYmVyLmluZGV4Lmh0bWxcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyICAgOiBcIk1lbWJlckNvbnRyb2xsZXJcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcIk1lbWJlckN0cmxcIlxuXHRcdCAgICAgICAgfSlcblx0XHQgICAgICAgIC5zdGF0ZSgnZHV0eURlc2subWVtYmVyLmVkaXQnLCB7XG5cdFx0ICAgICAgICAgICAgdXJsOiBcIi9tZW1iZXIvOmJyYW5jaC9lZGl0XCIsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGVVcmwgIDogXCJ2aWV3cy9tZW1iZXIvbWVtYmVyLmVkaXQuaHRtbFwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXIgXHQgOiBcIk1lbWJlckVkaXRDb250cm9sbGVyXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlckFzIDogXCJNZW1iZXJFZGl0Q3RybFwiXG5cdFx0ICAgICAgICB9KTtcblx0XHRcdCRzdGF0ZVByb3ZpZGVyXG5cdFx0ICAgICAgICAuc3RhdGUoJ2RpcmVjdG9yJyx7XG5cdFx0ICAgICAgICAgICAgYWJzdHJhY3QgOiB0cnVlLFxuXHRcdCAgICAgICAgICAgIHVybCA6IFwiXCIsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcInZpZXdzL2RpcmVjdG9yL2RpcmVjdG9yLmNvbnRlbnQuaHRtbFwiLFxuXHRcdCAgICAgICAgICAgIGRhdGEgOiB7XG5cdFx0ICAgICAgICAgICAgICAgIHJlcXVpcmVkTG9naW4gOiB0cnVlLFxuXHRcdCAgICAgICAgICAgICAgICByb2xlIDogW1widXNlclwiXVxuXHRcdCAgICAgICAgICAgIH1cblx0XHQgICAgICAgIH0pXG5cdFx0ICAgICAgICAuc3RhdGUoJ2RpcmVjdG9yLnNhZmV0eScse1xuXHRcdCAgICAgICAgICAgIGFic3RyYWN0IDogdHJ1ZSxcblx0XHQgICAgICAgICAgICB1cmwgOiBcIi9zYWZldHlcIixcblx0XHQgICAgICAgICAgICB0ZW1wbGF0ZSA6IFwiPHVpLXZpZXc+XCIgXG5cdFx0ICAgICAgICB9KVxuXHRcdCAgICAgICAgLnN0YXRlKCdkaXJlY3Rvci5zYWZldHkuaW5kZXgnLHtcblx0XHQgICAgICAgICAgICB1cmwgOiBcIi9pbmRleFwiLFxuXHRcdCAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogXCJ2aWV3cy9zYWZldHkvc2FmZXR5LmluZGV4Lmh0bWxcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyIDogXCJTYWZldHlJbmRleENvbnRyb2xsZXJcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcIlNhZmV0eUluZGV4Q3RybFwiXG5cdFx0ICAgICAgICB9KVxuXHRcdCAgICAgICAgLnN0YXRlKCdkaXJlY3Rvci5zYWZldHkuY21kU2hvdycse1xuXHRcdCAgICAgICAgICAgIHVybCA6IFwiL2NtZC86Y2FzZUlkL3Nob3dcIixcblx0XHQgICAgICAgICAgICB0ZW1wbGF0ZVVybCA6IFwidmlld3Mvc2FmZXR5L3NhZmV0eS5jbWQuc2hvdy5odG1sXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlciA6IFwiU2FmZXR5Q21kU2hvd0NvbnRyb2xsZXJcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcIlNhZmV0eUNtZFNob3dDdHJsXCJcblx0XHQgICAgICAgIH0pXG5cdFx0ICAgICAgICAuc3RhdGUoJ2RpcmVjdG9yLnNhZmV0eS5icmFuY2hTaG93Jyx7XG5cdFx0ICAgICAgICAgICAgdXJsIDogXCIvOmNhc2VJZC9zaG93XCIsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcInZpZXdzL3NhZmV0eS9zYWZldHkuYnJhbmNoLnNob3cuaHRtbFwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIlNhZmV0eVNob3dDb250cm9sbGVyXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlckFzIDogXCJTYWZldHlTaG93Q3RybFwiXG5cdFx0ICAgICAgICB9KVxuXHRcdCAgICAgICAgLnN0YXRlKCdkaXJlY3Rvci5zYWZldHkubWFuYWdlbWVudCcse1xuXHRcdCAgICAgICAgICAgIHVybCA6IFwiLzpjYXNlSWQvbWFuYWdlXCIsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcInZpZXdzL3NhZmV0eS9zYWZldHkubWFuYWdlLmh0bWxcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyIDogXCJTYWZldHlNYW5hZ2VDb250cm9sbGVyXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlckFzIDogXCJTYWZldHlNYW5hZ2VDdHJsXCIgICAgICAgICBcblx0XHQgICAgICAgIH0pXG5cdFx0ICAgICAgICAuc3RhdGUoJ2RpcmVjdG9yLnNhZmV0eS5zdW1tYXJ5Jyx7XG5cdFx0ICAgICAgICAgICAgdXJsIDogXCIvOmNhc2VJZC9zdW1tYXJ5XCIsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcInZpZXdzL3N1bW1hcnkvc3VtbWFyeS5pbmRleC5odG1sXCIsXG5cdFx0ICAgICAgICAgICAgY29udHJvbGxlciA6IFwiU3VtbWFyeUNvbnRyb2xsZXJcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcIlN1bW1hcnlDdHJsXCJcblx0XHQgICAgICAgIH0pXG5cdFx0ICAgICAgICAuc3RhdGUoJ2RpcmVjdG9yLmR1dHlsaXN0Jyx7XG5cdFx0ICAgICAgICAgICAgYWJzdHJhY3QgOiB0cnVlLFxuXHRcdCAgICAgICAgICAgIHVybCA6IFwiL2R1dHlsaXN0XCIsXG5cdFx0ICAgICAgICAgICAgdGVtcGxhdGUgOiBcIjx1aS12aWV3PlwiIFxuXHRcdCAgICAgICAgfSlcblx0XHQgICAgICAgIC5zdGF0ZSgnZGlyZWN0b3IuZHV0eWxpc3QuaW5kZXgnLHtcblx0XHQgICAgICAgICAgICB1cmwgOiBcIi9pbmRleFwiLFxuXHRcdCAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInZpZXdzL2R1dHlsaXN0L2RpcmVjdG9yLmR1dHlsaXN0LmluZGV4Lmh0bWxcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyIDogXCJEaXJEdXR5TGlzdENvbnRyb2xsZXJcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcIkRpckR1dHlMaXN0Q3RybFwiXG5cdFx0ICAgICAgICB9KVxuXHRcdCAgICAgICAgLnN0YXRlKCdkaXJlY3Rvci5kdXR5bGlzdC5lZGl0Jyx7XG5cdFx0ICAgICAgICAgICAgdXJsIDogXCIvZWRpdFwiLFxuXHRcdCAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInZpZXdzL2R1dHlsaXN0L2RpcmVjdG9yLmR1dHlsaXN0LmVkaXQuaHRtbFwiLFxuXHRcdCAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBcIkRpckR1dHlMaXN0RWRpdENvbnRyb2xsZXJcIixcblx0XHQgICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcIkRpckR1dHlMaXN0RWRpdEN0cmxcIlxuXHRcdCAgICAgICAgfSlcdFxuXHRcdH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKXtcblx0LyoqXG5cdCogYXBwLmRhc2hib2FyZCBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuZGFzaGJvYXJkJylcblx0XHQuY29udHJvbGxlcignRGFzaGJvYXJkQ29udHJvbGxlcicsRGFzaGJvYXJkQ29udHJvbGxlcik7XG5cblx0RGFzaGJvYXJkQ29udHJvbGxlci4kaW5qZWN0ID0gWyckbG9jYXRpb24nLCAnU29ja2V0U3ZjJywgJ1VzZXJTdmMnLCAnQnJhbmNoU3ZjJ107XG5cdGZ1bmN0aW9uIERhc2hib2FyZENvbnRyb2xsZXIoJGxvY2F0aW9uLCBTb2NrZXRTdmMsIFVzZXJTdmMsIEJyYW5jaFN2Yyl7XG5cdFx0dmFyIHZtID0gdGhpczsgXG5cblx0XHRCcmFuY2hTdmMuZmV0Y2hCeUNvcnBzKFVzZXJTdmMudXNlckNvcnBzKCkpLnN1Y2Nlc3MoZnVuY3Rpb24oYnJhbmNoZXMpe1xuXHRcdFx0cmV0dXJuIHZtLmJyYW5jaGVzID0gYnJhbmNoZXM7XG5cdFx0fSk7XG5cblx0XHRVc2VyU3ZjLmZldGNoT25saW5lVXNlcigpLnN1Y2Nlc3MoZnVuY3Rpb24odXNlcnMpe1xuXHRcdFx0cmV0dXJuIHZtLnVzZXJzID0gdXNlcnM7XG5cdFx0fSk7XG5cblx0XHRTb2NrZXRTdmMub24oJ3VzZXJMb2dpbicsZnVuY3Rpb24odXNlcil7XG5cdFx0XHRyZXR1cm4gdm0udXNlcnMucHVzaCh1c2VyKTtcblx0XHR9KTtcblxuXHRcdFNvY2tldFN2Yy5vbigndXNlckRpc2Nvbm5lY3QnLGZ1bmN0aW9uKGRpc2Nvbm5lY3RVc2VyKXtcblx0XHRcdHZtLnVzZXJzID0gdm0udXNlcnMuZmlsdGVyKGZ1bmN0aW9uKHVzZXIpIHtcblx0XHRcdFx0cmV0dXJuIHVzZXIudXNlcm5hbWUgIT0gZGlzY29ubmVjdFVzZXIudXNlcm5hbWVcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0U29ja2V0U3ZjLm9uKCd1c2VyTG9nb3V0JyxmdW5jdGlvbihsb2dvdXRVc2VyKXtcblx0XHRcdHZtLnVzZXJzID0gdm0udXNlcnMuZmlsdGVyKGZ1bmN0aW9uKHVzZXIpIHtcblx0XHRcdFx0cmV0dXJuIHVzZXIudXNlcm5hbWUgIT0gbG9nb3V0VXNlci51c2VybmFtZVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHR2bS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICAgICAgcmV0dXJuIFNvY2tldFN2Yy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblx0ICAgIH0pO1xuXHR9XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5kaXJlY3RvciBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuZGlyZWN0b3InKVxuXHRcdC5jb250cm9sbGVyKCdEaXJEdXR5TGlzdENvbnRyb2xsZXInLERpckR1dHlMaXN0Q29udHJvbGxlcik7XG5cblx0RGlyRHV0eUxpc3RDb250cm9sbGVyLiRpbmplY3QgPSBbJ1VzZXJTdmMnLCAnQnJhbmNoU3ZjJ107XG5cblx0ZnVuY3Rpb24gRGlyRHV0eUxpc3RDb250cm9sbGVyKCBVc2VyU3ZjICwgQnJhbmNoU3ZjICl7XG5cdFx0dmFyIHZtID0gdGhpcztcblx0XHR2YXIgYnJhbmNoID0gVXNlclN2Yy51c2VyQnJhbmNoKCk7XG5cdFx0XG5cdFx0QnJhbmNoU3ZjLmZldGNoQnlOYW1lKGJyYW5jaCkuc3VjY2VzcyhmdW5jdGlvbihicmFuY2gpe1xuXHRcdFx0dm0uYnJhbmNoIFx0XHQ9IGJyYW5jaDtcblx0XHRcdHZtLm9uRHV0eVRvdGFsIFx0PSB2bS5icmFuY2gubWVtYmVycy5maWx0ZXIoZnVuY3Rpb24obWVtYmVyKSB7XG5cdFx0XHRcdHJldHVybiBtZW1iZXIub25EdXR5ID09IHRydWUgXG5cdFx0XHR9KTtcblx0XHR9KTsgXG5cdH07XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5kYXNoYm9hcmQgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLmRpcmVjdG9yJylcblx0XHQuY29udHJvbGxlcignRGlyRHV0eUxpc3RFZGl0Q29udHJvbGxlcicsRGlyRHV0eUxpc3RFZGl0Q29udHJvbGxlcik7XG5cblx0RGlyRHV0eUxpc3RFZGl0Q29udHJvbGxlci4kaW5qZWN0ID0gWydCcmFuY2hTdmMnLCAnJHN0YXRlUGFyYW1zJywnTWVtYmVyU3ZjJywgJyRsb2NhdGlvbicsICckd2luZG93JywgJ1VzZXJTdmMnLCAnQ2FyU3ZjJywgJ1N0TWlzc2lvbkZhYyddO1xuXG5cdGZ1bmN0aW9uIERpckR1dHlMaXN0RWRpdENvbnRyb2xsZXIoQnJhbmNoU3ZjLCAkc3RhdGVQYXJhbXMsTWVtYmVyU3ZjLCAkbG9jYXRpb24sICR3aW5kb3csIFVzZXJTdmMsIENhclN2YywgU3RNaXNzaW9uRmFjKXtcblx0XHR2YXIgdm0gPSB0aGlzO1xuXHRcdHZhciBicmFuY2ggXHQ9IFVzZXJTdmMudXNlckJyYW5jaCgpO1xuXHRcdHZtLmNoZWNrIFx0PSBjaGVjaztcblx0XHR2bS5zYXZlIFx0PSBzYXZlOyAgIFxuXG5cdFx0QnJhbmNoU3ZjLmZldGNoQnlOYW1lKGJyYW5jaCkuc3VjY2VzcyhmdW5jdGlvbihicmFuY2gpe1xuXHRcdFx0dm0uYnJhbmNoID0gYnJhbmNoO1xuXHRcdFx0dm0uaXNDb3JwcyA9ICB0cnVlID8gYnJhbmNoLm5hbWUuc3BsaXQoXCLmlZHngb3mlZHorbdcIilbMV0gOiBmYWxzZSBcblx0XHRcdHZhciBtZW1iZXJzID0gXy5wbHVjayhicmFuY2gubWVtYmVycy5maWx0ZXIoZnVuY3Rpb24obWVtYmVyKSB7IHJldHVybiBtZW1iZXIubGV2ZWwgPCAyLjQgfSksICduYW1lJylcblx0XHRcdHZtLmJyYW5jaC5zYWZldHlNYW5hZ2VyIFx0PSBicmFuY2guc2FmZXR5TWFuYWdlcjtcblx0XHRcdHZtLmJyYW5jaC5zYWZldHlNYW5hZ2VycyBcdD0gbWVtYmVycztcblx0XHRcdHZtLm9uRHV0eVRvdGFsID0gMDtcblx0XHRcdF8ubWFwKHZtLmJyYW5jaC5tZW1iZXJzLGZ1bmN0aW9uKG1lbWJlcil7IFxuXHRcdFx0XHRtZW1iZXIuZ3JvdXBJZHMgPSBfLnJhbmdlKDEsTWF0aC5yb3VuZCh2bS5icmFuY2gubWVtYmVycy5sZW5ndGgvNiksMSk7XG5cdFx0XHRcdG1lbWJlci5ncm91cElEID0gbWVtYmVyLmdyb3VwICsgbWVtYmVyLmdyb3VwSWQgXG5cdFx0XHR9KVxuXHRcdH0pXG5cblx0XHRmdW5jdGlvbiBjaGVjayhtZW1iZXIpe1xuXHRcdFx0bWVtYmVyLm9uRHV0eSBcdCA9ICFtZW1iZXIub25EdXR5O1xuXHRcdFx0bWVtYmVyLmlzQ2hlY2tlZCA9ICFtZW1iZXIuaXNDaGVja2VkO1xuXHRcdFx0bWVtYmVyLmdyb3VwSUQgXHQgPSBtZW1iZXIuZ3JvdXAgKyBtZW1iZXIuZ3JvdXBJZFxuXHRcdH07XG5cblx0XHRcblx0XHRmdW5jdGlvbiBzYXZlKCl7XG5cdFx0XHR2YXIgRGlzcGF0Y2hOdW1iZXIgPSB2bS5icmFuY2gubWVtYmVycy5maWx0ZXIoZnVuY3Rpb24obWVtYmVyKSB7XG5cdFx0XHRcdHJldHVybiBtZW1iZXIub25EdXR5XG5cdFx0XHR9KTtcblxuXHRcdFx0QnJhbmNoU3ZjLnVwZGF0ZU1pc3Npb24oe1xuXHRcdFx0XHRicmFuY2ggICBcdFx0OiB2bS5icmFuY2gubmFtZSxcblx0XHRcdFx0ZGlyZWN0b3IgXHRcdDogdm0uYnJhbmNoLmRpcmVjdG9yLFxuXHRcdFx0XHRkaXNwYXRjaE51bSBcdDogRGlzcGF0Y2hOdW1iZXIubGVuZ3RoLFxuXHRcdFx0XHRzYWZldHlNYW5hZ2VyIFx0OiB2bS5icmFuY2guc2FmZXR5TWFuYWdlcixcblx0XHRcdFx0bWVtYmVycyBcdFx0OiB2bS5icmFuY2gubWVtYmVyc1xuXHRcdFx0fSk7XG5cdFx0XHQkd2luZG93Lmhpc3RvcnkuYmFjaygpO1xuXHRcdH07XG5cdH07XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHQvKipcblx0KiBhcHAuZGlzcGF0Y2ggTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLmRpc3BhdGNoJywgW10pXG5cdFx0LmNvbnRyb2xsZXIoJ0Rpc3BhdGNoQ29udHJvbGxlcicsRGlzcGF0Y2hDb250cm9sbGVyKTtcblxuXHREaXNwYXRjaENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHN0YXRlUGFyYW1zJywnJG1vZGFsJywnQ2FzZVN2YycsJ0JyYW5jaFN2YycsICdDYXJTdmMnLCAnVXNlclN2YyddO1xuXHRmdW5jdGlvbiBEaXNwYXRjaENvbnRyb2xsZXIoJHN0YXRlUGFyYW1zLCRtb2RhbCxDYXNlU3ZjLEJyYW5jaFN2YywgQ2FyU3ZjLCBVc2VyU3ZjKXtcblx0XHR2YXIgdm0gPSB0aGlzOyBcblx0XHRDYXNlU3ZjLmZldGNoKFVzZXJTdmMudXNlckNvcnBzKCkpLnN1Y2Nlc3MoZnVuY3Rpb24oY2FzZXMpe1xuXHRcdFx0dm0uY2FzZXMgPSBjYXNlcztcblx0XHRcdENhc2VTdmMuZmV0Y2hCeUlkKHZtLmNhc2VzWyRzdGF0ZVBhcmFtcy5jYXNlSWRdLl9pZCkuc3VjY2VzcyhmdW5jdGlvbihfY2FzZSl7XG5cdFx0XHRcdFx0cmV0dXJuIHZtLmNhc2VEZXRhaWxzID0gX2Nhc2U7XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdEJyYW5jaFN2Yy5mZXRjaEJ5Q29ycHMoVXNlclN2Yy51c2VyQ29ycHMoKSkuc3VjY2VzcyhmdW5jdGlvbihicmFuY2hlcyl7XG5cdFx0ICAgIHJldHVybiB2bS5icmFuY2hMaXN0ID0gYnJhbmNoZXM7XG5cdFx0IH0pO1xuXG5cdFx0Q2FyU3ZjLmZldGNoKCkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcblx0XHQgICAgcmV0dXJuIHZtLmNhcnNEYXRhID0gZGF0YTtcblx0XHR9KTtcblxuXHRcdHZtLmFkZE5ld0Nhc2UgPSBmdW5jdGlvbiAoKSB7XG5cdFx0ICBcdHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuXHRcdFx0ICAgIHRlbXBsYXRlVXJsOiAnL3BhcnRpYWxzL2Nhc2VQYW5lbC9jYXNlQWRkTW9kYWwnLFxuXHRcdFx0ICAgIGNvbnRyb2xsZXI6ICdDYXNlQWRkTW9kYWxDdHJsJyxcblx0XHRcdCAgICBzaXplOiBcImxnXCIsXG5cdFx0XHQgICAgcmVzb2x2ZSA6IHtcblx0XHRcdCAgICBcdGNhc2VJZCA6IGZ1bmN0aW9uKCl7XG5cdFx0XHQgICAgXHRcdHJldHVybiB2bS5pZCA9IFwi5paw5aKe5qGI5Lu2XCJcblx0XHRcdCAgICBcdH0sXG5cdFx0XHQgICAgXHRicmFuY2hMaXN0IDogZnVuY3Rpb24oKXtcblx0XHRcdCAgICBcdFx0cmV0dXJuIHZtLmJyYW5jaExpc3Q7XG5cdFx0XHQgICAgXHR9LFxuXHRcdFx0ICAgIFx0Y2Fyc0RhdGEgOiBmdW5jdGlvbigpe1xuXHRcdFx0ICAgIFx0XHRyZXR1cm4gdm0uY2Fyc0RhdGE7XG5cdFx0XHQgICAgXHR9LFxuXHRcdFx0ICAgIFx0aXNOZXcgOiBmdW5jdGlvbigpe1xuXHRcdFx0ICAgIFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdCAgICBcdH0sXG5cdFx0XHQgICAgXHRjYXNlRGV0YWlscyA6IGZ1bmN0aW9uKCl7XG5cdFx0XHQgICAgXHRcdHJldHVybiB7fVxuXHRcdFx0ICAgIFx0fVxuXHRcdFx0ICAgIH1cblx0XHQgICAgfSk7XG5cdFx0IH07XG5cblx0XHQgdm0uZWRpdENhc2UgPSBmdW5jdGlvbigpe1xuXHRcdCBcdHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuXHRcdFx0ICAgIHRlbXBsYXRlVXJsOiAnL3BhcnRpYWxzL2Nhc2VQYW5lbC9jYXNlQWRkTW9kYWwnLFxuXHRcdFx0ICAgIGNvbnRyb2xsZXI6ICdDYXNlQWRkTW9kYWxDdHJsJyxcblx0XHRcdCAgICBzaXplOiBcImxnXCIsXG5cdFx0XHQgICAgcmVzb2x2ZSA6IHtcblx0XHRcdCAgICBcdGNhc2VJZCA6IGZ1bmN0aW9uKCl7XG5cdFx0XHQgICAgXHRcdHJldHVybiB2bS5pZCA9IHZtLmNhc2VzWyRzdGF0ZVBhcmFtcy5jYXNlSWRdLmNhc2VJZDsgXG5cdFx0XHQgICAgXHR9LFxuXHRcdFx0ICAgIFx0YnJhbmNoTGlzdCA6IGZ1bmN0aW9uKCl7XG5cdFx0XHQgICAgXHRcdHJldHVybiB2bS5icmFuY2hMaXN0O1xuXHRcdFx0ICAgIFx0fSxcblx0XHRcdCAgICBcdGNhcnNEYXRhIDogZnVuY3Rpb24oKXtcblx0XHRcdCAgICBcdFx0Zm9yICh2YXIgaSA9IHZtLmNhcnNEYXRhLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHQgICAgXHRcdFx0Zm9yICh2YXIgaiA9IHZtLmNhc2VEZXRhaWxzLmNhcnMubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcblx0XHRcdCAgICBcdFx0XHRcdGlmICggdm0uY2Fyc0RhdGFbaV0ucmFkaW9Db2RlID09PSB2bS5jYXNlRGV0YWlscy5jYXJzW2pdLnJhZGlvX2NvZGUpIHtcblx0XHRcdCAgICBcdFx0XHRcdFx0cmV0dXJuIHZtLmNhcnNEYXRhW2ldLmlzQ2hlY2tlZCA9IHRydWUgO1xuXHRcdFx0ICAgIFx0XHRcdFx0fTtcblx0XHRcdCAgICBcdFx0XHR9O1x0XHQgICAgXHRcdFx0XG5cdFx0XHQgICAgXHRcdH07XG5cdFx0XHQgICAgXHRcdHJldHVybiB2bS5jYXJzRGF0YTtcblx0XHRcdCAgICBcdH0sXG5cdFx0XHQgICAgXHRpc05ldyA6IGZ1bmN0aW9uKCl7XG5cdFx0XHQgICAgXHRcdHJldHVybiBmYWxzZTsgXG5cdFx0XHQgICAgXHR9LFxuXHRcdFx0ICAgIFx0Y2FzZURldGFpbHMgOiBmdW5jdGlvbigpe1xuXHRcdFx0ICAgIFx0XHRyZXR1cm4gdm0uY2FzZURldGFpbHM7XG5cdFx0XHQgICAgXHR9XG5cdFx0XHQgICAgfVxuXHRcdCAgICB9KTtcblx0XHQgfTtcblx0fVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0LyoqXG5cdCogYXBwLmR1dHlsaXN0IE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5kdXR5bGlzdCcsIFtdKVxuXHRcdC5jb250cm9sbGVyKCdEdXR5TGlzdENvbnRyb2xsZXInLER1dHlMaXN0Q29udHJvbGxlcik7XG5cblx0RHV0eUxpc3RDb250cm9sbGVyLiRpbmplY3QgPSBbJ0JyYW5jaFN2YycsICckc3RhdGVQYXJhbXMnLCAnU29ja2V0U3ZjJywgJ1VzZXJTdmMnLCAnJHEnXTtcblx0ZnVuY3Rpb24gRHV0eUxpc3RDb250cm9sbGVyKEJyYW5jaFN2YywgJHN0YXRlUGFyYW1zLCBTb2NrZXRTdmMsIFVzZXJTdmMsICRxKXtcblx0XHR2YXIgdm0gPSB0aGlzOyBcblx0XHR2YXIgYnJhbmNoSWQgPSAkc3RhdGVQYXJhbXMuYnJhbmNoO1xuXHRcdFxuXHRcdEJyYW5jaFN2Yy50b3RhbExpc3RGaW5kQnlOYW1lKGJyYW5jaElkKS5zdWNjZXNzKGZ1bmN0aW9uKGJyYW5jaCl7XG5cdFx0XHR2bS5icmFuY2ggPSBicmFuY2g7XG5cdFx0XHR2bS5vbkR1dHlUb3RhbCA9IHZtLmJyYW5jaC5tZW1iZXJzLmZpbHRlcihmdW5jdGlvbihtZW1iZXIpIHtcblx0XHRcdFx0cmV0dXJuIG1lbWJlci5vbkR1dHkgPT0gdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuZHV0eWxpc3QgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLmR1dHlsaXN0Jylcblx0XHQuY29udHJvbGxlcignRHV0eUxpc3RFZGl0Q29udHJvbGxlcicsIER1dHlMaXN0RWRpdENvbnRyb2xsZXIpO1xuXG5cdER1dHlMaXN0RWRpdENvbnRyb2xsZXIuJGluamVjdCA9IFsnQnJhbmNoU3ZjJywgJyRzdGF0ZVBhcmFtcycsJ01lbWJlclN2YycsICckbG9jYXRpb24nLCAnJHdpbmRvdycsICdVc2VyU3ZjJywgJ0NhclN2YycsICdTdE1pc3Npb25GYWMnXTtcblx0ZnVuY3Rpb24gRHV0eUxpc3RFZGl0Q29udHJvbGxlcihCcmFuY2hTdmMsICRzdGF0ZVBhcmFtcyxNZW1iZXJTdmMsICRsb2NhdGlvbiwgJHdpbmRvdywgVXNlclN2YywgQ2FyU3ZjLCBTdE1pc3Npb25GYWMpe1xuXHRcdHZhciB2bSBcdFx0PSB0aGlzO1xuXHRcdHZtLnNhdmUgXHQ9IHNhdmU7XG5cdFx0dm0uY2hlY2sgXHQ9IGNoZWNrOyBcblxuXHRcdHZhciBicmFuY2ggPSAkc3RhdGVQYXJhbXMuYnJhbmNoXG5cblx0XHRCcmFuY2hTdmMudG90YWxMaXN0RmluZEJ5TmFtZShicmFuY2gpLnN1Y2Nlc3MoZnVuY3Rpb24oYnJhbmNoKXtcblx0XHRcdHZtLmJyYW5jaCA9IGJyYW5jaDtcblx0XHRcdHZtLmlzQ29ycHMgPSAgdHJ1ZSA/IGJyYW5jaC5uYW1lLnNwbGl0KFwi5pWR54G95pWR6K23XCIpWzFdIDogZmFsc2UgXG5cdFx0XHR2YXIgbWVtYmVycyA9IF8ucGx1Y2soYnJhbmNoLm1lbWJlcnMuZmlsdGVyKGZ1bmN0aW9uKG1lbWJlcikgeyByZXR1cm4gbWVtYmVyLmxldmVsIDwgMi40IH0pLCAnbmFtZScpXG5cdFx0XHR2bS5icmFuY2guc2FmZXR5TWFuYWdlciBcdD0gYnJhbmNoLnNhZmV0eU1hbmFnZXI7XG5cdFx0XHR2bS5icmFuY2guc2FmZXR5TWFuYWdlcnMgXHQ9IG1lbWJlcnM7XG5cdFx0XHR2bS5vbkR1dHlUb3RhbCA9IDA7XG5cdFx0XHRfLm1hcCh2bS5icmFuY2gubWVtYmVycyxmdW5jdGlvbihtZW1iZXIpeyBcblx0XHRcdFx0bWVtYmVyLmdyb3VwSWRzID0gXy5yYW5nZSgxLE1hdGgucm91bmQodm0uYnJhbmNoLm1lbWJlcnMubGVuZ3RoLzYpLDEpO1xuXHRcdFx0XHRtZW1iZXIuZ3JvdXBJRCA9IG1lbWJlci5ncm91cCArIG1lbWJlci5ncm91cElkIFxuXHRcdFx0fSlcblx0XHR9KTtcblxuXHRcdGZ1bmN0aW9uIGNoZWNrKG1lbWJlcil7XG5cdFx0XHRtZW1iZXIub25EdXR5ID0gIW1lbWJlci5vbkR1dHk7XG5cdFx0XHRtZW1iZXIuaXNDaGVja2VkID0gIW1lbWJlci5pc0NoZWNrZWQ7XG5cdFx0XHRtZW1iZXIuZ3JvdXBJRCA9IG1lbWJlci5ncm91cCArIG1lbWJlci5ncm91cElkXG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHNhdmUoKXtcblx0XHRcdHZhciBicmFuY2hHcm91cHMgPSAgXy5ncm91cEJ5KHZtLmJyYW5jaC5tZW1iZXJzLGZ1bmN0aW9uKG1lbWJlcil7XG5cdFx0XHRcdG1lbWJlci5ncm91cElEID0gbWVtYmVyLmdyb3VwICsgbWVtYmVyLmdyb3VwSWQ7XG5cdFx0XHRcdC8vIG1lbWJlci5pc0NoZWNrZWQgPSB0cnVlO1xuXHRcdFx0XHRpZiAobWVtYmVyLm9uRHV0eSkgeyByZXR1cm4gbWVtYmVyLmdyb3VwSUQgfSBlbHNlIHsgcmV0dXJuICdvZmZEdXR5JyB9O1xuXHRcdFx0fSk7XG5cdFx0XHRkZWxldGUgYnJhbmNoR3JvdXBzWydvZmZEdXR5J107IFxuXG5cdFx0ICAgIHZhciBwcmVTdHJpa2VUZWFtcyAgPSBbXTtcblx0XHQgICAgdmFyIHN0cmlrZVRlYW1NZW1iZXJzID0gW107XG5cdFx0ICAgIHZhciBjb250cm9sTGlzdCA9IFN0TWlzc2lvbkZhYy5ncm91cHMoKS5wcmVTdDsgXG5cdFx0ICAgIGZvciAodmFyIGtleSBpbiBicmFuY2hHcm91cHMpIHtcblx0XHQgICAgXHR2YXIgc3RyaWtlVGVhbSA9IHtcblx0XHQgICAgICBcdFx0Y2FzZUlkICAgICAgOiAncGVuZGluZycsXG5cdFx0ICAgICAgXHRcdGJyYW5jaCAgICAgIDogYnJhbmNoLFxuXHRcdCAgICAgIFx0XHRkaXJlY3RvciAgICA6IHZtLmJyYW5jaC5kaXJlY3Rvcixcblx0XHQgICAgICBcdFx0cG9zaXRpb24gICAgOiBTdE1pc3Npb25GYWMucG9zaXRpb24oKS5kZWZhdWx0UG9zLFxuXHRcdCAgICAgIFx0XHRwb3NpdGlvbnMgICA6IFN0TWlzc2lvbkZhYy5wb3NpdGlvbigpLnBvc3MsXG5cdFx0ICAgICAgXHRcdGdyb3VwcyAgICAgIDogU3RNaXNzaW9uRmFjLmdyb3VwcygpLmJyYW5jaCwgXG5cdFx0ICAgICAgXHRcdGFyZWEgXHRcdDogU3RNaXNzaW9uRmFjLmFyZWEoKS5kZWZhdWx0QXJlYSxcblx0XHQgICAgICBcdFx0YXJlYXMgXHRcdDogU3RNaXNzaW9uRmFjLmFyZWEoKS5hcmVhcyxcblx0XHQgICAgICBcdFx0Zmxvb3IgXHRcdDogMSxcblx0XHQgICAgICBcdFx0Zmxvb3JzIFx0XHQ6IFsxXSxcblx0XHQgICAgICBcdFx0Y3JlYXRvciBcdDogVXNlclN2Yy5jdXJyZW50VXNlcigpIFx0XG5cdFx0XHQgICAgIH07XG5cdFx0ICAgIFx0XG5cdFx0XHQgICAgaWYgKCBjb250cm9sTGlzdC5pbmRleE9mKGtleS5zbGljZSgwLCBrZXkubGVuZ3RoLTEgKSkgPiAtMSApIHtcblx0XHRcdCAgICBcblx0XHRcdFx0XHRzdHJpa2VUZWFtLm1lbWJlcnMgPSBfLnBsdWNrKGJyYW5jaEdyb3Vwc1trZXldLCdfaWQnKTtcblx0XHRcdFx0XHRzdHJpa2VUZWFtLmdyb3VwID0ga2V5O1xuXHRcdFx0XHRcdHN0cmlrZVRlYW0ud29ya2luZ1RpbWUgPSBfLm1pbihicmFuY2hHcm91cHNba2V5XSwgZnVuY3Rpb24obWVtYmVyKXsgcmV0dXJuIG1lbWJlci53b3JraW5nVGltZSB9KS53b3JraW5nVGltZTtcblx0XHRcdFx0XHRwcmVTdHJpa2VUZWFtcy5wdXNoKHN0cmlrZVRlYW0pXG5cdFx0XHRcdFx0c3RyaWtlVGVhbU1lbWJlcnMucHVzaC5hcHBseShzdHJpa2VUZWFtTWVtYmVycyxzdHJpa2VUZWFtLm1lbWJlcnMpXG5cdFx0XHRcdH07XG5cdFx0ICAgIH07XG5cblx0XHRcdHZhciBEaXNwYXRjaE51bWJlciA9IHZtLmJyYW5jaC5tZW1iZXJzLmZpbHRlcihmdW5jdGlvbihtZW1iZXIpIHtcblx0XHRcdFx0cmV0dXJuIG1lbWJlci5vbkR1dHlcblx0XHRcdH0pO1xuXG5cdFx0XHR2bS5icmFuY2gubWVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uKG1lbWJlcil7XG5cdFx0XHRcdG1lbWJlci5pc0NoZWNrZWQgPSB0cnVlID8gc3RyaWtlVGVhbU1lbWJlcnMuaW5kZXhPZihtZW1iZXIuX2lkKSA+IC0xIDogZmFsc2Vcblx0XHRcdH0pO1xuXHRcdFx0XG5cdFx0XHRCcmFuY2hTdmMudXBkYXRlTWlzc2lvbih7XG5cdFx0XHRcdGJyYW5jaCAgIFx0XHQ6IHZtLmJyYW5jaC5uYW1lLFxuXHRcdFx0XHRkaXJlY3RvciBcdFx0OiB2bS5icmFuY2guZGlyZWN0b3IsXG5cdFx0XHRcdGRpc3BhdGNoTnVtIFx0OiBEaXNwYXRjaE51bWJlci5sZW5ndGgsXG5cdFx0XHRcdHNhZmV0eU1hbmFnZXIgXHQ6IHZtLmJyYW5jaC5zYWZldHlNYW5hZ2VyLFxuXHRcdFx0XHRtZW1iZXJzIFx0XHQ6IHZtLmJyYW5jaC5tZW1iZXJzXG5cdFx0XHR9KTtcblx0XHRcdCR3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG5cdFx0fTtcblx0fVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuZ2VvIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5nZW8nKVxuXHRcdC5zZXJ2aWNlKCdHZW9TdmMnLEdlb1N2Yyk7XG5cblx0R2VvU3ZjLiRpbmplY3QgPSBbJyRxJywnJGh0dHAnXTtcblxuXHRmdW5jdGlvbiBHZW9TdmMoKXtcblx0XHR2YXIgc3ZjID0gdGhpczsgXG5cdFx0c3ZjLmdldEdlb2xvY2F0aW9uQ29vcmRpbmF0ZXMgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXHQgICAgICAgIG5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oXG5cdCAgICAgICAgICAgIGZ1bmN0aW9uKHBvc2l0aW9uKSB7IGRlZmVycmVkLnJlc29sdmUocG9zaXRpb24uY29vcmRzKTsgfSxcblx0ICAgICAgICAgICAgZnVuY3Rpb24oZXJyb3IpIHsgZGVmZXJyZWQucmVzb2x2ZShudWxsKTsgfVxuXHQgICAgICAgICk7XG5cdCAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdCAgICB9O1xuXG5cdCAgICBzdmMuZ2V0R2VvRW5jb2RlZEluZm8gPSBmdW5jdGlvbihhZGRyZXNzKXtcblx0ICAgIFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblx0ICAgIFx0Ly8gcmV0dXJuICRodHRwLmdldCgnaHR0cHM6Ly9tYXBzLmdvb2dsZWFwaXMuY29tL21hcHMvYXBpL2dlb2NvZGUvanNvbj9hZGRyZXNzPScrIGFkZHJlc3MgKycma2V5PUFJemFTeUF4cS1aa3hScjFaQXJCWEZET284eGdpNENsMlBlaXRBbycpXG5cdCAgICBcdHZhciBnZW9jb2RlciA9IG5ldyBnb29nbGUubWFwcy5HZW9jb2RlcigpO1xuXHQgICAgXHRpZiAoZ2VvY29kZXIpIHtcblx0XHQgICAgICBnZW9jb2Rlci5nZW9jb2RlKHsgJ2FkZHJlc3MnOiBhZGRyZXNzIH0sIGZ1bmN0aW9uIChyZXN1bHRzLCBzdGF0dXMpIHtcblx0XHQgICAgICAgICBpZiAoc3RhdHVzID09IGdvb2dsZS5tYXBzLkdlb2NvZGVyU3RhdHVzLk9LKSB7XG5cdFx0ICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uKSBcblx0XHQgICAgICAgICB9XG5cdFx0ICAgICAgICAgZWxzZSB7XG5cdFx0ICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSggXCJHZW9jb2RpbmcgZmFpbGVkOiBcIiArIHN0YXR1cyApXG5cdFx0ICAgICAgICAgfVxuXHRcdCAgICAgIH0pO1xuXHRcdCAgIH0gXG5cdFx0ICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7ICBcblx0ICAgIH07XG5cblx0ICAgIHN2Yy5mZXRjaEJhc2VMb2NhdGlvbiA9IGZ1bmN0aW9uKGNvcnBzKXtcblx0ICAgIFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9nZW9sb2NhdGlvbnM/Y29ycHM9JyArIGNvcnBzKVxuXHQgICAgfTtcblxuXHQgICAgc3ZjLmdldERpc3RhbmNlID0gZnVuY3Rpb24oIGZyb21fbG9jICwgdG9fbG9jICl7XG5cblx0ICAgIFx0aWYgKHR5cGVvZihOdW1iZXIucHJvdG90eXBlLnRvUmFkKSA9PT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0ICBOdW1iZXIucHJvdG90eXBlLnRvUmFkID0gZnVuY3Rpb24oKSB7XG5cdFx0XHQgICAgcmV0dXJuIHN2YyAqIE1hdGguUEkgLyAxODA7XG5cdFx0XHQgIH1cblx0XHRcdH1cblx0XHRcdHZhciBSID0gNjM3MTsgLy8gUmFkaXVzIG9mIHRoZSBlYXJ0aCBpbiBrbVxuXHRcdFx0dmFyIGRMYXQgPSAodG9fbG9jLmxhdCAtIGZyb21fbG9jLmxhdCApLnRvUmFkKCk7ICAvLyBKYXZhc2NyaXB0IGZ1bmN0aW9ucyBpbiByYWRpYW5zXG5cdFx0XHR2YXIgZExvbiA9ICh0b19sb2MubG5nIC0gZnJvbV9sb2MubG5nICkudG9SYWQoKTsgXG5cdFx0XHR2YXIgYSA9IE1hdGguc2luKGRMYXQvMikgKiBNYXRoLnNpbihkTGF0LzIpICtcblx0XHRcdCAgICAgICAgTWF0aC5jb3MoZnJvbV9sb2MubGF0LnRvUmFkKCkpICogTWF0aC5jb3ModG9fbG9jLmxhdC50b1JhZCgpKSAqIFxuXHRcdFx0ICAgICAgICBNYXRoLnNpbihkTG9uLzIpICogTWF0aC5zaW4oZExvbi8yKTsgXG5cdFx0XHR2YXIgYyA9IDIgKiBNYXRoLmF0YW4yKE1hdGguc3FydChhKSwgTWF0aC5zcXJ0KDEtYSkpOyBcblx0XHRcdHJldHVybiBSICogYztcblx0ICAgIH07XG5cblx0ICAgIHN2Yy5kZWZhdWx0TG9jYXRpb24gPSBmdW5jdGlvbigpe1xuXHQgICAgXHRyZXR1cm4geyBsYXQgOiAyNS4wOTI3Mjk3ICwgbG5nIDogIDEyMS40NjA4NjM5LCBhZGRyZXNzIDogbnVsbH07XG5cdCAgICB9O1xuXHR9O1xufSkoKTsiLCI7KGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5sYXlvdXQnKVxuXHRcdC5jb250cm9sbGVyKCdMb2dpbkNvbnRyb2xsZXInLExvZ2luQ29udHJvbGxlcik7XG5cblx0XHRMb2dpbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnVXNlclN2YycsICdzdG9yZScsICckc3RhdGUnLCdqd3RIZWxwZXInLCckaHR0cCcsICdTb2NrZXRTdmMnXTtcblxuXHRcdGZ1bmN0aW9uIExvZ2luQ29udHJvbGxlcihVc2VyU3ZjLCBzdG9yZSwgJHN0YXRlLGp3dEhlbHBlciwkaHR0cCwgU29ja2V0U3ZjICl7XG5cdFx0XHR2YXIgdm0gXHQgPSB0aGlzOyBcblx0XHRcdHZtLmxvZ2luID0gbG9naW47XG5cdFx0XHR2bS51c2VyICA9IHt9O1xuXG5cdFx0XHRmdW5jdGlvbiBsb2dpbigpe1xuXHRcdFx0XHRVc2VyU3ZjLmxvZ2luKHZtLnVzZXIpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHRcdFx0aWYgKGRhdGEuc3VjY2Vzcykge1xuXHRcdFx0XHRcdFx0c3RvcmUuc2V0KCdqd3QnLGRhdGEudG9rZW4pO1xuXHRcdFx0XHRcdFx0JGh0dHAuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ3gtYWNjZXNzLXRva2VuJ10gPSBkYXRhLnRva2VuO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGRhdGEudG9rZW47IFxuXHRcdFx0XHRcdH0gZWxzZSB7IFxuXHRcdFx0XHRcdFx0cmV0dXJuIGNvbnNvbGUubG9nKFwicGFzc3dvcmQgaXMgbm90IGV4aXN0ZWRcIik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KS50aGVuKGZ1bmN0aW9uKHRva2VuKXtcblx0XHRcdFx0XHRTb2NrZXRTdmMuaW5pdCh0b2tlbik7XG5cdFx0XHRcdFx0U29ja2V0U3ZjLmVtaXQoJ2xvZ2luJyk7XG5cdFx0XHRcdH0pLnRoZW4oZnVuY3Rpb24oKXtcblx0XHRcdFx0XHRpZiAoand0SGVscGVyLmRlY29kZVRva2VuKHRva2VuKS5yb2xlID09IFwiYWRtaW5cIikge1xuXHRcdFx0XHRcdFx0dmFyIHVzZXJCcmFuY2ggPSBqd3RIZWxwZXIuZGVjb2RlVG9rZW4odG9rZW4pLmJyYW5jaDtcblx0XHRcdFx0XHRcdGlmICh1c2VyQnJhbmNoLnNsaWNlKHVzZXJCcmFuY2gubGVuZ3RoLTIgLHVzZXJCcmFuY2gubGVuZ3RoKSA9PSBcIuWkp+mailwiKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiAkc3RhdGUuZ28oJ2R1dHlEZXNrLmNvcnBzJylcblx0XHRcdFx0XHRcdH0gZWxzZXtcblx0XHRcdFx0XHRcdFx0cmV0dXJuICRzdGF0ZS5nbygnZHV0eURlc2suYnJhbmNoJylcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fWVsc2V7XG5cdFx0XHRcdFx0XHRyZXR1cm4gJHN0YXRlLmdvKCdkaXJlY3Rvci5zYWZldHkuaW5kZXgnKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSlcblx0XHRcdH07XG5cdFx0fTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5sYXlvdXQnLCBbXSlcblx0XHQuY29udHJvbGxlcignVG9wTmF2Q29udHJvbGxlcicsVG9wTmF2Q29udHJvbGxlcik7XG5cblx0VG9wTmF2Q29udHJvbGxlci4kaW5qZWN0ID0gW107XG5cdGZ1bmN0aW9uIFRvcE5hdkNvbnRyb2xsZXIoJGxvY2F0aW9uLCRzdGF0ZSwgJGludGVydmFsLCBzdG9yZSwgU29ja2V0U3ZjLCBVc2VyU3ZjLCAkd2luZG93KXtcblx0XHR2YXIgdm0gPSB0aGlzOyBcblx0XHR2bS5jdXJyZW50VGltZSA9ICBtb21lbnQoKS5mb3JtYXQoJ01NTSBEbywgaDptbTpzcyBhJyk7XG5cdFx0dm0ubG9nb3V0ID0gbG9nb3V0O1xuXG5cblx0XHQkaW50ZXJ2YWwoZnVuY3Rpb24oKXtcblx0XHRcdG1vbWVudC5sb2NhbGUoJ3poLXR3Jyk7XG5cdFx0XHR2bS5jdXJyZW50VGltZSA9ICBtb21lbnQoKS5mb3JtYXQoJ01NTSBEbywgaDptbTpzcyBhJyk7XG5cdFx0fSwgMTAwMCk7XG5cdFx0IFxuXHRcdGZ1bmN0aW9uIGxvZ291dCgpe1xuXHRcdFx0dmFyIGFjY291bnQgPSBVc2VyU3ZjLmN1cnJlbnRBY2NvdW50KCk7XG5cdFx0XHRTb2NrZXRTdmMuZW1pdCgnbG9nb3V0Jyk7XG5cdFx0XHQkc3RhdGUuZ28oJ2Fub24ubG9naW4nKTtcblx0XHR9O1xuXHR9XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLm1hcCBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAubWFwJywgW10pXG5cdFx0LmNvbnRyb2xsZXIoJ01hcEluZGV4Q29udHJvbGxlcicsTWFwSW5kZXhDb250cm9sbGVyKTtcblxuXHRNYXBJbmRleENvbnRyb2xsZXIuJGluamVjdCA9IFsnbGVhZmxldERhdGEnLCAnR2VvU3ZjJ107XG5cdGZ1bmN0aW9uIE1hcEluZGV4Q29udHJvbGxlcihsZWFmbGV0RGF0YSwgR2VvU3ZjKXtcblx0XHR2YXIgdm0gPSB0aGlzOyBcblxuXHRcdEdlb1N2Yy5nZXRHZW9sb2NhdGlvbkNvb3JkaW5hdGVzKCkudGhlbihmdW5jdGlvbihjb29yZCl7XG5cdCAgICAgICAgdm0ubm93UG9zLmxhdCA9IGNvb3JkLmxhdGl0dWRlO1xuXHQgICAgICAgIHZtLm5vd1Bvcy5sbmcgPSBjb29yZC5sb25naXR1ZGU7XG5cdCAgICAgICAgdm0ubm93UG9zLnpvb20gPSAxNztcblx0ICAgIH0pXG5cblx0ICAgIGFuZ3VsYXIuZXh0ZW5kKHZtLCB7XG5cdCAgICAgICAgbm93UG9zOiB7XG5cdCAgICAgICAgICAgIGxhdDogMjQuOTg4LFxuXHQgICAgICAgICAgICBsbmc6IDEyMS41NzUyLFxuXHQgICAgICAgICAgICB6b29tOiAxN1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgY29udHJvbHM6IHtcblx0ICAgICAgICAgICAgZHJhdzoge31cblx0ICAgICAgICB9XG5cdCAgICB9KVxuXG5cdCAgICBsZWFmbGV0RGF0YS5nZXRNYXAoKS50aGVuKGZ1bmN0aW9uKG1hcCkge1xuXHQgICAgICB2YXIgZHJhd25JdGVtcyA9IHZtLmNvbnRyb2xzLmVkaXQuZmVhdHVyZUdyb3VwO1xuXHQgICAgICBtYXAub24oJ2RyYXc6Y3JlYXRlZCcsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgdmFyIGxheWVyID0gZS5sYXllcjtcblx0ICAgICAgICBkcmF3bkl0ZW1zLmFkZExheWVyKGxheWVyKTtcblx0ICAgICAgICBcblx0ICAgICAgICBGZWF0dXJlQ29sbGVjdGlvbnMucHVzaChsYXllci50b0dlb0pTT04oKSlcblx0ICAgICAgICBcblx0ICAgICAgfSk7XG5cdCAgICB9KVxuXHR9XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5tZW1iZXIgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLm1lbWJlcicpXG5cdFx0LmNvbnRyb2xsZXIoJ01lbWJlckFjY291bnRNb2RhbENvbnRyb2xsZXInLE1lbWJlckFjY291bnRNb2RhbENvbnRyb2xsZXIpO1xuXG5cdE1lbWJlckFjY291bnRNb2RhbENvbnRyb2xsZXIuJGluamVjdCA9IFsnVXNlclN2YycsICdNZW1iZXJTdmMnLCAnbWVtYmVyJywgJyRtb2RhbEluc3RhbmNlJ107XG5cdGZ1bmN0aW9uIE1lbWJlckFjY291bnRNb2RhbENvbnRyb2xsZXIoVXNlclN2YywgTWVtYmVyU3ZjLCBtZW1iZXIsICRtb2RhbEluc3RhbmNlKXtcblx0XHR2YXIgdm0gPSB0aGlzOyBcblx0XHR2bS51c2VyID0gbWVtYmVyO1xuXHRcdHZtLnNhdmUgPSBzYXZlO1xuXHRcdHZtLmNhbmNlbCA9IGNhbmNlbDsgXG5cblx0XHRmdW5jdGlvbiBzYXZlKCl7XG5cdFx0XHRpZiAoXy5pc0VtcHR5KHZtLnVzZXIpKSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKFwicGxlYXNlIGVudGVyIHlvdXIgYWNjb3VudCBhbmQgcGFzc3dvcmQhXCIpXG5cdFx0XHR9IGVsc2V7XG5cdFx0XHRcdGlmICghdm0udXNlci5hY2NvdW50KSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJhY2NvdW50IGNhbid0IGJlIGJsYW5rIVwiKVxuXHRcdFx0XHRcdGlmICghdm0udXNlci5wYXNzd29yZCkge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coXCJwYXNzd29kIGNhbid0IGJlIGJsYW5rIVwiKVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH0gZWxzZSBpZiAoIXZtLnVzZXIucGFzc3dvcmQpIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhcInBhc3N3b3JkIGNhbid0IGJlIGJsYW5rXCIpXG5cdFx0XHRcdH1lbHNle1xuXHRcdFx0XHRcdFVzZXJTdmMuYWN0aXZhdGUodm0udXNlcik7XG5cdFx0XHRcdFx0TWVtYmVyU3ZjLnVwZGF0ZVVzZXIobWVtYmVyLm5hbWUpO1xuXHRcdFx0XHRcdCRtb2RhbEluc3RhbmNlLmNsb3NlKHZtLnVzZXIpO1xuXHRcdFx0XHR9O1xuXHRcdFx0fTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gY2FuY2VsKCl7XG5cdFx0XHQkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcblx0XHR9O1xuXHR9O1xufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdC8qKlxuXHQqIGFwcC5tZW1iZXIgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLm1lbWJlcicpXG5cdFx0LmNvbnRyb2xsZXIoJ01lbWJlckVkaXRDb250cm9sbGVyJyxNZW1iZXJFZGl0Q29udHJvbGxlcik7XG5cdFxuXHRNZW1iZXJFZGl0Q29udHJvbGxlci4kaW5qZWN0ID0gWydNZW1iZXJTdmMnLCAnQnJhbmNoU3ZjJywgJyRzdGF0ZVBhcmFtcycsICckd2luZG93JywnJG1vZGFsJywgJyRzdGF0ZScsICdVc2VyU3ZjJ107XG5cdFxuXHRmdW5jdGlvbiBNZW1iZXJFZGl0Q29udHJvbGxlciggTWVtYmVyU3ZjLCBCcmFuY2hTdmMsICRzdGF0ZVBhcmFtcywgJHdpbmRvdywkbW9kYWwsICRzdGF0ZSwgVXNlclN2Yyl7XG5cdFx0dmFyIHZtID0gdGhpczsgXG5cblx0XHR2bS5hbGVydHMgPSBbXTtcblx0XHR2bS5tZW1iZXJEZWxldGVkID0gZmFsc2U7XG5cdFx0dmFyIHRlbXBEZWxNZW1iZXIgPSBudWxsO1xuXHRcdHZtLmFjY2Vzc0xldmVsID0gVXNlclN2Yy5hY2Nlc3NMZXZlbCgpO1xuXHRcdHZtLmNsb3NlQWxlcnQgPSBjbG9zZUFsZXJ0O1xuXHRcdHZtLnNhdmUgPSBzYXZlO1xuXHRcdHZtLmFkZE5ld01lbWJlciA9IGFkZE5ld01lbWJlcjtcblx0XHR2bS51cGRhdGUgPSB1cGRhdGU7XG5cdFx0dm0uYWN0aXZhdGVBY2NvdW50ID0gYWN0aXZhdGVBY2NvdW50O1xuXHRcdHZtLmRlbGV0ZUFsZXJ0ID0gZGVsZXRlQWxlcnQ7XG5cdFx0dm0uZGVBY3RpdmF0ZUFsZXJ0ID0gZGVBY3RpdmF0ZUFsZXJ0O1xuXHRcdFxuXHRcdHZhciBtZW1iZXJJbml0ID0gZnVuY3Rpb24oKXtcblx0XHRcdE1lbWJlclN2Yy5maW5kQnlCcmFuY2goJHN0YXRlUGFyYW1zLmJyYW5jaCkuc3VjY2VzcyhmdW5jdGlvbihtZW1iZXJzKXtcblx0XHRcdFx0dm0ubWVtYmVycyA9IG1lbWJlcnM7XG5cdFx0XHRcdHZtLm1lbWJlcnMuZm9yRWFjaChmdW5jdGlvbihtZW1iZXIpe1xuXHRcdFx0XHRcdG1lbWJlci53b3JraW5nVGltZSA9IG1vbWVudC5kdXJhdGlvbihtZW1iZXIud29ya2luZ1RpbWUsJ3NlY29uZHMnKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0bWVtYmVySW5pdCgpO1xuXG5cdFx0dmFyIGRlQWN0aXZhdGVBY2NvdW50ID0gZnVuY3Rpb24oaW5kZXgpe1xuXHRcdFx0VXNlclN2Yy5yZW1vdmVVc2VyKHRlbXBEZWxNZW1iZXIubmFtZSkuc3VjY2VzcyhmdW5jdGlvbih1c2VyKXtcblx0XHRcdFx0TWVtYmVyU3ZjLnJlbW92ZVVzZXIodXNlci51c2VybmFtZSk7XG5cdFx0XHRcdHZtLmNsb3NlQWxlcnQoaW5kZXgpO1xuXHRcdFx0XHRtZW1iZXJJbml0KCk7XG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0dmFyIGRlbGV0ZU1lbWJlciA9IGZ1bmN0aW9uKGluZGV4KXtcblx0XHRcdHZtLm1lbWJlckRlbGV0ZWQgPSB0cnVlO1xuXHRcdFx0TWVtYmVyU3ZjLmRlbGV0ZU1lbWJlcih0ZW1wRGVsTWVtYmVyKS5zdWNjZXNzKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHZtLm1lbWJlckRlbGV0ZWQgPSBmYWxzZTtcblx0XHRcdH0pO1xuXHRcdFx0dm0uY2xvc2VBbGVydChpbmRleCk7XG5cdFx0XHRtZW1iZXJJbml0KCk7XG5cdFx0fTtcblxuXHRcdHZhciBjYW5jZWxEZWwgPSBmdW5jdGlvbihpbmRleCl7XG5cdFx0XHR2bS5tZW1iZXJEZWxldGVkID0gZmFsc2U7XG5cdFx0XHR2bS5jbG9zZUFsZXJ0KGluZGV4KTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gc2F2ZSgpe1xuXHRcdFx0dmFyIGRpcmVjdG9ycyA9IF8ucGx1Y2soIHZtLm1lbWJlcnMuZmlsdGVyKGZ1bmN0aW9uKG1lbWJlcikgeyByZXR1cm4gbWVtYmVyLmxldmVsID4gMS4zICB9KSAsICduYW1lJyk7XG5cdFx0XHRCcmFuY2hTdmMudXBkYXRlKHtcblx0XHRcdFx0YnJhbmNoIDogJHN0YXRlUGFyYW1zLmJyYW5jaCxcblx0XHRcdFx0bWVtYmVycyA6IF8ucGx1Y2soIHZtLm1lbWJlcnMgLCAnX2lkJyksXG5cdFx0XHRcdGRpcmVjdG9ycyA6IGRpcmVjdG9ycyxcblx0XHRcdFx0ZGlyZWN0b3IgOiBkaXJlY3RvcnNbMF0sXG5cdFx0XHRcdHNhZmV0eU1hbmFnZXIgOiBkaXJlY3RvcnNbMF1cblx0XHRcdH0pLnN1Y2Nlc3MoZnVuY3Rpb24oKXtcblx0XHRcdFx0JHdpbmRvdy5oaXN0b3J5LmJhY2soKTtcblx0XHRcdH0pO1x0XHRcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gYWRkTmV3TWVtYmVyKCl7XG5cdFx0XHR2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcblx0XHRcdCAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL21lbWJlci9tZW1iZXIubW9kYWwuaHRtbCcsXG5cdFx0XHQgICAgY29udHJvbGxlcjogJ01lbWJlck1vZGFsQ3RybCcsXG5cdFx0XHQgICAgc2l6ZTogXCJtZFwiLFxuXHRcdFx0ICAgIHJlc29sdmUgOiB7XG5cdFx0XHQgICAgXHRicmFuY2ggOiBmdW5jdGlvbigpe1xuXHRcdFx0ICAgIFx0XHRyZXR1cm4gJHN0YXRlUGFyYW1zLmJyYW5jaCBcblx0XHRcdCAgICBcdH0sXG5cdFx0XHQgICAgXHRtZW1iZXIgOiBmdW5jdGlvbigpe1xuXHRcdFx0ICAgIFx0XHRyZXR1cm4geyB3b3JraW5nVGltZSA6IG51bGwgfTtcblx0XHRcdCAgICBcdH1cblx0XHRcdCAgICB9XG5cdFx0ICAgIH0pO1xuXG5cdFx0ICAgIG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24obWVtYmVyKXtcblx0XHQgICAgXHRpZiAobWVtYmVyKSB7XG5cdFx0ICAgIFx0XHRtZW1iZXJJbml0KCk7XG5cdFx0ICAgIFx0fVxuXHRcdCAgICBcdHZtLmFsZXJ0cy5wdXNoKHsgdHlwZSA6IFwic3VjY2Vzc1wiICwgIG1zZzogJ+S6uuWToeaWsOWinuaIkOWKn++8gSAnICsgbWVtYmVyLm5hbWUgKyAnIOW3suWKoOWFpSAnICsgbWVtYmVyLmJyYW5jaH0pO1xuXHRcdCAgICB9KVxuXHRcdH07XG5cblx0XHRmdW5jdGlvbiB1cGRhdGUobWVtYmVyKXtcblx0XHRcdHZhciBvbGRNZW1iZXIgPSBtZW1iZXI7XG5cdFx0XHR2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcblx0XHRcdCAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL21lbWJlci9tZW1iZXIubW9kYWwuaHRtbCcsXG5cdFx0XHQgICAgY29udHJvbGxlcjogJ01lbWJlck1vZGFsQ3RybCcsXG5cdFx0XHQgICAgc2l6ZTogXCJtZFwiLFxuXHRcdFx0ICAgIHJlc29sdmUgOiB7XG5cdFx0XHQgICAgXHRicmFuY2ggOiBmdW5jdGlvbigpe1xuXHRcdFx0ICAgIFx0XHRyZXR1cm4gJHN0YXRlUGFyYW1zLmJyYW5jaCBcblx0XHRcdCAgICBcdH0sXG5cdFx0XHQgICAgXHRtZW1iZXIgOiBmdW5jdGlvbigpe1xuXHRcdFx0ICAgIFx0XHRyZXR1cm4ge1xuXHRcdFx0ICAgIFx0XHRcdG1lbWJlcklkIDogbWVtYmVyLl9pZCxcblx0XHRcdCAgICBcdFx0XHRpZCA6IG1lbWJlci5pZCxcblx0XHRcdCAgICBcdFx0XHRuYW1lIDogbWVtYmVyLm5hbWUsXG5cdFx0XHQgICAgXHRcdFx0dGl0bGUgOiBtZW1iZXIudGl0bGUsXG5cdFx0XHQgICAgXHRcdFx0YnJhbmNoZXMgOiBtZW1iZXIuYnJhbmNoZXMsXG5cdFx0XHQgICAgXHRcdFx0Y29ycHMgOiBtZW1iZXIuY29ycHMsXG5cdFx0XHQgICAgXHRcdFx0cmFkaW9Db2RlIDogbWVtYmVyLnJhZGlvQ29kZSwgXG5cdFx0XHQgICAgXHRcdFx0d29ya2luZ1RpbWUgOiBtZW1iZXIud29ya2luZ1RpbWUubWludXRlcygpICogNjAgKyBtZW1iZXIud29ya2luZ1RpbWUuc2Vjb25kcygpXG5cdFx0XHQgICAgXHRcdH1cblx0XHRcdCAgICBcdH1cblx0XHRcdCAgICB9XG5cdFx0ICAgIH0pO1xuXG5cdFx0ICAgIG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24obWVtYmVyKXtcblx0XHQgICAgXHRtZW1iZXJJbml0KCk7XG5cdFx0ICAgIFx0dm0uYWxlcnRzLnB1c2goeyB0eXBlIDogXCJpbmZvXCIgLCAgbXNnOiAgb2xkTWVtYmVyLm5hbWUgKyAn5L+u5pS55oiQ5YqfIScgfSk7XG5cdFx0ICAgIH0pO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBhY3RpdmF0ZUFjY291bnQobWVtYmVyKXtcblx0XHRcdHZhciB1c2VycyA9IHZtLm1lbWJlcnMuZmlsdGVyKGZ1bmN0aW9uKG1lbWJlcikge1xuXHRcdFx0XHRyZXR1cm4gbWVtYmVyLmlzVXNlcjtcblx0XHRcdH0pO1xuXG5cdFx0XHRpZiAodXNlcnMubGVuZ3RoIDwgMyApIHtcblx0XHRcdFx0dmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XG5cdFx0XHRcdCAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL21lbWJlci9tZW1iZXIuYWNjb3VudC5odG1sJyxcblx0XHRcdFx0ICAgIGNvbnRyb2xsZXI6ICdNZW1iZXJBY2NvdW50TW9kYWxDdHJsJyxcblx0XHRcdFx0ICAgIHNpemU6IFwibWRcIixcblx0XHRcdFx0ICAgIHJlc29sdmUgOiB7XG5cdFx0XHRcdCAgICBcdG1lbWJlciA6IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdCAgICBcdFx0cmV0dXJuIG1lbWJlclxuXHRcdFx0XHQgICAgXHR9XG5cdFx0XHRcdCAgICB9XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24obWVtYmVyKXtcblx0XHRcdFx0XHRtZW1iZXJJbml0KCk7XG5cdFx0XHRcdFx0dm0uYWxlcnRzLnB1c2goeyB0eXBlIDogXCJpbmZvXCIgLCBtc2cgOiBtZW1iZXIubmFtZSArIFwiIOW3sumWi+mAmueCuuS9v+eUqOiAhVwiIH0pXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dm0uYWxlcnRzLnB1c2goeyB0eXBlIDogXCJ3YXJuaW5nXCIgLCBtc2cgOiBcIueEoeazlemWi+mAmlwiICsgbWVtYmVyLm5hbWUgKyBcIiDlm6Dngrrkvb/nlKjogIXlt7LotoXpgY4z5L2N77yM6KuL6Kej6Zmk5YW25LuW5Lq65biz6Jmf5b6M5YaN6ZaL6YCaIFwifSk7XG5cdFx0XHR9O1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBkZWxldGVBbGVydChtZW1iZXIpe1xuXHRcdFx0dm0uYWxlcnRzLnB1c2goeyBcdFxuXHRcdFx0XHR0eXBlIDogXCJkYW5nZXJcIiAsICBcblx0XHRcdFx0bXNnOiAn5piv5ZCm56K65a6a6KaB5Yiq6Zmk77yBJyArIG1lbWJlci5uYW1lLCBcblx0XHRcdFx0ZXhlY3V0ZSA6IGRlbGV0ZU1lbWJlcixcblx0XHRcdFx0Y2FuY2VsIDogIGNhbmNlbERlbFxuXHRcdFx0fSk7XG5cdFx0XHR0ZW1wRGVsTWVtYmVyID0gbWVtYmVyO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBkZUFjdGl2YXRlQWxlcnQobWVtYmVyKXtcblx0XHRcdHZhciB1c2VycyA9IHZtLm1lbWJlcnMuZmlsdGVyKGZ1bmN0aW9uKG1lbWJlcikge1xuXHRcdFx0XHRyZXR1cm4gbWVtYmVyLmlzVXNlcjtcblx0XHRcdH0pO1xuXHRcdFx0aWYgKHVzZXJzLmxlbmd0aCA9PSAxICkge1xuXHRcdFx0XHR2bS5hbGVydHMucHVzaCh7IFxuXHRcdFx0XHRcdHR5cGUgOiBcIndhcm5pbmdcIiwgIFxuXHRcdFx0XHRcdG1zZzogJ+avj+WIhumaiuiHs+WwkeimgeaciTHlgIvkvb/nlKjogIXvvIznhKHms5Xlj5bmtognICsgbWVtYmVyLm5hbWUgKyBcIueahOeZu+WFpeasiumZkFwiLFxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZXtcblx0XHRcdFx0dm0uYWxlcnRzLnB1c2goeyBcblx0XHRcdFx0XHR0eXBlIDogXCJkYW5nZXJcIiwgIFxuXHRcdFx0XHRcdG1zZzogJ+aYr+WQpueiuuWumuimgeino+mZpCcgKyBtZW1iZXIubmFtZSArIFwi55m75YWl5qyK6ZmQXCIsXG5cdFx0XHRcdFx0ZXhlY3V0ZSA6IGRlQWN0aXZhdGVBY2NvdW50LFxuXHRcdFx0XHRcdGNhbmNlbCA6IGNhbmNlbERlbFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0dGVtcERlbE1lbWJlciA9IG1lbWJlcjtcblx0XHRcdH07XG5cdFx0fTtcblx0XG5cdFx0ZnVuY3Rpb24gY2xvc2VBbGVydChpbmRleCl7XG5cdFx0XHR2bS5hbGVydHMuc3BsaWNlKGluZGV4LDEpXG5cdFx0fTtcblx0fVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdC8qKlxuXHQqIGFwcC5tZW1iZXIgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLm1lbWJlcicsIFtdKVxuXHRcdC5jb250cm9sbGVyKCdNZW1iZXJJbmRleENvbnRyb2xsZXInLE1lbWJlckluZGV4Q29udHJvbGxlcik7XG5cblx0TWVtYmVySW5kZXhDb250cm9sbGVyLiRpbmplY3QgPSBbIE1lbWJlclN2YyAsICRzdGF0ZVBhcmFtcyBdO1xuXHRmdW5jdGlvbiBNZW1iZXJJbmRleENvbnRyb2xsZXIoIE1lbWJlclN2YyAsICRzdGF0ZVBhcmFtcyApe1xuXHRcdHZhciB2bSA9IHRoaXM7IFxuXG5cdFx0dm0uYnJhbmNoID0gJHN0YXRlUGFyYW1zLmJyYW5jaDtcblx0XHRNZW1iZXJTdmMuZmluZEJ5QnJhbmNoKCRzdGF0ZVBhcmFtcy5icmFuY2gpLnN1Y2Nlc3MoZnVuY3Rpb24obWVtYmVycyl7XG5cdFx0XHR2bS5tZW1iZXJzID0gbWVtYmVycztcblx0XHRcdHZtLm1lbWJlcnMuZm9yRWFjaChmdW5jdGlvbihtZW1iZXIpe1xuXHRcdFx0XHRyZXR1cm4gbWVtYmVyLndvcmtpbmdUaW1lID0gbW9tZW50LmR1cmF0aW9uKG1lbWJlci53b3JraW5nVGltZSwnc2Vjb25kcycpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH07XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5tZW1iZXIgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLm1lbWJlcicpXG5cdFx0LmNvbnRyb2xsZXIoJ01lbWJlck1vZGFsQ29udHJvbGxlcicsTWVtYmVyTW9kYWxDb250cm9sbGVyKTtcblxuXHRNZW1iZXJNb2RhbENvbnRyb2xsZXIuJGluamVjdCA9IFsnYnJhbmNoJywgJ01lbWJlclN2YycsICckbW9kYWxJbnN0YW5jZScsICckc3RhdGUnLCAnbWVtYmVyJywnQnJhbmNoU3ZjJywgJ1VzZXJTdmMnXTtcblx0ZnVuY3Rpb24gTWVtYmVyTW9kYWxDb250cm9sbGVyKGJyYW5jaCwgTWVtYmVyU3ZjLCAkbW9kYWxJbnN0YW5jZSwgJHN0YXRlLCBtZW1iZXIsQnJhbmNoU3ZjLCBVc2VyU3ZjKXtcblx0XHR2YXIgdm0gPSB0aGlzOyBcblx0XHR2bS5hbGVydHMgPSBbXTtcblx0XHR2bS5pc05ldyAgPSBfLmlzTnVsbChtZW1iZXIud29ya2luZ1RpbWUpO1xuXHRcdHZtLnNhdmUgICA9IHNhdmU7XG5cdFx0dm0udXBkYXRlID0gdXBkYXRlO1xuXHRcdHZtLmNhbmNlbCA9IGNhbmVsO1xuXG5cdFx0dm0ubWVtYmVyID0ge1xuXHRcdFx0aWQgXHRcdCBcdDogbWVtYmVyLmlkIHx8ICBcIlwiLCBcblx0XHRcdG5hbWUgXHQgXHQ6IG1lbWJlci5uYW1lIHx8IG51bGwgLCBcblx0XHRcdHRpdGxlICAgIFx0OiBcIua2iOmYsumaiuWToVwiLFxuXHRcdFx0dGl0bGVzICAgXHQ6IFtcIua2iOmYsumaiuWToVwiLFwi5bCP6ZqK6ZW3XCIsXCLliIbpmorplbdcIixcIuS4remaiumVt1wiLFwi5aSn6ZqK6ZW3XCIsXCLlia/lpKfpmorplbdcIl0sXG5cdFx0XHRicmFuY2ggICBcdDogbWVtYmVyLmJyYW5jaCB8fCBicmFuY2gsXG5cdFx0XHR3b3JraW5nVGltZSA6IG1lbWJlci53b3JraW5nVGltZSB8fCAgMTIwMCxcblx0XHRcdHJhZGlvQ29kZSBcdDogbWVtYmVyLnJhZGlvQ29kZSB8fCAgbnVsbCwgXG5cdFx0XHRtaXNzaW9uICBcdDogXCLnnoTlrZDmiYtcIixcblx0XHRcdG1pc3Npb25zIFx0OiBbXCLnnoTlrZDmiYtcIixcIuWJr+eehOWtkOaJi1wiLFwi5Y+45qmfXCIsXCLlsI/ntYTplbdcIixcIuWuieWFqOeuoeWItuWToVwiLFwi6IGv57Wh5a6YXCIsXSxcblx0XHRcdGNvcnBzXHQgXHQ6IFVzZXJTdmMudXNlckNvcnBzKCksXG5cdFx0XHRjb3Jwc3MgXHQgXHQ6IFtcIuesrOS4gOaVkeeBveaVkeitt+Wkp+mailwiLFwi56ys5LiJ5pWR54G95pWR6K235aSn6ZqKXCJdLFxuXHRcdH07XG5cblx0XHRCcmFuY2hTdmMuZmV0Y2hCeUNvcnBzKFVzZXJTdmMudXNlckNvcnBzKCkpLnN1Y2Nlc3MoZnVuY3Rpb24oYnJhbmNoZXMpe1xuXHRcdFx0dm0uYnJhbmNoZXMgPSBicmFuY2hlczsgXG5cdFx0XHRpZiAoIXZtLmlzTmV3KSB7XG5cdFx0XHRcdHZhciBicmFuY2hBcnJ5ID0gW107XG5cdFx0XHRcdGZvciAodmFyIGkgPSBicmFuY2hlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0XHRcdGJyYW5jaEFycnkucHVzaChicmFuY2hlc1tpXS5uYW1lKTtcblx0XHRcdFx0fTtcblx0XHRcdFx0dm0ubWVtYmVyLmJyYW5jaGVzID0gYnJhbmNoQXJyeTtcblx0XHRcdH07IFxuXHRcdH0pO1xuXG5cdFx0dmFyIHJhZGlvQ29kZVByZWZpeCA9IGZ1bmN0aW9uKGJyYW5jaCl7XG5cdFx0XHR2YXIgc3VmZml4ID0gIGJyYW5jaC5zcGxpdCgnJykuc2xpY2UoLTIpLmpvaW4oJycpO1xuXHRcdFx0aWYgKHN1ZmZpeCA9PSBcIuWkp+mailwiIHx8IHN1ZmZpeCA9PSBcIuS4remailwiKSB7XG5cdFx0XHRcdHJldHVybiBcIuWMl+a1t1wiO1xuXHRcdFx0fSBlbHNle1xuXHRcdFx0XHRyZXR1cm4gYnJhbmNoLnNwbGl0KCcnKS5zbGljZSgwLDIpLmpvaW4oJycpO1xuXHRcdFx0fTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gc2F2ZSgpe1xuXHRcdFx0aWYgKHZtLm1lbWJlci5uYW1lKSB7XG5cdFx0XHRcdHZtLm1lbWJlci5yYWRpb0NvZGVQcmVmaXggPSByYWRpb0NvZGVQcmVmaXgodm0ubWVtYmVyLmJyYW5jaCk7XG5cdFx0XHRcdE1lbWJlclN2Yy5jcmVhdGUodm0ubWVtYmVyKS5zdWNjZXNzKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0dm0ubWVtYmVyLndvcmtpbmdUaW1lID0gbW9tZW50LmR1cmF0aW9uKHBhcnNlSW50KHZtLm1lbWJlci53b3JraW5nVGltZSksJ3NlY29uZHMnKTtcblx0XHRcdFx0fSkudGhlbihmdW5jdGlvbigpe1xuXHRcdFx0XHRcdCRtb2RhbEluc3RhbmNlLmNsb3NlKHZtLm1lbWJlcik7XG5cdFx0XHRcdH0pXG5cdFx0XHR9IGVsc2V7XG5cblx0XHRcdH07XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHVwZGF0ZSgpe1xuXHRcdFx0dmFyIHVwZGF0ZU1lbWJlciA9IHtcblx0XHRcdFx0ICBtZW1iZXJJZCAgOiBtZW1iZXIubWVtYmVySWQsXG5cdFx0XHRcdCAgaWQgXHRcdDogXCJcIixcblx0XHRcdFx0ICBuYW1lIFx0XHQ6IHZtLm1lbWJlci5uYW1lLFxuXHRcdFx0XHQgIGNvcnBzIFx0OiB2bS5tZW1iZXIuY29ycHMsXG5cdFx0XHRcdCAgYnJhbmNoIFx0OiB2bS5tZW1iZXIuYnJhbmNoLFxuXHRcdFx0XHQgIHRpdGxlIFx0OiB2bS5tZW1iZXIudGl0bGUsXG5cdFx0XHRcdCAgd29ya2luZ1RpbWUgOiB2bS5tZW1iZXIud29ya2luZ1RpbWUsXG5cdFx0XHRcdCAgcmFkaW9Db2RlICA6IHZtLm1lbWJlci5yYWRpb0NvZGUsXG5cdFx0XHRcdCAgcmFkaW9Db2RlUHJlZml4IDogcmFkaW9Db2RlUHJlZml4KHZtLm1lbWJlci5icmFuY2gpXG5cdFx0XHR9XG5cblx0XHRcdGlmICh2bS5tZW1iZXIubmFtZSkge1xuXHRcdFx0XHRNZW1iZXJTdmMudXBkYXRlQnlNZW1iZXJJZCh1cGRhdGVNZW1iZXIpO1xuXHRcdFx0XHQkbW9kYWxJbnN0YW5jZS5jbG9zZSh1cGRhdGVNZW1iZXIpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XG5cdFx0XHR9O1xuXHRcdH07XG5cdFxuXHRcdGZ1bmN0aW9uIGNhbmNlbCgpe1xuXHRcdFx0JG1vZGFsSW5zdGFuY2UuZGlzbWlzcygnY2FuY2VsJyk7XG5cdFx0fTtcblx0fTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLm1lbWJlciBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAubWVtYmVyJylcblx0XHQuc2VydmljZSgnTWVtYmVyU3ZjJyxNZW1iZXJTdmMpXG5cdFxuXHRNZW1iZXJTdmMuJGluamVjdCA9IFsnJGh0dHAnXTtcblx0XG5cdGZ1bmN0aW9uIE1lbWJlclN2Yygpe1xuXHRcdHZhciBzdmMgPSB0aGlzOyBcblx0XHRzdmMuZmV0Y2ggPSBmZXRjaDtcblx0XHRzdmMuZmluZEJ5QnJhbmNoID0gZmluZEJ5QnJhbmNoO1xuXHRcdHN2Yy5mZXRjaE9uRHV0eSA9IGZldGNoT25EdXR5O1xuXHRcdHN2Yy5jcmVhdGUgPSBjcmVhdGU7IFxuXHRcdHN2Yy51cGRhdGUgPSB1cGRhdGU7IFxuXHRcdHN2Yy51cGRhdGVPbkR1dHkgPSB1cGRhdGVPbkR1dHk7XG5cdFx0c3ZjLnVwZGF0ZUJ5TWVtYmVySWQgPSB1cGRhdGVCeU1lbWJlcklkO1xuXHRcdHN2Yy51cGRhdGVJc0NoZWNrZWQgPSB1cGRhdGVJc0NoZWNrZWQ7XG5cdFx0c3ZjLnVwZGF0ZVVzZXIgPSB1cGRhdGVVc2VyO1xuXHRcdHN2Yy5yZW1vdmVVc2VyID0gcmVtb3ZlVXNlcjtcblx0XHRzdmMuZGVsZXRlTWVtYmVyID0gZGVsZXRlTWVtYmVyO1xuXG5cdFx0ZnVuY3Rpb24gZmV0Y2goKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvbWVtYmVycycpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBmaW5kQnlCcmFuY2goIGJyYW5jaCApe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9tZW1iZXJzLycgKyBicmFuY2ggKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gZmV0Y2hPbkR1dHkoYnJhbmNoKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvbWVtYmVycy9vbkR1dHk/YnJhbmNoPScgKyBicmFuY2gpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBjcmVhdGUobWVtYmVyKXtcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL21lbWJlcnMvJywgbWVtYmVyKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gdXBkYXRlKG1lbWJlcil7XG5cdFx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL21lbWJlcnMvJywgbWVtYmVyLmlkKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gdXBkYXRlT25EdXR5KG1lbWJlcil7XG5cdFx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL21lbWJlcnMvb25EdXR5L2ZpbmRCeUlkP21lbWJlcklkPScgKyBtZW1iZXIubWVtYmVySWQsIG1lbWJlcik7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHVwZGF0ZUJ5TWVtYmVySWQodXBkYXRlTWVtYmVyKXtcblx0XHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvbWVtYmVycy9maW5kQnlJZC8nICsgdXBkYXRlTWVtYmVyLm1lbWJlcklkICwgdXBkYXRlTWVtYmVyKTtcblx0XHR9XG5cdFx0XG5cdFx0ZnVuY3Rpb24gdXBkYXRlSXNDaGVja2VkKG1lbWJlckRhdGEpe1xuXHRcdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9tZW1iZXJzP2lkPScgKyBtZW1iZXJEYXRhLm1lbWJlcklkLCBtZW1iZXJEYXRhKVxuXHRcdH07XG5cdFx0XG5cdFx0ZnVuY3Rpb24gdXBkYXRlVXNlcih1c2VybmFtZSl7XG5cdFx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL21lbWJlcnMvdXNlcj91c2VybmFtZT0nKyB1c2VybmFtZSk7XG5cdFx0fTtcblx0XHRcblx0XHRmdW5jdGlvbiByZW1vdmVVc2VyKHVzZXJuYW1lKXtcblx0XHRcdHJldHVybiAkaHR0cC5wdXQoJy9hcGkvbWVtYmVycy91c2VyL3JlbW92ZT91c2VybmFtZT0nICsgdXNlcm5hbWUpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBkZWxldGVNZW1iZXIobWVtYmVyKXtcblx0XHRcdHJldHVybiAkaHR0cC5kZWxldGUoJy9hcGkvbWVtYmVycy8nICsgbWVtYmVyLl9pZCk7XG5cdFx0fTtcblx0fVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAubm90aWZpY2F0aW9uIE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5ub3RpZmljYXRpb24nKVxuXHRcdC5zZXJ2aWNlKCdOdGZTdmMnLE50ZlN2Yyk7XG5cblx0TnRmU3ZjLiRpbmplY3QgPSBbJyRodHRwJ107XG5cdFxuXHRmdW5jdGlvbiBOdGZTdmMoJGh0dHApe1xuXHRcdHZhciBzdmMgPSB0aGlzO1xuXHRcdHN2Yy5mZXRjaCA9IGZldGNoOyBcblx0XHRmdW5jdGlvbiBmZXRjaCgpe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9udGZzJyk7XG5cdFx0fSA7XG5cdH07XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHQvKipcblx0KiBhcHAuc2FmZXR5IE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5zYWZldHknKVxuXHRcdC5jb250cm9sbGVyKCdTYWZldHlDbWRTaG93Q29udHJvbGxlcicsU2FmZXR5Q21kU2hvd0NvbnRyb2xsZXIpO1xuXG5cdFNhZmV0eUNtZFNob3dDb250cm9sbGVyLiRpbmplY3QgPSBbJ0Nhc2VTdmMnLCAnQnJhbmNoU3ZjJywgJ1VzZXJTdmMnLCAnJHN0YXRlUGFyYW1zJywgJ0dlb1N2YyddO1xuXHRcblx0ZnVuY3Rpb24gU2FmZXR5Q21kU2hvd0NvbnRyb2xsZXIoQ2FzZVN2YywgQnJhbmNoU3ZjLCBVc2VyU3ZjLCAkc3RhdGVQYXJhbXMsIEdlb1N2Yyl7XG5cdFx0XG5cdFx0dmFyIHZtID0gdGhpczsgXG5cdFx0dmFyIGJyYW5jaCA9IFVzZXJTdmMudXNlckJyYW5jaCgpO1xuXHRcblx0XHRCcmFuY2hTdmMudG90YWxMaXN0RmluZEJ5TmFtZShicmFuY2gpLnN1Y2Nlc3MoZnVuY3Rpb24oYnJhbmNoKXtcblx0XHRcdHZtLm1lbWJlcnMgPSBicmFuY2gubWVtYmVycy5maWx0ZXIoZnVuY3Rpb24obWVtYmVyKSB7XG5cdFx0XHRcdG1lbWJlci5saW1pdFRpbWUgPSBtb21lbnQuZHVyYXRpb24obWVtYmVyLndvcmtpbmdUaW1lLCAnc2Vjb25kcycpO1xuXHRcdFx0XHRyZXR1cm4gbWVtYmVyLm9uRHV0eSA9PSB0cnVlIFxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHRDYXNlU3ZjLmZldGNoRGV0YWlscygkc3RhdGVQYXJhbXMuY2FzZUlkKS5zdWNjZXNzKGZ1bmN0aW9uKF9jYXNlKXtcblx0XHRcdHZtLmNhc2VEZXRhaWwgPSBfY2FzZTtcblx0XHRcdHZtLm9uRHV0eUJyYW5jaGVzID0gX2Nhc2UuYnJhbmNoSWRzO1xuXHRcdFx0aWYgKF9jYXNlLmxvY2F0aW9uKSB7XG5cdFx0XHRcdHZhciBsb2NhdGlvbiA9IEpTT04ucGFyc2UoX2Nhc2UubG9jYXRpb24pO1xuXHRcdFx0XHR2bS5tYXJrZXJzLm1haW5NYXJrZXIgPSB7XG5cdFx0XHRcdFx0bGF0IDogTnVtYmVyKGxvY2F0aW9uLmxhdCksXG5cdFx0XHRcdFx0bG5nIDogTnVtYmVyKGxvY2F0aW9uLmxuZyksXG5cdFx0XHRcdFx0bWVzc2FnZSA6IFwi5qGI5Lu25qiZ55qEXCJcblx0XHRcdFx0fTtcblxuXHRcdFx0XHR2bS5iYXR0bGVSYWRpdXNzID0gX2Nhc2UuYmF0dGxlUmFkaXVzcztcblx0XHRcdH07XG5cdFx0fSkudGhlbihmdW5jdGlvbigpe1xuXHRcdFx0dm0ub25EdXR5QnJhbmNoZXMuZm9yRWFjaChmdW5jdGlvbihicmFuY2gpe1xuXHRcdFx0XHRicmFuY2gubWVtYmVycy5mb3JFYWNoKGZ1bmN0aW9uKG1lbWJlcil7XG5cdFx0XHRcdFx0aWYgKGJyYW5jaC5kaXJlY3RvciA9PSBtZW1iZXIubmFtZSApIHtcblx0XHRcdFx0XHRcdGJyYW5jaC5kaXJlY3RvclJhZGlvQ29kZSA9IG1lbWJlci5yYWRpb0NvZGVQcmVmaXggKyAgU3RyaW5nKG1lbWJlci5yYWRpb0NvZGUpO1xuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0aWYgKGJyYW5jaC5zYWZldHlNYW5hZ2VyID09IG1lbWJlci5uYW1lKSB7XG5cdFx0XHRcdFx0XHRicmFuY2guc2FmZXR5TWFuYWdlclJhZGlvQ29kZSA9IG1lbWJlci5yYWRpb0NvZGVQcmVmaXggKyBTdHJpbmcobWVtYmVyLnJhZGlvQ29kZSk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0aWYgKHZtLmJhdHRsZVJhZGl1cykge1xuXHRcdFx0XHRcdHZtLmJhdHRsZVJhZGl1c3MuZm9yRWFjaChmdW5jdGlvbihiYXR0bGVSYWRpdXMpe1xuXHRcdFx0XHRcdFx0dmFyIHJhZGl1cyA9IEpTT04ucGFyc2UoYmF0dGxlUmFkaXVzKVxuXHRcdFx0XHRcdFx0aWYgKGJyYW5jaC5uYW1lID09IHJhZGl1cy5iYXNlKSB7XG5cdFx0XHRcdFx0XHRcdGJyYW5jaC5lc3RpbWF0ZWRBcnJpdmluZ1RpbWUgPSAgTWF0aC5yb3VuZCgoIHJhZGl1cy5kIC8gNTAgKSAqIDYwKTtcblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fSlcdFx0XG5cdFx0XHRcdH07XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuICAgICAgIEdlb1N2Yy5nZXRHZW9sb2NhdGlvbkNvb3JkaW5hdGVzKCkudGhlbihmdW5jdGlvbihjb29yZCl7XG5cdCAgICAgICAgdm0ubm93UG9zLmxhdCA9IGNvb3JkLmxhdGl0dWRlO1xuXHQgICAgICAgIHZtLm5vd1Bvcy5sbmcgPSBjb29yZC5sb25naXR1ZGU7XG5cdCAgICAgICAgdm0ubm93UG9zLnpvb20gPSAxNztcblx0ICAgICAgICB2bS5tYXJrZXJzLm5vd1BvcyA9IHtcblx0ICAgICAgICBcdGxhdCA6IHZtLm5vd1Bvcy5sYXQsXG5cdCAgICAgICAgXHRsbmcgOiB2bS5ub3dQb3MubG5nLFxuXHQgICAgICAgIFx0bWVzc2FnZSA6IFwi54++5Zyo5L2N572uXCJcblx0ICAgICAgICB9XG5cdCAgICB9KTtcblxuXHQgICAgYW5ndWxhci5leHRlbmQodm0sIHtcblx0ICAgICAgICBub3dQb3M6IHtcblx0ICAgICAgICAgICAgbGF0OiAyNC45ODgsXG5cdCAgICAgICAgICAgIGxuZzogMTIxLjU3NTIsXG5cdCAgICAgICAgICAgIHpvb206IDEzXG5cdCAgICAgICAgfSxcblx0ICAgICAgICBtYXJrZXJzOiB7fSxcblx0ICAgIH0pO1x0XHRcblx0fTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLnNhZmV0eSBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuc2FmZXR5Jylcblx0XHQuY29udHJvbGxlcignU2FmZXR5SW5kZXhDb250cm9sbGVyJyxTYWZldHlJbmRleENvbnRyb2xsZXIpO1xuXHRTYWZldHlJbmRleENvbnRyb2xsZXIuJGluamVjdCA9IFsnQ2FzZVN2YycsICdVc2VyU3ZjJ107XG5cdGZ1bmN0aW9uIFNhZmV0eUluZGV4Q29udHJvbGxlcigpe1xuXHRcdHZhciB2bSA9IHRoaXM7IFxuXHRcdHZhciB1c2VyQ29uZGl0aW9uID0ge1xuXHRcdFx0YnJhbmNoIFx0XHQ6IFVzZXJTdmMudXNlckJyYW5jaCgpLFxuXHRcdFx0YWNjZXNzTGV2ZWwgOiBVc2VyU3ZjLmFjY2Vzc0xldmVsKCksXG5cdFx0XHRjb3JwcyBcdFx0OiBVc2VyU3ZjLnVzZXJDb3JwcygpXG5cdFx0fTtcblxuXHRcdENhc2VTdmMuZmV0Y2hSZWxhdGl2ZUNhc2UodXNlckNvbmRpdGlvbikuc3VjY2VzcyhmdW5jdGlvbihjYXNlcyl7IFxuXHRcdFx0dm0uY2FzZXMgPSBjYXNlcztcblx0XHRcdGNhc2VzLmZvckVhY2goZnVuY3Rpb24oX2Nhc2Upe1xuXHRcdFx0XHRfY2FzZS5kaXNwYXRjaEJyYW5jaGVzID0gJydcblx0XHRcdFx0X2Nhc2UuYnJhbmNoZXMuZm9yRWFjaChmdW5jdGlvbihicmFuY2gpe1xuXHRcdFx0XHRcdF9jYXNlLmRpc3BhdGNoQnJhbmNoZXMgKz0gYnJhbmNoICsgJyAnXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHR2bS5pc0JyYW5jaE1lbWJlciA9IHRydWUgPyBVc2VyU3ZjLmFjY2Vzc0xldmVsKCkgPCAyICA6IGZhbHNlIDsgXG5cdH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLnNhZmV0eSBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuc2FmZXR5Jylcblx0XHQuY29udHJvbGxlcignU2FmZXR5TWFuYWdlQ29udHJvbGxlcicsU2FmZXR5TWFuYWdlQ29udHJvbGxlcik7XG5cdFxuXHRTYWZldHlNYW5hZ2VDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzdGF0ZVBhcmFtcycsICckbW9kYWwnLCAnU3RTdmMnLCAnJHN0YXRlJywgJ01lbWJlclN2YycsJyRsb2cnLCAnVXNlclN2YycsICdCcmFuY2hTdmMnLCAnU29ja2V0U3ZjJywgJ0Nhc2VTdmMnLCAnU3RNaXNzaW9uRmFjJ107XG5cdFxuXHRmdW5jdGlvbiBTYWZldHlNYW5hZ2VDb250cm9sbGVyKCRzdGF0ZVBhcmFtcywgJG1vZGFsLCBTdFN2YywgJHN0YXRlLCBNZW1iZXJTdmMsJGxvZywgVXNlclN2YywgQnJhbmNoU3ZjLCBTb2NrZXRTdmMsIENhc2VTdmMsIFN0TWlzc2lvbkZhYyl7XG5cdFx0dmFyIHZtID0gdGhpczsgXG5cdFx0dmFyIEJSQU5DSCBcdFx0PSBVc2VyU3ZjLnVzZXJCcmFuY2goKTtcblx0XHR2YXIgY2FzZURldGFpbCBcdD0gbnVsbDtcblx0XHR2bS5xdWlja1N0YXJ0IFx0PSBmYWxzZTtcblx0XHR2bS5hcGFydG1lbnQgXHQ9IHRydWU7IFxuXHRcdHZtLkFDQ0VTU0xFVkVMIFx0PSBVc2VyU3ZjLmFjY2Vzc0xldmVsKCk7XG5cdFx0dm0ucXVpY2tPcmdhbml6aW5nID0gcXVpY2tPcmdhbml6aW5nO1xuXHRcdHZtLnN0cmlrZVRlYW0gPSBzdHJpa2VUZWFtO1xuXHRcdHZtLm9wZW5TZXR0aW5nTW9kYWwgPSBvcGVuU2V0dGluZ01vZGFsO1xuXHRcdHZtLmRpc21pc3MgPSBkaXNtaXNzOyBcblxuXHRcdHZtLmJyYW5jaE9wdGlvbnMgPSB7XG5cdFx0XHRicmFuY2ggOiBCUkFOQ0gsXG5cdFx0XHRicmFuY2hlcyA6IFtdXG5cdFx0fTtcblxuXHRcdENhc2VTdmMuZmV0Y2hCeUlkKCRzdGF0ZVBhcmFtcy5jYXNlSWQpLnN1Y2Nlc3MoZnVuY3Rpb24oX2Nhc2Upe1xuXHRcdFx0Y2FzZURldGFpbCA9IF9jYXNlO1xuXHRcdFx0X2Nhc2UuZW52ID09ICfkvY/lroXngavoraYnPyB2bS5hcGFydG1lbnQgPSB0cnVlIDogdm0uYXBhcnRtZW50ID0gZmFsc2U7IFxuXHRcdFx0dm0uYnJhbmNoT3B0aW9ucy5icmFuY2hlcyA9IF9jYXNlLmJyYW5jaGVzXG5cdFx0XHR2bS5icmFuY2hPcHRpb25zLmJyYW5jaGVzLnNwbGljZSgwLDAsQlJBTkNIKTtcblx0XHR9KTtcblxuXHRcdEJyYW5jaFN2Yy5mZXRjaEJ5TmFtZShCUkFOQ0gpLnN1Y2Nlc3MoZnVuY3Rpb24oZGV0YWlscyl7XG5cdFx0XHR2bS5kZXRhaWxzID0gZGV0YWlscztcblx0XHR9KS50aGVuKGZ1bmN0aW9uKCl7XG5cdFx0XHRpZiAodm0uQUNDRVNTTEVWRUwgPiAxICkge1xuXHRcdFx0XHRTdFN2Yy5mZXRjaEJ5Q2FzZSgkc3RhdGVQYXJhbXMuY2FzZUlkKS5zdWNjZXNzKGZ1bmN0aW9uKHN0cyl7XG5cdFx0XHRcdFx0dm0uc3RyaWtlVGVhbXMgPSBzdHM7IFxuXHRcdFx0XHR9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFN0U3ZjLmZldGNoKCRzdGF0ZVBhcmFtcy5jYXNlSWQsQlJBTkNIKS5zdWNjZXNzKGZ1bmN0aW9uKHN0cyl7XG5cdFx0XHRcdFx0dm0uc3RyaWtlVGVhbXMgPSBzdHM7XG5cdFx0XHRcdFx0aWYgKHZtLmRldGFpbHMuZGlzcGF0Y2hOdW0gPCA4ICYmIF8uaXNFbXB0eSh2bS5zdHJpa2VUZWFtcykpIHsgdm0ucXVpY2tTdGFydCA9IHRydWUgIH07IFxuXHRcdFx0XHR9KTsgXG5cdFx0XHR9O1xuXHRcdH0pO1xuXG5cdFx0U29ja2V0U3ZjLm9uKCduZXdTdCcsIGZ1bmN0aW9uKHN0KXtcblx0XHRcdGlmICh2bS5BQ0NFU1NMRVZFTCA+IDEgJiYgYW5ndWxhci5lcXVhbHMoJHN0YXRlUGFyYW1zLmNhc2VJZCxzdC5jYXNlSWQpICkge1xuXHRcdFx0XHRcdHZtLnN0cmlrZVRlYW1zLnB1c2goc3QpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKGFuZ3VsYXIuZXF1YWxzKEJSQU5DSCxzdC5icmFuY2gpICYmIGFuZ3VsYXIuZXF1YWxzKCRzdGF0ZVBhcmFtcy5jYXNlSWQsc3QuY2FzZUlkKSApIHtcblx0XHRcdFx0XHR2bS5zdHJpa2VUZWFtcy5wdXNoKHN0KTtcblx0XHRcdFx0fTtcblx0XHRcdH07XG5cdFx0fSk7XG5cblx0XHRTb2NrZXRTdmMub24oJ3VwZGF0ZVN0JywgZnVuY3Rpb24oZGF0YSl7XG5cdFx0XHR2YXIgbWVtYmVycyA9IGFuZ3VsYXIuY29weShkYXRhLm1lbWJlcnMpO1xuXHRcdFx0Zm9yICh2YXIgaSA9IHZtLnN0cmlrZVRlYW1zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRcdGlmKGFuZ3VsYXIuZXF1YWxzKHZtLnN0cmlrZVRlYW1zW2ldLl9pZCxkYXRhLmlkKSl7XG5cdFx0XHRcdFx0dm0uc3RyaWtlVGVhbXNbaV0ucG9zaXRpb24gXHQ9IGRhdGEucG9zaXRpb247XG5cdFx0XHRcdFx0dm0uc3RyaWtlVGVhbXNbaV0uYXJlYSBcdFx0PSBkYXRhLmFyZWE7XG5cdFx0XHRcdFx0dm0uc3RyaWtlVGVhbXNbaV0uZmxvb3IgXHQ9IGRhdGEuZmxvb3I7XG5cdFx0XHRcdFx0dm0uc3RyaWtlVGVhbXNbaV0ubWlzc2lvbiBcdD0gZGF0YS5taXNzaW9uO1xuXHRcdFx0XHR9O1xuXHRcdFx0fTtcblx0XHR9KVxuXG5cdFx0U29ja2V0U3ZjLm9uKCdkaXNtaXNzJywgZnVuY3Rpb24oc3Qpe1xuXHRcdFx0dmFyIF9zdElkID0gc3Quc3RJZDtcblx0XHRcdHZtLnN0cmlrZVRlYW1zID0gdm0uc3RyaWtlVGVhbXMuZmlsdGVyKGZ1bmN0aW9uKHN0KSB7XHRcdFx0XHRcblx0XHRcdFx0cmV0dXJuIHN0Ll9pZCAhPSBfc3RJZDtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHRcdFxuXHRcdGZ1bmN0aW9uIHN0cmlrZVRlYW0oKXtcblx0XHRcdHZhciBtb2RhbEluc3RhbmNlID0gJG1vZGFsLm9wZW4oe1xuXHRcdFx0ICBcdHRlbXBsYXRlVXJsOiAndmlld3Mvc2FmZXR5L3NhZmV0eS5tb2RhbC5odG1sJyxcblx0XHRcdCAgICBjb250cm9sbGVyOiAnU2FmZXR5TW9kYWxDdHJsJyxcblx0XHRcdCAgICBzaXplOiBcIm1kXCIsXG5cdFx0XHQgICAgcmVzb2x2ZSA6IHtcblx0XHRcdCAgICBcdHN0SWQgOiBmdW5jdGlvbigpe1xuXHRcdFx0ICAgIFx0XHRpZiAoIF8uaXNFbXB0eSh2bS5zdHJpa2VUZWFtcykpIHtcblx0XHRcdCAgICBcdFx0XHRyZXR1cm4gMFxuXHRcdFx0ICAgIFx0XHR9IGVsc2V7XG5cdFx0XHQgICAgXHRcdFx0cmV0dXJuIHZtLnN0cmlrZVRlYW1zW3ZtLnN0cmlrZVRlYW1zLmxlbmd0aC0xXS5pZDtcblx0XHRcdCAgICBcdFx0fTtcblx0XHRcdCAgICBcdH0sXG5cdFx0XHQgICAgXHRicmFuY2ggOiBmdW5jdGlvbigpe1xuXHRcdFx0ICAgIFx0XHRyZXR1cm4gdm0uYnJhbmNoT3B0aW9ucy5icmFuY2g7XG5cdFx0XHQgICAgXHR9LFxuXHRcdFx0ICAgIFx0Y2FzZURldGFpbCA6IGZ1bmN0aW9uKCl7XG5cdFx0XHQgICAgXHRcdHJldHVybiBjYXNlRGV0YWlsXG5cdFx0XHQgICAgXHR9XG5cdFx0XHQgICAgfVxuXHRcdCAgICB9KTtcblx0XHR9O1xuXG5cdFx0XG5cdFx0ZnVuY3Rpb24gb3BlblNldHRpbmdNb2RhbChzdHJpa2VUZWFtLCBpZCl7XG5cdCAgICAgICAgdmFyIG1vZGFsSW5zdGFuY2UgPSAkbW9kYWwub3Blbih7XG5cdCAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAndmlld3Mvc2FmZXR5L3NhZmV0eS5zZXR0aW5nLm1vZGFsLmh0bWwnLFxuXHQgICAgICAgICAgICBjb250cm9sbGVyOiAnU2FmZXR5U2V0dGluZ0N0cmwnLFxuXHQgICAgICAgICAgICBzaXplOiBcImxnXCIsXG5cdCAgICAgICAgICAgIHJlc29sdmU6IHtcblx0ICAgICAgICAgICAgICAgIHN0cmlrZVRlYW0gOiBmdW5jdGlvbigpe1xuXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHJpa2VUZWFtO1xuXHQgICAgICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgICAgIGNhc2VEZXRhaWwgOiBmdW5jdGlvbigpe1xuXHQgICAgICAgICAgICAgICAgXHRyZXR1cm4gY2FzZURldGFpbDtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgfTtcblxuXHRcdFxuXHRcdGZ1bmN0aW9uIGRpc21pc3Moc3RyaWtlVGVhbSAsIGlkKXtcblxuXHRcdFx0U29ja2V0U3ZjLmVtaXQoXCJkaXNtaXNzU3RyaWtlVGVhbVwiLHtcblx0XHRcdFx0aWQgOiBzdHJpa2VUZWFtLl9pZCxcblx0XHRcdFx0bWVtYmVycyA6IHN0cmlrZVRlYW0ubWVtYmVycyBcblx0XHRcdH0pO1xuXHQgICAgICAgXHR2bS5zdHJpa2VUZWFtcy5zcGxpY2UoaWQsMSk7XG5cdFx0fTtcblxuXHRcdFxuXHRcdGZ1bmN0aW9uIHF1aWNrT3JnYW5pemluZygpe1xuXHRcdFx0dm0ucXVpY2tTdGFydCA9IGZhbHNlO1xuXHRcdFxuXHRcdFx0dmFyIG1lbWJlcnMgPSAgdm0uZGV0YWlscy5tZW1iZXJzLmZpbHRlcihmdW5jdGlvbihtZW1iZXIpIHtcblx0XHRcdFx0aWYgKCBtZW1iZXIubWlzc2lvbiA9PSAn5Y+45qmfJyB8fCBtZW1iZXIubWlzc2lvbiA9PSAn5a6J5YWo566h5Yi25ZOhJyB8fCBtZW1iZXIubWlzc2lvbiA9PSAn5pWR6K235Lq65ZOhJykge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZSAgXG5cdFx0XHRcdH1lbHNlIHtcblx0XHRcdFx0XHRtZW1iZXIuaXNDaGVja2VkID0gdHJ1ZTtcblx0XHRcdFx0XHRyZXR1cm4gbWVtYmVyLm9uRHV0eTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdHZhciBzdHJpa2VUZWFtID0ge1xuXHRcdFx0XHRpZCBcdFx0ICA6IDEsXG5cdFx0XHRcdGNhc2VJZCBcdCAgOiBjYXNlRGV0YWlsLl9pZCxcblx0XHRcdFx0YnJhbmNoIFx0ICA6IFVzZXJTdmMudXNlckJyYW5jaCgpLFxuXHRcdFx0XHRkaXJlY3RvciAgOiBfLnBsdWNrKG1lbWJlcnMuZmlsdGVyKGZ1bmN0aW9uKG1lbWJlcikgeyByZXR1cm4gbWVtYmVyLm1pc3Npb24gPT0gJ+W4tumaiuWumCd9KSwnbmFtZScpWzBdLFxuXHRcdFx0XHRwb3NpdGlvbiAgOiBTdE1pc3Npb25GYWMucG9zaXRpb24oKS5kZWZhdWx0UG9zLFxuXHRcdFx0XHRwb3NpdGlvbnMgOiBTdE1pc3Npb25GYWMucG9zaXRpb24oKS5wb3NzLFxuXHRcdFx0XHRncm91cCAgICAgOiBTdE1pc3Npb25GYWMuZ3JvdXBzKCkuYnJhbmNoWzFdLFxuXHRcdFx0XHRncm91cHMgICAgOiBTdE1pc3Npb25GYWMuZ3JvdXBzKCkuYnJhbmNoLFxuXHRcdFx0XHRhcmVhIFx0ICA6IFN0TWlzc2lvbkZhYy5hcmVhKCkuZGVmYXVsdEFyZWEsXG5cdFx0XHRcdGFyZWFzIFx0ICA6IFN0TWlzc2lvbkZhYy5hcmVhKCkuYXJlYXMsXG5cdFx0XHRcdGZsb29yIFx0ICA6IDEsIFxuXHRcdFx0XHRmbG9vcnMgICAgOiBbMSwyLDMsNCw1XSxcblx0XHRcdFx0bWVtYmVySWRzIDogXy5wbHVjayhtZW1iZXJzLCdfaWQnKSxcblx0XHRcdFx0bWVtYmVycyAgIDogbWVtYmVycyxcblx0XHRcdFx0Y3JlYXRvciAgIDogVXNlclN2Yy5jdXJyZW50VXNlcigpLFxuXHRcdFx0fTtcblx0ICAgICAgXHRTb2NrZXRTdmMuZW1pdChcImNyZWF0ZVN0cmlrZVRlYW1cIiwgc3RyaWtlVGVhbSk7XG5cdFx0fTtcblxuXHRcdHZtLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgICAgICBTb2NrZXRTdmMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG5cdCAgICB9KVxuXHR9XG59KSgpOyIsIihmdW5jdGlvbigpe1xuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQqIGFwcC5zYWZldHkgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLnNhZmV0eScpXG5cdFx0LmNvbnRyb2xsZXIoJ01lbWJlck1vZGFsQ29udHJvbGxlcicsTWVtYmVyTW9kYWxDb250cm9sbGVyKTtcblxuXHRNZW1iZXJNb2RhbENvbnRyb2xsZXIuJGluamVjdCA9IFsnYnJhbmNoJywgJ01lbWJlclN2YycsICckbW9kYWxJbnN0YW5jZScsICckc3RhdGUnLCAnbWVtYmVyJywnQnJhbmNoU3ZjJywgJ1VzZXJTdmMnXTtcblx0ZnVuY3Rpb24gTWVtYmVyTW9kYWxDb250cm9sbGVyKCl7XG5cdFx0dmFyIHZtID0gdGhpczsgXG5cdFx0dm0uYWxlcnRzID0gW107XG5cdFx0dm0uaXNOZXcgPSBfLmlzTnVsbChtZW1iZXIud29ya2luZ1RpbWUpO1xuXHRcdHZtLnNhdmUgPSBzYXZlO1xuXHRcdHZtLnVwZGF0ZSA9IHVwZGF0ZTsgXG5cdFx0dm0uY2FuY2VsID0gY2FuY2VsOyAgXG5cblx0XHR2bS5tZW1iZXIgPSB7XG5cdFx0XHRpZCBcdFx0IFx0OiBtZW1iZXIuaWQgfHwgIFwiXCIsIFxuXHRcdFx0bmFtZSBcdCBcdDogbWVtYmVyLm5hbWUgfHwgbnVsbCAsIFxuXHRcdFx0dGl0bGUgICAgXHQ6IFwi5raI6Ziy6ZqK5ZOhXCIsXG5cdFx0XHR0aXRsZXMgICBcdDogW1wi5raI6Ziy6ZqK5ZOhXCIsXCLlsI/pmorplbdcIixcIuWIhumaiumVt1wiLFwi5Lit6ZqK6ZW3XCIsXCLlpKfpmorplbdcIixcIuWJr+Wkp+maiumVt1wiXSxcblx0XHRcdGJyYW5jaCAgIFx0OiBtZW1iZXIuYnJhbmNoIHx8IGJyYW5jaCxcblx0XHRcdHdvcmtpbmdUaW1lIDogbWVtYmVyLndvcmtpbmdUaW1lIHx8ICAxMjAwLFxuXHRcdFx0cmFkaW9Db2RlIFx0OiBtZW1iZXIucmFkaW9Db2RlIHx8ICBudWxsLCBcblx0XHRcdG1pc3Npb24gIFx0OiBcIueehOWtkOaJi1wiLFxuXHRcdFx0bWlzc2lvbnMgXHQ6IFtcIueehOWtkOaJi1wiLFwi5Ymv556E5a2Q5omLXCIsXCLlj7jmqZ9cIixcIuWwj+e1hOmVt1wiLFwi5a6J5YWo566h5Yi25ZOhXCIsXCLoga/ntaHlrphcIixdLFxuXHRcdFx0Y29ycHNcdCBcdDogVXNlclN2Yy51c2VyQ29ycHMoKSxcblx0XHRcdGNvcnBzcyBcdCBcdDogW1wi56ys5LiA5pWR54G95pWR6K235aSn6ZqKXCIsXCLnrKzkuInmlZHngb3mlZHorbflpKfpmopcIl0sXG5cdFx0fTtcblxuXHRcdEJyYW5jaFN2Yy5mZXRjaEJ5Q29ycHMoVXNlclN2Yy51c2VyQ29ycHMoKSkuc3VjY2VzcyhmdW5jdGlvbihicmFuY2hlcyl7XG5cdFx0XHR2bS5icmFuY2hlcyA9IGJyYW5jaGVzOyBcblx0XHRcdGlmICghdm0uaXNOZXcpIHtcblx0XHRcdFx0dmFyIGJyYW5jaEFycnkgPSBbXTtcblx0XHRcdFx0Zm9yICh2YXIgaSA9IGJyYW5jaGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRcdFx0YnJhbmNoQXJyeS5wdXNoKGJyYW5jaGVzW2ldLm5hbWUpO1xuXHRcdFx0XHR9O1xuXHRcdFx0XHR2bS5tZW1iZXIuYnJhbmNoZXMgPSBicmFuY2hBcnJ5O1xuXHRcdFx0fTsgXG5cdFx0fSk7XG5cblx0XHR2YXIgcmFkaW9Db2RlUHJlZml4ID0gZnVuY3Rpb24oYnJhbmNoKXtcblx0XHRcdHZhciBzdWZmaXggPSAgYnJhbmNoLnNwbGl0KCcnKS5zbGljZSgtMikuam9pbignJyk7XG5cdFx0XHRpZiAoc3VmZml4ID09IFwi5aSn6ZqKXCIgfHwgc3VmZml4ID09IFwi5Lit6ZqKXCIpIHtcblx0XHRcdFx0cmV0dXJuIFwi5YyX5rW3XCI7XG5cdFx0XHR9IGVsc2V7XG5cdFx0XHRcdHJldHVybiBicmFuY2guc3BsaXQoJycpLnNsaWNlKDAsMikuam9pbignJyk7XG5cdFx0XHR9O1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBzYXZlKCl7XG5cdFx0XHRpZiAodm0ubWVtYmVyLm5hbWUpIHtcblx0XHRcdFx0dm0ubWVtYmVyLnJhZGlvQ29kZVByZWZpeCA9IHJhZGlvQ29kZVByZWZpeCh2bS5tZW1iZXIuYnJhbmNoKTtcblx0XHRcdFx0TWVtYmVyU3ZjLmNyZWF0ZSh2bS5tZW1iZXIpLnN1Y2Nlc3MoZnVuY3Rpb24oKXtcblx0XHRcdFx0XHR2bS5tZW1iZXIud29ya2luZ1RpbWUgPSBtb21lbnQuZHVyYXRpb24ocGFyc2VJbnQodm0ubWVtYmVyLndvcmtpbmdUaW1lKSwnc2Vjb25kcycpO1xuXHRcdFx0XHR9KS50aGVuKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0JG1vZGFsSW5zdGFuY2UuY2xvc2Uodm0ubWVtYmVyKTtcblx0XHRcdFx0fSlcblx0XHRcdH07XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHVwZGF0ZSgpe1xuXHRcdFx0dmFyIHVwZGF0ZU1lbWJlciA9IHtcblx0XHRcdFx0ICBtZW1iZXJJZCAgOiBtZW1iZXIubWVtYmVySWQsXG5cdFx0XHRcdCAgaWQgXHRcdDogXCJcIixcblx0XHRcdFx0ICBuYW1lIFx0XHQ6IHZtLm1lbWJlci5uYW1lLFxuXHRcdFx0XHQgIGNvcnBzIFx0OiB2bS5tZW1iZXIuY29ycHMsXG5cdFx0XHRcdCAgYnJhbmNoIFx0OiB2bS5tZW1iZXIuYnJhbmNoLFxuXHRcdFx0XHQgIHRpdGxlIFx0OiB2bS5tZW1iZXIudGl0bGUsXG5cdFx0XHRcdCAgd29ya2luZ1RpbWUgOiB2bS5tZW1iZXIud29ya2luZ1RpbWUsXG5cdFx0XHRcdCAgcmFkaW9Db2RlICA6IHZtLm1lbWJlci5yYWRpb0NvZGUsXG5cdFx0XHRcdCAgcmFkaW9Db2RlUHJlZml4IDogcmFkaW9Db2RlUHJlZml4KHZtLm1lbWJlci5icmFuY2gpXG5cdFx0XHR9XG5cblx0XHRcdGlmICh2bS5tZW1iZXIubmFtZSkge1xuXHRcdFx0XHRNZW1iZXJTdmMudXBkYXRlQnlNZW1iZXJJZCh1cGRhdGVNZW1iZXIpO1xuXHRcdFx0XHQkbW9kYWxJbnN0YW5jZS5jbG9zZSh1cGRhdGVNZW1iZXIpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XG5cdFx0XHR9O1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBjYW5jZWwoKXtcblx0XHRcdCRtb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuXHRcdH07XG5cdH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLnNhZmV0eSBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuc2FmZXR5Jylcblx0XHQuY29udHJvbGxlcignU2FmZXR5U2V0dGluZ0NvbnRyb2xsZXInLFNhZmV0eVNldHRpbmdDb250cm9sbGVyKTtcblxuXHRTYWZldHlTZXR0aW5nQ29udHJvbGxlci4kaW5qZWN0ID0gWydzdHJpa2VUZWFtJywgJyRtb2RhbEluc3RhbmNlJywgJ1N0U3ZjJywgJyRzdGF0ZScsICdNZW1iZXJTdmMnLCAnQ2FzZVN2YycsICckc3RhdGVQYXJhbXMnLCAnU29ja2V0U3ZjJywgJ2Nhc2VEZXRhaWwnXTtcblx0XG5cdGZ1bmN0aW9uIFNhZmV0eVNldHRpbmdDb250cm9sbGVyKHN0cmlrZVRlYW0sICRtb2RhbEluc3RhbmNlLCBTdFN2YywgJHN0YXRlLCBNZW1iZXJTdmMsIENhc2VTdmMsICRzdGF0ZVBhcmFtcywgU29ja2V0U3ZjLCBjYXNlRGV0YWlsKXtcblx0XHR2YXIgdm0gPSB0aGlzOyBcblx0XHR2bS5zdHJpa2VUZWFtID0gc3RyaWtlVGVhbTtcblx0XHR2bS5jaG9vc2VCcmFuY2ggPSBjaG9vc2VCcmFuY2g7XG5cdFx0dm0uY2FuY2VsID0gY2FuY2VsO1xuXHRcdHZtLmNoZWNrID0gY2hlY2s7XG5cdFx0dm0udW5jaGVjayA9IHVuY2hlY2s7XG5cdFx0dm0uc2F2ZSA9IHNhdmU7ICAgXG5cdFx0Y2FzZURldGFpbC5lbnYgPT0gJ+S9j+WuheeBq+itpic/IHZtLmFwYXJ0bWVudCA9ICB0cnVlICA6IHZtLmFwYXJ0bWVudCA9IGZhbHNlIFxuXG5cdFx0dmFyIG5ld01lbWJlcnMgPSBbXTtcblxuXHRcdENhc2VTdmMuZmV0Y2hEZXRhaWxzKCRzdGF0ZVBhcmFtcy5jYXNlSWQpLnN1Y2Nlc3MoZnVuY3Rpb24oZGV0YWlscyl7XG5cdFx0XHR2bS5kaXNwYXRjaCA9IGRldGFpbHMuYnJhbmNoSWRzO1xuXHRcdFx0dm0uY3VycmVudEJyYW5jaCA9IHZtLmRpc3BhdGNoWzBdLm5hbWU7XG5cdFx0XHR2YXIgbWVtYmVyTGlzdCA9IF8ucGx1Y2soZGV0YWlscy5icmFuY2hJZHMsJ21lbWJlcnMnKTtcblx0XHRcdHZtLm1lbWJlcnMgPSBbXVxuXHRcdFx0bWVtYmVyTGlzdC5mb3JFYWNoKGZ1bmN0aW9uKGJyYW5jaE1lbWJlcnMpe1xuXHRcdFx0XHR2bS5tZW1iZXJzLnB1c2guYXBwbHkodm0ubWVtYmVycywgYnJhbmNoTWVtYmVycylcblx0XHRcdH0pO1xuXHRcdFx0dm0ubWVtYmVycyA9IHZtLm1lbWJlcnMuZmlsdGVyKGZ1bmN0aW9uKG1lbWJlcikgeyByZXR1cm4gIW1lbWJlci5pc0NoZWNrZWQgfSk7XG5cdFx0fSlcblxuXHRcdGZ1bmN0aW9uIGNob29zZUJyYW5jaChicmFuY2gpe1xuXHRcdFx0dm0uY3VycmVudEJyYW5jaCA9IGJyYW5jaDtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gY2FuY2VsKCl7XG5cdFx0XHQkbW9kYWxJbnN0YW5jZS5kaXNtaXNzKCdjYW5jZWwnKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gY2hlY2sobWVtYmVyKXtcblx0XHRcdG1lbWJlci5pc0NoZWNrZWQgPSAhbWVtYmVyLmlzQ2hlY2tlZDtcblx0XHRcdG5ld01lbWJlcnMucHVzaChtZW1iZXIpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiB1bmNoZWNrKG1lbWJlciwgaWQpe1xuXHRcdFx0bWVtYmVyLmlzQ2hlY2tlZCA9ICFtZW1iZXIuaXNDaGVja2VkO1xuXHRcdFx0bmV3TWVtYmVycy5zcGxpY2UoXy5wbHVjayhuZXdNZW1iZXJzLCAnX2lkJykuaW5kZXhPZihtZW1iZXIuX2lkKSwxKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gc2F2ZSgpe1xuXHRcdFx0dm0uc3RyaWtlVGVhbS5tZW1iZXJzLnB1c2guYXBwbHkodm0uc3RyaWtlVGVhbS5tZW1iZXJzLCBuZXdNZW1iZXJzKTtcblx0XHRcdFNvY2tldFN2Yy5lbWl0KCd1cGRhdGVTdHJpa2VUZWFtJyx7XG5cdFx0XHRcdGlkIDogc3RyaWtlVGVhbS5faWQsIFxuXHRcdFx0XHRwb3NpdGlvbiA6IHN0cmlrZVRlYW0ucG9zaXRpb24sXG5cdFx0XHRcdGFyZWEgOiBzdHJpa2VUZWFtLmFyZWEsIFxuXHRcdFx0XHRmbG9vciA6IHN0cmlrZVRlYW0uZmxvb3IsXG5cdFx0XHRcdGdyb3VwIDogc3RyaWtlVGVhbS5ncm91cCxcblx0XHRcdFx0bWVtYmVySWRzIDogXy5wbHVjayh2bS5zdHJpa2VUZWFtLm1lbWJlcnMsJ19pZCcpLCBcblx0XHRcdFx0bWVtYmVycyA6IHZtLnN0cmlrZVRlYW0ubWVtYmVyc1xuXHRcdFx0fSk7XG5cblx0XHRcdCRtb2RhbEluc3RhbmNlLmNsb3NlKCdkaXNtaXNzJyk7XHRcdFx0XG5cdFx0fTtcblx0fTtcblxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuc2FmZXR5IE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5zYWZldHknKVxuXHRcdC5jb250cm9sbGVyKCdTYWZldHlTaG93Q29udHJvbGxlcicsU2FmZXR5U2hvd0NvbnRyb2xsZXIpO1xuXG5cdFNhZmV0eVNob3dDb250cm9sbGVyLiRpbmplY3QgPSBbJ0Nhc2VTdmMnLCAnVXNlclN2YycsICdTb2NrZXRTdmMnLCdHZW9TdmMnLCAnQnJhbmNoU3ZjJywgJyRzdGF0ZVBhcmFtcyddO1xuXG5cdGZ1bmN0aW9uIFNhZmV0eVNob3dDb250cm9sbGVyKCl7XG5cdFx0dmFyIHZtID0gdGhpczsgXG5cdFx0dmFyIGJyYW5jaCA9IFVzZXJTdmMudXNlckJyYW5jaCgpO1xuXHRcdFxuXHRcdEJyYW5jaFN2Yy5mZXRjaEJ5TmFtZShicmFuY2gpLnN1Y2Nlc3MoZnVuY3Rpb24oYnJhbmNoKXtcblx0XHRcdHZtLm1lbWJlcnMgPSBicmFuY2gubWVtYmVycy5maWx0ZXIoZnVuY3Rpb24obWVtYmVyKSB7XG5cdFx0XHRcdG1lbWJlci5saW1pdFRpbWUgPSBtb21lbnQuZHVyYXRpb24obWVtYmVyLndvcmtpbmdUaW1lLCAnc2Vjb25kcycpO1xuXHRcdFx0XHRyZXR1cm4gbWVtYmVyLm9uRHV0eSA9PSB0cnVlIFxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHRDYXNlU3ZjLmZldGNoRGV0YWlscygkc3RhdGVQYXJhbXMuY2FzZUlkKS5zdWNjZXNzKGZ1bmN0aW9uKF9jYXNlKXtcblx0XHRcdHZtLmNhc2VEZXRhaWwgPSBfY2FzZTtcblx0XHRcdGlmIChfY2FzZS5sb2NhdGlvbikge1xuXHRcdFx0XHR2YXIgbG9jYXRpb24gPSBKU09OLnBhcnNlKF9jYXNlLmxvY2F0aW9uKTtcblx0XHRcdFx0dm0ubWFya2Vycy5tYWluTWFya2VyID0ge1xuXHRcdFx0XHRcdGxhdCA6IE51bWJlcihsb2NhdGlvbi5sYXQpLFxuXHRcdFx0XHRcdGxuZyA6IE51bWJlcihsb2NhdGlvbi5sbmcpLFxuXHRcdFx0XHRcdG1lc3NhZ2UgOiBcIuahiOS7tuaomeeahFwiXG5cdFx0XHRcdH07XG5cdFx0XHR9O1xuXHRcdH0pO1xuXG4gICAgICAgR2VvU3ZjLmdldEdlb2xvY2F0aW9uQ29vcmRpbmF0ZXMoKS50aGVuKGZ1bmN0aW9uKGNvb3JkKXtcblx0ICAgICAgICB2bS5ub3dQb3MubGF0ID0gY29vcmQubGF0aXR1ZGU7XG5cdCAgICAgICAgdm0ubm93UG9zLmxuZyA9IGNvb3JkLmxvbmdpdHVkZTtcblx0ICAgICAgICB2bS5ub3dQb3Muem9vbSA9IDE3O1xuXHQgICAgICAgIHZtLm1hcmtlcnMubm93UG9zID17XG5cdCAgICAgICAgXHRsYXQgOiB2bS5ub3dQb3MubGF0LFxuXHQgICAgICAgIFx0bG5nIDogdm0ubm93UG9zLmxuZyxcblx0ICAgICAgICBcdG1lc3NhZ2UgOiBcIuePvuWcqOS9jee9rlwiXG5cdCAgICAgICAgfVxuXHQgICAgfSlcblxuXHQgICAgYW5ndWxhci5leHRlbmQodm0sIHtcblx0ICAgICAgICBub3dQb3M6IHtcblx0ICAgICAgICAgICAgbGF0OiAyNC45ODgsXG5cdCAgICAgICAgICAgIGxuZzogMTIxLjU3NTIsXG5cdCAgICAgICAgICAgIHpvb206IDEzXG5cdCAgICAgICAgfSxcblx0ICAgICAgICBtYXJrZXJzOiB7fSxcblx0ICAgIH0pO1x0XHRcblx0fVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuc29ja2V0IE1vZHVsZVxuXHQqXG5cdCogRGVzY3JpcHRpb25cblx0Ki9cblx0YW5ndWxhclxuXHRcdC5tb2R1bGUoJ2FwcC5zb2NrZXQnKVxuXHRcdC5zZXJ2aWNlKCdTb2NrZXRTdmMnLFNvY2tldFN2Yyk7XG5cblx0U29ja2V0U3ZjLiRpbmplY3QgPSBbJyRyb290U2NvcGUnLCAnc3RvcmUnLCAnJHEnLCAnJHRpbWVvdXQnXTtcblx0XG5cdGZ1bmN0aW9uIFNvY2tldFN2Yygkcm9vdFNjb3BlLCBzdG9yZSwgJHEsICR0aW1lb3V0KXtcblx0XHR2YXIgc3ZjID0gdGhpczsgXG5cdFx0c3ZjLmluaXQgPSAgZnVuY3Rpb24odG9rZW4pe1xuXHQgICAgXHR2YXIgYXV0aFRva2VuID0gbnVsbFxuXHQgICAgXHRpZiAodG9rZW4pIHtcblx0XHQgICAgICBhdXRoVG9rZW4gPSB0b2tlbiBcblx0XHRcdH0gZWxzZSB7XG5cdFx0ICAgICAgYXV0aFRva2VuID0gc3RvcmUuZ2V0KCdqd3QnKVxuXHRcdCAgICB9O1xuXHRcdCAgICByZXR1cm4gaW8uY29ubmVjdCgnaHR0cDovL2xvY2FsaG9zdDozMDAwJyx7IHF1ZXJ5IDogJ3Rva2VuPScgKyBhdXRoVG9rZW4gLCAnZm9yY2VOZXcnOnRydWUgfSk7XG5cdFx0fVxuXG5cdCAgXHR2YXIgc29ja2V0ID0gc3ZjLmluaXQoKTtcblxuXHQgIFx0c3ZjLm9uID0gIGZ1bmN0aW9uIChldmVudE5hbWUsIGNhbGxiYWNrKSB7XG5cdCAgICBcdHN2Yy5pbml0KCkub24oZXZlbnROYW1lLCBmdW5jdGlvbiAoKSB7ICBcblx0XHQgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcblx0XHQgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG5cdFx0ICAgICAgICBjYWxsYmFjay5hcHBseShzb2NrZXQsIGFyZ3MpO1xuXHRcdCAgICAgIH0pO1xuXHRcdCAgICB9KTtcblx0XHR9O1xuXG5cdCAgXHRzdmMuZW1pdCA9ICBmdW5jdGlvbiAoZXZlbnROYW1lLCBkYXRhLCBjYWxsYmFjaykge1xuXHQgICAgXHRzdmMuaW5pdCgpLmVtaXQoZXZlbnROYW1lLCBkYXRhLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIFx0XHR2YXIgYXJncyA9IGFyZ3VtZW50cztcblx0ICAgICAgXHRcdCRyb290U2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBcdFx0aWYgKGNhbGxiYWNrKSB7XG5cdCAgICAgICAgICBcdFx0XHRjYWxsYmFjay5hcHBseShzb2NrZXQsIGFyZ3MpO1xuXHQgICAgICAgIFx0XHR9O1xuXHQgICAgICBcdFx0fSk7XG5cdCAgICBcdH0pXG5cdCAgXHR9O1xuXG5cdFx0c3ZjLnJlbW92ZUFsbExpc3RlbmVycyA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGNhbGxiYWNrKSB7XG5cdFx0ICAgIHN2Yy5pbml0KCkucmVtb3ZlQWxsTGlzdGVuZXJzKGV2ZW50TmFtZSwgZnVuY3Rpb24oKSB7XG5cdFx0ICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcblx0XHQgICAgICAgICRyb290U2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcblx0XHQgICAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcblx0XHQgICAgICAgIH0pO1xuXHRcdCAgICB9KTsgXG5cdFx0fTtcblx0fTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLnN0cmlrZVRlYW0gTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLnN0cmlrZVRlYW0nLCBbXSlcblx0XHQuZmFjdG9yeSgnU3RNaXNzaW9uRmFjJyxTdE1pc3Npb25GYWMpO1xuXG5cdFN0TWlzc2lvbkZhYy4kaW5qZWN0ID0gW107XG5cdGZ1bmN0aW9uIFN0TWlzc2lvbkZhYygpe1xuXHRcdHJldHVybiB7XG5cdFx0XHRncm91cHM6IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0Y29ycHMgOiBbIFwi6IGv57Wh57WEXCIgLCBcIuawtOa6kOe1hFwiICwgXCLlvozli6TntYRcIl0sXG5cdFx0XHRcdFx0c3F1YWRyb24gOiBbXCJcIl0sXG5cdFx0XHRcdFx0YnJhbmNoIDogW1wi5bi26ZqK5a6YXCIsXCLmu4XngavlsI/ntYRcIixcIuaQnOaVkeWwj+e1hFwiLFwi5pC25pWR5bCP57WEXCIsXCLlvozli6TlsI/ntYRcIl0sXG5cdFx0XHRcdFx0cHJlU3QgIDogW1wi5pCc5pWR5bCP57WEXCIsXCLmkLbmlZHlsI/ntYRcIixcIua7heeBq+Wwj+e1hFwiXVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0cG9zaXRpb24gOiBmdW5jdGlvbigpe1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdGRlZmF1bHRQb3MgOiBcIuesrOS4gOmdolwiLFxuXHRcdFx0XHRcdHBvc3MgOiBbXCLnrKzkuIDpnaJcIixcIuesrOS6jOmdolwiLFwi56ys5LiJ6Z2iXCIsXCLnrKzlm5vpnaJcIl1cblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGFyZWEgOiBmdW5jdGlvbigpe1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdGRlZmF1bHRBcmVhIDogXCLnrKzkuIDljYBcIixcblx0XHRcdFx0XHRhcmVhcyA6IFtcIuesrOS4gOWNgFwiLFwi56ys5LqM5Y2AXCIsXCLnrKzkuInljYBcIixcIuesrOWbm+WNgFwiLFwi56ys5LqU5Y2AXCJdXG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fTtcblx0fTtcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLnN0cmlrVGVhbSBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuc3RyaWtUZWFtJylcblx0XHQuc2VyaXZjZSgnU3RTdmMnLFN0U3ZjKTtcblx0XHRcblx0U3RTdmMuJGluamVjdCA9IFsnJGh0dHAnXTtcblxuXHRmdW5jdGlvbiBTdFN2Yygpe1xuXHRcdHZhciBzdmMgPSB0aGlzOyBcblx0XHRzdmMuZmV0Y2ggPSBmZXRjaDtcblx0XHRzdmMuZmV0Y2hCeUNhc2UgPSBmZXRjaEJ5Q2FzZTtcblx0XHRzdmMuZmluZEJ5SWQgPSBmaW5kQnlJZDtcblx0XHRzdmMuZGlzbWlzc1N0ID0gZGlzbWlzc1N0O1xuXHRcdHN2Yy51cGRhdGVTdCA9IHVwZGF0ZVN0O1xuXHRcdHN2Yy51cGRhdGVUaW1lUmVjb3JkID0gdXBkYXRlVGltZVJlY29yZDtcblx0XHRzdmMuY3JlYXRlID0gY3JlYXRlO1xuXHRcdHN2Yy5jb3VudCA9IGNvdW50OyBcblxuXHRcdGZ1bmN0aW9uIGZldGNoKGNhc2VJZCwgYnJhbmNoKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvc3RyaWtlVGVhbXM/Y2FzZUlkPScgKyBjYXNlSWQgKyAnJmJyYW5jaD0nICsgYnJhbmNoKTtcblx0XHR9O1xuXHRcblx0XHRmdW5jdGlvbiBmZXRjaEJ5Q2FzZShjYXNlSWQpe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9zdHJpa2VUZWFtcy90b3RhbD9jYXNlSWQ9JyArIGNhc2VJZCk7XG5cdFx0fTtcblx0XHRcblx0XHRmdW5jdGlvbiBmaW5kQnlJZChjYXNlSWQpe1xuXHRcdFx0cmV0dXJuICRodHRwLmdldCgnL2FwaS9zdHJpa2VUZWFtcy8nICsgY2FzZUlkKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gZGlzbWlzc1N0KGRhdGEpe1xuXHRcdFx0cmV0dXJuICRodHRwLnB1dCgnL2FwaS9zdHJpa2VUZWFtcy9kaXNtaXNzP2lkPScgKyBkYXRhLmlkKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gdXBkYXRlU3QoZGF0YSl7XG5cdFx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL3N0cmlrZVRlYW1zL3VwZGF0ZT9pZD0nICsgZGF0YS5pZCwgZGF0YSk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHVwZGF0ZVRpbWVSZWNvcmQoZGF0YSl7XG5cdFx0XHRyZXR1cm4gJGh0dHAucHV0KCcvYXBpL3N0cmlrZVRlYW1zL3RpbWU/aWQ9JyArIGRhdGEuaWQsIGRhdGEpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBjcmVhdGUoc3RyaWtlVGVhbSl7XG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9zdHJpa2VUZWFtcycsIHN0cmlrZVRlYW0pO1xuXHRcdH07XG5cdFx0XG5cdFx0ZnVuY3Rpb24gY291bnQoY2FzZUlkKXtcblx0XHRcdHJldHVybiAkaHR0cC5nZXQoJy9hcGkvc3RyaWtlVGVhbXMvY291bnQ/Y2FzZUlkPScgKyBjYXNlSWQpO1xuXHRcdH07XG5cdH1cblxufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0KiBhcHAuc3VtbWFyeSBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAuc3VtbWFyeScpXG5cdFx0LmNvbnRyb2xsZXIoJ1N1bW1hcnlDb250cm9sbGVyJyxTdW1tYXJ5Q29udHJvbGxlcik7XG5cblx0U3VtbWFyeUNvbnRyb2xsZXIuJGluamVjdCA9IFsnU3RTdmMnLCAnJHN0YXRlUGFyYW1zJywgJyRpbnRlcnZhbCcsICckc3RhdGUnLCAnU29ja2V0U3ZjJywgJ0Nhc2VTdmMnXTtcblx0XG5cdGZ1bmN0aW9uIFN1bW1hcnlDb250cm9sbGVyKCl7XG5cdFx0dmFyIHZtID0gdGhpczsgXG5cdFx0dm0uaXNDb2xsYXBzZWQgPSB0cnVlIDtcblx0XHR2bS5tZW1iZXJzID0gW107XG5cblx0XHRTb2NrZXRTdmMub24oJ3RpbWVyUnVubmluZycsZnVuY3Rpb24oc3Qpe1xuXHRcdFx0Zm9yICh2YXIgaSA9IHZtLnN0cmlrZVRlYW1zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRcdGlmKCBhbmd1bGFyLmVxdWFscyh2bS5zdHJpa2VUZWFtc1tpXS5faWQsIHN0LnN0SWQpKXtcblx0XHRcdFx0XHRyZXR1cm4gdm0uc3RyaWtlVGVhbXNbaV0udGltZXJSdW5uaW5nID0gc3QudGltZXJSdW5uaW5nO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH0pXG5cblx0XHRTb2NrZXRTdmMub24oJ3Byb2dyZXNzVXBkYXRlJyxmdW5jdGlvbihkYXRhKXtcblx0XHRcdGZvciAodmFyIGkgPSB2bS5zdHJpa2VUZWFtcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0XHRpZiggYW5ndWxhci5lcXVhbHModm0uc3RyaWtlVGVhbXNbaV0uX2lkLCBkYXRhLmlkKSApe1xuXHRcdFx0XHRcdHZtLnN0cmlrZVRlYW1zW2ldLnRpbWVyXHQ9IG1vbWVudC5kdXJhdGlvbihkYXRhLm1pbGxpcyk7IFxuXHRcdFx0XHRcdHZtLnN0cmlrZVRlYW1zW2ldLnByb2dyZXNzICA9IGRhdGEucHJvZ3Jlc3M7XG5cdFx0XHRcdFx0dm0uc3RyaWtlVGVhbXNbaV0ucHJvZ3Jlc3NTdGF0ZSA9ICBkYXRhLnByb2dyZXNzU3RhdGU7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fSlcblxuXHRcdFNvY2tldFN2Yy5vbignbmV3U3QnLCBmdW5jdGlvbihzdCl7XG5cdFx0XHRpZiAoIGFuZ3VsYXIuZXF1YWxzKGNhc2VJZCxzdC5jYXNlSWQpKSB7XG5cdFx0XHRcdHZhciBuZXdTdCA9IGFuZ3VsYXIuY29weShzdCk7XG5cdFx0XHRcdHJldHVybiB2bS5zdHJpa2VUZWFtcy5wdXNoKG5ld1N0KTtcblx0XHRcdH07XG5cdFx0XHR2bS5kZXBsb3lzID0gaW5pdFRhYmxlKHZtLnN0cmlrZVRlYW1zKTtcblx0XHR9KTtcblxuXHRcdFxuXG5cdFx0U29ja2V0U3ZjLm9uKCd1cGRhdGVTdCcsIGZ1bmN0aW9uKGRhdGEpe1xuXHRcdFx0U3RTdmMuZmV0Y2hCeUNhc2UoY2FzZUlkKS5zdWNjZXNzKGZ1bmN0aW9uKHN0cmlrZVRlYW1zKXtcblx0XHRcdFx0dm0uc3RyaWtlVGVhbXMgPSBzdHJpa2VUZWFtcztcblx0XHRcdFx0dm0uc3RyaWtlVGVhbXMuZm9yRWFjaChmdW5jdGlvbihzdCl7XG5cdFx0XHRcdFx0c3QubGltaXRUaW1lID0gbW9tZW50LmR1cmF0aW9uKHN0LndvcmtpbmdUaW1lLCdzZWNvbmRzJyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHR2bS5kZXBsb3lzID0gaW5pdFRhYmxlKHZtLnN0cmlrZVRlYW1zKTtcblx0XHRcdH0pO1xuXG5cdFx0fSlcblxuXHRcdFNvY2tldFN2Yy5vbignZGlzbWlzcycsIGZ1bmN0aW9uKGRhdGEpe1xuXHRcdFx0U3RTdmMuZmV0Y2hCeUNhc2UoY2FzZUlkKS5zdWNjZXNzKGZ1bmN0aW9uKHN0cmlrZVRlYW1zKXtcblx0XHRcdFx0dm0uc3RyaWtlVGVhbXMgPSBzdHJpa2VUZWFtcztcblx0XHRcdFx0dm0uZGVwbG95cyA9IGluaXRUYWJsZSh2bS5zdHJpa2VUZWFtcyk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXG5cdFx0dmFyIGNhc2VJZCA9ICRzdGF0ZVBhcmFtcy5jYXNlSWQ7XG5cdFx0Q2FzZVN2Yy5mZXRjaEJ5SWQoY2FzZUlkKS5zdWNjZXNzKGZ1bmN0aW9uKF9jYXNlKXtcblx0XHRcdF9jYXNlLmVudiA9PSAn5L2P5a6F54Gr6K2mJyA/IHZtLmFwYXJ0bWVudCA9IHRydWUgOiB2bS5hcGFydG1lbnQgPSBmYWxzZTtcblx0XHRcdHZtLmNhc2VEZXRhaWwgPSBfY2FzZTtcblx0XHRcdHZtLnBvc2l0aW9uID0ge1xuXHRcdFx0XHRkZWZhdWx0UG9zIFx0OiBcIuesrOS4gOmdolwiLFxuXHRcdFx0XHRwb3NpdGlvbnMgXHQ6IFtcIuesrOS4gOmdolwiLFwi56ys5LqM6Z2iXCIsXCLnrKzkuInpnaJcIixcIuesrOWbm+mdolwiXSxcblx0XHRcdFx0Zmxvb3IgXHRcdDogdm0uY2FzZURldGFpbC5mbG9vcixcblx0XHRcdFx0Zmxvb3JzICBcdDogdm0uY2FzZURldGFpbC5mbG9vciA8IDU/IF8ucmFuZ2UoMSw2LDEpIDogXy5yYW5nZSh2bS5jYXNlRGV0YWlsLmZsb29yLTIsdm0uY2FzZURldGFpbC5mbG9vciszLDEpXG5cdFx0XHR9O1xuXHRcdH0pXG5cblx0XHRTdFN2Yy5mZXRjaEJ5Q2FzZShjYXNlSWQpLnN1Y2Nlc3MoZnVuY3Rpb24oc3RyaWtlVGVhbXMpe1xuXHRcdFx0aWYgKHN0cmlrZVRlYW1zKSB7XG5cdFx0XHRcdHZtLnN0cmlrZVRlYW1zID0gc3RyaWtlVGVhbXM7XG5cdFx0XHRcdHZtLnN0cmlrZVRlYW1zLmZvckVhY2goZnVuY3Rpb24oc3Qpe1xuXHRcdFx0XHRcdHN0LmxpbWl0VGltZSA9IG1vbWVudC5kdXJhdGlvbihzdC53b3JraW5nVGltZSwnc2Vjb25kcycpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0dm0uZGVwbG95cyA9IGluaXRUYWJsZSh2bS5zdHJpa2VUZWFtcyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gXG5cdFx0XHR9O1xuXHRcdH0pO1xuXG5cblxuXHRcdHZhciBpbml0VGFibGUgPSAgZnVuY3Rpb24oc3RyaWtlVGVhbXMpe1xuXHRcdCAgXHR2YXIgZGVwbG95QXJyYXkgPSBfLnJhbmdlKDQpLm1hcChmdW5jdGlvbiAoKSB7XG5cdFx0ICAgICAgICByZXR1cm4gXy5yYW5nZSg1KS5tYXAoZnVuY3Rpb24gKCkge1xuXHRcdCAgICAgICAgICAgIHJldHVybiB7IHRvdGFsTWVtYmVyIDogMCwgc3RUb3RhbCA6IDAgLCBzdHMgOiBbXSB9IDtcblx0XHQgICAgICAgIH0pO1xuXHRcdCAgICB9KTtcblxuXHRcdFx0aWYgKCBzdHJpa2VUZWFtcyApe1xuXHRcdFx0XHRmb3IgKHZhciBpID0gc3RyaWtlVGVhbXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0XHR2YXIgdG90YWxNZW1iZXIgPSAwO1xuXHRcdFx0XHRcdHZhciB5ID0gbnVsbDtcblx0XHRcdFx0XHR2YXIgc3QgPSAwO1xuXHRcdFx0XHRcdHZhciB4ID0gXy5pbmRleE9mKHN0cmlrZVRlYW1zW2ldLnBvc2l0aW9ucywgc3RyaWtlVGVhbXNbaV0ucG9zaXRpb24pO1xuXHRcdFx0XHRcdHZtLmFwYXJ0bWVudCA/IHkgPSBfLmluZGV4T2Yoc3RyaWtlVGVhbXNbaV0uZmxvb3JzLCBzdHJpa2VUZWFtc1tpXS5mbG9vcikgOiB5ID0gXy5pbmRleE9mKHN0cmlrZVRlYW1zW2ldLmFyZWFzLCBzdHJpa2VUZWFtc1tpXS5hcmVhKVxuXHRcdFx0XHRcdGRlcGxveUFycmF5W3hdW3ldLnN0VG90YWwgKz0gMTtcblx0XHRcdFx0XHRkZXBsb3lBcnJheVt4XVt5XS50b3RhbE1lbWJlciArPSBzdHJpa2VUZWFtc1tpXS5tZW1iZXJzLmxlbmd0aDtcblx0XHRcdFx0XHR2YXIgc3RJbkZvID0ge307XG5cdFx0XHRcdFx0c3RJbkZvLmlkID0gc3RyaWtlVGVhbXNbaV0uYnJhbmNoICsgc3RyaWtlVGVhbXNbaV0uaWRcblx0XHRcdFx0XHRzdEluRm8ubnVtYmVyID0gc3RyaWtlVGVhbXNbaV0ubWVtYmVycy5sZW5ndGg7XG5cdFx0XHRcdFx0c3RJbkZvLmdyb3VwID0gc3RyaWtlVGVhbXNbaV0uZ3JvdXA7XG5cdFx0XHRcdFx0ZGVwbG95QXJyYXlbeF1beV0uc3RzLnB1c2goc3RJbkZvKTtcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBkZXBsb3lBcnJheVxuXHRcdH07XG5cdFx0XG5cdFx0dm0uJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgICAgIFNvY2tldFN2Yy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblx0ICAgIH0pO1xuXHR9O1xufSkoKTsiLCIoZnVuY3Rpb24oKXtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdC8qKlxuXHQqIGFwcC50aW1lciBNb2R1bGVcblx0KlxuXHQqIERlc2NyaXB0aW9uXG5cdCovXG5cdGFuZ3VsYXJcblx0XHQubW9kdWxlKCdhcHAudGltZXInKVxuXHRcdC5jb250cm9sbGVyKCdUaW1lckNvbnRyb2xsZXInLFRpbWVyQ29udHJvbGxlcik7XG5cblx0VGltZXJDb250cm9sbGVyLiRpbmplY3QgPSBbJ1NvY2tldFN2YyddO1xuXG5cdGZ1bmN0aW9uIFRpbWVyQ29udHJvbGxlcigpe1xuXHRcdHZhciB2bSA9IHRoaXM7IFxuXHRcdHZtLnRpbWVyUnVubmluZyA9IGZhbHNlO1xuXHRcdHZtLnN0YXJ0VGltZXIgPSBzdGFydFRpbWVyO1xuXHRcdHZtLnN0b3BUaW1lciA9IHN0b3BUaW1lcjtcblx0ICAgIFxuXHQgICAgZnVuY3Rpb24gc3RhcnRUaW1lcihzdCwgaWQpe1xuXHQgICAgXHR2bS4kYnJvYWRjYXN0KCd0aW1lci1zdGFydCcpO1xuXHQgICAgXHR2bS50aW1lclJ1bm5pbmcgPSB0cnVlO1xuXHQgICAgICAgIFNvY2tldFN2Yy5lbWl0KCd0aW1lcicsIHsgc3RJZCA6IHN0Ll9pZCwgdGltZXJSdW5uaW5nIDogdHJ1ZSB9IClcblx0ICAgIH07XG5cdCAgICBcblx0ICAgIGZ1bmN0aW9uIHN0b3BUaW1lcihzdCxpZCl7XG5cdCAgICBcdHZtLiRicm9hZGNhc3QoJ3RpbWVyLXN0b3AnKTtcblx0ICAgIFx0dm0udGltZXJSdW5uaW5nID0gZmFsc2U7XG5cdCAgICAgICAgU29ja2V0U3ZjLmVtaXQoJ3RpbWVyJywgeyBzdElkIDogc3QuX2lkLCB0aW1lclJ1bm5pbmcgOiBmYWxzZSB9IClcblx0ICAgIH07XG5cdH07XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCogYXBwLnVzZXIgTW9kdWxlXG5cdCpcblx0KiBEZXNjcmlwdGlvblxuXHQqL1xuXHRhbmd1bGFyXG5cdFx0Lm1vZHVsZSgnYXBwLnVzZXInKVxuXHRcdC5zZXJ2aWNlKCdVc2VyU3ZjJyxVc2VyU3ZjKTtcblxuXHRVc2VyU3ZjLiRpbmplY3QgPSBbJyRodHRwJywgJ3N0b3JlJywgJ2p3dEhlbHBlciddO1xuXHRmdW5jdGlvbiBVc2VyU3ZjKCl7XG5cdFx0dmFyIHN2YyA9IHRoaXM7IFxuXHRcdHN2Yy5mZXRjaE9ubGluZVVzZXIgPSBmZXRjaE9ubGluZVVzZXI7XG5cdFx0c3ZjLmFjdGl2YXRlID0gYWN0aXZhdGU7XG5cdFx0c3ZjLnJlbW92ZVVzZXIgPSByZW1vdmVVc2VyO1xuXHRcdHN2Yy5sb2dpbiA9IGxvZ2luO1xuXHRcdHN2Yy5pc0xvZ2dlZEluID0gaXNMb2dnZWRJbjtcblx0XHRzdmMuaXNWYWxpZCA9IGlzVmFsaWQ7XG5cdFx0c3ZjLnVzZXJCcmFuY2ggPSB1c2VyQnJhbmNoO1xuXHRcdHN2Yy51c2VyQ29ycHMgPSB1c2VyQ29ycHM7XG5cdFx0c3ZjLmN1cnJlbnRVc2VyID0gY3VycmVudFVzZXI7XG5cdFx0c3ZjLmN1cnJlbnRBY2NvdW50ID0gY3VycmVudEFjY291bnQ7XG5cdFx0c3ZjLmFjY2Vzc0xldmVsID0gYWNjZXNzTGV2ZWw7XG5cdFx0c3ZjLmNhc2VJZCA9IGNhc2VJZDtcblxuXG5cdFx0ZnVuY3Rpb24gZmV0Y2hPbmxpbmVVc2VyKCl7XG5cdFx0XHRyZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3VzZXJzL3VzZXJTdGF0ZScpO1xuXHRcdH07XG5cblx0XHRmdW5jdGlvbiBhY3RpdmF0ZSh1c2VyKXtcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3VzZXJzJywgdXNlcik7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHJlbW92ZVVzZXIodXNlcm5hbWUpe1xuXHRcdFx0cmV0dXJuICRodHRwLmRlbGV0ZSgnL2FwaS91c2Vycy9kZWxldGU/dXNlcm5hbWU9JyArIHVzZXJuYW1lKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gbG9naW4odXNlcil7XG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FwaS91c2Vycy9hdXRoZW50aWNhdGUnLCB1c2VyKTtcblx0XHR9O1xuXG5cdFx0ZnVuY3Rpb24gaXNMb2dnZWRJbigpe1xuXHRcdFx0cmV0dXJuIHN0b3JlLmdldCgnand0Jyk7XG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIGlzVmFsaWQoIGJyYW5jaCApe1xuXHRcdFx0aWYgKHN2Yy5pc0xvZ2dlZEluKSB7XG5cdFx0XHRcdGlmIChqd3RIZWxwZXIuZGVjb2RlVG9rZW4oc3RvcmUuZ2V0KCdqd3QnKSkuYWNjZXNzTGV2ZWwgPiAxICAgfHwgand0SGVscGVyLmRlY29kZVRva2VuKHN0b3JlLmdldCgnand0JykpLmJyYW5jaCA9PSBicmFuY2gpIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTsgXG5cdFx0XHRcdH1lbHNlIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH07XG5cdFx0XHR9O1xuXG5cdFx0XHRyZXR1cm4gZmFsc2UgXG5cdFx0fTtcblxuXHRcdGZ1bmN0aW9uIHVzZXJCcmFuY2goKXtcblx0XHRcdGlmIChzdmMuaXNMb2dnZWRJbikge1xuXHRcdFx0XHRyZXR1cm4gand0SGVscGVyLmRlY29kZVRva2VuKHN0b3JlLmdldCgnand0JykpLmJyYW5jaDtcblx0XHRcdH07XG5cdFx0fTtcblx0XG5cdFx0ZnVuY3Rpb24gdXNlckNvcnBzKCl7XG5cdFx0XHRpZiAoc3ZjLmlzTG9nZ2VkSW4pIHtcblx0XHRcdFx0cmV0dXJuIGp3dEhlbHBlci5kZWNvZGVUb2tlbihzdG9yZS5nZXQoJ2p3dCcpKS5jb3Jwcztcblx0XHRcdH07XG5cdFx0fTtcblx0XG5cdFx0ZnVuY3Rpb24gY3VycmVudFVzZXIoKXtcblx0XHRcdGlmIChzdmMuaXNMb2dnZWRJbikge1xuXHRcdFx0XHRyZXR1cm4gand0SGVscGVyLmRlY29kZVRva2VuKHN0b3JlLmdldCgnand0JykpLnVzZXJuYW1lO1xuXHRcdFx0fTtcblx0XHR9O1xuXHRcblx0XHRmdW5jdGlvbiBjdXJyZW50QWNjb3VudCgpe1xuXHRcdFx0aWYgKHN2Yy5pc0xvZ2dlZEluKSB7XG5cdFx0XHRcdHJldHVybiBqd3RIZWxwZXIuZGVjb2RlVG9rZW4oc3RvcmUuZ2V0KCdqd3QnKSkuYWNjb3VudDtcblx0XHRcdH07IFxuXHRcdH07XG5cdFxuXHRcdGZ1bmN0aW9uIGFjY2Vzc0xldmVsKCl7XG5cdFx0XHRpZiAoc3ZjLmlzTG9nZ2VkSW4pIHtcblx0XHRcdFx0cmV0dXJuIGp3dEhlbHBlci5kZWNvZGVUb2tlbihzdG9yZS5nZXQoJ2p3dCcpKS5hY2Nlc3NMZXZlbDtcblx0XHRcdH07XG5cdFx0fTtcblx0XG5cdFx0ZnVuY3Rpb24gY2FzZUlkKCl7XG5cdFx0XHRpZiAoc3ZjLmlzTG9nZ2VkSW4pIHtcblx0XHRcdFx0cmV0dXJuIGp3dEhlbHBlci5kZWNvZGVUb2tlbihzdG9yZS5nZXQoJ2p3dCcpKS5jYXNlSWQ7XG5cdFx0XHR9O1xuXHRcdH07XG5cdH07XG5cbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
